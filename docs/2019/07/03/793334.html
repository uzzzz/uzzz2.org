<!doctype html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

<!-- Begin Jekyll SEO tag v2.5.0 -->
<title>Hadoop分布式安装步骤 –实战 | 有组织在！</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="Hadoop分布式安装步骤 –实战" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Hadoop全分布式架构图 目录 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Hadoop全分布式架构图 一.永久关闭防火墙 二.配置主机名 1.编辑network文件：vim /etc/sysconfig/network 2.将HOSTNAME属性改为指定的主机名， 3.让network文件重新生效：source /etc/sysconfig/network 三.配置hosts文件，将主机名和ip地址进行映射 1.编辑hosts文件：vim /etc/hosts 2.将主机名和ip地址对应， 四.配置ssh进行免密互通 1.生成自己的公钥和私钥,生成的公私钥将自动存放在/root/.ssh目录下：ssh-keygen 2.把生成的公钥拷贝到远程机器上， 五.重启Linux让主机名的修改生效：reboot 六.安装JDK 七.上传或者下载Hadoop安装包到Linux中 八.解压安装包tar -xvf&nbsp;hadoop-2.7.1_64bit.tar.gz 九.adoop的安装目录的子目录etc/hadoop 十.配置hadoop-env.sh 1.编辑hadoop-env.sh：vim hadoop-env.sh 2.修改JAVA_HOME的路径，修改成具体的路径。 1. cat /etc/profile&nbsp; &nbsp;查看所有的配置文件路径 3.修改HADOOP_CONF_DIR的路径，修改为具体的路径， 4.保存退出文件 5.重新加载生效： 十一.编辑core-site.xml，添加如下内容： 十二.编辑hdfs-site.xml 十三.编辑mapred-site.xml 十四.编辑yarn-site.xml 十五.编辑slaves 十六.拷贝到其他节点上 十七.配置环境变量 vim/etc/profile 十八.启动zookeeper 十九.格式化zookeeper： 二十.启动JournalNode： 二十一.在第一台节点上格式化NameNode： 二十二.在第一台节点上启动NameNode： 二十三.在第二台节点上格式化NameNode： 二十四.在第二台节点上启动NameNode： 二十五.在三台节点上启动DataNode： 二十六.在第一台节点和第二节点上启动zkfc（FailoverController）： 1.效果图 二十七.在第一个节点上启动Yarn： 二十八.在第三个节点上启动ResourceManager： 二十九.启动、关闭 1.start-all.sh 启动服务 2.stop-all.sh&nbsp; 关闭服务 &nbsp; 最少需要三个虚拟机，或者十三个云主机 一.永久关闭防火墙 已经关闭，忽略 &nbsp; 二.配置主机名 需要注意的是Hadoop的集群中的主机名不能有_。如果存在_会导致Hadoop集群无法找到这群主机，从而无法启动！ 1.编辑network文件：vim /etc/sysconfig/network 2.将HOSTNAME属性改为指定的主机名， 3.让network文件重新生效：source /etc/sysconfig/network &nbsp; 三.配置hosts文件，将主机名和ip地址进行映射 1.编辑hosts文件：vim /etc/hosts 2.将主机名和ip地址对应， &nbsp; 四.配置ssh进行免密互通 1.生成自己的公钥和私钥,生成的公私钥将自动存放在/root/.ssh目录下：ssh-keygen 2.把生成的公钥拷贝到远程机器上， 格式为：ssh-copy-id [user]@host，例如：ssh-copy-id root@hadoop01 &nbsp; 五.重启Linux让主机名的修改生效：reboot &nbsp; 六.安装JDK &nbsp; 七.上传或者下载Hadoop安装包到Linux中 &nbsp; 八.解压安装包tar -xvf&nbsp;hadoop-2.7.1_64bit.tar.gz &nbsp; 九.adoop的安装目录的子目录etc/hadoop 配置Hadoop：cd hadoop2.7.1/etc/hadoop &nbsp; 十.配置hadoop-env.sh 1.编辑hadoop-env.sh：vim hadoop-env.sh 2.修改JAVA_HOME的路径，修改成具体的路径。 1. cat /etc/profile&nbsp; &nbsp;查看所有的配置文件路径 //home/presoftware/jdk1.8 例如：export JAVA_HOME=/home/presoftware/jdk1.8 3.修改HADOOP_CONF_DIR的路径，修改为具体的路径， 例如：export HADOOP_CONF_DIR=/home/software/hadoop-2.7.1/etc/hadoop 4.保存退出文件 ：wq 5.重新加载生效： source hadoop-env.sh &nbsp; 十一.编辑core-site.xml，添加如下内容： &lt;!--指定hdfs的nameservice，为整个集群起一个别名--&gt; &lt;property&gt; &nbsp;&nbsp;&nbsp;&nbsp;&lt;name&gt;fs.defaultFS&lt;/name&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&lt;value&gt;hdfs://ns&lt;/value&gt; &lt;/property&gt; &lt;!--指定Hadoop数据临时存放目录--&gt; &lt;property&gt; &nbsp;&nbsp;&nbsp;&nbsp;&lt;name&gt;hadoop.tmp.dir&lt;/name&gt; &nbsp;&nbsp;&nbsp;&nbsp;&lt;value&gt;/home/software/hadoop-2.7.1/tmp&lt;/value&gt; &lt;/property&gt;&nbsp; &lt;!--指定zookeeper的存放地址--&gt; &lt;property&gt; &nbsp;&nbsp;&nbsp;&nbsp;&lt;name&gt;ha.zookeeper.quorum&lt;/name&gt; &nbsp;&nbsp;&nbsp;&nbsp;&lt;value&gt;liuyong:2181,liuyong01:2181,liuyong02:2181&lt;/value&gt; &lt;/property&gt;&nbsp; 十二.编辑hdfs-site.xml &lt;!--执行hdfs的nameservice为ns，注意要和core-site.xml中的名称保持一致--&gt; &lt;property&gt; &nbsp;&nbsp;&nbsp;&nbsp;&lt;name&gt;dfs.nameservices&lt;/name&gt; &nbsp;&nbsp;&nbsp;&nbsp;&lt;value&gt;ns&lt;/value&gt; &lt;/property&gt; &lt;!--ns集群下有两个namenode，分别为nn1,&nbsp;nn2--&gt; &lt;property&gt; &nbsp;&nbsp;&nbsp;&nbsp;&lt;name&gt;dfs.ha.namenodes.ns&lt;/name&gt; &nbsp;&nbsp;&nbsp;&nbsp;&lt;value&gt;nn1,nn2&lt;/value&gt; &lt;/property&gt; &lt;!--nn1的RPC通信--&gt; &lt;property&gt; &nbsp;&nbsp;&nbsp;&nbsp;&lt;name&gt;dfs.namenode.rpc-address.ns.nn1&lt;/name&gt; &nbsp;&nbsp;&nbsp;&nbsp;&lt;value&gt;hadoop01:9000&lt;/value&gt; &lt;/property&gt; &lt;!--nn1的http通信--&gt; &lt;property&gt; &nbsp;&nbsp;&nbsp;&nbsp;&lt;name&gt;dfs.namenode.http-address.ns.nn1&lt;/name&gt; &nbsp;&nbsp;&nbsp;&nbsp;&lt;value&gt;hadoop01:50070&lt;/value&gt; &lt;/property&gt; &lt;!--&nbsp;nn2的RPC通信地址&nbsp;--&gt; &lt;property&gt; &nbsp;&nbsp;&nbsp;&nbsp;&lt;name&gt;dfs.namenode.rpc-address.ns.nn2&lt;/name&gt; &nbsp;&nbsp;&nbsp;&nbsp;&lt;value&gt;hadoop02:9000&lt;/value&gt; &lt;/property&gt; &lt;!--&nbsp;nn2的http通信地址&nbsp;--&gt; &lt;property&gt; &nbsp;&nbsp;&nbsp;&nbsp;&lt;name&gt;dfs.namenode.http-address.ns.nn2&lt;/name&gt; &nbsp;&nbsp;&nbsp;&nbsp;&lt;value&gt;hadoop02:50070&lt;/value&gt; &lt;/property&gt; &lt;!--指定namenode的元数据在JournalNode上存放的位置，这样，namenode2可以从journalnode集群里的指定位置上获取信息，达到热备效果--&gt; &lt;property&gt; &nbsp;&nbsp;&nbsp;&nbsp;&lt;name&gt;dfs.namenode.shared.edits.dir&lt;/name&gt; &nbsp;&nbsp;&nbsp;&nbsp;&lt;value&gt;qjournal://hadoop01:8485;hadoop02:8485;hadoop03:8485/ns&lt;/value&gt; &lt;/property&gt; &lt;!--&nbsp;指定JournalNode在本地磁盘存放数据的位置&nbsp;--&gt; &lt;property&gt; &nbsp;&nbsp;&nbsp;&nbsp;&lt;name&gt;dfs.journalnode.edits.dir&lt;/name&gt; &nbsp;&nbsp;&nbsp;&nbsp;&lt;value&gt;/home/software/hadoop-2.7.1/tmp/journal&lt;/value&gt; &lt;/property&gt; &lt;!--&nbsp;开启NameNode故障时自动切换&nbsp;--&gt; &lt;property&gt; &nbsp;&nbsp;&nbsp;&nbsp;&lt;name&gt;dfs.ha.automatic-failover.enabled&lt;/name&gt; &nbsp;&nbsp;&nbsp;&nbsp;&lt;value&gt;true&lt;/value&gt; &lt;/property&gt; &lt;!--&nbsp;配置失败自动切换实现方式&nbsp;--&gt; &lt;property&gt; &nbsp;&nbsp;&nbsp;&nbsp;&lt;name&gt;dfs.client.failover.proxy.provider.ns&lt;/name&gt; &nbsp;&nbsp;&nbsp;&nbsp;&lt;value&gt;org.apache.hadoop.hdfs.server.namenode.ha.ConfiguredFailoverProxyProvider&lt;/value&gt; &lt;/property&gt; &lt;!--&nbsp;配置隔离机制&nbsp;--&gt; &lt;property&gt; &nbsp;&nbsp;&nbsp;&nbsp;&lt;name&gt;dfs.ha.fencing.methods&lt;/name&gt; &nbsp;&nbsp;&nbsp;&nbsp;&lt;value&gt;sshfence&lt;/value&gt; &lt;/property&gt; &lt;!--&nbsp;使用隔离机制时需要ssh免登陆&nbsp;--&gt; &lt;property&gt; &nbsp;&nbsp;&nbsp;&nbsp;&lt;name&gt;dfs.ha.fencing.ssh.private-key-files&lt;/name&gt; &nbsp;&nbsp;&nbsp;&nbsp;&lt;value&gt;/root/.ssh/id_rsa&lt;/value&gt; &lt;/property&gt; &lt;!--配置namenode存放元数据的目录，可以不配置，如果不配置则默认放到hadoop.tmp.dir下--&gt; &lt;property&gt;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&lt;name&gt;dfs.namenode.name.dir&lt;/name&gt;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&lt;value&gt;file:///home/software/hadoop-2.7.1/tmp/hdfs/name&lt;/value&gt;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/property&gt;&nbsp;&nbsp;&nbsp;&nbsp; &lt;!--配置datanode存放元数据的目录，可以不配置，如果不配置则默认放到hadoop.tmp.dir下--&gt; &lt;property&gt;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&lt;name&gt;dfs.datanode.data.dir&lt;/name&gt;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&lt;value&gt;file:///home/software/hadoop-2.7.1/tmp/hdfs/data&lt;/value&gt;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/property&gt; &lt;!--配置复本数量--&gt;&nbsp;&nbsp;&nbsp;&nbsp; &lt;property&gt;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&lt;name&gt;dfs.replication&lt;/name&gt;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&lt;value&gt;3&lt;/value&gt;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/property&gt;&nbsp;&nbsp;&nbsp; &lt;!--设置用户的操作权限，false表示关闭权限验证，任何用户都可以操作--&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;property&gt;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&lt;name&gt;dfs.permissions&lt;/name&gt;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&lt;value&gt;false&lt;/value&gt;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/property&gt;&nbsp;&nbsp; 十三.编辑mapred-site.xml 复制一份mapred-site.xml &lt;property&gt;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&lt;name&gt;mapreduce.framework.name&lt;/name&gt;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&lt;value&gt;yarn&lt;/value&gt;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/property&gt; &nbsp; 十四.编辑yarn-site.xml &lt;!--配置yarn的高可用--&gt; &lt;property&gt; &nbsp;&nbsp;&nbsp;&nbsp;&lt;name&gt;yarn.resourcemanager.ha.enabled&lt;/name&gt; &nbsp;&nbsp;&nbsp;&nbsp;&lt;value&gt;true&lt;/value&gt; &lt;/property&gt; &lt;!--指定两个resourcemaneger的名称--&gt; &lt;property&gt; &nbsp;&nbsp;&nbsp;&nbsp;&lt;name&gt;yarn.resourcemanager.ha.rm-ids&lt;/name&gt; &nbsp;&nbsp;&nbsp;&nbsp;&lt;value&gt;rm1,rm2&lt;/value&gt; &lt;/property&gt; &lt;!--配置rm1的主机--&gt; &lt;property&gt; &nbsp;&nbsp;&nbsp;&nbsp;&lt;name&gt;yarn.resourcemanager.hostname.rm1&lt;/name&gt; &nbsp;&nbsp;&nbsp;&nbsp;&lt;value&gt;hadoop01&lt;/value&gt; &lt;/property&gt; &lt;!--配置rm2的主机--&gt; &lt;property&gt; &nbsp;&nbsp;&nbsp;&nbsp;&lt;name&gt;yarn.resourcemanager.hostname.rm2&lt;/name&gt; &nbsp;&nbsp;&nbsp;&nbsp;&lt;value&gt;hadoop03&lt;/value&gt; &lt;/property&gt; &lt;!--开启yarn恢复机制--&gt; &lt;property&gt; &nbsp;&nbsp;&nbsp;&nbsp;&lt;name&gt;yarn.resourcemanager.recovery.enabled&lt;/name&gt; &nbsp;&nbsp;&nbsp;&nbsp;&lt;value&gt;true&lt;/value&gt; &lt;/property&gt; &lt;!--执行rm恢复机制实现类--&gt; &lt;property&gt; &nbsp;&nbsp;&nbsp;&nbsp;&lt;name&gt;yarn.resourcemanager.store.class&lt;/name&gt; &nbsp;&nbsp;&nbsp;&nbsp;&lt;value&gt;org.apache.hadoop.yarn.server.resourcemanager.recovery.ZKRMStateStore&lt;/value&gt; &lt;/property&gt; &lt;!--配置zookeeper的地址--&gt; &lt;property&gt; &nbsp;&nbsp;&nbsp;&nbsp;&lt;name&gt;yarn.resourcemanager.zk-address&lt;/name&gt; &nbsp;&nbsp;&nbsp;&nbsp;&lt;value&gt;hadoop01:2181,hadoop02:2181,hadoop03:2181&lt;/value&gt; &lt;/property&gt; &lt;!--执行yarn集群的别名--&gt; &lt;property&gt; &nbsp;&nbsp;&nbsp;&nbsp;&lt;name&gt;yarn.resourcemanager.cluster-id&lt;/name&gt; &nbsp;&nbsp;&nbsp;&nbsp;&lt;value&gt;ns-yarn&lt;/value&gt; &lt;/property&gt; &lt;!--&nbsp;指定nodemanager启动时加载server的方式为shuffle&nbsp;server&nbsp;--&gt; &lt;property&gt;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&lt;name&gt;yarn.nodemanager.aux-services&lt;/name&gt;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&lt;value&gt;mapreduce_shuffle&lt;/value&gt;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/property&gt;&nbsp;&nbsp; &lt;!--&nbsp;指定resourcemanager地址&nbsp;--&gt; &lt;property&gt; &nbsp;&nbsp;&nbsp;&nbsp;&lt;name&gt;yarn.resourcemanager.hostname&lt;/name&gt; &nbsp;&nbsp;&nbsp;&nbsp;&lt;value&gt;hadoop03&lt;/value&gt; &lt;/property&gt; 十五.编辑slaves 一个节点配置完成 &nbsp; 十六.拷贝到其他节点上 &nbsp; 十七.配置环境变量 vim/etc/profile source /etc/profile &nbsp; 十八.启动zookeeper 保证zookeeper集群启动，无误 十九.格式化zookeeper： hdfs zkfc -formatZK&nbsp; &nbsp;在第一个节点启动 无报错信息&nbsp; &nbsp;说明配置无误 &nbsp; 二十.启动JournalNode： hadoop-daemon.sh start journalnode 需要在三个节点都启动 &nbsp; 二十一.在第一台节点上格式化NameNode： hadoop namenode -format&nbsp; &nbsp; 确定第一个为主节点 &nbsp; 二十二.在第一台节点上启动NameNode： hadoop-daemon.sh start namenode&nbsp; &nbsp;能查看到NameNode已经启动 &nbsp; 二十三.在第二台节点上格式化NameNode： hdfs namenode -bootstrapStandby&nbsp; &nbsp; 备份NameNode&nbsp; 独立格式化 &nbsp; 二十四.在第二台节点上启动NameNode： hadoop-daemon.sh&nbsp; start namenode &nbsp; 二十五.在三台节点上启动DataNode： hadoop-daemon.sh start datanode&nbsp; 三台一起启动 &nbsp; 二十六.在第一台节点和第二节点上启动zkfc（FailoverController）： hadoop-daemon.sh start zkfc&nbsp; &nbsp; 设置NameNode的节点启动 1.效果图 在客户端启动： 二十七.在第一个节点上启动Yarn： start-yarn.sh 之前会出现一个需要输入密码问题的错误，是因为我的免密登录，没有部署成功，导致后期，多次初始化NameNode造成的ID冲突，把根目录下的Tmp目录里面的数据全部清空，重新配置即可 下面这个问题&nbsp; 把对应的进程杀死，即可 实现效果图 二十八.在第三个节点上启动ResourceManager： yarn-daemon.sh start resourcemanager &nbsp; 二十九.启动、关闭 1.start-all.sh 启动服务 2.stop-all.sh&nbsp; 关闭服务 &nbsp; &nbsp;" />
<meta property="og:description" content="&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Hadoop全分布式架构图 目录 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Hadoop全分布式架构图 一.永久关闭防火墙 二.配置主机名 1.编辑network文件：vim /etc/sysconfig/network 2.将HOSTNAME属性改为指定的主机名， 3.让network文件重新生效：source /etc/sysconfig/network 三.配置hosts文件，将主机名和ip地址进行映射 1.编辑hosts文件：vim /etc/hosts 2.将主机名和ip地址对应， 四.配置ssh进行免密互通 1.生成自己的公钥和私钥,生成的公私钥将自动存放在/root/.ssh目录下：ssh-keygen 2.把生成的公钥拷贝到远程机器上， 五.重启Linux让主机名的修改生效：reboot 六.安装JDK 七.上传或者下载Hadoop安装包到Linux中 八.解压安装包tar -xvf&nbsp;hadoop-2.7.1_64bit.tar.gz 九.adoop的安装目录的子目录etc/hadoop 十.配置hadoop-env.sh 1.编辑hadoop-env.sh：vim hadoop-env.sh 2.修改JAVA_HOME的路径，修改成具体的路径。 1. cat /etc/profile&nbsp; &nbsp;查看所有的配置文件路径 3.修改HADOOP_CONF_DIR的路径，修改为具体的路径， 4.保存退出文件 5.重新加载生效： 十一.编辑core-site.xml，添加如下内容： 十二.编辑hdfs-site.xml 十三.编辑mapred-site.xml 十四.编辑yarn-site.xml 十五.编辑slaves 十六.拷贝到其他节点上 十七.配置环境变量 vim/etc/profile 十八.启动zookeeper 十九.格式化zookeeper： 二十.启动JournalNode： 二十一.在第一台节点上格式化NameNode： 二十二.在第一台节点上启动NameNode： 二十三.在第二台节点上格式化NameNode： 二十四.在第二台节点上启动NameNode： 二十五.在三台节点上启动DataNode： 二十六.在第一台节点和第二节点上启动zkfc（FailoverController）： 1.效果图 二十七.在第一个节点上启动Yarn： 二十八.在第三个节点上启动ResourceManager： 二十九.启动、关闭 1.start-all.sh 启动服务 2.stop-all.sh&nbsp; 关闭服务 &nbsp; 最少需要三个虚拟机，或者十三个云主机 一.永久关闭防火墙 已经关闭，忽略 &nbsp; 二.配置主机名 需要注意的是Hadoop的集群中的主机名不能有_。如果存在_会导致Hadoop集群无法找到这群主机，从而无法启动！ 1.编辑network文件：vim /etc/sysconfig/network 2.将HOSTNAME属性改为指定的主机名， 3.让network文件重新生效：source /etc/sysconfig/network &nbsp; 三.配置hosts文件，将主机名和ip地址进行映射 1.编辑hosts文件：vim /etc/hosts 2.将主机名和ip地址对应， &nbsp; 四.配置ssh进行免密互通 1.生成自己的公钥和私钥,生成的公私钥将自动存放在/root/.ssh目录下：ssh-keygen 2.把生成的公钥拷贝到远程机器上， 格式为：ssh-copy-id [user]@host，例如：ssh-copy-id root@hadoop01 &nbsp; 五.重启Linux让主机名的修改生效：reboot &nbsp; 六.安装JDK &nbsp; 七.上传或者下载Hadoop安装包到Linux中 &nbsp; 八.解压安装包tar -xvf&nbsp;hadoop-2.7.1_64bit.tar.gz &nbsp; 九.adoop的安装目录的子目录etc/hadoop 配置Hadoop：cd hadoop2.7.1/etc/hadoop &nbsp; 十.配置hadoop-env.sh 1.编辑hadoop-env.sh：vim hadoop-env.sh 2.修改JAVA_HOME的路径，修改成具体的路径。 1. cat /etc/profile&nbsp; &nbsp;查看所有的配置文件路径 //home/presoftware/jdk1.8 例如：export JAVA_HOME=/home/presoftware/jdk1.8 3.修改HADOOP_CONF_DIR的路径，修改为具体的路径， 例如：export HADOOP_CONF_DIR=/home/software/hadoop-2.7.1/etc/hadoop 4.保存退出文件 ：wq 5.重新加载生效： source hadoop-env.sh &nbsp; 十一.编辑core-site.xml，添加如下内容： &lt;!--指定hdfs的nameservice，为整个集群起一个别名--&gt; &lt;property&gt; &nbsp;&nbsp;&nbsp;&nbsp;&lt;name&gt;fs.defaultFS&lt;/name&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&lt;value&gt;hdfs://ns&lt;/value&gt; &lt;/property&gt; &lt;!--指定Hadoop数据临时存放目录--&gt; &lt;property&gt; &nbsp;&nbsp;&nbsp;&nbsp;&lt;name&gt;hadoop.tmp.dir&lt;/name&gt; &nbsp;&nbsp;&nbsp;&nbsp;&lt;value&gt;/home/software/hadoop-2.7.1/tmp&lt;/value&gt; &lt;/property&gt;&nbsp; &lt;!--指定zookeeper的存放地址--&gt; &lt;property&gt; &nbsp;&nbsp;&nbsp;&nbsp;&lt;name&gt;ha.zookeeper.quorum&lt;/name&gt; &nbsp;&nbsp;&nbsp;&nbsp;&lt;value&gt;liuyong:2181,liuyong01:2181,liuyong02:2181&lt;/value&gt; &lt;/property&gt;&nbsp; 十二.编辑hdfs-site.xml &lt;!--执行hdfs的nameservice为ns，注意要和core-site.xml中的名称保持一致--&gt; &lt;property&gt; &nbsp;&nbsp;&nbsp;&nbsp;&lt;name&gt;dfs.nameservices&lt;/name&gt; &nbsp;&nbsp;&nbsp;&nbsp;&lt;value&gt;ns&lt;/value&gt; &lt;/property&gt; &lt;!--ns集群下有两个namenode，分别为nn1,&nbsp;nn2--&gt; &lt;property&gt; &nbsp;&nbsp;&nbsp;&nbsp;&lt;name&gt;dfs.ha.namenodes.ns&lt;/name&gt; &nbsp;&nbsp;&nbsp;&nbsp;&lt;value&gt;nn1,nn2&lt;/value&gt; &lt;/property&gt; &lt;!--nn1的RPC通信--&gt; &lt;property&gt; &nbsp;&nbsp;&nbsp;&nbsp;&lt;name&gt;dfs.namenode.rpc-address.ns.nn1&lt;/name&gt; &nbsp;&nbsp;&nbsp;&nbsp;&lt;value&gt;hadoop01:9000&lt;/value&gt; &lt;/property&gt; &lt;!--nn1的http通信--&gt; &lt;property&gt; &nbsp;&nbsp;&nbsp;&nbsp;&lt;name&gt;dfs.namenode.http-address.ns.nn1&lt;/name&gt; &nbsp;&nbsp;&nbsp;&nbsp;&lt;value&gt;hadoop01:50070&lt;/value&gt; &lt;/property&gt; &lt;!--&nbsp;nn2的RPC通信地址&nbsp;--&gt; &lt;property&gt; &nbsp;&nbsp;&nbsp;&nbsp;&lt;name&gt;dfs.namenode.rpc-address.ns.nn2&lt;/name&gt; &nbsp;&nbsp;&nbsp;&nbsp;&lt;value&gt;hadoop02:9000&lt;/value&gt; &lt;/property&gt; &lt;!--&nbsp;nn2的http通信地址&nbsp;--&gt; &lt;property&gt; &nbsp;&nbsp;&nbsp;&nbsp;&lt;name&gt;dfs.namenode.http-address.ns.nn2&lt;/name&gt; &nbsp;&nbsp;&nbsp;&nbsp;&lt;value&gt;hadoop02:50070&lt;/value&gt; &lt;/property&gt; &lt;!--指定namenode的元数据在JournalNode上存放的位置，这样，namenode2可以从journalnode集群里的指定位置上获取信息，达到热备效果--&gt; &lt;property&gt; &nbsp;&nbsp;&nbsp;&nbsp;&lt;name&gt;dfs.namenode.shared.edits.dir&lt;/name&gt; &nbsp;&nbsp;&nbsp;&nbsp;&lt;value&gt;qjournal://hadoop01:8485;hadoop02:8485;hadoop03:8485/ns&lt;/value&gt; &lt;/property&gt; &lt;!--&nbsp;指定JournalNode在本地磁盘存放数据的位置&nbsp;--&gt; &lt;property&gt; &nbsp;&nbsp;&nbsp;&nbsp;&lt;name&gt;dfs.journalnode.edits.dir&lt;/name&gt; &nbsp;&nbsp;&nbsp;&nbsp;&lt;value&gt;/home/software/hadoop-2.7.1/tmp/journal&lt;/value&gt; &lt;/property&gt; &lt;!--&nbsp;开启NameNode故障时自动切换&nbsp;--&gt; &lt;property&gt; &nbsp;&nbsp;&nbsp;&nbsp;&lt;name&gt;dfs.ha.automatic-failover.enabled&lt;/name&gt; &nbsp;&nbsp;&nbsp;&nbsp;&lt;value&gt;true&lt;/value&gt; &lt;/property&gt; &lt;!--&nbsp;配置失败自动切换实现方式&nbsp;--&gt; &lt;property&gt; &nbsp;&nbsp;&nbsp;&nbsp;&lt;name&gt;dfs.client.failover.proxy.provider.ns&lt;/name&gt; &nbsp;&nbsp;&nbsp;&nbsp;&lt;value&gt;org.apache.hadoop.hdfs.server.namenode.ha.ConfiguredFailoverProxyProvider&lt;/value&gt; &lt;/property&gt; &lt;!--&nbsp;配置隔离机制&nbsp;--&gt; &lt;property&gt; &nbsp;&nbsp;&nbsp;&nbsp;&lt;name&gt;dfs.ha.fencing.methods&lt;/name&gt; &nbsp;&nbsp;&nbsp;&nbsp;&lt;value&gt;sshfence&lt;/value&gt; &lt;/property&gt; &lt;!--&nbsp;使用隔离机制时需要ssh免登陆&nbsp;--&gt; &lt;property&gt; &nbsp;&nbsp;&nbsp;&nbsp;&lt;name&gt;dfs.ha.fencing.ssh.private-key-files&lt;/name&gt; &nbsp;&nbsp;&nbsp;&nbsp;&lt;value&gt;/root/.ssh/id_rsa&lt;/value&gt; &lt;/property&gt; &lt;!--配置namenode存放元数据的目录，可以不配置，如果不配置则默认放到hadoop.tmp.dir下--&gt; &lt;property&gt;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&lt;name&gt;dfs.namenode.name.dir&lt;/name&gt;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&lt;value&gt;file:///home/software/hadoop-2.7.1/tmp/hdfs/name&lt;/value&gt;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/property&gt;&nbsp;&nbsp;&nbsp;&nbsp; &lt;!--配置datanode存放元数据的目录，可以不配置，如果不配置则默认放到hadoop.tmp.dir下--&gt; &lt;property&gt;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&lt;name&gt;dfs.datanode.data.dir&lt;/name&gt;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&lt;value&gt;file:///home/software/hadoop-2.7.1/tmp/hdfs/data&lt;/value&gt;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/property&gt; &lt;!--配置复本数量--&gt;&nbsp;&nbsp;&nbsp;&nbsp; &lt;property&gt;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&lt;name&gt;dfs.replication&lt;/name&gt;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&lt;value&gt;3&lt;/value&gt;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/property&gt;&nbsp;&nbsp;&nbsp; &lt;!--设置用户的操作权限，false表示关闭权限验证，任何用户都可以操作--&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;property&gt;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&lt;name&gt;dfs.permissions&lt;/name&gt;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&lt;value&gt;false&lt;/value&gt;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/property&gt;&nbsp;&nbsp; 十三.编辑mapred-site.xml 复制一份mapred-site.xml &lt;property&gt;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&lt;name&gt;mapreduce.framework.name&lt;/name&gt;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&lt;value&gt;yarn&lt;/value&gt;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/property&gt; &nbsp; 十四.编辑yarn-site.xml &lt;!--配置yarn的高可用--&gt; &lt;property&gt; &nbsp;&nbsp;&nbsp;&nbsp;&lt;name&gt;yarn.resourcemanager.ha.enabled&lt;/name&gt; &nbsp;&nbsp;&nbsp;&nbsp;&lt;value&gt;true&lt;/value&gt; &lt;/property&gt; &lt;!--指定两个resourcemaneger的名称--&gt; &lt;property&gt; &nbsp;&nbsp;&nbsp;&nbsp;&lt;name&gt;yarn.resourcemanager.ha.rm-ids&lt;/name&gt; &nbsp;&nbsp;&nbsp;&nbsp;&lt;value&gt;rm1,rm2&lt;/value&gt; &lt;/property&gt; &lt;!--配置rm1的主机--&gt; &lt;property&gt; &nbsp;&nbsp;&nbsp;&nbsp;&lt;name&gt;yarn.resourcemanager.hostname.rm1&lt;/name&gt; &nbsp;&nbsp;&nbsp;&nbsp;&lt;value&gt;hadoop01&lt;/value&gt; &lt;/property&gt; &lt;!--配置rm2的主机--&gt; &lt;property&gt; &nbsp;&nbsp;&nbsp;&nbsp;&lt;name&gt;yarn.resourcemanager.hostname.rm2&lt;/name&gt; &nbsp;&nbsp;&nbsp;&nbsp;&lt;value&gt;hadoop03&lt;/value&gt; &lt;/property&gt; &lt;!--开启yarn恢复机制--&gt; &lt;property&gt; &nbsp;&nbsp;&nbsp;&nbsp;&lt;name&gt;yarn.resourcemanager.recovery.enabled&lt;/name&gt; &nbsp;&nbsp;&nbsp;&nbsp;&lt;value&gt;true&lt;/value&gt; &lt;/property&gt; &lt;!--执行rm恢复机制实现类--&gt; &lt;property&gt; &nbsp;&nbsp;&nbsp;&nbsp;&lt;name&gt;yarn.resourcemanager.store.class&lt;/name&gt; &nbsp;&nbsp;&nbsp;&nbsp;&lt;value&gt;org.apache.hadoop.yarn.server.resourcemanager.recovery.ZKRMStateStore&lt;/value&gt; &lt;/property&gt; &lt;!--配置zookeeper的地址--&gt; &lt;property&gt; &nbsp;&nbsp;&nbsp;&nbsp;&lt;name&gt;yarn.resourcemanager.zk-address&lt;/name&gt; &nbsp;&nbsp;&nbsp;&nbsp;&lt;value&gt;hadoop01:2181,hadoop02:2181,hadoop03:2181&lt;/value&gt; &lt;/property&gt; &lt;!--执行yarn集群的别名--&gt; &lt;property&gt; &nbsp;&nbsp;&nbsp;&nbsp;&lt;name&gt;yarn.resourcemanager.cluster-id&lt;/name&gt; &nbsp;&nbsp;&nbsp;&nbsp;&lt;value&gt;ns-yarn&lt;/value&gt; &lt;/property&gt; &lt;!--&nbsp;指定nodemanager启动时加载server的方式为shuffle&nbsp;server&nbsp;--&gt; &lt;property&gt;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&lt;name&gt;yarn.nodemanager.aux-services&lt;/name&gt;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&lt;value&gt;mapreduce_shuffle&lt;/value&gt;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/property&gt;&nbsp;&nbsp; &lt;!--&nbsp;指定resourcemanager地址&nbsp;--&gt; &lt;property&gt; &nbsp;&nbsp;&nbsp;&nbsp;&lt;name&gt;yarn.resourcemanager.hostname&lt;/name&gt; &nbsp;&nbsp;&nbsp;&nbsp;&lt;value&gt;hadoop03&lt;/value&gt; &lt;/property&gt; 十五.编辑slaves 一个节点配置完成 &nbsp; 十六.拷贝到其他节点上 &nbsp; 十七.配置环境变量 vim/etc/profile source /etc/profile &nbsp; 十八.启动zookeeper 保证zookeeper集群启动，无误 十九.格式化zookeeper： hdfs zkfc -formatZK&nbsp; &nbsp;在第一个节点启动 无报错信息&nbsp; &nbsp;说明配置无误 &nbsp; 二十.启动JournalNode： hadoop-daemon.sh start journalnode 需要在三个节点都启动 &nbsp; 二十一.在第一台节点上格式化NameNode： hadoop namenode -format&nbsp; &nbsp; 确定第一个为主节点 &nbsp; 二十二.在第一台节点上启动NameNode： hadoop-daemon.sh start namenode&nbsp; &nbsp;能查看到NameNode已经启动 &nbsp; 二十三.在第二台节点上格式化NameNode： hdfs namenode -bootstrapStandby&nbsp; &nbsp; 备份NameNode&nbsp; 独立格式化 &nbsp; 二十四.在第二台节点上启动NameNode： hadoop-daemon.sh&nbsp; start namenode &nbsp; 二十五.在三台节点上启动DataNode： hadoop-daemon.sh start datanode&nbsp; 三台一起启动 &nbsp; 二十六.在第一台节点和第二节点上启动zkfc（FailoverController）： hadoop-daemon.sh start zkfc&nbsp; &nbsp; 设置NameNode的节点启动 1.效果图 在客户端启动： 二十七.在第一个节点上启动Yarn： start-yarn.sh 之前会出现一个需要输入密码问题的错误，是因为我的免密登录，没有部署成功，导致后期，多次初始化NameNode造成的ID冲突，把根目录下的Tmp目录里面的数据全部清空，重新配置即可 下面这个问题&nbsp; 把对应的进程杀死，即可 实现效果图 二十八.在第三个节点上启动ResourceManager： yarn-daemon.sh start resourcemanager &nbsp; 二十九.启动、关闭 1.start-all.sh 启动服务 2.stop-all.sh&nbsp; 关闭服务 &nbsp; &nbsp;" />
<link rel="canonical" href="https://uzzz.org/2019/07/03/793334.html" />
<meta property="og:url" content="https://uzzz.org/2019/07/03/793334.html" />
<meta property="og:site_name" content="有组织在！" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2019-07-03T00:00:00+08:00" />
<script type="application/ld+json">
{"description":"&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Hadoop全分布式架构图 目录 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Hadoop全分布式架构图 一.永久关闭防火墙 二.配置主机名 1.编辑network文件：vim /etc/sysconfig/network 2.将HOSTNAME属性改为指定的主机名， 3.让network文件重新生效：source /etc/sysconfig/network 三.配置hosts文件，将主机名和ip地址进行映射 1.编辑hosts文件：vim /etc/hosts 2.将主机名和ip地址对应， 四.配置ssh进行免密互通 1.生成自己的公钥和私钥,生成的公私钥将自动存放在/root/.ssh目录下：ssh-keygen 2.把生成的公钥拷贝到远程机器上， 五.重启Linux让主机名的修改生效：reboot 六.安装JDK 七.上传或者下载Hadoop安装包到Linux中 八.解压安装包tar -xvf&nbsp;hadoop-2.7.1_64bit.tar.gz 九.adoop的安装目录的子目录etc/hadoop 十.配置hadoop-env.sh 1.编辑hadoop-env.sh：vim hadoop-env.sh 2.修改JAVA_HOME的路径，修改成具体的路径。 1. cat /etc/profile&nbsp; &nbsp;查看所有的配置文件路径 3.修改HADOOP_CONF_DIR的路径，修改为具体的路径， 4.保存退出文件 5.重新加载生效： 十一.编辑core-site.xml，添加如下内容： 十二.编辑hdfs-site.xml 十三.编辑mapred-site.xml 十四.编辑yarn-site.xml 十五.编辑slaves 十六.拷贝到其他节点上 十七.配置环境变量 vim/etc/profile 十八.启动zookeeper 十九.格式化zookeeper： 二十.启动JournalNode： 二十一.在第一台节点上格式化NameNode： 二十二.在第一台节点上启动NameNode： 二十三.在第二台节点上格式化NameNode： 二十四.在第二台节点上启动NameNode： 二十五.在三台节点上启动DataNode： 二十六.在第一台节点和第二节点上启动zkfc（FailoverController）： 1.效果图 二十七.在第一个节点上启动Yarn： 二十八.在第三个节点上启动ResourceManager： 二十九.启动、关闭 1.start-all.sh 启动服务 2.stop-all.sh&nbsp; 关闭服务 &nbsp; 最少需要三个虚拟机，或者十三个云主机 一.永久关闭防火墙 已经关闭，忽略 &nbsp; 二.配置主机名 需要注意的是Hadoop的集群中的主机名不能有_。如果存在_会导致Hadoop集群无法找到这群主机，从而无法启动！ 1.编辑network文件：vim /etc/sysconfig/network 2.将HOSTNAME属性改为指定的主机名， 3.让network文件重新生效：source /etc/sysconfig/network &nbsp; 三.配置hosts文件，将主机名和ip地址进行映射 1.编辑hosts文件：vim /etc/hosts 2.将主机名和ip地址对应， &nbsp; 四.配置ssh进行免密互通 1.生成自己的公钥和私钥,生成的公私钥将自动存放在/root/.ssh目录下：ssh-keygen 2.把生成的公钥拷贝到远程机器上， 格式为：ssh-copy-id [user]@host，例如：ssh-copy-id root@hadoop01 &nbsp; 五.重启Linux让主机名的修改生效：reboot &nbsp; 六.安装JDK &nbsp; 七.上传或者下载Hadoop安装包到Linux中 &nbsp; 八.解压安装包tar -xvf&nbsp;hadoop-2.7.1_64bit.tar.gz &nbsp; 九.adoop的安装目录的子目录etc/hadoop 配置Hadoop：cd hadoop2.7.1/etc/hadoop &nbsp; 十.配置hadoop-env.sh 1.编辑hadoop-env.sh：vim hadoop-env.sh 2.修改JAVA_HOME的路径，修改成具体的路径。 1. cat /etc/profile&nbsp; &nbsp;查看所有的配置文件路径 //home/presoftware/jdk1.8 例如：export JAVA_HOME=/home/presoftware/jdk1.8 3.修改HADOOP_CONF_DIR的路径，修改为具体的路径， 例如：export HADOOP_CONF_DIR=/home/software/hadoop-2.7.1/etc/hadoop 4.保存退出文件 ：wq 5.重新加载生效： source hadoop-env.sh &nbsp; 十一.编辑core-site.xml，添加如下内容： &lt;!--指定hdfs的nameservice，为整个集群起一个别名--&gt; &lt;property&gt; &nbsp;&nbsp;&nbsp;&nbsp;&lt;name&gt;fs.defaultFS&lt;/name&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&lt;value&gt;hdfs://ns&lt;/value&gt; &lt;/property&gt; &lt;!--指定Hadoop数据临时存放目录--&gt; &lt;property&gt; &nbsp;&nbsp;&nbsp;&nbsp;&lt;name&gt;hadoop.tmp.dir&lt;/name&gt; &nbsp;&nbsp;&nbsp;&nbsp;&lt;value&gt;/home/software/hadoop-2.7.1/tmp&lt;/value&gt; &lt;/property&gt;&nbsp; &lt;!--指定zookeeper的存放地址--&gt; &lt;property&gt; &nbsp;&nbsp;&nbsp;&nbsp;&lt;name&gt;ha.zookeeper.quorum&lt;/name&gt; &nbsp;&nbsp;&nbsp;&nbsp;&lt;value&gt;liuyong:2181,liuyong01:2181,liuyong02:2181&lt;/value&gt; &lt;/property&gt;&nbsp; 十二.编辑hdfs-site.xml &lt;!--执行hdfs的nameservice为ns，注意要和core-site.xml中的名称保持一致--&gt; &lt;property&gt; &nbsp;&nbsp;&nbsp;&nbsp;&lt;name&gt;dfs.nameservices&lt;/name&gt; &nbsp;&nbsp;&nbsp;&nbsp;&lt;value&gt;ns&lt;/value&gt; &lt;/property&gt; &lt;!--ns集群下有两个namenode，分别为nn1,&nbsp;nn2--&gt; &lt;property&gt; &nbsp;&nbsp;&nbsp;&nbsp;&lt;name&gt;dfs.ha.namenodes.ns&lt;/name&gt; &nbsp;&nbsp;&nbsp;&nbsp;&lt;value&gt;nn1,nn2&lt;/value&gt; &lt;/property&gt; &lt;!--nn1的RPC通信--&gt; &lt;property&gt; &nbsp;&nbsp;&nbsp;&nbsp;&lt;name&gt;dfs.namenode.rpc-address.ns.nn1&lt;/name&gt; &nbsp;&nbsp;&nbsp;&nbsp;&lt;value&gt;hadoop01:9000&lt;/value&gt; &lt;/property&gt; &lt;!--nn1的http通信--&gt; &lt;property&gt; &nbsp;&nbsp;&nbsp;&nbsp;&lt;name&gt;dfs.namenode.http-address.ns.nn1&lt;/name&gt; &nbsp;&nbsp;&nbsp;&nbsp;&lt;value&gt;hadoop01:50070&lt;/value&gt; &lt;/property&gt; &lt;!--&nbsp;nn2的RPC通信地址&nbsp;--&gt; &lt;property&gt; &nbsp;&nbsp;&nbsp;&nbsp;&lt;name&gt;dfs.namenode.rpc-address.ns.nn2&lt;/name&gt; &nbsp;&nbsp;&nbsp;&nbsp;&lt;value&gt;hadoop02:9000&lt;/value&gt; &lt;/property&gt; &lt;!--&nbsp;nn2的http通信地址&nbsp;--&gt; &lt;property&gt; &nbsp;&nbsp;&nbsp;&nbsp;&lt;name&gt;dfs.namenode.http-address.ns.nn2&lt;/name&gt; &nbsp;&nbsp;&nbsp;&nbsp;&lt;value&gt;hadoop02:50070&lt;/value&gt; &lt;/property&gt; &lt;!--指定namenode的元数据在JournalNode上存放的位置，这样，namenode2可以从journalnode集群里的指定位置上获取信息，达到热备效果--&gt; &lt;property&gt; &nbsp;&nbsp;&nbsp;&nbsp;&lt;name&gt;dfs.namenode.shared.edits.dir&lt;/name&gt; &nbsp;&nbsp;&nbsp;&nbsp;&lt;value&gt;qjournal://hadoop01:8485;hadoop02:8485;hadoop03:8485/ns&lt;/value&gt; &lt;/property&gt; &lt;!--&nbsp;指定JournalNode在本地磁盘存放数据的位置&nbsp;--&gt; &lt;property&gt; &nbsp;&nbsp;&nbsp;&nbsp;&lt;name&gt;dfs.journalnode.edits.dir&lt;/name&gt; &nbsp;&nbsp;&nbsp;&nbsp;&lt;value&gt;/home/software/hadoop-2.7.1/tmp/journal&lt;/value&gt; &lt;/property&gt; &lt;!--&nbsp;开启NameNode故障时自动切换&nbsp;--&gt; &lt;property&gt; &nbsp;&nbsp;&nbsp;&nbsp;&lt;name&gt;dfs.ha.automatic-failover.enabled&lt;/name&gt; &nbsp;&nbsp;&nbsp;&nbsp;&lt;value&gt;true&lt;/value&gt; &lt;/property&gt; &lt;!--&nbsp;配置失败自动切换实现方式&nbsp;--&gt; &lt;property&gt; &nbsp;&nbsp;&nbsp;&nbsp;&lt;name&gt;dfs.client.failover.proxy.provider.ns&lt;/name&gt; &nbsp;&nbsp;&nbsp;&nbsp;&lt;value&gt;org.apache.hadoop.hdfs.server.namenode.ha.ConfiguredFailoverProxyProvider&lt;/value&gt; &lt;/property&gt; &lt;!--&nbsp;配置隔离机制&nbsp;--&gt; &lt;property&gt; &nbsp;&nbsp;&nbsp;&nbsp;&lt;name&gt;dfs.ha.fencing.methods&lt;/name&gt; &nbsp;&nbsp;&nbsp;&nbsp;&lt;value&gt;sshfence&lt;/value&gt; &lt;/property&gt; &lt;!--&nbsp;使用隔离机制时需要ssh免登陆&nbsp;--&gt; &lt;property&gt; &nbsp;&nbsp;&nbsp;&nbsp;&lt;name&gt;dfs.ha.fencing.ssh.private-key-files&lt;/name&gt; &nbsp;&nbsp;&nbsp;&nbsp;&lt;value&gt;/root/.ssh/id_rsa&lt;/value&gt; &lt;/property&gt; &lt;!--配置namenode存放元数据的目录，可以不配置，如果不配置则默认放到hadoop.tmp.dir下--&gt; &lt;property&gt;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&lt;name&gt;dfs.namenode.name.dir&lt;/name&gt;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&lt;value&gt;file:///home/software/hadoop-2.7.1/tmp/hdfs/name&lt;/value&gt;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/property&gt;&nbsp;&nbsp;&nbsp;&nbsp; &lt;!--配置datanode存放元数据的目录，可以不配置，如果不配置则默认放到hadoop.tmp.dir下--&gt; &lt;property&gt;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&lt;name&gt;dfs.datanode.data.dir&lt;/name&gt;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&lt;value&gt;file:///home/software/hadoop-2.7.1/tmp/hdfs/data&lt;/value&gt;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/property&gt; &lt;!--配置复本数量--&gt;&nbsp;&nbsp;&nbsp;&nbsp; &lt;property&gt;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&lt;name&gt;dfs.replication&lt;/name&gt;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&lt;value&gt;3&lt;/value&gt;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/property&gt;&nbsp;&nbsp;&nbsp; &lt;!--设置用户的操作权限，false表示关闭权限验证，任何用户都可以操作--&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;property&gt;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&lt;name&gt;dfs.permissions&lt;/name&gt;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&lt;value&gt;false&lt;/value&gt;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/property&gt;&nbsp;&nbsp; 十三.编辑mapred-site.xml 复制一份mapred-site.xml &lt;property&gt;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&lt;name&gt;mapreduce.framework.name&lt;/name&gt;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&lt;value&gt;yarn&lt;/value&gt;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/property&gt; &nbsp; 十四.编辑yarn-site.xml &lt;!--配置yarn的高可用--&gt; &lt;property&gt; &nbsp;&nbsp;&nbsp;&nbsp;&lt;name&gt;yarn.resourcemanager.ha.enabled&lt;/name&gt; &nbsp;&nbsp;&nbsp;&nbsp;&lt;value&gt;true&lt;/value&gt; &lt;/property&gt; &lt;!--指定两个resourcemaneger的名称--&gt; &lt;property&gt; &nbsp;&nbsp;&nbsp;&nbsp;&lt;name&gt;yarn.resourcemanager.ha.rm-ids&lt;/name&gt; &nbsp;&nbsp;&nbsp;&nbsp;&lt;value&gt;rm1,rm2&lt;/value&gt; &lt;/property&gt; &lt;!--配置rm1的主机--&gt; &lt;property&gt; &nbsp;&nbsp;&nbsp;&nbsp;&lt;name&gt;yarn.resourcemanager.hostname.rm1&lt;/name&gt; &nbsp;&nbsp;&nbsp;&nbsp;&lt;value&gt;hadoop01&lt;/value&gt; &lt;/property&gt; &lt;!--配置rm2的主机--&gt; &lt;property&gt; &nbsp;&nbsp;&nbsp;&nbsp;&lt;name&gt;yarn.resourcemanager.hostname.rm2&lt;/name&gt; &nbsp;&nbsp;&nbsp;&nbsp;&lt;value&gt;hadoop03&lt;/value&gt; &lt;/property&gt; &lt;!--开启yarn恢复机制--&gt; &lt;property&gt; &nbsp;&nbsp;&nbsp;&nbsp;&lt;name&gt;yarn.resourcemanager.recovery.enabled&lt;/name&gt; &nbsp;&nbsp;&nbsp;&nbsp;&lt;value&gt;true&lt;/value&gt; &lt;/property&gt; &lt;!--执行rm恢复机制实现类--&gt; &lt;property&gt; &nbsp;&nbsp;&nbsp;&nbsp;&lt;name&gt;yarn.resourcemanager.store.class&lt;/name&gt; &nbsp;&nbsp;&nbsp;&nbsp;&lt;value&gt;org.apache.hadoop.yarn.server.resourcemanager.recovery.ZKRMStateStore&lt;/value&gt; &lt;/property&gt; &lt;!--配置zookeeper的地址--&gt; &lt;property&gt; &nbsp;&nbsp;&nbsp;&nbsp;&lt;name&gt;yarn.resourcemanager.zk-address&lt;/name&gt; &nbsp;&nbsp;&nbsp;&nbsp;&lt;value&gt;hadoop01:2181,hadoop02:2181,hadoop03:2181&lt;/value&gt; &lt;/property&gt; &lt;!--执行yarn集群的别名--&gt; &lt;property&gt; &nbsp;&nbsp;&nbsp;&nbsp;&lt;name&gt;yarn.resourcemanager.cluster-id&lt;/name&gt; &nbsp;&nbsp;&nbsp;&nbsp;&lt;value&gt;ns-yarn&lt;/value&gt; &lt;/property&gt; &lt;!--&nbsp;指定nodemanager启动时加载server的方式为shuffle&nbsp;server&nbsp;--&gt; &lt;property&gt;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&lt;name&gt;yarn.nodemanager.aux-services&lt;/name&gt;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&lt;value&gt;mapreduce_shuffle&lt;/value&gt;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/property&gt;&nbsp;&nbsp; &lt;!--&nbsp;指定resourcemanager地址&nbsp;--&gt; &lt;property&gt; &nbsp;&nbsp;&nbsp;&nbsp;&lt;name&gt;yarn.resourcemanager.hostname&lt;/name&gt; &nbsp;&nbsp;&nbsp;&nbsp;&lt;value&gt;hadoop03&lt;/value&gt; &lt;/property&gt; 十五.编辑slaves 一个节点配置完成 &nbsp; 十六.拷贝到其他节点上 &nbsp; 十七.配置环境变量 vim/etc/profile source /etc/profile &nbsp; 十八.启动zookeeper 保证zookeeper集群启动，无误 十九.格式化zookeeper： hdfs zkfc -formatZK&nbsp; &nbsp;在第一个节点启动 无报错信息&nbsp; &nbsp;说明配置无误 &nbsp; 二十.启动JournalNode： hadoop-daemon.sh start journalnode 需要在三个节点都启动 &nbsp; 二十一.在第一台节点上格式化NameNode： hadoop namenode -format&nbsp; &nbsp; 确定第一个为主节点 &nbsp; 二十二.在第一台节点上启动NameNode： hadoop-daemon.sh start namenode&nbsp; &nbsp;能查看到NameNode已经启动 &nbsp; 二十三.在第二台节点上格式化NameNode： hdfs namenode -bootstrapStandby&nbsp; &nbsp; 备份NameNode&nbsp; 独立格式化 &nbsp; 二十四.在第二台节点上启动NameNode： hadoop-daemon.sh&nbsp; start namenode &nbsp; 二十五.在三台节点上启动DataNode： hadoop-daemon.sh start datanode&nbsp; 三台一起启动 &nbsp; 二十六.在第一台节点和第二节点上启动zkfc（FailoverController）： hadoop-daemon.sh start zkfc&nbsp; &nbsp; 设置NameNode的节点启动 1.效果图 在客户端启动： 二十七.在第一个节点上启动Yarn： start-yarn.sh 之前会出现一个需要输入密码问题的错误，是因为我的免密登录，没有部署成功，导致后期，多次初始化NameNode造成的ID冲突，把根目录下的Tmp目录里面的数据全部清空，重新配置即可 下面这个问题&nbsp; 把对应的进程杀死，即可 实现效果图 二十八.在第三个节点上启动ResourceManager： yarn-daemon.sh start resourcemanager &nbsp; 二十九.启动、关闭 1.start-all.sh 启动服务 2.stop-all.sh&nbsp; 关闭服务 &nbsp; &nbsp;","@type":"BlogPosting","url":"https://uzzz.org/2019/07/03/793334.html","headline":"Hadoop分布式安装步骤 –实战","dateModified":"2019-07-03T00:00:00+08:00","datePublished":"2019-07-03T00:00:00+08:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://uzzz.org/2019/07/03/793334.html"},"@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->


    <link rel="stylesheet" href="/assets/css/style.css?v=">
    <script src="/assets/js/scale.fix.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-123344652-1"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-123344652-1');
    </script>
    
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <script>
      (adsbygoogle = window.adsbygoogle || []).push({
        google_ad_client: "ca-pub-8889449066804352",
        enable_page_level_ads: true
      });
    </script>
    
    <script async custom-element="amp-auto-ads"
        src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
    </script>
    
    <style>
      @media screen and (max-width:760px){
        .sm-hidden{display:none; }
      }
    </style>

  </head>
  <body>
    
        <amp-auto-ads type="adsense"
              data-ad-client="ca-pub-8889449066804352">
        </amp-auto-ads>
    
    <div class="wrapper">
      <header  class="without-description" >
        <h1>Hadoop分布式安装步骤 --实战</h1>
        
        
        <ul style="display: block;">
            <li><a href="https://uzshare.com/" style="line-height: unset;" target="_blank"><strong>柚子社区</strong></a></li>
 	    <li><a href="/donate/" style="line-height: unset;" target="_blank"><strong>Donate</strong></a></li>
        </ul>
        
      </header>
      <section>

<div style="margin:0 0 8px 0;">
<style>
table.gsc-input {
    margin: 0;
}
.cse .gsc-control-cse, .gsc-control-cse {
    padding: 0;
    width: auto;
}
.gsc-search-box td {
    border-bottom: none;
}
</style>
<script>
  (function() {
    var cx = '004431708863642777669:qan2_6ugotw';
    var gcse = document.createElement('script');
    gcse.type = 'text/javascript';
    gcse.async = true;
    gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(gcse, s);
  })();
</script>
<gcse:search></gcse:search>
</div>
<!-- match content ads -->
	        <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
			<ins class="adsbygoogle"
			     style="display:block"
			     data-ad-format="autorelaxed"
			     data-ad-client="ca-pub-8889449066804352"
			     data-ad-slot="1928667997"></ins>
			<script>
			     (adsbygoogle = window.adsbygoogle || []).push({});
			</script>	



        <div id="article_content" class="article_content clearfix">  
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-3019150162.css"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-3019150162.css"> 
 <div class="htmledit_views" id="content_views"> 
  <h1 id="%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0Hadoop%E4%BC%AA%E5%88%86%E5%B8%83%E5%BC%8F%E5%AE%89%E8%A3%85%E6%AD%A5%E9%AA%A4%C2%A0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color:#1e4e79;">Hadoop全分布式架构图</span></h1> 
  <p id="main-toc"><strong>目录</strong></p> 
  <p id="%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0Hadoop%E4%BC%AA%E5%88%86%E5%B8%83%E5%BC%8F%E5%AE%89%E8%A3%85%E6%AD%A5%E9%AA%A4%C2%A0-toc" style="margin-left:0px;"><a href="#%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0Hadoop%E4%BC%AA%E5%88%86%E5%B8%83%E5%BC%8F%E5%AE%89%E8%A3%85%E6%AD%A5%E9%AA%A4%C2%A0" rel="nofollow" data-token="86927838477729831b8a632818ac9bea">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Hadoop全分布式架构图</a></p> 
  <p id="%E4%B8%80.%E6%B0%B8%E4%B9%85%E5%85%B3%E9%97%AD%E9%98%B2%E7%81%AB%E5%A2%99-toc" style="margin-left:0px;"><a href="#%E4%B8%80.%E6%B0%B8%E4%B9%85%E5%85%B3%E9%97%AD%E9%98%B2%E7%81%AB%E5%A2%99" rel="nofollow" data-token="5902fff5130efc409f02161c161f5efa">一.永久关闭防火墙</a></p> 
  <p id="%E4%BA%8C.%E9%85%8D%E7%BD%AE%E4%B8%BB%E6%9C%BA%E5%90%8D-toc" style="margin-left:0px;"><a href="#%E4%BA%8C.%E9%85%8D%E7%BD%AE%E4%B8%BB%E6%9C%BA%E5%90%8D" rel="nofollow" data-token="0cdb7d9426f7821d7c73ab8da511fcd6">二.配置主机名</a></p> 
  <p id="1.%E7%BC%96%E8%BE%91network%E6%96%87%E4%BB%B6%EF%BC%9Avim%20%2Fetc%2Fsysconfig%2Fnetwork-toc" style="margin-left:40px;"><a href="#1.%E7%BC%96%E8%BE%91network%E6%96%87%E4%BB%B6%EF%BC%9Avim%20%2Fetc%2Fsysconfig%2Fnetwork" rel="nofollow" data-token="768ece049dcb24215e06da7f37c9f68e">1.编辑network文件：vim /etc/sysconfig/network</a></p> 
  <p id="2.%E5%B0%86HOSTNAME%E5%B1%9E%E6%80%A7%E6%94%B9%E4%B8%BA%E6%8C%87%E5%AE%9A%E7%9A%84%E4%B8%BB%E6%9C%BA%E5%90%8D%EF%BC%8C-toc" style="margin-left:40px;"><a href="#2.%E5%B0%86HOSTNAME%E5%B1%9E%E6%80%A7%E6%94%B9%E4%B8%BA%E6%8C%87%E5%AE%9A%E7%9A%84%E4%B8%BB%E6%9C%BA%E5%90%8D%EF%BC%8C" rel="nofollow" data-token="bb999079e0523a40bafda41e562fd3d3">2.将HOSTNAME属性改为指定的主机名，</a></p> 
  <p id="3.%E8%AE%A9network%E6%96%87%E4%BB%B6%E9%87%8D%E6%96%B0%E7%94%9F%E6%95%88%EF%BC%9Asource%20%2Fetc%2Fsysconfig%2Fnetwork-toc" style="margin-left:40px;"><a href="#3.%E8%AE%A9network%E6%96%87%E4%BB%B6%E9%87%8D%E6%96%B0%E7%94%9F%E6%95%88%EF%BC%9Asource%20%2Fetc%2Fsysconfig%2Fnetwork" rel="nofollow" data-token="2c9c3bbceb7394b3c6e5a33763a8ff34">3.让network文件重新生效：source /etc/sysconfig/network</a></p> 
  <p id="%E4%B8%89.%E9%85%8D%E7%BD%AEhosts%E6%96%87%E4%BB%B6%EF%BC%8C%E5%B0%86%E4%B8%BB%E6%9C%BA%E5%90%8D%E5%92%8Cip%E5%9C%B0%E5%9D%80%E8%BF%9B%E8%A1%8C%E6%98%A0%E5%B0%84-toc" style="margin-left:0px;"><a href="#%E4%B8%89.%E9%85%8D%E7%BD%AEhosts%E6%96%87%E4%BB%B6%EF%BC%8C%E5%B0%86%E4%B8%BB%E6%9C%BA%E5%90%8D%E5%92%8Cip%E5%9C%B0%E5%9D%80%E8%BF%9B%E8%A1%8C%E6%98%A0%E5%B0%84" rel="nofollow" data-token="ac3d1d32c599a5991bf63e3fc9205bcc">三.配置hosts文件，将主机名和ip地址进行映射</a></p> 
  <p id="1.%E7%BC%96%E8%BE%91hosts%E6%96%87%E4%BB%B6%EF%BC%9Avim%20%2Fetc%2Fhosts-toc" style="margin-left:40px;"><a href="#1.%E7%BC%96%E8%BE%91hosts%E6%96%87%E4%BB%B6%EF%BC%9Avim%20%2Fetc%2Fhosts" rel="nofollow" data-token="ab1aa60cdacba2b158a3a696dc78d4d1">1.编辑hosts文件：vim /etc/hosts</a></p> 
  <p id="2.%E5%B0%86%E4%B8%BB%E6%9C%BA%E5%90%8D%E5%92%8Cip%E5%9C%B0%E5%9D%80%E5%AF%B9%E5%BA%94%EF%BC%8C-toc" style="margin-left:40px;"><a href="#2.%E5%B0%86%E4%B8%BB%E6%9C%BA%E5%90%8D%E5%92%8Cip%E5%9C%B0%E5%9D%80%E5%AF%B9%E5%BA%94%EF%BC%8C" rel="nofollow" data-token="b09e93e1471daef357b7f3e757a9603a">2.将主机名和ip地址对应，</a></p> 
  <p id="%E5%9B%9B.%E9%85%8D%E7%BD%AEssh%E8%BF%9B%E8%A1%8C%E5%85%8D%E5%AF%86%E4%BA%92%E9%80%9A-toc" style="margin-left:0px;"><a href="#%E5%9B%9B.%E9%85%8D%E7%BD%AEssh%E8%BF%9B%E8%A1%8C%E5%85%8D%E5%AF%86%E4%BA%92%E9%80%9A" rel="nofollow" data-token="dfd0973231e48f5efa9d626b5360f572">四.配置ssh进行免密互通</a></p> 
  <p id="1.%E7%94%9F%E6%88%90%E8%87%AA%E5%B7%B1%E7%9A%84%E5%85%AC%E9%92%A5%E5%92%8C%E7%A7%81%E9%92%A5%2C%E7%94%9F%E6%88%90%E7%9A%84%E5%85%AC%E7%A7%81%E9%92%A5%E5%B0%86%E8%87%AA%E5%8A%A8%E5%AD%98%E6%94%BE%E5%9C%A8%2Froot%2F.ssh%E7%9B%AE%E5%BD%95%E4%B8%8B%EF%BC%9Assh-keygen-toc" style="margin-left:40px;"><a href="#1.%E7%94%9F%E6%88%90%E8%87%AA%E5%B7%B1%E7%9A%84%E5%85%AC%E9%92%A5%E5%92%8C%E7%A7%81%E9%92%A5%2C%E7%94%9F%E6%88%90%E7%9A%84%E5%85%AC%E7%A7%81%E9%92%A5%E5%B0%86%E8%87%AA%E5%8A%A8%E5%AD%98%E6%94%BE%E5%9C%A8%2Froot%2F.ssh%E7%9B%AE%E5%BD%95%E4%B8%8B%EF%BC%9Assh-keygen" rel="nofollow" data-token="98121c31d782d5e1ead64d62902aed7a">1.生成自己的公钥和私钥,生成的公私钥将自动存放在/root/.ssh目录下：ssh-keygen</a></p> 
  <p id="2.%E6%8A%8A%E7%94%9F%E6%88%90%E7%9A%84%E5%85%AC%E9%92%A5%E6%8B%B7%E8%B4%9D%E5%88%B0%E8%BF%9C%E7%A8%8B%E6%9C%BA%E5%99%A8%E4%B8%8A%EF%BC%8C-toc" style="margin-left:40px;"><a href="#2.%E6%8A%8A%E7%94%9F%E6%88%90%E7%9A%84%E5%85%AC%E9%92%A5%E6%8B%B7%E8%B4%9D%E5%88%B0%E8%BF%9C%E7%A8%8B%E6%9C%BA%E5%99%A8%E4%B8%8A%EF%BC%8C" rel="nofollow" data-token="b0385235fcfe8f320f44167170ce7d35">2.把生成的公钥拷贝到远程机器上，</a></p> 
  <p id="%E4%BA%94.%E9%87%8D%E5%90%AFLinux%E8%AE%A9%E4%B8%BB%E6%9C%BA%E5%90%8D%E7%9A%84%E4%BF%AE%E6%94%B9%E7%94%9F%E6%95%88%EF%BC%9Areboot-toc" style="margin-left:0px;"><a href="#%E4%BA%94.%E9%87%8D%E5%90%AFLinux%E8%AE%A9%E4%B8%BB%E6%9C%BA%E5%90%8D%E7%9A%84%E4%BF%AE%E6%94%B9%E7%94%9F%E6%95%88%EF%BC%9Areboot" rel="nofollow" data-token="52f5cb34a1adafde899380790171a343">五.重启Linux让主机名的修改生效：reboot</a></p> 
  <p id="%E5%85%AD.%E5%AE%89%E8%A3%85JDK-toc" style="margin-left:0px;"><a href="#%E5%85%AD.%E5%AE%89%E8%A3%85JDK" rel="nofollow" data-token="020b1cc659f6713f30fba65f961ed2a9">六.安装JDK</a></p> 
  <p id="%E4%B8%83.%E4%B8%8A%E4%BC%A0%E6%88%96%E8%80%85%E4%B8%8B%E8%BD%BDHadoop%E5%AE%89%E8%A3%85%E5%8C%85%E5%88%B0Linux%E4%B8%AD-toc" style="margin-left:0px;"><a href="#%E4%B8%83.%E4%B8%8A%E4%BC%A0%E6%88%96%E8%80%85%E4%B8%8B%E8%BD%BDHadoop%E5%AE%89%E8%A3%85%E5%8C%85%E5%88%B0Linux%E4%B8%AD" rel="nofollow" data-token="b3096717213fb1f8c28ea57a4129cf07">七.上传或者下载Hadoop安装包到Linux中</a></p> 
  <p id="1.%E8%A7%A3%E5%8E%8B%E5%AE%89%E8%A3%85%E5%8C%85%EF%BC%9Atar%20-xvf%20hadoop-2.7.1_64bit.tar.gz-toc" style="margin-left:0px;"><a href="#1.%E8%A7%A3%E5%8E%8B%E5%AE%89%E8%A3%85%E5%8C%85%EF%BC%9Atar%20-xvf%20hadoop-2.7.1_64bit.tar.gz" rel="nofollow" data-token="5cd6bc37e483d87ba986a566dc2ec544">八.解压安装包tar -xvf&nbsp;hadoop-2.7.1_64bit.tar.gz</a></p> 
  <p id="2.%E8%BF%9B%E5%85%A5Hadoop%E7%9A%84%E5%AE%89%E8%A3%85%E7%9B%AE%E5%BD%95%E7%9A%84%E5%AD%90%E7%9B%AE%E5%BD%95etc%2Fhadoop%EF%BC%8C%E9%85%8D%E7%BD%AEHadoop%EF%BC%9Acd%20hadoop2.7.1%2Fetc%2Fhadoop-toc" style="margin-left:0px;"><a href="#2.%E8%BF%9B%E5%85%A5Hadoop%E7%9A%84%E5%AE%89%E8%A3%85%E7%9B%AE%E5%BD%95%E7%9A%84%E5%AD%90%E7%9B%AE%E5%BD%95etc%2Fhadoop%EF%BC%8C%E9%85%8D%E7%BD%AEHadoop%EF%BC%9Acd%20hadoop2.7.1%2Fetc%2Fhadoop" rel="nofollow" data-token="d00a5555f19b73c06f3882b392f0613e">九.adoop的安装目录的子目录etc/hadoop</a></p> 
  <p id="%E5%8D%81.%E9%85%8D%E7%BD%AEhadoop-env.sh-toc" style="margin-left:0px;"><a href="#%E5%8D%81.%E9%85%8D%E7%BD%AEhadoop-env.sh" rel="nofollow" data-token="62f1761480e6378a8714adf0ffd3f52a">十.配置hadoop-env.sh</a></p> 
  <p id="1.%E7%BC%96%E8%BE%91hadoop-env.sh%EF%BC%9Avim%20hadoop-env.sh-toc" style="margin-left:40px;"><a href="#1.%E7%BC%96%E8%BE%91hadoop-env.sh%EF%BC%9Avim%20hadoop-env.sh" rel="nofollow" data-token="3f6bb089e22ecf194321859f3999a3ef">1.编辑hadoop-env.sh：vim hadoop-env.sh</a></p> 
  <p id="2.%E4%BF%AE%E6%94%B9JAVA_HOME%E7%9A%84%E8%B7%AF%E5%BE%84%EF%BC%8C%E4%BF%AE%E6%94%B9%E6%88%90%E5%85%B7%E4%BD%93%E7%9A%84%E8%B7%AF%E5%BE%84%E3%80%82-toc" style="margin-left:40px;"><a href="#2.%E4%BF%AE%E6%94%B9JAVA_HOME%E7%9A%84%E8%B7%AF%E5%BE%84%EF%BC%8C%E4%BF%AE%E6%94%B9%E6%88%90%E5%85%B7%E4%BD%93%E7%9A%84%E8%B7%AF%E5%BE%84%E3%80%82" rel="nofollow" data-token="2e013a91b7ebbb362b44279bc85e1090">2.修改JAVA_HOME的路径，修改成具体的路径。</a></p> 
  <p id="1.%20cat%20%2Fetc%2Fprofile%C2%A0%20%C2%A0%E6%9F%A5%E7%9C%8B%E6%89%80%E6%9C%89%E7%9A%84%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E8%B7%AF%E5%BE%84-toc" style="margin-left:80px;"><a href="#1.%20cat%20%2Fetc%2Fprofile%C2%A0%20%C2%A0%E6%9F%A5%E7%9C%8B%E6%89%80%E6%9C%89%E7%9A%84%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E8%B7%AF%E5%BE%84" rel="nofollow" data-token="f69087bb2db1eaabd9131e968f2ba4d4">1. cat /etc/profile&nbsp; &nbsp;查看所有的配置文件路径</a></p> 
  <p id="3.%E4%BF%AE%E6%94%B9HADOOP_CONF_DIR%E7%9A%84%E8%B7%AF%E5%BE%84%EF%BC%8C%E4%BF%AE%E6%94%B9%E4%B8%BA%E5%85%B7%E4%BD%93%E7%9A%84%E8%B7%AF%E5%BE%84%EF%BC%8C-toc" style="margin-left:40px;"><a href="#3.%E4%BF%AE%E6%94%B9HADOOP_CONF_DIR%E7%9A%84%E8%B7%AF%E5%BE%84%EF%BC%8C%E4%BF%AE%E6%94%B9%E4%B8%BA%E5%85%B7%E4%BD%93%E7%9A%84%E8%B7%AF%E5%BE%84%EF%BC%8C" rel="nofollow" data-token="ea9f2aea538b897490469e79ca5f749f">3.修改HADOOP_CONF_DIR的路径，修改为具体的路径，</a></p> 
  <p id="4.%E4%BF%9D%E5%AD%98%E9%80%80%E5%87%BA%E6%96%87%E4%BB%B6-toc" style="margin-left:40px;"><a href="#4.%E4%BF%9D%E5%AD%98%E9%80%80%E5%87%BA%E6%96%87%E4%BB%B6" rel="nofollow" data-token="9fde574793b2207fcf778a16ad9db567">4.保存退出文件</a></p> 
  <p id="5.%E9%87%8D%E6%96%B0%E5%8A%A0%E8%BD%BD%E7%94%9F%E6%95%88%EF%BC%9A-toc" style="margin-left:40px;"><a href="#5.%E9%87%8D%E6%96%B0%E5%8A%A0%E8%BD%BD%E7%94%9F%E6%95%88%EF%BC%9A" rel="nofollow" data-token="7cd780c3570060c80ae9cba9ae4bcc4c">5.重新加载生效：</a></p> 
  <p id="%E5%8D%81%E4%B8%80.%E7%BC%96%E8%BE%91core-site.xml%EF%BC%8C%E6%B7%BB%E5%8A%A0%E5%A6%82%E4%B8%8B%E5%86%85%E5%AE%B9%EF%BC%9A-toc" style="margin-left:0px;"><a href="#%E5%8D%81%E4%B8%80.%E7%BC%96%E8%BE%91core-site.xml%EF%BC%8C%E6%B7%BB%E5%8A%A0%E5%A6%82%E4%B8%8B%E5%86%85%E5%AE%B9%EF%BC%9A" rel="nofollow" data-token="93e491f015e3ac9352e04ffda10bd076">十一.编辑core-site.xml，添加如下内容：</a></p> 
  <p id="%E5%8D%81%E4%BA%8C.%E7%BC%96%E8%BE%91hdfs-site.xml-toc" style="margin-left:0px;"><a href="#%E5%8D%81%E4%BA%8C.%E7%BC%96%E8%BE%91hdfs-site.xml" rel="nofollow" data-token="83d1fbb15961b8802c22000dcdbccdf3">十二.编辑hdfs-site.xml</a></p> 
  <p id="%E5%8D%81%E4%B8%89.%E7%BC%96%E8%BE%91mapred-site.xml-toc" style="margin-left:0px;"><a href="#%E5%8D%81%E4%B8%89.%E7%BC%96%E8%BE%91mapred-site.xml" rel="nofollow" data-token="e7c3b56fbcfecf1838415d9bc29c69c6">十三.编辑mapred-site.xml</a></p> 
  <p id="%E5%8D%81%E5%9B%9B.%E7%BC%96%E8%BE%91yarn-site.xml-toc" style="margin-left:0px;"><a href="#%E5%8D%81%E5%9B%9B.%E7%BC%96%E8%BE%91yarn-site.xml" rel="nofollow" data-token="c1dc7c1784ec7ec106e60515ae8ae56d">十四.编辑yarn-site.xml</a></p> 
  <p id="%E5%8D%81%E4%BA%94.%E7%BC%96%E8%BE%91slaves-toc" style="margin-left:0px;"><a href="#%E5%8D%81%E4%BA%94.%E7%BC%96%E8%BE%91slaves" rel="nofollow" data-token="43d0900c09001641da9f8e23624a3988">十五.编辑slaves</a></p> 
  <p id="%E5%8D%81%E5%85%AD.%E6%8B%B7%E8%B4%9D%E5%88%B0%E5%85%B6%E4%BB%96%E8%8A%82%E7%82%B9%E4%B8%8A-toc" style="margin-left:0px;"><a href="#%E5%8D%81%E5%85%AD.%E6%8B%B7%E8%B4%9D%E5%88%B0%E5%85%B6%E4%BB%96%E8%8A%82%E7%82%B9%E4%B8%8A" rel="nofollow" data-token="85c8f7479347cc116384a7a9a92a2e93">十六.拷贝到其他节点上</a></p> 
  <p id="%E5%8D%81%E4%B8%83.%E9%85%8D%E7%BD%AE%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F%20vim%2Fetc%2Fprofile-toc" style="margin-left:0px;"><a href="#%E5%8D%81%E4%B8%83.%E9%85%8D%E7%BD%AE%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F%20vim%2Fetc%2Fprofile" rel="nofollow" data-token="c1765df64915dc78e2eb27a255edb956">十七.配置环境变量 vim/etc/profile</a></p> 
  <p id="%E5%8D%81%E5%85%AB.%E5%90%AF%E5%8A%A8zookeeper-toc" style="margin-left:0px;"><a href="#%E5%8D%81%E5%85%AB.%E5%90%AF%E5%8A%A8zookeeper" rel="nofollow" data-token="6128f5f80865bfb4e190d3b6fdde8715">十八.启动zookeeper</a></p> 
  <p id="%E5%8D%81%E4%B9%9D.%E6%A0%BC%E5%BC%8F%E5%8C%96zookeeper%EF%BC%9A-toc" style="margin-left:0px;"><a href="#%E5%8D%81%E4%B9%9D.%E6%A0%BC%E5%BC%8F%E5%8C%96zookeeper%EF%BC%9A" rel="nofollow" data-token="18e011970fb0fa21051859b9ebe7b046">十九.格式化zookeeper：</a></p> 
  <p id="%E4%BA%8C%E5%8D%81.%E5%90%AF%E5%8A%A8JournalNode%EF%BC%9A-toc" style="margin-left:0px;"><a href="#%E4%BA%8C%E5%8D%81.%E5%90%AF%E5%8A%A8JournalNode%EF%BC%9A" rel="nofollow" data-token="979554aa0342314c0cc66c7e5d407ed5">二十.启动JournalNode：</a></p> 
  <p id="%E4%BA%8C%E5%8D%81%E4%B8%80.%E5%9C%A8%E7%AC%AC%E4%B8%80%E5%8F%B0%E8%8A%82%E7%82%B9%E4%B8%8A%E6%A0%BC%E5%BC%8F%E5%8C%96NameNode%EF%BC%9A-toc" style="margin-left:0px;"><a href="#%E4%BA%8C%E5%8D%81%E4%B8%80.%E5%9C%A8%E7%AC%AC%E4%B8%80%E5%8F%B0%E8%8A%82%E7%82%B9%E4%B8%8A%E6%A0%BC%E5%BC%8F%E5%8C%96NameNode%EF%BC%9A" rel="nofollow" data-token="2142967f98890b39f589b9c91c74406c">二十一.在第一台节点上格式化NameNode：</a></p> 
  <p id="%E4%BA%8C%E5%8D%81%E4%BA%8C.%E5%9C%A8%E7%AC%AC%E4%B8%80%E5%8F%B0%E8%8A%82%E7%82%B9%E4%B8%8A%E5%90%AF%E5%8A%A8NameNode%EF%BC%9A-toc" style="margin-left:0px;"><a href="#%E4%BA%8C%E5%8D%81%E4%BA%8C.%E5%9C%A8%E7%AC%AC%E4%B8%80%E5%8F%B0%E8%8A%82%E7%82%B9%E4%B8%8A%E5%90%AF%E5%8A%A8NameNode%EF%BC%9A" rel="nofollow" data-token="eb97c9148eb9d77a2086c63ddb7675ee">二十二.在第一台节点上启动NameNode：</a></p> 
  <p id="%E4%BA%8C%E5%8D%81%E4%B8%89.%E5%9C%A8%E7%AC%AC%E4%BA%8C%E5%8F%B0%E8%8A%82%E7%82%B9%E4%B8%8A%E6%A0%BC%E5%BC%8F%E5%8C%96NameNode%EF%BC%9A-toc" style="margin-left:0px;"><a href="#%E4%BA%8C%E5%8D%81%E4%B8%89.%E5%9C%A8%E7%AC%AC%E4%BA%8C%E5%8F%B0%E8%8A%82%E7%82%B9%E4%B8%8A%E6%A0%BC%E5%BC%8F%E5%8C%96NameNode%EF%BC%9A" rel="nofollow" data-token="d7eba2f089ff73f412fa2b77e93d82ca">二十三.在第二台节点上格式化NameNode：</a></p> 
  <p id="%E4%BA%8C%E5%8D%81%E5%9B%9B.%E5%9C%A8%E7%AC%AC%E4%BA%8C%E5%8F%B0%E8%8A%82%E7%82%B9%E4%B8%8A%E5%90%AF%E5%8A%A8NameNode%EF%BC%9A-toc" style="margin-left:0px;"><a href="#%E4%BA%8C%E5%8D%81%E5%9B%9B.%E5%9C%A8%E7%AC%AC%E4%BA%8C%E5%8F%B0%E8%8A%82%E7%82%B9%E4%B8%8A%E5%90%AF%E5%8A%A8NameNode%EF%BC%9A" rel="nofollow" data-token="f203b2cf89f82cb06e089eab5158b822">二十四.在第二台节点上启动NameNode：</a></p> 
  <p id="%E4%BA%8C%E5%8D%81%E4%BA%94.%E5%9C%A8%E4%B8%89%E5%8F%B0%E8%8A%82%E7%82%B9%E4%B8%8A%E5%90%AF%E5%8A%A8DataNode%EF%BC%9A-toc" style="margin-left:0px;"><a href="#%E4%BA%8C%E5%8D%81%E4%BA%94.%E5%9C%A8%E4%B8%89%E5%8F%B0%E8%8A%82%E7%82%B9%E4%B8%8A%E5%90%AF%E5%8A%A8DataNode%EF%BC%9A" rel="nofollow" data-token="2197ffb0c7f55813dfd41e95031e9c06">二十五.在三台节点上启动DataNode：</a></p> 
  <p id="%E4%BA%8C%E5%8D%81%E5%85%AD.%E5%9C%A8%E7%AC%AC%E4%B8%80%E5%8F%B0%E8%8A%82%E7%82%B9%E5%92%8C%E7%AC%AC%E4%BA%8C%E8%8A%82%E7%82%B9%E4%B8%8A%E5%90%AF%E5%8A%A8zkfc%EF%BC%88FailoverController%EF%BC%89%EF%BC%9A-toc" style="margin-left:0px;"><a href="#%E4%BA%8C%E5%8D%81%E5%85%AD.%E5%9C%A8%E7%AC%AC%E4%B8%80%E5%8F%B0%E8%8A%82%E7%82%B9%E5%92%8C%E7%AC%AC%E4%BA%8C%E8%8A%82%E7%82%B9%E4%B8%8A%E5%90%AF%E5%8A%A8zkfc%EF%BC%88FailoverController%EF%BC%89%EF%BC%9A" rel="nofollow" data-token="31d0c7b3e20a493e75a416ff59c3b6f3">二十六.在第一台节点和第二节点上启动zkfc（FailoverController）：</a></p> 
  <p id="1.%E6%95%88%E6%9E%9C%E5%9B%BE-toc" style="margin-left:40px;"><a href="#1.%E6%95%88%E6%9E%9C%E5%9B%BE" rel="nofollow" data-token="c40ec4ccba9412406195cee72c18a9f5">1.效果图</a></p> 
  <p id="%E4%BA%8C%E5%8D%81%E4%B8%83.%E5%9C%A8%E7%AC%AC%E4%B8%80%E4%B8%AA%E8%8A%82%E7%82%B9%E4%B8%8A%E5%90%AF%E5%8A%A8Yarn%EF%BC%9A-toc" style="margin-left:0px;"><a href="#%E4%BA%8C%E5%8D%81%E4%B8%83.%E5%9C%A8%E7%AC%AC%E4%B8%80%E4%B8%AA%E8%8A%82%E7%82%B9%E4%B8%8A%E5%90%AF%E5%8A%A8Yarn%EF%BC%9A" rel="nofollow" data-token="b7467bb40f48438d1e289cf356000a61">二十七.在第一个节点上启动Yarn：</a></p> 
  <p id="%E4%BA%8C%E5%8D%81%E5%85%AB.%E5%9C%A8%E7%AC%AC%E4%B8%89%E4%B8%AA%E8%8A%82%E7%82%B9%E4%B8%8A%E5%90%AF%E5%8A%A8ResourceManager%EF%BC%9A-toc" style="margin-left:0px;"><a href="#%E4%BA%8C%E5%8D%81%E5%85%AB.%E5%9C%A8%E7%AC%AC%E4%B8%89%E4%B8%AA%E8%8A%82%E7%82%B9%E4%B8%8A%E5%90%AF%E5%8A%A8ResourceManager%EF%BC%9A" rel="nofollow" data-token="f6bc1f67a71c5505f8b8054375b0842d">二十八.在第三个节点上启动ResourceManager：</a></p> 
  <p id="%E4%BA%8C%E5%8D%81%E4%B9%9D.%E5%90%AF%E5%8A%A8%E3%80%81%E5%85%B3%E9%97%AD-toc" style="margin-left:0px;"><a href="#%E4%BA%8C%E5%8D%81%E4%B9%9D.%E5%90%AF%E5%8A%A8%E3%80%81%E5%85%B3%E9%97%AD" rel="nofollow" data-token="0a3b46269b6fd3d39e943a265e0104ca">二十九.启动、关闭</a></p> 
  <p id="1.start-all.sh%20%E5%90%AF%E5%8A%A8%E6%9C%8D%E5%8A%A1-toc" style="margin-left:40px;"><a href="#1.start-all.sh%20%E5%90%AF%E5%8A%A8%E6%9C%8D%E5%8A%A1" rel="nofollow" data-token="12f66d1d7487e26af2cbd6e61bc67c2d">1.start-all.sh 启动服务</a></p> 
  <p id="2.stop-all.sh%C2%A0%20%E5%85%B3%E9%97%AD%E6%9C%8D%E5%8A%A1-toc" style="margin-left:40px;"><a href="#2.stop-all.sh%C2%A0%20%E5%85%B3%E9%97%AD%E6%9C%8D%E5%8A%A1" rel="nofollow" data-token="074c5ffcaa77393135543426b1d6e2d0">2.stop-all.sh&nbsp; 关闭服务</a></p> 
  <hr id="hr-toc">
  <p>&nbsp;</p> 
  <p><strong><span style="color:#f33b45;">最少需要三个虚拟机，或者十三个云主机</span></strong></p> 
  <h1 id="%E4%B8%80.%E6%B0%B8%E4%B9%85%E5%85%B3%E9%97%AD%E9%98%B2%E7%81%AB%E5%A2%99">一.永久关闭防火墙</h1> 
  <p><strong>已经关闭，忽略</strong></p> 
  <p><img alt="" class="has" height="62" src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190628113110121.png" width="376"></p> 
  <p>&nbsp;</p> 
  <h1 id="%E4%BA%8C.%E9%85%8D%E7%BD%AE%E4%B8%BB%E6%9C%BA%E5%90%8D">二.配置主机名</h1> 
  <p><strong>需要注意的是Hadoop的集群中的主机名不能有_。如果存在_会导致Hadoop集群无法找到这群主机，从而无法启动！</strong></p> 
  <h2 id="1.%E7%BC%96%E8%BE%91network%E6%96%87%E4%BB%B6%EF%BC%9Avim%20%2Fetc%2Fsysconfig%2Fnetwork"><strong>1.编辑network文件：vim /etc/sysconfig/network</strong></h2> 
  <p><img alt="" class="has" height="62" src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190628113246251.png" width="176"></p> 
  <h2 id="2.%E5%B0%86HOSTNAME%E5%B1%9E%E6%80%A7%E6%94%B9%E4%B8%BA%E6%8C%87%E5%AE%9A%E7%9A%84%E4%B8%BB%E6%9C%BA%E5%90%8D%EF%BC%8C"><strong>2.将HOSTNAME属性改为指定的主机名，</strong></h2> 
  <p><img alt="" class="has" height="21" src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190628113411319.png" width="160"></p> 
  <h2 id="3.%E8%AE%A9network%E6%96%87%E4%BB%B6%E9%87%8D%E6%96%B0%E7%94%9F%E6%95%88%EF%BC%9Asource%20%2Fetc%2Fsysconfig%2Fnetwork"><strong>3.让network文件重新生效：source /etc/sysconfig/network</strong></h2> 
  <p><img alt="" class="has" height="45" src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190628113443312.png" width="379"></p> 
  <h1>&nbsp;</h1> 
  <h1 id="%E4%B8%89.%E9%85%8D%E7%BD%AEhosts%E6%96%87%E4%BB%B6%EF%BC%8C%E5%B0%86%E4%B8%BB%E6%9C%BA%E5%90%8D%E5%92%8Cip%E5%9C%B0%E5%9D%80%E8%BF%9B%E8%A1%8C%E6%98%A0%E5%B0%84">三.配置hosts文件，将主机名和ip地址进行映射</h1> 
  <h2 id="1.%E7%BC%96%E8%BE%91hosts%E6%96%87%E4%BB%B6%EF%BC%9Avim%20%2Fetc%2Fhosts">1.编辑hosts文件：vim /etc/hosts</h2> 
  <p><img alt="" class="has" height="65" src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190628113554210.png" width="562"></p> 
  <h2 id="2.%E5%B0%86%E4%B8%BB%E6%9C%BA%E5%90%8D%E5%92%8Cip%E5%9C%B0%E5%9D%80%E5%AF%B9%E5%BA%94%EF%BC%8C">2.将主机名和ip地址对应，</h2> 
  <p><img alt="" class="has" height="65" src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190628113554210.png" width="562"></p> 
  <h1>&nbsp;</h1> 
  <h1 id="%E5%9B%9B.%E9%85%8D%E7%BD%AEssh%E8%BF%9B%E8%A1%8C%E5%85%8D%E5%AF%86%E4%BA%92%E9%80%9A">四.配置ssh进行免密互通</h1> 
  <h2 id="1.%E7%94%9F%E6%88%90%E8%87%AA%E5%B7%B1%E7%9A%84%E5%85%AC%E9%92%A5%E5%92%8C%E7%A7%81%E9%92%A5%2C%E7%94%9F%E6%88%90%E7%9A%84%E5%85%AC%E7%A7%81%E9%92%A5%E5%B0%86%E8%87%AA%E5%8A%A8%E5%AD%98%E6%94%BE%E5%9C%A8%2Froot%2F.ssh%E7%9B%AE%E5%BD%95%E4%B8%8B%EF%BC%9Assh-keygen">1.生成自己的公钥和私钥,生成的公私钥将自动存放在/root/.ssh目录下：ssh-keygen</h2> 
  <p><img alt="" class="has" height="363" src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190628113741759.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0xpdVk1MjE=,size_16,color_FFFFFF,t_70" width="426"></p> 
  <h2 id="2.%E6%8A%8A%E7%94%9F%E6%88%90%E7%9A%84%E5%85%AC%E9%92%A5%E6%8B%B7%E8%B4%9D%E5%88%B0%E8%BF%9C%E7%A8%8B%E6%9C%BA%E5%99%A8%E4%B8%8A%EF%BC%8C">2.把生成的公钥拷贝到远程机器上，</h2> 
  <p><img alt="" class="has" height="98" src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190628113919787.png" width="518"></p> 
  <p><strong>格式为：ssh-copy-id [user]@host，例如：ssh-copy-id root@hadoop01</strong></p> 
  <h1>&nbsp;</h1> 
  <h1 id="%E4%BA%94.%E9%87%8D%E5%90%AFLinux%E8%AE%A9%E4%B8%BB%E6%9C%BA%E5%90%8D%E7%9A%84%E4%BF%AE%E6%94%B9%E7%94%9F%E6%95%88%EF%BC%9Areboot">五.重启Linux让主机名的修改生效：reboot</h1> 
  <p><img alt="" class="has" height="139" src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190628114337913.png" width="416"></p> 
  <h1>&nbsp;</h1> 
  <h1 id="%E5%85%AD.%E5%AE%89%E8%A3%85JDK">六.安装JDK</h1> 
  <p><img alt="" class="has" height="441" src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190628114449573.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0xpdVk1MjE=,size_16,color_FFFFFF,t_70" width="398"></p> 
  <h1>&nbsp;</h1> 
  <h1 id="%E4%B8%83.%E4%B8%8A%E4%BC%A0%E6%88%96%E8%80%85%E4%B8%8B%E8%BD%BDHadoop%E5%AE%89%E8%A3%85%E5%8C%85%E5%88%B0Linux%E4%B8%AD">七.上传或者下载Hadoop安装包到Linux中</h1> 
  <p><img alt="" class="has" height="248" src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/2019062812370740.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0xpdVk1MjE=,size_16,color_FFFFFF,t_70" width="749"></p> 
  <h1>&nbsp;</h1> 
  <h1 id="1.%E8%A7%A3%E5%8E%8B%E5%AE%89%E8%A3%85%E5%8C%85%EF%BC%9Atar%20-xvf%20hadoop-2.7.1_64bit.tar.gz"><strong>八.解压安装包tar -xvf&nbsp;hadoop-2.7.1_64bit.tar.gz</strong></h1> 
  <p><img alt="" class="has" height="127" src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190628123910235.png" width="338"></p> 
  <h1>&nbsp;</h1> 
  <h1 id="2.%E8%BF%9B%E5%85%A5Hadoop%E7%9A%84%E5%AE%89%E8%A3%85%E7%9B%AE%E5%BD%95%E7%9A%84%E5%AD%90%E7%9B%AE%E5%BD%95etc%2Fhadoop%EF%BC%8C%E9%85%8D%E7%BD%AEHadoop%EF%BC%9Acd%20hadoop2.7.1%2Fetc%2Fhadoop">九.adoop的安装目录的子目录etc/hadoop</h1> 
  <p>配置Hadoop：cd hadoop2.7.1/etc/hadoop</p> 
  <p><img alt="" class="has" height="95" src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/2019062816255953.png" width="421"></p> 
  <h1>&nbsp;</h1> 
  <h1 id="%E5%8D%81.%E9%85%8D%E7%BD%AEhadoop-env.sh">十.配置hadoop-env.sh</h1> 
  <h2 id="1.%E7%BC%96%E8%BE%91hadoop-env.sh%EF%BC%9Avim%20hadoop-env.sh"><strong>1.编辑hadoop-env.sh：vim hadoop-env.sh</strong></h2> 
  <p><img alt="" class="has" height="95" src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190628162618791.png" width="421"></p> 
  <h2 id="2.%E4%BF%AE%E6%94%B9JAVA_HOME%E7%9A%84%E8%B7%AF%E5%BE%84%EF%BC%8C%E4%BF%AE%E6%94%B9%E6%88%90%E5%85%B7%E4%BD%93%E7%9A%84%E8%B7%AF%E5%BE%84%E3%80%82"><strong>2.修改JAVA_HOME的路径，修改成具体的路径。</strong></h2> 
  <h3 id="1.%20cat%20%2Fetc%2Fprofile%C2%A0%20%C2%A0%E6%9F%A5%E7%9C%8B%E6%89%80%E6%9C%89%E7%9A%84%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E8%B7%AF%E5%BE%84"><strong>1. cat /etc/profile&nbsp; &nbsp;查看所有的配置文件路径</strong></h3> 
  <p><img alt="" class="has" height="145" src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190628162914779.png" width="373"></p> 
  <p>//<strong>home/presoftware/jdk1.8</strong></p> 
  <p><strong>例如：export JAVA_HOME=/home/presoftware/jdk1.8</strong></p> 
  <p><img alt="" class="has" height="109" src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190628163106655.png" width="347"></p> 
  <h2 id="3.%E4%BF%AE%E6%94%B9HADOOP_CONF_DIR%E7%9A%84%E8%B7%AF%E5%BE%84%EF%BC%8C%E4%BF%AE%E6%94%B9%E4%B8%BA%E5%85%B7%E4%BD%93%E7%9A%84%E8%B7%AF%E5%BE%84%EF%BC%8C"><strong>3.修改HADOOP_CONF_DIR的路径，修改为具体的路径，</strong></h2> 
  <p><img alt="" class="has" height="105" src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190628163255761.png" width="483"></p> 
  <p><strong>例如：export HADOOP_CONF_DIR=/home/software/hadoop-2.7.1/etc/hadoop</strong></p> 
  <h2 id="4.%E4%BF%9D%E5%AD%98%E9%80%80%E5%87%BA%E6%96%87%E4%BB%B6"><strong>4.保存退出文件</strong></h2> 
  <p><strong>：wq</strong></p> 
  <h2 id="5.%E9%87%8D%E6%96%B0%E5%8A%A0%E8%BD%BD%E7%94%9F%E6%95%88%EF%BC%9A"><strong>5.重新加载生效：</strong></h2> 
  <p><strong>source hadoop-env.sh</strong></p> 
  <p>&nbsp;</p> 
  <h1 id="%E5%8D%81%E4%B8%80.%E7%BC%96%E8%BE%91core-site.xml%EF%BC%8C%E6%B7%BB%E5%8A%A0%E5%A6%82%E4%B8%8B%E5%86%85%E5%AE%B9%EF%BC%9A"><strong>十一.</strong>编辑core-site.xml，添加如下内容：</h1> 
  <pre class="has">
<code class="language-html">	&lt;!--指定hdfs的nameservice，为整个集群起一个别名--&gt;
	&lt;property&gt;
	&nbsp;&nbsp;&nbsp;&nbsp;&lt;name&gt;fs.defaultFS&lt;/name&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
	&nbsp;&nbsp;&nbsp;&nbsp;&lt;value&gt;hdfs://ns&lt;/value&gt;
	&lt;/property&gt;
	&lt;!--指定Hadoop数据临时存放目录--&gt;
	&lt;property&gt;
	&nbsp;&nbsp;&nbsp;&nbsp;&lt;name&gt;hadoop.tmp.dir&lt;/name&gt;
	&nbsp;&nbsp;&nbsp;&nbsp;&lt;value&gt;/home/software/hadoop-2.7.1/tmp&lt;/value&gt;
	&lt;/property&gt;&nbsp;
	&lt;!--指定zookeeper的存放地址--&gt;
	&lt;property&gt;
	&nbsp;&nbsp;&nbsp;&nbsp;&lt;name&gt;ha.zookeeper.quorum&lt;/name&gt;
	&nbsp;&nbsp;&nbsp;&nbsp;&lt;value&gt;liuyong:2181,liuyong01:2181,liuyong02:2181&lt;/value&gt;

&lt;/property&gt;&nbsp;</code></pre> 
  <h1 id="%E2%80%8B"><img alt="" class="has" height="277" src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190703100249326.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0xpdVk1MjE=,size_16,color_FFFFFF,t_70" width="446"></h1> 
  <h1 id="%E5%8D%81%E4%BA%8C.%E7%BC%96%E8%BE%91hdfs-site.xml">十二.编辑hdfs-site.xml</h1> 
  <pre class="has">
<code class="language-html">	&lt;!--执行hdfs的nameservice为ns，注意要和core-site.xml中的名称保持一致--&gt;
	&lt;property&gt;
	&nbsp;&nbsp;&nbsp;&nbsp;&lt;name&gt;dfs.nameservices&lt;/name&gt;
	&nbsp;&nbsp;&nbsp;&nbsp;&lt;value&gt;ns&lt;/value&gt;
	&lt;/property&gt;
	&lt;!--ns集群下有两个namenode，分别为nn1,&nbsp;nn2--&gt;
	&lt;property&gt;
	&nbsp;&nbsp;&nbsp;&nbsp;&lt;name&gt;dfs.ha.namenodes.ns&lt;/name&gt;
	&nbsp;&nbsp;&nbsp;&nbsp;&lt;value&gt;nn1,nn2&lt;/value&gt;
	&lt;/property&gt;
	&lt;!--nn1的RPC通信--&gt;
	&lt;property&gt;
	&nbsp;&nbsp;&nbsp;&nbsp;&lt;name&gt;dfs.namenode.rpc-address.ns.nn1&lt;/name&gt;
	&nbsp;&nbsp;&nbsp;&nbsp;&lt;value&gt;hadoop01:9000&lt;/value&gt;
	&lt;/property&gt;
	&lt;!--nn1的http通信--&gt;
	&lt;property&gt;
	&nbsp;&nbsp;&nbsp;&nbsp;&lt;name&gt;dfs.namenode.http-address.ns.nn1&lt;/name&gt;
	&nbsp;&nbsp;&nbsp;&nbsp;&lt;value&gt;hadoop01:50070&lt;/value&gt;
	&lt;/property&gt;
	&lt;!--&nbsp;nn2的RPC通信地址&nbsp;--&gt;
	&lt;property&gt;
	&nbsp;&nbsp;&nbsp;&nbsp;&lt;name&gt;dfs.namenode.rpc-address.ns.nn2&lt;/name&gt;
	&nbsp;&nbsp;&nbsp;&nbsp;&lt;value&gt;hadoop02:9000&lt;/value&gt;
	&lt;/property&gt;
	&lt;!--&nbsp;nn2的http通信地址&nbsp;--&gt;
	&lt;property&gt;
	&nbsp;&nbsp;&nbsp;&nbsp;&lt;name&gt;dfs.namenode.http-address.ns.nn2&lt;/name&gt;
	&nbsp;&nbsp;&nbsp;&nbsp;&lt;value&gt;hadoop02:50070&lt;/value&gt;
	&lt;/property&gt;
	&lt;!--指定namenode的元数据在JournalNode上存放的位置，这样，namenode2可以从journalnode集群里的指定位置上获取信息，达到热备效果--&gt;
	&lt;property&gt;
	&nbsp;&nbsp;&nbsp;&nbsp;&lt;name&gt;dfs.namenode.shared.edits.dir&lt;/name&gt;
	&nbsp;&nbsp;&nbsp;&nbsp;&lt;value&gt;qjournal://hadoop01:8485;hadoop02:8485;hadoop03:8485/ns&lt;/value&gt;
	&lt;/property&gt;
	&lt;!--&nbsp;指定JournalNode在本地磁盘存放数据的位置&nbsp;--&gt;
	&lt;property&gt;
	&nbsp;&nbsp;&nbsp;&nbsp;&lt;name&gt;dfs.journalnode.edits.dir&lt;/name&gt;
	&nbsp;&nbsp;&nbsp;&nbsp;&lt;value&gt;/home/software/hadoop-2.7.1/tmp/journal&lt;/value&gt;
	&lt;/property&gt;
	&lt;!--&nbsp;开启NameNode故障时自动切换&nbsp;--&gt;
	&lt;property&gt;
	&nbsp;&nbsp;&nbsp;&nbsp;&lt;name&gt;dfs.ha.automatic-failover.enabled&lt;/name&gt;
	&nbsp;&nbsp;&nbsp;&nbsp;&lt;value&gt;true&lt;/value&gt;
	&lt;/property&gt;
	&lt;!--&nbsp;配置失败自动切换实现方式&nbsp;--&gt;
	&lt;property&gt;
	&nbsp;&nbsp;&nbsp;&nbsp;&lt;name&gt;dfs.client.failover.proxy.provider.ns&lt;/name&gt;
	&nbsp;&nbsp;&nbsp;&nbsp;&lt;value&gt;org.apache.hadoop.hdfs.server.namenode.ha.ConfiguredFailoverProxyProvider&lt;/value&gt;
	&lt;/property&gt;
	&lt;!--&nbsp;配置隔离机制&nbsp;--&gt;
	&lt;property&gt;
	&nbsp;&nbsp;&nbsp;&nbsp;&lt;name&gt;dfs.ha.fencing.methods&lt;/name&gt;
	&nbsp;&nbsp;&nbsp;&nbsp;&lt;value&gt;sshfence&lt;/value&gt;
	&lt;/property&gt;
	&lt;!--&nbsp;使用隔离机制时需要ssh免登陆&nbsp;--&gt;
	&lt;property&gt;
	&nbsp;&nbsp;&nbsp;&nbsp;&lt;name&gt;dfs.ha.fencing.ssh.private-key-files&lt;/name&gt;
	&nbsp;&nbsp;&nbsp;&nbsp;&lt;value&gt;/root/.ssh/id_rsa&lt;/value&gt;
	&lt;/property&gt;
	&lt;!--配置namenode存放元数据的目录，可以不配置，如果不配置则默认放到hadoop.tmp.dir下--&gt;
	&lt;property&gt;&nbsp;&nbsp;&nbsp;&nbsp;
	&nbsp;&nbsp;&nbsp;&nbsp;&lt;name&gt;dfs.namenode.name.dir&lt;/name&gt;&nbsp;&nbsp;&nbsp;&nbsp;
	&nbsp;&nbsp;&nbsp;&nbsp;&lt;value&gt;file:///home/software/hadoop-2.7.1/tmp/hdfs/name&lt;/value&gt;&nbsp;&nbsp;&nbsp;&nbsp;
	&lt;/property&gt;&nbsp;&nbsp;&nbsp;&nbsp;
	&lt;!--配置datanode存放元数据的目录，可以不配置，如果不配置则默认放到hadoop.tmp.dir下--&gt;
	&lt;property&gt;&nbsp;&nbsp;&nbsp;&nbsp;
	&nbsp;&nbsp;&nbsp;&nbsp;&lt;name&gt;dfs.datanode.data.dir&lt;/name&gt;&nbsp;&nbsp;&nbsp;&nbsp;
	&nbsp;&nbsp;&nbsp;&nbsp;&lt;value&gt;file:///home/software/hadoop-2.7.1/tmp/hdfs/data&lt;/value&gt;&nbsp;&nbsp;&nbsp;&nbsp;
	&lt;/property&gt;
	&lt;!--配置复本数量--&gt;&nbsp;&nbsp;&nbsp;&nbsp;
	&lt;property&gt;&nbsp;&nbsp;&nbsp;&nbsp;
	&nbsp;&nbsp;&nbsp;&nbsp;&lt;name&gt;dfs.replication&lt;/name&gt;&nbsp;&nbsp;&nbsp;&nbsp;
	&nbsp;&nbsp;&nbsp;&nbsp;&lt;value&gt;3&lt;/value&gt;&nbsp;&nbsp;&nbsp;&nbsp;
	&lt;/property&gt;&nbsp;&nbsp;&nbsp;
	&lt;!--设置用户的操作权限，false表示关闭权限验证，任何用户都可以操作--&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
	&lt;property&gt;&nbsp;&nbsp;&nbsp;&nbsp;
	&nbsp;&nbsp;&nbsp;&nbsp;&lt;name&gt;dfs.permissions&lt;/name&gt;&nbsp;&nbsp;&nbsp;&nbsp;
	&nbsp;&nbsp;&nbsp;&nbsp;&lt;value&gt;false&lt;/value&gt;&nbsp;&nbsp;&nbsp;&nbsp;
	&lt;/property&gt;&nbsp;&nbsp;
</code></pre> 
  <h1><img alt="" class="has" height="505" src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190703101940996.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0xpdVk1MjE=,size_16,color_FFFFFF,t_70" width="457"></h1> 
  <h1 id="%E5%8D%81%E4%B8%89.%E7%BC%96%E8%BE%91mapred-site.xml">十三.编辑mapred-site.xml</h1> 
  <p><strong>复制一份mapred-site.xml</strong></p> 
  <p><img alt="" class="has" height="90" src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190703102229439.png" width="481"></p> 
  <pre class="has">
<code class="language-html">&lt;property&gt;&nbsp;&nbsp;&nbsp;&nbsp;

&nbsp;&nbsp;&nbsp;&nbsp;&lt;name&gt;mapreduce.framework.name&lt;/name&gt;&nbsp;&nbsp;&nbsp;&nbsp;

&nbsp;&nbsp;&nbsp;&nbsp;&lt;value&gt;yarn&lt;/value&gt;&nbsp;&nbsp;&nbsp;&nbsp;

&lt;/property&gt;</code></pre> 
  <p style="margin-left:0in;"><span style="color:#000000;">&nbsp;</span><img alt="" class="has" height="135" src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/2019070310221466.png" width="431"></p> 
  <h1 id="%E5%8D%81%E5%9B%9B.%E7%BC%96%E8%BE%91yarn-site.xml">十四.编辑yarn-site.xml</h1> 
  <pre class="has">
<code class="language-html">&lt;!--配置yarn的高可用--&gt;

&lt;property&gt;

&nbsp;&nbsp;&nbsp;&nbsp;&lt;name&gt;yarn.resourcemanager.ha.enabled&lt;/name&gt;

&nbsp;&nbsp;&nbsp;&nbsp;&lt;value&gt;true&lt;/value&gt;

&lt;/property&gt;

&lt;!--指定两个resourcemaneger的名称--&gt;

&lt;property&gt;

&nbsp;&nbsp;&nbsp;&nbsp;&lt;name&gt;yarn.resourcemanager.ha.rm-ids&lt;/name&gt;

&nbsp;&nbsp;&nbsp;&nbsp;&lt;value&gt;rm1,rm2&lt;/value&gt;

&lt;/property&gt;

&lt;!--配置rm1的主机--&gt;

&lt;property&gt;

&nbsp;&nbsp;&nbsp;&nbsp;&lt;name&gt;yarn.resourcemanager.hostname.rm1&lt;/name&gt;

&nbsp;&nbsp;&nbsp;&nbsp;&lt;value&gt;hadoop01&lt;/value&gt;

&lt;/property&gt;

&lt;!--配置rm2的主机--&gt;

&lt;property&gt;

&nbsp;&nbsp;&nbsp;&nbsp;&lt;name&gt;yarn.resourcemanager.hostname.rm2&lt;/name&gt;

&nbsp;&nbsp;&nbsp;&nbsp;&lt;value&gt;hadoop03&lt;/value&gt;

&lt;/property&gt;

&lt;!--开启yarn恢复机制--&gt;

&lt;property&gt;

&nbsp;&nbsp;&nbsp;&nbsp;&lt;name&gt;yarn.resourcemanager.recovery.enabled&lt;/name&gt;

&nbsp;&nbsp;&nbsp;&nbsp;&lt;value&gt;true&lt;/value&gt;

&lt;/property&gt;

&lt;!--执行rm恢复机制实现类--&gt;

&lt;property&gt;

&nbsp;&nbsp;&nbsp;&nbsp;&lt;name&gt;yarn.resourcemanager.store.class&lt;/name&gt;

&nbsp;&nbsp;&nbsp;&nbsp;&lt;value&gt;org.apache.hadoop.yarn.server.resourcemanager.recovery.ZKRMStateStore&lt;/value&gt;

&lt;/property&gt;

&lt;!--配置zookeeper的地址--&gt;

&lt;property&gt;

&nbsp;&nbsp;&nbsp;&nbsp;&lt;name&gt;yarn.resourcemanager.zk-address&lt;/name&gt;

&nbsp;&nbsp;&nbsp;&nbsp;&lt;value&gt;hadoop01:2181,hadoop02:2181,hadoop03:2181&lt;/value&gt;

&lt;/property&gt;

&lt;!--执行yarn集群的别名--&gt;

&lt;property&gt;

&nbsp;&nbsp;&nbsp;&nbsp;&lt;name&gt;yarn.resourcemanager.cluster-id&lt;/name&gt;

&nbsp;&nbsp;&nbsp;&nbsp;&lt;value&gt;ns-yarn&lt;/value&gt;

&lt;/property&gt;

&lt;!--&nbsp;指定nodemanager启动时加载server的方式为shuffle&nbsp;server&nbsp;--&gt;

&lt;property&gt;&nbsp;&nbsp;&nbsp;&nbsp;

&nbsp;&nbsp;&nbsp;&nbsp;&lt;name&gt;yarn.nodemanager.aux-services&lt;/name&gt;&nbsp;&nbsp;&nbsp;&nbsp;

&nbsp;&nbsp;&nbsp;&nbsp;&lt;value&gt;mapreduce_shuffle&lt;/value&gt;&nbsp;&nbsp;&nbsp;&nbsp;

&lt;/property&gt;&nbsp;&nbsp;

&lt;!--&nbsp;指定resourcemanager地址&nbsp;--&gt;

&lt;property&gt;

&nbsp;&nbsp;&nbsp;&nbsp;&lt;name&gt;yarn.resourcemanager.hostname&lt;/name&gt;

&nbsp;&nbsp;&nbsp;&nbsp;&lt;value&gt;hadoop03&lt;/value&gt;

&lt;/property&gt;</code></pre> 
  <p><img alt="" class="has" height="440" src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190703102732587.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0xpdVk1MjE=,size_16,color_FFFFFF,t_70" width="321"></p> 
  <h1 id="%E5%8D%81%E4%BA%94.%E7%BC%96%E8%BE%91slaves">十五.编辑slaves</h1> 
  <p><img alt="" class="has" height="115" src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190703102831165.png" width="175"></p> 
  <p><span style="color:#f33b45;"><strong>一个节点配置完成</strong></span></p> 
  <p>&nbsp;</p> 
  <h1 id="%E5%8D%81%E5%85%AD.%E6%8B%B7%E8%B4%9D%E5%88%B0%E5%85%B6%E4%BB%96%E8%8A%82%E7%82%B9%E4%B8%8A">十六.拷贝到其他节点上</h1> 
  <p><img alt="" class="has" height="100" src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190703103051153.png" width="602"></p> 
  <p>&nbsp;</p> 
  <h1 id="%E5%8D%81%E4%B8%83.%E9%85%8D%E7%BD%AE%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F%20vim%2Fetc%2Fprofile">十七.配置环境变量 vim/etc/profile</h1> 
  <p><img alt="" class="has" height="146" src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190703103351668.png" width="371"></p> 
  <p><strong>source /etc/profile</strong></p> 
  <p><img alt="" class="has" height="102" src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190703103611253.png" width="385"></p> 
  <h1>&nbsp;</h1> 
  <h1 id="%E5%8D%81%E5%85%AB.%E5%90%AF%E5%8A%A8zookeeper">十八.启动zookeeper</h1> 
  <p>保证zookeeper集群启动，无误</p> 
  <h1 id="%E5%8D%81%E4%B9%9D.%E6%A0%BC%E5%BC%8F%E5%8C%96zookeeper%EF%BC%9A">十九.格式化zookeeper：</h1> 
  <p><strong>hdfs zkfc -formatZK&nbsp; &nbsp;在第一个节点启动</strong></p> 
  <p><img alt="" class="has" height="106" src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190703104030461.png" width="403"></p> 
  <p><strong>无报错信息&nbsp; &nbsp;说明配置无误</strong></p> 
  <p><img alt="" class="has" height="344" src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190703104057288.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0xpdVk1MjE=,size_16,color_FFFFFF,t_70" width="401"></p> 
  <h1>&nbsp;</h1> 
  <h1 id="%E4%BA%8C%E5%8D%81.%E5%90%AF%E5%8A%A8JournalNode%EF%BC%9A">二十.启动JournalNode：</h1> 
  <p><strong>hadoop-daemon.sh start journalnode</strong></p> 
  <p><img alt="" class="has" height="131" src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190703104243103.png" width="431"></p> 
  <p><strong>需要在三个节点都启动</strong></p> 
  <h1><img alt="" class="has" height="109" src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190703104406168.png" width="737"></h1> 
  <p><img alt="" class="has" height="147" src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190703104444222.png" width="603"></p> 
  <p><img alt="" class="has" height="126" src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190703104454323.png" width="618"></p> 
  <h1>&nbsp;</h1> 
  <h1 id="%E4%BA%8C%E5%8D%81%E4%B8%80.%E5%9C%A8%E7%AC%AC%E4%B8%80%E5%8F%B0%E8%8A%82%E7%82%B9%E4%B8%8A%E6%A0%BC%E5%BC%8F%E5%8C%96NameNode%EF%BC%9A">二十一.在第一台节点上格式化NameNode：</h1> 
  <p><strong>hadoop namenode -format&nbsp; &nbsp; 确定第一个为主节点</strong></p> 
  <p><img alt="" class="has" height="135" src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190703104650555.png" width="716"></p> 
  <h1>&nbsp;</h1> 
  <h1 id="%E4%BA%8C%E5%8D%81%E4%BA%8C.%E5%9C%A8%E7%AC%AC%E4%B8%80%E5%8F%B0%E8%8A%82%E7%82%B9%E4%B8%8A%E5%90%AF%E5%8A%A8NameNode%EF%BC%9A">二十二.在第一台节点上启动NameNode：</h1> 
  <p><strong>hadoop-daemon.sh start namenode&nbsp; &nbsp;能查看到NameNode已经启动</strong></p> 
  <p><img alt="" class="has" height="125" src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190703104806187.png" width="402"></p> 
  <h1>&nbsp;</h1> 
  <h1 id="%E4%BA%8C%E5%8D%81%E4%B8%89.%E5%9C%A8%E7%AC%AC%E4%BA%8C%E5%8F%B0%E8%8A%82%E7%82%B9%E4%B8%8A%E6%A0%BC%E5%BC%8F%E5%8C%96NameNode%EF%BC%9A">二十三.在第二台节点上格式化NameNode：</h1> 
  <p><strong>hdfs namenode -bootstrapStandby&nbsp; &nbsp; 备份NameNode&nbsp; 独立格式化</strong></p> 
  <p><img alt="" class="has" height="214" src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190703104908417.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0xpdVk1MjE=,size_16,color_FFFFFF,t_70" width="676"></p> 
  <h1>&nbsp;</h1> 
  <h1 id="%E4%BA%8C%E5%8D%81%E5%9B%9B.%E5%9C%A8%E7%AC%AC%E4%BA%8C%E5%8F%B0%E8%8A%82%E7%82%B9%E4%B8%8A%E5%90%AF%E5%8A%A8NameNode%EF%BC%9A">二十四.在第二台节点上启动NameNode：</h1> 
  <p><strong>hadoop-daemon.sh&nbsp; start namenode</strong></p> 
  <p><img alt="" class="has" height="136" src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190703105155581.png" width="696"></p> 
  <h1>&nbsp;</h1> 
  <h1 id="%E4%BA%8C%E5%8D%81%E4%BA%94.%E5%9C%A8%E4%B8%89%E5%8F%B0%E8%8A%82%E7%82%B9%E4%B8%8A%E5%90%AF%E5%8A%A8DataNode%EF%BC%9A">二十五.在三台节点上启动DataNode：</h1> 
  <p><strong>hadoop-daemon.sh start datanode&nbsp; 三台一起启动</strong></p> 
  <p><img alt="" class="has" height="147" src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190703105211415.png" width="732"></p> 
  <p><img alt="" class="has" height="156" src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190703105239276.png" width="697"></p> 
  <p><img alt="" class="has" height="137" src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190703105300136.png" width="715"></p> 
  <h1>&nbsp;</h1> 
  <h1 id="%E4%BA%8C%E5%8D%81%E5%85%AD.%E5%9C%A8%E7%AC%AC%E4%B8%80%E5%8F%B0%E8%8A%82%E7%82%B9%E5%92%8C%E7%AC%AC%E4%BA%8C%E8%8A%82%E7%82%B9%E4%B8%8A%E5%90%AF%E5%8A%A8zkfc%EF%BC%88FailoverController%EF%BC%89%EF%BC%9A">二十六.在第一台节点和第二节点上启动zkfc（FailoverController）：</h1> 
  <p><strong>hadoop-daemon.sh start zkfc&nbsp; &nbsp; 设置NameNode的节点启动</strong></p> 
  <p><img alt="" class="has" height="163" src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190703105419405.png" width="394"></p> 
  <p><img alt="" class="has" height="156" src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190703105433568.png" width="647"></p> 
  <h2 id="1.%E6%95%88%E6%9E%9C%E5%9B%BE">1.效果图</h2> 
  <p>在客户端启动：</p> 
  <p><img alt="" class="has" height="243" src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190703105657990.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0xpdVk1MjE=,size_16,color_FFFFFF,t_70" width="500"></p> 
  <p><img alt="" class="has" height="241" src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190703105726841.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0xpdVk1MjE=,size_16,color_FFFFFF,t_70" width="500"></p> 
  <h1 id="%E4%BA%8C%E5%8D%81%E4%B8%83.%E5%9C%A8%E7%AC%AC%E4%B8%80%E4%B8%AA%E8%8A%82%E7%82%B9%E4%B8%8A%E5%90%AF%E5%8A%A8Yarn%EF%BC%9A">二十七.在第一个节点上启动Yarn：</h1> 
  <p><strong>start-yarn.sh</strong></p> 
  <p><strong>之前会出现一个需要输入密码问题的错误，是因为我的免密登录，没有部署成功，导致后期，多次初始化NameNode造成的ID冲突，把根目录下的Tmp目录里面的数据全部清空，重新配置即可</strong></p> 
  <p><strong>下面这个问题&nbsp; 把对应的进程杀死，即可</strong></p> 
  <p><img alt="" class="has" height="145" src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190703112421517.png" width="782"></p> 
  <p><strong>实现效果图</strong></p> 
  <p><img alt="" class="has" height="161" src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190703185424771.png" width="279"></p> 
  <h1 id="%E4%BA%8C%E5%8D%81%E5%85%AB.%E5%9C%A8%E7%AC%AC%E4%B8%89%E4%B8%AA%E8%8A%82%E7%82%B9%E4%B8%8A%E5%90%AF%E5%8A%A8ResourceManager%EF%BC%9A">二十八.在第三个节点上启动ResourceManager：</h1> 
  <p><strong>yarn-daemon.sh start resourcemanager</strong></p> 
  <p><img alt="" class="has" height="147" src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/2019070318550216.png" width="628"></p> 
  <p>&nbsp;</p> 
  <h1 id="%E4%BA%8C%E5%8D%81%E4%B9%9D.%E5%90%AF%E5%8A%A8%E3%80%81%E5%85%B3%E9%97%AD">二十九.启动、关闭</h1> 
  <h2 id="1.start-all.sh%20%E5%90%AF%E5%8A%A8%E6%9C%8D%E5%8A%A1">1.start-all.sh 启动服务</h2> 
  <p><img alt="" class="has" height="253" src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190703190810932.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0xpdVk1MjE=,size_16,color_FFFFFF,t_70" width="633"></p> 
  <p><img alt="" class="has" height="183" src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190703190844768.png" width="310"></p> 
  <h2 id="2.stop-all.sh%C2%A0%20%E5%85%B3%E9%97%AD%E6%9C%8D%E5%8A%A1">2.stop-all.sh&nbsp; 关闭服务</h2> 
  <p><img alt="" class="has" height="405" src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190703190607173.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0xpdVk1MjE=,size_16,color_FFFFFF,t_70" width="628"></p> 
  <p><img alt="" class="has" height="84" src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190703190715242.png" width="241"></p> 
  <p>&nbsp;</p> 
  <p>&nbsp;</p> 
 </div> 
</div>

	<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
	<!-- 自定义广告 -->
	<ins class="adsbygoogle"
	     style="display:block"
	     data-ad-client="ca-pub-8889449066804352"
	     data-ad-slot="1494696990"
	     data-ad-format="auto"
	     data-full-width-responsive="true"></ins>
	<script>
		(adsbygoogle = window.adsbygoogle || []).push({});
	</script>


        <br />
        <a href="https://uzshare.com/">更多精彩内容</a>
      </section>
      
      <header style="right: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
        <ul style="display: block;">
          <li><a href="/" style="line-height: 40px;padding-top:0px;">回首页</a></li>
        </ul>
      </header>
      <header class="sm-hidden" style="right: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
          <img src="https://uzzz.org.cn/imgqcode.png" style="width:160px;" />
      </header>
      
      <header class="sm-hidden" style="left: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
          <img src="https://uzzz.org.cn/hou_imgqcode.png" style="width:160px;">
      </header>
    </div>
    
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->

    <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?d293c49e1e4bfe8f276695a5aa953300";
      var s = document.getElementsByTagName("script")[0]; 
      s.parentNode.insertBefore(hm, s);
    })();
    </script>

  </body>
</html>
