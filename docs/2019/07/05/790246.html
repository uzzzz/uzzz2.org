<!doctype html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

<!-- Begin Jekyll SEO tag v2.5.0 -->
<title>从LSTM到GRU基于门控的循环神经网络总结 | 有组织在！</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="从LSTM到GRU基于门控的循环神经网络总结" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="1.概述 为了改善基本RNN的长期依赖问题，一种方法是引入门控机制来控制信息的累积速度，包括有选择性地加入新的信息，并有选择性遗忘之前累积的信息。下面主要介绍两种基于门控的循环神经网络：长短时记忆网络和门控循环单元网络。因为基本的RNN即 h t = f ( U h t − 1 + W x t + b ) \mathbf{h}_{t}=f\left(U \mathbf{h}_{t-1}+W \mathbf{x}_{t}+\mathbf{b}\right) ht​=f(Uht−1​+Wxt​+b)，每层的隐状态都是由前一层的隐状态经变换和激活函数得到的，反向传播求导时，最终得到的导数会包含每步梯度的连乘，会导致梯度爆炸或消失。所以，基本的RNN很难处理长期依赖问题，即无法学习到序列中蕴含的间隔时间较长的规律。 2.长短时记忆网络LSTM 2.1长短时记忆网络是基本的循环神经网络的一种变体，可以有效的解决简单RNN的梯度爆炸或消失问题。LSTM网络主要改进在下面两个方面： 1.新的内部状态 c t \mathbf{c}_{t} ct​：LSTM网络引入一个新的内部状态 c t \mathbf{c}_{t} ct​，专门进行线性的循环信息传递，同时输出信息给隐藏层的外部状态 h t \mathbf{h}_{t} ht​. c t = f t ⊙ c t − 1 + i t ⊙ c ~ t h t = o t ⊙ tanh ⁡ ( c t ) \begin{aligned} \mathbf{c}_{t} &amp;amp;=\mathbf{f}_{t} \odot \mathbf{c}_{t-1}+\mathbf{i}_{t} \odot \tilde{\mathbf{c}}_{t} \\ \mathbf{h}_{t} &amp;amp;=\mathbf{o}_{t} \odot \tanh \left(\mathbf{c}_{t}\right) \end{aligned} ct​ht​​=ft​⊙ct−1​+it​⊙c~t​=ot​⊙tanh(ct​)​ 符号说明： f t \mathbf{f}_{t} ft​、 i t \mathbf{i}_{t} it​、 o t \mathbf{o}_{t} ot​分别代表遗忘门、输入门、输出门用来控制信息传递的路径；⊙表示向量元素的点乘； c t − 1 \mathbf{c}_{t-1} ct−1​表示上一时刻的记忆单元； c ~ t \tilde{\mathbf{c}}_{t} c~t​表示通过非线性函数得到的候选状态。 c ~ t = tanh ⁡ ( W c x t + U c h t − 1 + b c ) \tilde{\mathbf{c}}_{t}=\tanh \left(W_{c} \mathbf{x}_{t}+U_{c} \mathbf{h}_{t-1}+\mathbf{b}_{c}\right) c~t​=tanh(Wc​xt​+Uc​ht−1​+bc​) 在每个时刻t，LSTM网络的内部状态 c t \mathbf{c}_{t} ct​记录了到当前时刻为止的历史信息。 2.门控机制：LSTM网络引入了门控机制，用来控制信息传递的路径， f t \mathbf{f}_{t} ft​、 i t \mathbf{i}_{t} it​、 o t \mathbf{o}_{t} ot​分别代表遗忘门、输入门、输出门。这里的门概念类似于电路中的逻辑门概念，1表示开放状态，允许信息通过；0表示关闭状态，阻止信息通过。LSTM网络中的门是一个抽象的概念，借助sigmiod函数，使得输出值在(0,1)之间，表示以一定的比例运行信息通过。三个门的作用如下： 遗忘门 f t \mathbf{f}_{t} ft​控制上一时刻的内部状态 c t − 1 \mathbf{c}_{t-1} ct−1​需要遗忘多少信息 输入门 i t \mathbf{i}_{t} it​控制当前时刻的候选状态 c ~ t \tilde{\mathbf{c}}_{t} c~t​有多少信息需要保存 输出门 o t \mathbf{o}_{t} ot​控制当前时刻的内部状态 c t \mathbf{c}_{t} ct​有多少信息需要输出给外部状态 h t \mathbf{h}_{t} ht​ 当 f t = 0 , i t = 1 \mathbf{f}_{t}=0, \mathbf{i}_{t}=1 ft​=0,it​=1时，记忆单元 c t \mathbf{c}_{t} ct​将历史信息清空，并将候选状态向量 c ~ t \tilde{\mathbf{c}}_{t} c~t​写入。但此时记忆单元 c t \mathbf{c}_{t} ct​依然和上一时刻的历史信息相关。当 f t = 1 , i t = 0 \mathbf{f}_{t}=1, \mathbf{i}_{t}=0 ft​=1,it​=0时，记忆单元将复制上一时刻的内容，不写入新的信息。三个门的计算公式如下： i t = σ ( W i x t + U i h t − 1 + b i ) f t = σ ( W f x t + U f h t − 1 + b f ) o t = σ ( W o x t + U o h t − 1 + b o ) \begin{aligned} \mathbf{i}_{t} &amp;amp;=\sigma\left(W_{i} \mathbf{x}_{t}+U_{i} \mathbf{h}_{t-1}+\mathbf{b}_{i}\right) \\ \mathbf{f}_{t} &amp;amp;=\sigma\left(W_{f} \mathbf{x}_{t}+U_{f} \mathbf{h}_{t-1}+\mathbf{b}_{f}\right) \\ \mathbf{o}_{t} &amp;amp;=\sigma\left(W_{o} \mathbf{x}_{t}+U_{o} \mathbf{h}_{t-1}+\mathbf{b}_{o}\right) \end{aligned} it​ft​ot​​=σ(Wi​xt​+Ui​ht−1​+bi​)=σ(Wf​xt​+Uf​ht−1​+bf​)=σ(Wo​xt​+Uo​ht−1​+bo​)​ 其中，激活函数使用sigmoid函数，其输出区间是(0,1)， x t \mathbf{x}_{t} xt​表示当前时刻的输入， h t − 1 \mathbf{h}_{t-1} ht−1​表示上一时刻的外部状态。 2.2 LSTM网络的循环单元结构如下图所示，计算过程如下： a.利用上一时刻的外部状态 h t − 1 \mathbf{h}_{t-1} ht−1​和当前时刻的输入 x t \mathbf{x}_{t} xt​，计算出三个门，已经候选状态 c ~ t \tilde{\mathbf{c}}_{t} c~t​ i t = σ ( W i x t + U i h t − 1 + b i ) f t = σ ( W f x t + U f h t − 1 + b f ) o t = σ ( W o x t + U o h t − 1 + b o ) \begin{aligned} \mathbf{i}_{t} &amp;amp;=\sigma\left(W_{i} \mathbf{x}_{t}+U_{i} \mathbf{h}_{t-1}+\mathbf{b}_{i}\right) \\ \mathbf{f}_{t} &amp;amp;=\sigma\left(W_{f} \mathbf{x}_{t}+U_{f} \mathbf{h}_{t-1}+\mathbf{b}_{f}\right) \\ \mathbf{o}_{t} &amp;amp;=\sigma\left(W_{o} \mathbf{x}_{t}+U_{o} \mathbf{h}_{t-1}+\mathbf{b}_{o}\right) \end{aligned} it​ft​ot​​=σ(Wi​xt​+Ui​ht−1​+bi​)=σ(Wf​xt​+Uf​ht−1​+bf​)=σ(Wo​xt​+Uo​ht−1​+bo​)​ c ~ t = tanh ⁡ ( W c x t + U c h t − 1 + b c ) \tilde{\mathbf{c}}_{t}=\tanh \left(W_{c} \mathbf{x}_{t}+U_{c} \mathbf{h}_{t-1}+\mathbf{b}_{c}\right) c~t​=tanh(Wc​xt​+Uc​ht−1​+bc​) b.结合遗忘门 f t \mathbf{f}_{t} ft​和输入门 i t \mathbf{i}_{t} it​来更新记忆单元 c t \mathbf{c}_{t} ct​ c t = f t ⊙ c t − 1 + i t ⊙ c ~ t \mathbf{c}_{t}=\mathbf{f}_{t} \odot \mathbf{c}_{t-1}+\mathbf{i}_{t} \odot \tilde{\mathbf{c}}_{t} ct​=ft​⊙ct−1​+it​⊙c~t​ c.结合输出门 o t \mathbf{o}_{t} ot​，将内部状态的信息传递给外部状态 h t \mathbf{h}_{t} ht​ h t = o t ⊙ tanh ⁡ ( c t ) \mathbf{h}_{t}=\mathbf{o}_{t} \odot \tanh \left(\mathbf{c}_{t}\right) ht​=ot​⊙tanh(ct​) 3.门控循环单元网络GRU GRU与LSTM的不同之处在于：GRU不引入额外的记忆单元 c t \mathbf{c}_{t} ct​，GRU网络引入一个更新门来控制当前状态需要从历史状态中保留多少信息(不经过非线性变换)，以及需要从候选状态中接收多少新的信息。 h t = z t ⊙ h t − 1 + ( 1 − z t ) ⊙ g ( x t , h t − 1 ; θ ) \mathbf{h}_{t}=\mathbf{z}_{t} \odot \mathbf{h}_{t-1}+\left(1-\mathbf{z}_{t}\right) \odot g\left(\mathbf{x}_{t}, \mathbf{h}_{t-1} ; \theta\right) ht​=zt​⊙ht−1​+(1−zt​)⊙g(xt​,ht−1​;θ) 其中， z t ∈ [ 0 , 1 ] \mathbf{z}_{t} \in[0,1] zt​∈[0,1]为更新门 z t = σ ( W z x t + U z h t − 1 + b z ) \mathbf{z}_{t}=\sigma\left(\mathbf{W}_{z} \mathbf{x}_{t}+\mathbf{U}_{z} \mathbf{h}_{t-1}+\mathbf{b}_{z}\right) zt​=σ(Wz​xt​+Uz​ht−1​+bz​) 在GRU网络中，函数 g ( x t , h t − 1 ; θ ) g\left(\mathbf{x}_{t}, \mathbf{h}_{t-1} ; \theta\right) g(xt​,ht−1​;θ)定义为： h ~ t = tanh ⁡ ( W h x t + U h ( r t ⊙ h t − 1 ) + b h ) \tilde{\mathbf{h}}_{t}=\tanh \left(W_{h} \mathbf{x}_{t}+U_{h}\left(\mathbf{r}_{t} \odot \mathbf{h}_{t-1}\right)+\mathbf{b}_{h}\right) h~t​=tanh(Wh​xt​+Uh​(rt​⊙ht−1​)+bh​) 上式中的符号说明： h ~ t \tilde{\mathbf{h}}_{t} h~t​表示当前时刻的候选状态， r t ∈ [ 0 , 1 ] \mathbf{r}_{t} \in[0,1] rt​∈[0,1]为重置门，用来控制候选状态 h ~ t \tilde{\mathbf{h}}_{t} h~t​的计算是否依赖上一时刻的状态 h t − 1 \mathbf{h}_{t-1} ht−1​。 r t = σ ( W r x t + U r h t − 1 + b r ) \mathbf{r}_{t}=\sigma\left(W_{r} \mathbf{x}_{t}+U_{r} \mathbf{h}_{t-1}+\mathbf{b}_{r}\right) rt​=σ(Wr​xt​+Ur​ht−1​+br​) 当 r t \mathbf{r}_{t} rt​=0时，候选状态 h ~ t = tanh ⁡ ( W c x t + b ) \tilde{\mathbf{h}}_{t}=\tanh \left(W_{c} \mathbf{x}_{t}+\mathbf{b}\right) h~t​=tanh(Wc​xt​+b)只和当前输入 x t \mathbf{x}_{t} xt​相关而与历史状态无关。当 r t \mathbf{r}_{t} rt​=1时，候选状态 h ~ t = tanh ⁡ ( W h x t + U h h t − 1 + b h ) \tilde{\mathbf{h}}_{t}=\tanh \left(W_{h} \mathbf{x}_{t}+U_{h} \mathbf{h}_{t-1}+\mathbf{b}_{h}\right) h~t​=tanh(Wh​xt​+Uh​ht−1​+bh​)和当前输入 x t \mathbf{x}_{t} xt​相关，也和历史状态 h t − 1 \mathbf{h}_{t-1} ht−1​相关，此时和简单的RNN是一样的。 综合上述各式，GRU网络的状态更新方式为: h t = z t ⊙ h t − 1 + ( 1 − z t ) ⊙ h ~ t \mathbf{h}_{t}=\mathbf{z}_{t} \odot \mathbf{h}_{t-1}+\left(1-\mathbf{z}_{t}\right) \odot \tilde{\mathbf{h}}_{t} ht​=zt​⊙ht−1​+(1−zt​)⊙h~t​ 总结：当 z t = 0 , r = 1 \mathbf{z}_{t}=0, \mathbf{r}=1 zt​=0,r=1时，GRU网络退化为简单的RNN；若 z t = 0 , r = 0 \mathbf{z}_{t}=0, \mathbf{r}=0 zt​=0,r=0时，当前状态 h t \mathbf{h}_{t} ht​只和当前输入 x t \mathbf{x}_{t} xt​相关，和历史状态 h t − 1 \mathbf{h}_{t-1} ht−1​无关。当 z t = 1 \mathbf{z}_{t}=1 zt​=1时，当前状态 h t \mathbf{h}_{t} ht​等于上一时刻状态 h t − 1 \mathbf{h}_{t-1} ht−1​和当前输入 x t \mathbf{x}_{t} xt​无关。" />
<meta property="og:description" content="1.概述 为了改善基本RNN的长期依赖问题，一种方法是引入门控机制来控制信息的累积速度，包括有选择性地加入新的信息，并有选择性遗忘之前累积的信息。下面主要介绍两种基于门控的循环神经网络：长短时记忆网络和门控循环单元网络。因为基本的RNN即 h t = f ( U h t − 1 + W x t + b ) \mathbf{h}_{t}=f\left(U \mathbf{h}_{t-1}+W \mathbf{x}_{t}+\mathbf{b}\right) ht​=f(Uht−1​+Wxt​+b)，每层的隐状态都是由前一层的隐状态经变换和激活函数得到的，反向传播求导时，最终得到的导数会包含每步梯度的连乘，会导致梯度爆炸或消失。所以，基本的RNN很难处理长期依赖问题，即无法学习到序列中蕴含的间隔时间较长的规律。 2.长短时记忆网络LSTM 2.1长短时记忆网络是基本的循环神经网络的一种变体，可以有效的解决简单RNN的梯度爆炸或消失问题。LSTM网络主要改进在下面两个方面： 1.新的内部状态 c t \mathbf{c}_{t} ct​：LSTM网络引入一个新的内部状态 c t \mathbf{c}_{t} ct​，专门进行线性的循环信息传递，同时输出信息给隐藏层的外部状态 h t \mathbf{h}_{t} ht​. c t = f t ⊙ c t − 1 + i t ⊙ c ~ t h t = o t ⊙ tanh ⁡ ( c t ) \begin{aligned} \mathbf{c}_{t} &amp;amp;=\mathbf{f}_{t} \odot \mathbf{c}_{t-1}+\mathbf{i}_{t} \odot \tilde{\mathbf{c}}_{t} \\ \mathbf{h}_{t} &amp;amp;=\mathbf{o}_{t} \odot \tanh \left(\mathbf{c}_{t}\right) \end{aligned} ct​ht​​=ft​⊙ct−1​+it​⊙c~t​=ot​⊙tanh(ct​)​ 符号说明： f t \mathbf{f}_{t} ft​、 i t \mathbf{i}_{t} it​、 o t \mathbf{o}_{t} ot​分别代表遗忘门、输入门、输出门用来控制信息传递的路径；⊙表示向量元素的点乘； c t − 1 \mathbf{c}_{t-1} ct−1​表示上一时刻的记忆单元； c ~ t \tilde{\mathbf{c}}_{t} c~t​表示通过非线性函数得到的候选状态。 c ~ t = tanh ⁡ ( W c x t + U c h t − 1 + b c ) \tilde{\mathbf{c}}_{t}=\tanh \left(W_{c} \mathbf{x}_{t}+U_{c} \mathbf{h}_{t-1}+\mathbf{b}_{c}\right) c~t​=tanh(Wc​xt​+Uc​ht−1​+bc​) 在每个时刻t，LSTM网络的内部状态 c t \mathbf{c}_{t} ct​记录了到当前时刻为止的历史信息。 2.门控机制：LSTM网络引入了门控机制，用来控制信息传递的路径， f t \mathbf{f}_{t} ft​、 i t \mathbf{i}_{t} it​、 o t \mathbf{o}_{t} ot​分别代表遗忘门、输入门、输出门。这里的门概念类似于电路中的逻辑门概念，1表示开放状态，允许信息通过；0表示关闭状态，阻止信息通过。LSTM网络中的门是一个抽象的概念，借助sigmiod函数，使得输出值在(0,1)之间，表示以一定的比例运行信息通过。三个门的作用如下： 遗忘门 f t \mathbf{f}_{t} ft​控制上一时刻的内部状态 c t − 1 \mathbf{c}_{t-1} ct−1​需要遗忘多少信息 输入门 i t \mathbf{i}_{t} it​控制当前时刻的候选状态 c ~ t \tilde{\mathbf{c}}_{t} c~t​有多少信息需要保存 输出门 o t \mathbf{o}_{t} ot​控制当前时刻的内部状态 c t \mathbf{c}_{t} ct​有多少信息需要输出给外部状态 h t \mathbf{h}_{t} ht​ 当 f t = 0 , i t = 1 \mathbf{f}_{t}=0, \mathbf{i}_{t}=1 ft​=0,it​=1时，记忆单元 c t \mathbf{c}_{t} ct​将历史信息清空，并将候选状态向量 c ~ t \tilde{\mathbf{c}}_{t} c~t​写入。但此时记忆单元 c t \mathbf{c}_{t} ct​依然和上一时刻的历史信息相关。当 f t = 1 , i t = 0 \mathbf{f}_{t}=1, \mathbf{i}_{t}=0 ft​=1,it​=0时，记忆单元将复制上一时刻的内容，不写入新的信息。三个门的计算公式如下： i t = σ ( W i x t + U i h t − 1 + b i ) f t = σ ( W f x t + U f h t − 1 + b f ) o t = σ ( W o x t + U o h t − 1 + b o ) \begin{aligned} \mathbf{i}_{t} &amp;amp;=\sigma\left(W_{i} \mathbf{x}_{t}+U_{i} \mathbf{h}_{t-1}+\mathbf{b}_{i}\right) \\ \mathbf{f}_{t} &amp;amp;=\sigma\left(W_{f} \mathbf{x}_{t}+U_{f} \mathbf{h}_{t-1}+\mathbf{b}_{f}\right) \\ \mathbf{o}_{t} &amp;amp;=\sigma\left(W_{o} \mathbf{x}_{t}+U_{o} \mathbf{h}_{t-1}+\mathbf{b}_{o}\right) \end{aligned} it​ft​ot​​=σ(Wi​xt​+Ui​ht−1​+bi​)=σ(Wf​xt​+Uf​ht−1​+bf​)=σ(Wo​xt​+Uo​ht−1​+bo​)​ 其中，激活函数使用sigmoid函数，其输出区间是(0,1)， x t \mathbf{x}_{t} xt​表示当前时刻的输入， h t − 1 \mathbf{h}_{t-1} ht−1​表示上一时刻的外部状态。 2.2 LSTM网络的循环单元结构如下图所示，计算过程如下： a.利用上一时刻的外部状态 h t − 1 \mathbf{h}_{t-1} ht−1​和当前时刻的输入 x t \mathbf{x}_{t} xt​，计算出三个门，已经候选状态 c ~ t \tilde{\mathbf{c}}_{t} c~t​ i t = σ ( W i x t + U i h t − 1 + b i ) f t = σ ( W f x t + U f h t − 1 + b f ) o t = σ ( W o x t + U o h t − 1 + b o ) \begin{aligned} \mathbf{i}_{t} &amp;amp;=\sigma\left(W_{i} \mathbf{x}_{t}+U_{i} \mathbf{h}_{t-1}+\mathbf{b}_{i}\right) \\ \mathbf{f}_{t} &amp;amp;=\sigma\left(W_{f} \mathbf{x}_{t}+U_{f} \mathbf{h}_{t-1}+\mathbf{b}_{f}\right) \\ \mathbf{o}_{t} &amp;amp;=\sigma\left(W_{o} \mathbf{x}_{t}+U_{o} \mathbf{h}_{t-1}+\mathbf{b}_{o}\right) \end{aligned} it​ft​ot​​=σ(Wi​xt​+Ui​ht−1​+bi​)=σ(Wf​xt​+Uf​ht−1​+bf​)=σ(Wo​xt​+Uo​ht−1​+bo​)​ c ~ t = tanh ⁡ ( W c x t + U c h t − 1 + b c ) \tilde{\mathbf{c}}_{t}=\tanh \left(W_{c} \mathbf{x}_{t}+U_{c} \mathbf{h}_{t-1}+\mathbf{b}_{c}\right) c~t​=tanh(Wc​xt​+Uc​ht−1​+bc​) b.结合遗忘门 f t \mathbf{f}_{t} ft​和输入门 i t \mathbf{i}_{t} it​来更新记忆单元 c t \mathbf{c}_{t} ct​ c t = f t ⊙ c t − 1 + i t ⊙ c ~ t \mathbf{c}_{t}=\mathbf{f}_{t} \odot \mathbf{c}_{t-1}+\mathbf{i}_{t} \odot \tilde{\mathbf{c}}_{t} ct​=ft​⊙ct−1​+it​⊙c~t​ c.结合输出门 o t \mathbf{o}_{t} ot​，将内部状态的信息传递给外部状态 h t \mathbf{h}_{t} ht​ h t = o t ⊙ tanh ⁡ ( c t ) \mathbf{h}_{t}=\mathbf{o}_{t} \odot \tanh \left(\mathbf{c}_{t}\right) ht​=ot​⊙tanh(ct​) 3.门控循环单元网络GRU GRU与LSTM的不同之处在于：GRU不引入额外的记忆单元 c t \mathbf{c}_{t} ct​，GRU网络引入一个更新门来控制当前状态需要从历史状态中保留多少信息(不经过非线性变换)，以及需要从候选状态中接收多少新的信息。 h t = z t ⊙ h t − 1 + ( 1 − z t ) ⊙ g ( x t , h t − 1 ; θ ) \mathbf{h}_{t}=\mathbf{z}_{t} \odot \mathbf{h}_{t-1}+\left(1-\mathbf{z}_{t}\right) \odot g\left(\mathbf{x}_{t}, \mathbf{h}_{t-1} ; \theta\right) ht​=zt​⊙ht−1​+(1−zt​)⊙g(xt​,ht−1​;θ) 其中， z t ∈ [ 0 , 1 ] \mathbf{z}_{t} \in[0,1] zt​∈[0,1]为更新门 z t = σ ( W z x t + U z h t − 1 + b z ) \mathbf{z}_{t}=\sigma\left(\mathbf{W}_{z} \mathbf{x}_{t}+\mathbf{U}_{z} \mathbf{h}_{t-1}+\mathbf{b}_{z}\right) zt​=σ(Wz​xt​+Uz​ht−1​+bz​) 在GRU网络中，函数 g ( x t , h t − 1 ; θ ) g\left(\mathbf{x}_{t}, \mathbf{h}_{t-1} ; \theta\right) g(xt​,ht−1​;θ)定义为： h ~ t = tanh ⁡ ( W h x t + U h ( r t ⊙ h t − 1 ) + b h ) \tilde{\mathbf{h}}_{t}=\tanh \left(W_{h} \mathbf{x}_{t}+U_{h}\left(\mathbf{r}_{t} \odot \mathbf{h}_{t-1}\right)+\mathbf{b}_{h}\right) h~t​=tanh(Wh​xt​+Uh​(rt​⊙ht−1​)+bh​) 上式中的符号说明： h ~ t \tilde{\mathbf{h}}_{t} h~t​表示当前时刻的候选状态， r t ∈ [ 0 , 1 ] \mathbf{r}_{t} \in[0,1] rt​∈[0,1]为重置门，用来控制候选状态 h ~ t \tilde{\mathbf{h}}_{t} h~t​的计算是否依赖上一时刻的状态 h t − 1 \mathbf{h}_{t-1} ht−1​。 r t = σ ( W r x t + U r h t − 1 + b r ) \mathbf{r}_{t}=\sigma\left(W_{r} \mathbf{x}_{t}+U_{r} \mathbf{h}_{t-1}+\mathbf{b}_{r}\right) rt​=σ(Wr​xt​+Ur​ht−1​+br​) 当 r t \mathbf{r}_{t} rt​=0时，候选状态 h ~ t = tanh ⁡ ( W c x t + b ) \tilde{\mathbf{h}}_{t}=\tanh \left(W_{c} \mathbf{x}_{t}+\mathbf{b}\right) h~t​=tanh(Wc​xt​+b)只和当前输入 x t \mathbf{x}_{t} xt​相关而与历史状态无关。当 r t \mathbf{r}_{t} rt​=1时，候选状态 h ~ t = tanh ⁡ ( W h x t + U h h t − 1 + b h ) \tilde{\mathbf{h}}_{t}=\tanh \left(W_{h} \mathbf{x}_{t}+U_{h} \mathbf{h}_{t-1}+\mathbf{b}_{h}\right) h~t​=tanh(Wh​xt​+Uh​ht−1​+bh​)和当前输入 x t \mathbf{x}_{t} xt​相关，也和历史状态 h t − 1 \mathbf{h}_{t-1} ht−1​相关，此时和简单的RNN是一样的。 综合上述各式，GRU网络的状态更新方式为: h t = z t ⊙ h t − 1 + ( 1 − z t ) ⊙ h ~ t \mathbf{h}_{t}=\mathbf{z}_{t} \odot \mathbf{h}_{t-1}+\left(1-\mathbf{z}_{t}\right) \odot \tilde{\mathbf{h}}_{t} ht​=zt​⊙ht−1​+(1−zt​)⊙h~t​ 总结：当 z t = 0 , r = 1 \mathbf{z}_{t}=0, \mathbf{r}=1 zt​=0,r=1时，GRU网络退化为简单的RNN；若 z t = 0 , r = 0 \mathbf{z}_{t}=0, \mathbf{r}=0 zt​=0,r=0时，当前状态 h t \mathbf{h}_{t} ht​只和当前输入 x t \mathbf{x}_{t} xt​相关，和历史状态 h t − 1 \mathbf{h}_{t-1} ht−1​无关。当 z t = 1 \mathbf{z}_{t}=1 zt​=1时，当前状态 h t \mathbf{h}_{t} ht​等于上一时刻状态 h t − 1 \mathbf{h}_{t-1} ht−1​和当前输入 x t \mathbf{x}_{t} xt​无关。" />
<link rel="canonical" href="https://uzzz.org/2019/07/05/790246.html" />
<meta property="og:url" content="https://uzzz.org/2019/07/05/790246.html" />
<meta property="og:site_name" content="有组织在！" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2019-07-05T00:00:00+08:00" />
<script type="application/ld+json">
{"description":"1.概述 为了改善基本RNN的长期依赖问题，一种方法是引入门控机制来控制信息的累积速度，包括有选择性地加入新的信息，并有选择性遗忘之前累积的信息。下面主要介绍两种基于门控的循环神经网络：长短时记忆网络和门控循环单元网络。因为基本的RNN即 h t = f ( U h t − 1 + W x t + b ) \\mathbf{h}_{t}=f\\left(U \\mathbf{h}_{t-1}+W \\mathbf{x}_{t}+\\mathbf{b}\\right) ht​=f(Uht−1​+Wxt​+b)，每层的隐状态都是由前一层的隐状态经变换和激活函数得到的，反向传播求导时，最终得到的导数会包含每步梯度的连乘，会导致梯度爆炸或消失。所以，基本的RNN很难处理长期依赖问题，即无法学习到序列中蕴含的间隔时间较长的规律。 2.长短时记忆网络LSTM 2.1长短时记忆网络是基本的循环神经网络的一种变体，可以有效的解决简单RNN的梯度爆炸或消失问题。LSTM网络主要改进在下面两个方面： 1.新的内部状态 c t \\mathbf{c}_{t} ct​：LSTM网络引入一个新的内部状态 c t \\mathbf{c}_{t} ct​，专门进行线性的循环信息传递，同时输出信息给隐藏层的外部状态 h t \\mathbf{h}_{t} ht​. c t = f t ⊙ c t − 1 + i t ⊙ c ~ t h t = o t ⊙ tanh ⁡ ( c t ) \\begin{aligned} \\mathbf{c}_{t} &amp;amp;=\\mathbf{f}_{t} \\odot \\mathbf{c}_{t-1}+\\mathbf{i}_{t} \\odot \\tilde{\\mathbf{c}}_{t} \\\\ \\mathbf{h}_{t} &amp;amp;=\\mathbf{o}_{t} \\odot \\tanh \\left(\\mathbf{c}_{t}\\right) \\end{aligned} ct​ht​​=ft​⊙ct−1​+it​⊙c~t​=ot​⊙tanh(ct​)​ 符号说明： f t \\mathbf{f}_{t} ft​、 i t \\mathbf{i}_{t} it​、 o t \\mathbf{o}_{t} ot​分别代表遗忘门、输入门、输出门用来控制信息传递的路径；⊙表示向量元素的点乘； c t − 1 \\mathbf{c}_{t-1} ct−1​表示上一时刻的记忆单元； c ~ t \\tilde{\\mathbf{c}}_{t} c~t​表示通过非线性函数得到的候选状态。 c ~ t = tanh ⁡ ( W c x t + U c h t − 1 + b c ) \\tilde{\\mathbf{c}}_{t}=\\tanh \\left(W_{c} \\mathbf{x}_{t}+U_{c} \\mathbf{h}_{t-1}+\\mathbf{b}_{c}\\right) c~t​=tanh(Wc​xt​+Uc​ht−1​+bc​) 在每个时刻t，LSTM网络的内部状态 c t \\mathbf{c}_{t} ct​记录了到当前时刻为止的历史信息。 2.门控机制：LSTM网络引入了门控机制，用来控制信息传递的路径， f t \\mathbf{f}_{t} ft​、 i t \\mathbf{i}_{t} it​、 o t \\mathbf{o}_{t} ot​分别代表遗忘门、输入门、输出门。这里的门概念类似于电路中的逻辑门概念，1表示开放状态，允许信息通过；0表示关闭状态，阻止信息通过。LSTM网络中的门是一个抽象的概念，借助sigmiod函数，使得输出值在(0,1)之间，表示以一定的比例运行信息通过。三个门的作用如下： 遗忘门 f t \\mathbf{f}_{t} ft​控制上一时刻的内部状态 c t − 1 \\mathbf{c}_{t-1} ct−1​需要遗忘多少信息 输入门 i t \\mathbf{i}_{t} it​控制当前时刻的候选状态 c ~ t \\tilde{\\mathbf{c}}_{t} c~t​有多少信息需要保存 输出门 o t \\mathbf{o}_{t} ot​控制当前时刻的内部状态 c t \\mathbf{c}_{t} ct​有多少信息需要输出给外部状态 h t \\mathbf{h}_{t} ht​ 当 f t = 0 , i t = 1 \\mathbf{f}_{t}=0, \\mathbf{i}_{t}=1 ft​=0,it​=1时，记忆单元 c t \\mathbf{c}_{t} ct​将历史信息清空，并将候选状态向量 c ~ t \\tilde{\\mathbf{c}}_{t} c~t​写入。但此时记忆单元 c t \\mathbf{c}_{t} ct​依然和上一时刻的历史信息相关。当 f t = 1 , i t = 0 \\mathbf{f}_{t}=1, \\mathbf{i}_{t}=0 ft​=1,it​=0时，记忆单元将复制上一时刻的内容，不写入新的信息。三个门的计算公式如下： i t = σ ( W i x t + U i h t − 1 + b i ) f t = σ ( W f x t + U f h t − 1 + b f ) o t = σ ( W o x t + U o h t − 1 + b o ) \\begin{aligned} \\mathbf{i}_{t} &amp;amp;=\\sigma\\left(W_{i} \\mathbf{x}_{t}+U_{i} \\mathbf{h}_{t-1}+\\mathbf{b}_{i}\\right) \\\\ \\mathbf{f}_{t} &amp;amp;=\\sigma\\left(W_{f} \\mathbf{x}_{t}+U_{f} \\mathbf{h}_{t-1}+\\mathbf{b}_{f}\\right) \\\\ \\mathbf{o}_{t} &amp;amp;=\\sigma\\left(W_{o} \\mathbf{x}_{t}+U_{o} \\mathbf{h}_{t-1}+\\mathbf{b}_{o}\\right) \\end{aligned} it​ft​ot​​=σ(Wi​xt​+Ui​ht−1​+bi​)=σ(Wf​xt​+Uf​ht−1​+bf​)=σ(Wo​xt​+Uo​ht−1​+bo​)​ 其中，激活函数使用sigmoid函数，其输出区间是(0,1)， x t \\mathbf{x}_{t} xt​表示当前时刻的输入， h t − 1 \\mathbf{h}_{t-1} ht−1​表示上一时刻的外部状态。 2.2 LSTM网络的循环单元结构如下图所示，计算过程如下： a.利用上一时刻的外部状态 h t − 1 \\mathbf{h}_{t-1} ht−1​和当前时刻的输入 x t \\mathbf{x}_{t} xt​，计算出三个门，已经候选状态 c ~ t \\tilde{\\mathbf{c}}_{t} c~t​ i t = σ ( W i x t + U i h t − 1 + b i ) f t = σ ( W f x t + U f h t − 1 + b f ) o t = σ ( W o x t + U o h t − 1 + b o ) \\begin{aligned} \\mathbf{i}_{t} &amp;amp;=\\sigma\\left(W_{i} \\mathbf{x}_{t}+U_{i} \\mathbf{h}_{t-1}+\\mathbf{b}_{i}\\right) \\\\ \\mathbf{f}_{t} &amp;amp;=\\sigma\\left(W_{f} \\mathbf{x}_{t}+U_{f} \\mathbf{h}_{t-1}+\\mathbf{b}_{f}\\right) \\\\ \\mathbf{o}_{t} &amp;amp;=\\sigma\\left(W_{o} \\mathbf{x}_{t}+U_{o} \\mathbf{h}_{t-1}+\\mathbf{b}_{o}\\right) \\end{aligned} it​ft​ot​​=σ(Wi​xt​+Ui​ht−1​+bi​)=σ(Wf​xt​+Uf​ht−1​+bf​)=σ(Wo​xt​+Uo​ht−1​+bo​)​ c ~ t = tanh ⁡ ( W c x t + U c h t − 1 + b c ) \\tilde{\\mathbf{c}}_{t}=\\tanh \\left(W_{c} \\mathbf{x}_{t}+U_{c} \\mathbf{h}_{t-1}+\\mathbf{b}_{c}\\right) c~t​=tanh(Wc​xt​+Uc​ht−1​+bc​) b.结合遗忘门 f t \\mathbf{f}_{t} ft​和输入门 i t \\mathbf{i}_{t} it​来更新记忆单元 c t \\mathbf{c}_{t} ct​ c t = f t ⊙ c t − 1 + i t ⊙ c ~ t \\mathbf{c}_{t}=\\mathbf{f}_{t} \\odot \\mathbf{c}_{t-1}+\\mathbf{i}_{t} \\odot \\tilde{\\mathbf{c}}_{t} ct​=ft​⊙ct−1​+it​⊙c~t​ c.结合输出门 o t \\mathbf{o}_{t} ot​，将内部状态的信息传递给外部状态 h t \\mathbf{h}_{t} ht​ h t = o t ⊙ tanh ⁡ ( c t ) \\mathbf{h}_{t}=\\mathbf{o}_{t} \\odot \\tanh \\left(\\mathbf{c}_{t}\\right) ht​=ot​⊙tanh(ct​) 3.门控循环单元网络GRU GRU与LSTM的不同之处在于：GRU不引入额外的记忆单元 c t \\mathbf{c}_{t} ct​，GRU网络引入一个更新门来控制当前状态需要从历史状态中保留多少信息(不经过非线性变换)，以及需要从候选状态中接收多少新的信息。 h t = z t ⊙ h t − 1 + ( 1 − z t ) ⊙ g ( x t , h t − 1 ; θ ) \\mathbf{h}_{t}=\\mathbf{z}_{t} \\odot \\mathbf{h}_{t-1}+\\left(1-\\mathbf{z}_{t}\\right) \\odot g\\left(\\mathbf{x}_{t}, \\mathbf{h}_{t-1} ; \\theta\\right) ht​=zt​⊙ht−1​+(1−zt​)⊙g(xt​,ht−1​;θ) 其中， z t ∈ [ 0 , 1 ] \\mathbf{z}_{t} \\in[0,1] zt​∈[0,1]为更新门 z t = σ ( W z x t + U z h t − 1 + b z ) \\mathbf{z}_{t}=\\sigma\\left(\\mathbf{W}_{z} \\mathbf{x}_{t}+\\mathbf{U}_{z} \\mathbf{h}_{t-1}+\\mathbf{b}_{z}\\right) zt​=σ(Wz​xt​+Uz​ht−1​+bz​) 在GRU网络中，函数 g ( x t , h t − 1 ; θ ) g\\left(\\mathbf{x}_{t}, \\mathbf{h}_{t-1} ; \\theta\\right) g(xt​,ht−1​;θ)定义为： h ~ t = tanh ⁡ ( W h x t + U h ( r t ⊙ h t − 1 ) + b h ) \\tilde{\\mathbf{h}}_{t}=\\tanh \\left(W_{h} \\mathbf{x}_{t}+U_{h}\\left(\\mathbf{r}_{t} \\odot \\mathbf{h}_{t-1}\\right)+\\mathbf{b}_{h}\\right) h~t​=tanh(Wh​xt​+Uh​(rt​⊙ht−1​)+bh​) 上式中的符号说明： h ~ t \\tilde{\\mathbf{h}}_{t} h~t​表示当前时刻的候选状态， r t ∈ [ 0 , 1 ] \\mathbf{r}_{t} \\in[0,1] rt​∈[0,1]为重置门，用来控制候选状态 h ~ t \\tilde{\\mathbf{h}}_{t} h~t​的计算是否依赖上一时刻的状态 h t − 1 \\mathbf{h}_{t-1} ht−1​。 r t = σ ( W r x t + U r h t − 1 + b r ) \\mathbf{r}_{t}=\\sigma\\left(W_{r} \\mathbf{x}_{t}+U_{r} \\mathbf{h}_{t-1}+\\mathbf{b}_{r}\\right) rt​=σ(Wr​xt​+Ur​ht−1​+br​) 当 r t \\mathbf{r}_{t} rt​=0时，候选状态 h ~ t = tanh ⁡ ( W c x t + b ) \\tilde{\\mathbf{h}}_{t}=\\tanh \\left(W_{c} \\mathbf{x}_{t}+\\mathbf{b}\\right) h~t​=tanh(Wc​xt​+b)只和当前输入 x t \\mathbf{x}_{t} xt​相关而与历史状态无关。当 r t \\mathbf{r}_{t} rt​=1时，候选状态 h ~ t = tanh ⁡ ( W h x t + U h h t − 1 + b h ) \\tilde{\\mathbf{h}}_{t}=\\tanh \\left(W_{h} \\mathbf{x}_{t}+U_{h} \\mathbf{h}_{t-1}+\\mathbf{b}_{h}\\right) h~t​=tanh(Wh​xt​+Uh​ht−1​+bh​)和当前输入 x t \\mathbf{x}_{t} xt​相关，也和历史状态 h t − 1 \\mathbf{h}_{t-1} ht−1​相关，此时和简单的RNN是一样的。 综合上述各式，GRU网络的状态更新方式为: h t = z t ⊙ h t − 1 + ( 1 − z t ) ⊙ h ~ t \\mathbf{h}_{t}=\\mathbf{z}_{t} \\odot \\mathbf{h}_{t-1}+\\left(1-\\mathbf{z}_{t}\\right) \\odot \\tilde{\\mathbf{h}}_{t} ht​=zt​⊙ht−1​+(1−zt​)⊙h~t​ 总结：当 z t = 0 , r = 1 \\mathbf{z}_{t}=0, \\mathbf{r}=1 zt​=0,r=1时，GRU网络退化为简单的RNN；若 z t = 0 , r = 0 \\mathbf{z}_{t}=0, \\mathbf{r}=0 zt​=0,r=0时，当前状态 h t \\mathbf{h}_{t} ht​只和当前输入 x t \\mathbf{x}_{t} xt​相关，和历史状态 h t − 1 \\mathbf{h}_{t-1} ht−1​无关。当 z t = 1 \\mathbf{z}_{t}=1 zt​=1时，当前状态 h t \\mathbf{h}_{t} ht​等于上一时刻状态 h t − 1 \\mathbf{h}_{t-1} ht−1​和当前输入 x t \\mathbf{x}_{t} xt​无关。","@type":"BlogPosting","url":"https://uzzz.org/2019/07/05/790246.html","headline":"从LSTM到GRU基于门控的循环神经网络总结","dateModified":"2019-07-05T00:00:00+08:00","datePublished":"2019-07-05T00:00:00+08:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://uzzz.org/2019/07/05/790246.html"},"@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->


    <link rel="stylesheet" href="/assets/css/style.css?v=">
    <script src="/assets/js/scale.fix.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-123344652-1"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-123344652-1');
    </script>
    
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <script>
      (adsbygoogle = window.adsbygoogle || []).push({
        google_ad_client: "ca-pub-8889449066804352",
        enable_page_level_ads: true
      });
    </script>
    
    <script async custom-element="amp-auto-ads"
        src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
    </script>
    
    <style>
      @media screen and (max-width:760px){
        .sm-hidden{display:none; }
      }
    </style>

  </head>
  <body>
    
        <amp-auto-ads type="adsense"
              data-ad-client="ca-pub-8889449066804352">
        </amp-auto-ads>
    
    <div class="wrapper">
      <header  class="without-description" >
        <h1>从LSTM到GRU基于门控的循环神经网络总结</h1>
        
        
        <ul style="display: block;">
            <li><a href="https://uzshare.com/" style="line-height: unset;" target="_blank"><strong>柚子社区</strong></a></li>
 	    <li><a href="/donate/" style="line-height: unset;" target="_blank"><strong>Donate</strong></a></li>
        </ul>
        
      </header>
      <section>

<div style="margin:0 0 8px 0;">
<style>
table.gsc-input {
    margin: 0;
}
.cse .gsc-control-cse, .gsc-control-cse {
    padding: 0;
    width: auto;
}
.gsc-search-box td {
    border-bottom: none;
}
</style>
<script>
  (function() {
    var cx = '004431708863642777669:qan2_6ugotw';
    var gcse = document.createElement('script');
    gcse.type = 'text/javascript';
    gcse.async = true;
    gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(gcse, s);
  })();
</script>
<gcse:search></gcse:search>
</div>
<!-- match content ads -->
	        <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
			<ins class="adsbygoogle"
			     style="display:block"
			     data-ad-format="autorelaxed"
			     data-ad-client="ca-pub-8889449066804352"
			     data-ad-slot="1928667997"></ins>
			<script>
			     (adsbygoogle = window.adsbygoogle || []).push({});
			</script>	



        <div id="article_content" class="article_content clearfix" data-track-view="{&quot;mod&quot;:&quot;popu_307&quot;,&quot;con&quot;:&quot;,https://blog.csdn.net/cdlwhm1217096231/article/details/94736529,&quot;}" data-track-click="{&quot;mod&quot;:&quot;popu_307&quot;,&quot;con&quot;:&quot;,https://blog.csdn.net/cdlwhm1217096231/article/details/94736529&quot;}"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-cd6c485e8b.css"> 
 <div id="content_views" class="markdown_views prism-tomorrow-night"> 
  <!-- flowchart 箭头图标 勿删 --> 
  <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"> 
   <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path> 
  </svg> 
  <h4><a id="1_0"></a>1.概述</h4> 
  <ul> 
   <li>为了改善基本RNN的长期依赖问题，一种方法是引入门控机制来控制信息的累积速度，包括有选择性地加入新的信息，并有选择性遗忘之前累积的信息。下面主要介绍两种基于门控的循环神经网络：长短时记忆网络和门控循环单元网络。因为基本的RNN即<span class="katex--inline"><span class="katex"><span class="katex-mathml">
       <math>
        <semantics>
         <mrow>
          <msub>
           <mi mathvariant="bold">
            h
           </mi>
           <mi>
            t
           </mi>
          </msub>
          <mo>
           =
          </mo>
          <mi>
           f
          </mi>
          <mrow>
           <mo fence="true">
            (
           </mo>
           <mi>
            U
           </mi>
           <msub>
            <mi mathvariant="bold">
             h
            </mi>
            <mrow>
             <mi>
              t
             </mi>
             <mo>
              −
             </mo>
             <mn>
              1
             </mn>
            </mrow>
           </msub>
           <mo>
            +
           </mo>
           <mi>
            W
           </mi>
           <msub>
            <mi mathvariant="bold">
             x
            </mi>
            <mi>
             t
            </mi>
           </msub>
           <mo>
            +
           </mo>
           <mi mathvariant="bold">
            b
           </mi>
           <mo fence="true">
            )
           </mo>
          </mrow>
         </mrow>
         <annotation encoding="application/x-tex">
          \mathbf{h}_{t}=f\left(U \mathbf{h}_{t-1}+W \mathbf{x}_{t}+\mathbf{b}\right)
         </annotation>
        </semantics>
       </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.84444em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord"><span class="mord mathbf">h</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.280556em;"><span class="" style="top: -2.55em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">t</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathit" style="margin-right: 0.10764em;">f</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="minner"><span class="mopen delimcenter" style="top: 0em;">(</span><span class="mord mathit" style="margin-right: 0.10903em;">U</span><span class="mord"><span class="mord"><span class="mord mathbf">h</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">t</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.208331em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mord mathit" style="margin-right: 0.13889em;">W</span><span class="mord"><span class="mord"><span class="mord mathbf">x</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.280556em;"><span class="" style="top: -2.55em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">t</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mord"><span class="mord mathbf">b</span></span><span class="mclose delimcenter" style="top: 0em;">)</span></span></span></span></span></span>，每层的隐状态都是由前一层的隐状态经变换和激活函数得到的，反向传播求导时，最终得到的导数会包含每步梯度的连乘，会导致梯度爆炸或消失。所以，基本的RNN很难处理长期依赖问题，即无法学习到序列中蕴含的间隔时间较长的规律。</li> 
  </ul> 
  <h4><a id="2LSTM_2"></a>2.长短时记忆网络LSTM</h4> 
  <ul> 
   <li> <p>2.1长短时记忆网络是基本的循环神经网络的一种变体，可以有效的解决简单RNN的梯度爆炸或消失问题。<strong>LSTM网络主要改进在下面两个方面</strong>：</p> 
    <ul> 
     <li><strong>1.新的内部状态</strong><span class="katex--inline"><span class="katex"><span class="katex-mathml">
         <math>
          <semantics>
           <mrow>
            <msub>
             <mi mathvariant="bold">
              c
             </mi>
             <mi>
              t
             </mi>
            </msub>
           </mrow>
           <annotation encoding="application/x-tex">
            \mathbf{c}_{t}
           </annotation>
          </semantics>
         </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.59444em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord"><span class="mord mathbf">c</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.280556em;"><span class="" style="top: -2.55em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">t</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span>：LSTM网络引入一个新的内部状态<span class="katex--inline"><span class="katex"><span class="katex-mathml">
         <math>
          <semantics>
           <mrow>
            <msub>
             <mi mathvariant="bold">
              c
             </mi>
             <mi>
              t
             </mi>
            </msub>
           </mrow>
           <annotation encoding="application/x-tex">
            \mathbf{c}_{t}
           </annotation>
          </semantics>
         </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.59444em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord"><span class="mord mathbf">c</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.280556em;"><span class="" style="top: -2.55em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">t</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span>，专门进行线性的循环信息传递，同时输出信息给隐藏层的外部状态<span class="katex--inline"><span class="katex"><span class="katex-mathml">
         <math>
          <semantics>
           <mrow>
            <msub>
             <mi mathvariant="bold">
              h
             </mi>
             <mi>
              t
             </mi>
            </msub>
           </mrow>
           <annotation encoding="application/x-tex">
            \mathbf{h}_{t}
           </annotation>
          </semantics>
         </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.84444em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord"><span class="mord mathbf">h</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.280556em;"><span class="" style="top: -2.55em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">t</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span>.<br> <span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml">
          <math>
           <semantics>
            <mtable>
             <mtr>
              <mtd>
               <mstyle scriptlevel="0" displaystyle="true">
                <msub>
                 <mi mathvariant="bold">
                  c
                 </mi>
                 <mi>
                  t
                 </mi>
                </msub>
               </mstyle>
              </mtd>
              <mtd>
               <mstyle scriptlevel="0" displaystyle="true">
                <mrow>
                 <mrow></mrow>
                 <mo>
                  =
                 </mo>
                 <msub>
                  <mi mathvariant="bold">
                   f
                  </mi>
                  <mi>
                   t
                  </mi>
                 </msub>
                 <mo>
                  ⊙
                 </mo>
                 <msub>
                  <mi mathvariant="bold">
                   c
                  </mi>
                  <mrow>
                   <mi>
                    t
                   </mi>
                   <mo>
                    −
                   </mo>
                   <mn>
                    1
                   </mn>
                  </mrow>
                 </msub>
                 <mo>
                  +
                 </mo>
                 <msub>
                  <mi mathvariant="bold">
                   i
                  </mi>
                  <mi>
                   t
                  </mi>
                 </msub>
                 <mo>
                  ⊙
                 </mo>
                 <msub>
                  <mover accent="true">
                   <mi mathvariant="bold">
                    c
                   </mi>
                   <mo>
                    ~
                   </mo>
                  </mover>
                  <mi>
                   t
                  </mi>
                 </msub>
                </mrow>
               </mstyle>
              </mtd>
             </mtr>
             <mtr>
              <mtd>
               <mstyle scriptlevel="0" displaystyle="true">
                <msub>
                 <mi mathvariant="bold">
                  h
                 </mi>
                 <mi>
                  t
                 </mi>
                </msub>
               </mstyle>
              </mtd>
              <mtd>
               <mstyle scriptlevel="0" displaystyle="true">
                <mrow>
                 <mrow></mrow>
                 <mo>
                  =
                 </mo>
                 <msub>
                  <mi mathvariant="bold">
                   o
                  </mi>
                  <mi>
                   t
                  </mi>
                 </msub>
                 <mo>
                  ⊙
                 </mo>
                 <mi>
                  tanh
                 </mi>
                 <mo>
                  ⁡
                 </mo>
                 <mrow>
                  <mo fence="true">
                   (
                  </mo>
                  <msub>
                   <mi mathvariant="bold">
                    c
                   </mi>
                   <mi>
                    t
                   </mi>
                  </msub>
                  <mo fence="true">
                   )
                  </mo>
                 </mrow>
                </mrow>
               </mstyle>
              </mtd>
             </mtr>
            </mtable>
            <annotation encoding="application/x-tex">
              \begin{aligned} \mathbf{c}_{t} &amp;amp;=\mathbf{f}_{t} \odot \mathbf{c}_{t-1}+\mathbf{i}_{t} \odot \tilde{\mathbf{c}}_{t} \\ \mathbf{h}_{t} &amp;amp;=\mathbf{o}_{t} \odot \tanh \left(\mathbf{c}_{t}\right) \end{aligned} 
            </annotation>
           </semantics>
          </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 3em; vertical-align: -1.25em;"></span><span class="mord"><span class="mtable"><span class="col-align-r"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.75em;"><span class="" style="top: -3.91em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord"><span class="mord"><span class="mord mathbf">c</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.280556em;"><span class="" style="top: -2.55em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">t</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span><span class="" style="top: -2.41em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord"><span class="mord"><span class="mord mathbf">h</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.280556em;"><span class="" style="top: -2.55em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">t</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 1.25em;"><span class=""></span></span></span></span></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.75em;"><span class="" style="top: -3.91em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mord"><span class="mord"><span class="mord mathbf" style="margin-right: 0.10903em;">f</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.280556em;"><span class="" style="top: -2.55em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">t</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">⊙</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mord"><span class="mord"><span class="mord mathbf">c</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">t</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.208331em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mord"><span class="mord"><span class="mord mathbf">i</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.280556em;"><span class="" style="top: -2.55em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">t</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">⊙</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mord"><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.6813em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord"><span class="mord mathbf">c</span></span></span></span><span class="" style="top: -3.36344em;"><span class="pstrut" style="height: 3em;"></span><span class="accent-body" style="left: -0.19444em;">~</span></span></span></span></span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.280556em;"><span class="" style="top: -2.55em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">t</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span><span class="" style="top: -2.41em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mord"><span class="mord"><span class="mord mathbf">o</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.280556em;"><span class="" style="top: -2.55em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">t</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">⊙</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mop">tanh</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="minner"><span class="mopen delimcenter" style="top: 0em;">(</span><span class="mord"><span class="mord"><span class="mord mathbf">c</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.280556em;"><span class="" style="top: -2.55em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">t</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mclose delimcenter" style="top: 0em;">)</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 1.25em;"><span class=""></span></span></span></span></span></span></span></span></span></span></span></span><br> 符号说明：<span class="katex--inline"><span class="katex"><span class="katex-mathml">
         <math>
          <semantics>
           <mrow>
            <msub>
             <mi mathvariant="bold">
              f
             </mi>
             <mi>
              t
             </mi>
            </msub>
           </mrow>
           <annotation encoding="application/x-tex">
            \mathbf{f}_{t}
           </annotation>
          </semantics>
         </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.84444em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord"><span class="mord mathbf" style="margin-right: 0.10903em;">f</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.280556em;"><span class="" style="top: -2.55em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">t</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span>、<span class="katex--inline"><span class="katex"><span class="katex-mathml">
         <math>
          <semantics>
           <mrow>
            <msub>
             <mi mathvariant="bold">
              i
             </mi>
             <mi>
              t
             </mi>
            </msub>
           </mrow>
           <annotation encoding="application/x-tex">
            \mathbf{i}_{t}
           </annotation>
          </semantics>
         </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.84444em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord"><span class="mord mathbf">i</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.280556em;"><span class="" style="top: -2.55em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">t</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span>、<span class="katex--inline"><span class="katex"><span class="katex-mathml">
         <math>
          <semantics>
           <mrow>
            <msub>
             <mi mathvariant="bold">
              o
             </mi>
             <mi>
              t
             </mi>
            </msub>
           </mrow>
           <annotation encoding="application/x-tex">
            \mathbf{o}_{t}
           </annotation>
          </semantics>
         </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.59444em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord"><span class="mord mathbf">o</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.280556em;"><span class="" style="top: -2.55em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">t</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span>分别代表遗忘门、输入门、输出门用来控制信息传递的路径；⊙表示向量元素的点乘；<span class="katex--inline"><span class="katex"><span class="katex-mathml">
         <math>
          <semantics>
           <mrow>
            <msub>
             <mi mathvariant="bold">
              c
             </mi>
             <mrow>
              <mi>
               t
              </mi>
              <mo>
               −
              </mo>
              <mn>
               1
              </mn>
             </mrow>
            </msub>
           </mrow>
           <annotation encoding="application/x-tex">
            \mathbf{c}_{t-1}
           </annotation>
          </semantics>
         </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.652771em; vertical-align: -0.208331em;"></span><span class="mord"><span class="mord"><span class="mord mathbf">c</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">t</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.208331em;"><span class=""></span></span></span></span></span></span></span></span></span></span>表示上一时刻的记忆单元；<span class="katex--inline"><span class="katex"><span class="katex-mathml">
         <math>
          <semantics>
           <mrow>
            <msub>
             <mover accent="true">
              <mi mathvariant="bold">
               c
              </mi>
              <mo>
               ~
              </mo>
             </mover>
             <mi>
              t
             </mi>
            </msub>
           </mrow>
           <annotation encoding="application/x-tex">
            \tilde{\mathbf{c}}_{t}
           </annotation>
          </semantics>
         </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.8313em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.6813em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord"><span class="mord mathbf">c</span></span></span></span><span class="" style="top: -3.36344em;"><span class="pstrut" style="height: 3em;"></span><span class="accent-body" style="left: -0.19444em;">~</span></span></span></span></span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.280556em;"><span class="" style="top: -2.55em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">t</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span>表示通过非线性函数得到的候选状态。<br> <span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml">
          <math>
           <semantics>
            <mrow>
             <msub>
              <mover accent="true">
               <mi mathvariant="bold">
                c
               </mi>
               <mo>
                ~
               </mo>
              </mover>
              <mi>
               t
              </mi>
             </msub>
             <mo>
              =
             </mo>
             <mi>
              tanh
             </mi>
             <mo>
              ⁡
             </mo>
             <mrow>
              <mo fence="true">
               (
              </mo>
              <msub>
               <mi>
                W
               </mi>
               <mi>
                c
               </mi>
              </msub>
              <msub>
               <mi mathvariant="bold">
                x
               </mi>
               <mi>
                t
               </mi>
              </msub>
              <mo>
               +
              </mo>
              <msub>
               <mi>
                U
               </mi>
               <mi>
                c
               </mi>
              </msub>
              <msub>
               <mi mathvariant="bold">
                h
               </mi>
               <mrow>
                <mi>
                 t
                </mi>
                <mo>
                 −
                </mo>
                <mn>
                 1
                </mn>
               </mrow>
              </msub>
              <mo>
               +
              </mo>
              <msub>
               <mi mathvariant="bold">
                b
               </mi>
               <mi>
                c
               </mi>
              </msub>
              <mo fence="true">
               )
              </mo>
             </mrow>
            </mrow>
            <annotation encoding="application/x-tex">
              \tilde{\mathbf{c}}_{t}=\tanh \left(W_{c} \mathbf{x}_{t}+U_{c} \mathbf{h}_{t-1}+\mathbf{b}_{c}\right) 
            </annotation>
           </semantics>
          </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.8313em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.6813em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord"><span class="mord mathbf">c</span></span></span></span><span class="" style="top: -3.36344em;"><span class="pstrut" style="height: 3em;"></span><span class="accent-body" style="left: -0.19444em;">~</span></span></span></span></span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.280556em;"><span class="" style="top: -2.55em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">t</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mop">tanh</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="minner"><span class="mopen delimcenter" style="top: 0em;">(</span><span class="mord"><span class="mord mathit" style="margin-right: 0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.151392em;"><span class="" style="top: -2.55em; margin-left: -0.13889em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">c</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mord"><span class="mord"><span class="mord mathbf">x</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.280556em;"><span class="" style="top: -2.55em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">t</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mord"><span class="mord mathit" style="margin-right: 0.10903em;">U</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.151392em;"><span class="" style="top: -2.55em; margin-left: -0.10903em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">c</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mord"><span class="mord"><span class="mord mathbf">h</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">t</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.208331em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mord"><span class="mord"><span class="mord mathbf">b</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.151392em;"><span class="" style="top: -2.55em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">c</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mclose delimcenter" style="top: 0em;">)</span></span></span></span></span></span></span><br> 在每个时刻t，LSTM网络的内部状态<span class="katex--inline"><span class="katex"><span class="katex-mathml">
         <math>
          <semantics>
           <mrow>
            <msub>
             <mi mathvariant="bold">
              c
             </mi>
             <mi>
              t
             </mi>
            </msub>
           </mrow>
           <annotation encoding="application/x-tex">
            \mathbf{c}_{t}
           </annotation>
          </semantics>
         </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.59444em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord"><span class="mord mathbf">c</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.280556em;"><span class="" style="top: -2.55em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">t</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span>记录了到当前时刻为止的历史信息。</li> 
     <li><strong>2.门控机制</strong>：LSTM网络引入了门控机制，用来控制信息传递的路径，<span class="katex--inline"><span class="katex"><span class="katex-mathml">
         <math>
          <semantics>
           <mrow>
            <msub>
             <mi mathvariant="bold">
              f
             </mi>
             <mi>
              t
             </mi>
            </msub>
           </mrow>
           <annotation encoding="application/x-tex">
            \mathbf{f}_{t}
           </annotation>
          </semantics>
         </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.84444em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord"><span class="mord mathbf" style="margin-right: 0.10903em;">f</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.280556em;"><span class="" style="top: -2.55em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">t</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span>、<span class="katex--inline"><span class="katex"><span class="katex-mathml">
         <math>
          <semantics>
           <mrow>
            <msub>
             <mi mathvariant="bold">
              i
             </mi>
             <mi>
              t
             </mi>
            </msub>
           </mrow>
           <annotation encoding="application/x-tex">
            \mathbf{i}_{t}
           </annotation>
          </semantics>
         </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.84444em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord"><span class="mord mathbf">i</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.280556em;"><span class="" style="top: -2.55em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">t</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span>、<span class="katex--inline"><span class="katex"><span class="katex-mathml">
         <math>
          <semantics>
           <mrow>
            <msub>
             <mi mathvariant="bold">
              o
             </mi>
             <mi>
              t
             </mi>
            </msub>
           </mrow>
           <annotation encoding="application/x-tex">
            \mathbf{o}_{t}
           </annotation>
          </semantics>
         </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.59444em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord"><span class="mord mathbf">o</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.280556em;"><span class="" style="top: -2.55em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">t</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span>分别代表遗忘门、输入门、输出门。这里的门概念类似于电路中的逻辑门概念，1表示开放状态，允许信息通过；0表示关闭状态，阻止信息通过。LSTM网络中的门是一个抽象的概念，借助sigmiod函数，使得输出值在(0,1)之间，表示以一定的比例运行信息通过。三个门的作用如下： 
      <ul> 
       <li>遗忘门<span class="katex--inline"><span class="katex"><span class="katex-mathml">
           <math>
            <semantics>
             <mrow>
              <msub>
               <mi mathvariant="bold">
                f
               </mi>
               <mi>
                t
               </mi>
              </msub>
             </mrow>
             <annotation encoding="application/x-tex">
              \mathbf{f}_{t}
             </annotation>
            </semantics>
           </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.84444em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord"><span class="mord mathbf" style="margin-right: 0.10903em;">f</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.280556em;"><span class="" style="top: -2.55em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">t</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span>控制上一时刻的内部状态<span class="katex--inline"><span class="katex"><span class="katex-mathml">
           <math>
            <semantics>
             <mrow>
              <msub>
               <mi mathvariant="bold">
                c
               </mi>
               <mrow>
                <mi>
                 t
                </mi>
                <mo>
                 −
                </mo>
                <mn>
                 1
                </mn>
               </mrow>
              </msub>
             </mrow>
             <annotation encoding="application/x-tex">
              \mathbf{c}_{t-1}
             </annotation>
            </semantics>
           </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.652771em; vertical-align: -0.208331em;"></span><span class="mord"><span class="mord"><span class="mord mathbf">c</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">t</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.208331em;"><span class=""></span></span></span></span></span></span></span></span></span></span>需要遗忘多少信息</li> 
       <li>输入门<span class="katex--inline"><span class="katex"><span class="katex-mathml">
           <math>
            <semantics>
             <mrow>
              <msub>
               <mi mathvariant="bold">
                i
               </mi>
               <mi>
                t
               </mi>
              </msub>
             </mrow>
             <annotation encoding="application/x-tex">
              \mathbf{i}_{t}
             </annotation>
            </semantics>
           </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.84444em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord"><span class="mord mathbf">i</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.280556em;"><span class="" style="top: -2.55em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">t</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span>控制当前时刻的候选状态<span class="katex--inline"><span class="katex"><span class="katex-mathml">
           <math>
            <semantics>
             <mrow>
              <msub>
               <mover accent="true">
                <mi mathvariant="bold">
                 c
                </mi>
                <mo>
                 ~
                </mo>
               </mover>
               <mi>
                t
               </mi>
              </msub>
             </mrow>
             <annotation encoding="application/x-tex">
              \tilde{\mathbf{c}}_{t}
             </annotation>
            </semantics>
           </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.8313em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.6813em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord"><span class="mord mathbf">c</span></span></span></span><span class="" style="top: -3.36344em;"><span class="pstrut" style="height: 3em;"></span><span class="accent-body" style="left: -0.19444em;">~</span></span></span></span></span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.280556em;"><span class="" style="top: -2.55em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">t</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span>有多少信息需要保存</li> 
       <li>输出门<span class="katex--inline"><span class="katex"><span class="katex-mathml">
           <math>
            <semantics>
             <mrow>
              <msub>
               <mi mathvariant="bold">
                o
               </mi>
               <mi>
                t
               </mi>
              </msub>
             </mrow>
             <annotation encoding="application/x-tex">
              \mathbf{o}_{t}
             </annotation>
            </semantics>
           </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.59444em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord"><span class="mord mathbf">o</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.280556em;"><span class="" style="top: -2.55em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">t</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span>控制当前时刻的内部状态<span class="katex--inline"><span class="katex"><span class="katex-mathml">
           <math>
            <semantics>
             <mrow>
              <msub>
               <mi mathvariant="bold">
                c
               </mi>
               <mi>
                t
               </mi>
              </msub>
             </mrow>
             <annotation encoding="application/x-tex">
              \mathbf{c}_{t}
             </annotation>
            </semantics>
           </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.59444em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord"><span class="mord mathbf">c</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.280556em;"><span class="" style="top: -2.55em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">t</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span>有多少信息需要输出给外部状态<span class="katex--inline"><span class="katex"><span class="katex-mathml">
           <math>
            <semantics>
             <mrow>
              <msub>
               <mi mathvariant="bold">
                h
               </mi>
               <mi>
                t
               </mi>
              </msub>
             </mrow>
             <annotation encoding="application/x-tex">
              \mathbf{h}_{t}
             </annotation>
            </semantics>
           </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.84444em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord"><span class="mord mathbf">h</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.280556em;"><span class="" style="top: -2.55em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">t</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span><br> 当<span class="katex--inline"><span class="katex"><span class="katex-mathml">
           <math>
            <semantics>
             <mrow>
              <msub>
               <mi mathvariant="bold">
                f
               </mi>
               <mi>
                t
               </mi>
              </msub>
              <mo>
               =
              </mo>
              <mn>
               0
              </mn>
              <mo separator="true">
               ,
              </mo>
              <msub>
               <mi mathvariant="bold">
                i
               </mi>
               <mi>
                t
               </mi>
              </msub>
              <mo>
               =
              </mo>
              <mn>
               1
              </mn>
             </mrow>
             <annotation encoding="application/x-tex">
              \mathbf{f}_{t}=0, \mathbf{i}_{t}=1
             </annotation>
            </semantics>
           </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.84444em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord"><span class="mord mathbf" style="margin-right: 0.10903em;">f</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.280556em;"><span class="" style="top: -2.55em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">t</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 0.88888em; vertical-align: -0.19444em;"></span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord"><span class="mord"><span class="mord mathbf">i</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.280556em;"><span class="" style="top: -2.55em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">t</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 0.64444em; vertical-align: 0em;"></span><span class="mord">1</span></span></span></span></span>时，记忆单元<span class="katex--inline"><span class="katex"><span class="katex-mathml">
           <math>
            <semantics>
             <mrow>
              <msub>
               <mi mathvariant="bold">
                c
               </mi>
               <mi>
                t
               </mi>
              </msub>
             </mrow>
             <annotation encoding="application/x-tex">
              \mathbf{c}_{t}
             </annotation>
            </semantics>
           </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.59444em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord"><span class="mord mathbf">c</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.280556em;"><span class="" style="top: -2.55em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">t</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span>将历史信息清空，并将候选状态向量<span class="katex--inline"><span class="katex"><span class="katex-mathml">
           <math>
            <semantics>
             <mrow>
              <msub>
               <mover accent="true">
                <mi mathvariant="bold">
                 c
                </mi>
                <mo>
                 ~
                </mo>
               </mover>
               <mi>
                t
               </mi>
              </msub>
             </mrow>
             <annotation encoding="application/x-tex">
              \tilde{\mathbf{c}}_{t}
             </annotation>
            </semantics>
           </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.8313em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.6813em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord"><span class="mord mathbf">c</span></span></span></span><span class="" style="top: -3.36344em;"><span class="pstrut" style="height: 3em;"></span><span class="accent-body" style="left: -0.19444em;">~</span></span></span></span></span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.280556em;"><span class="" style="top: -2.55em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">t</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span>写入。但此时记忆单元<span class="katex--inline"><span class="katex"><span class="katex-mathml">
           <math>
            <semantics>
             <mrow>
              <msub>
               <mi mathvariant="bold">
                c
               </mi>
               <mi>
                t
               </mi>
              </msub>
             </mrow>
             <annotation encoding="application/x-tex">
              \mathbf{c}_{t}
             </annotation>
            </semantics>
           </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.59444em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord"><span class="mord mathbf">c</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.280556em;"><span class="" style="top: -2.55em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">t</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span>依然和上一时刻的历史信息相关。当<span class="katex--inline"><span class="katex"><span class="katex-mathml">
           <math>
            <semantics>
             <mrow>
              <msub>
               <mi mathvariant="bold">
                f
               </mi>
               <mi>
                t
               </mi>
              </msub>
              <mo>
               =
              </mo>
              <mn>
               1
              </mn>
              <mo separator="true">
               ,
              </mo>
              <msub>
               <mi mathvariant="bold">
                i
               </mi>
               <mi>
                t
               </mi>
              </msub>
              <mo>
               =
              </mo>
              <mn>
               0
              </mn>
             </mrow>
             <annotation encoding="application/x-tex">
              \mathbf{f}_{t}=1, \mathbf{i}_{t}=0
             </annotation>
            </semantics>
           </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.84444em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord"><span class="mord mathbf" style="margin-right: 0.10903em;">f</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.280556em;"><span class="" style="top: -2.55em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">t</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 0.88888em; vertical-align: -0.19444em;"></span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord"><span class="mord"><span class="mord mathbf">i</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.280556em;"><span class="" style="top: -2.55em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">t</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 0.64444em; vertical-align: 0em;"></span><span class="mord">0</span></span></span></span></span>时，记忆单元将复制上一时刻的内容，不写入新的信息。三个门的计算公式如下：<br> <span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml">
            <math>
             <semantics>
              <mtable>
               <mtr>
                <mtd>
                 <mstyle scriptlevel="0" displaystyle="true">
                  <msub>
                   <mi mathvariant="bold">
                    i
                   </mi>
                   <mi>
                    t
                   </mi>
                  </msub>
                 </mstyle>
                </mtd>
                <mtd>
                 <mstyle scriptlevel="0" displaystyle="true">
                  <mrow>
                   <mrow></mrow>
                   <mo>
                    =
                   </mo>
                   <mi>
                    σ
                   </mi>
                   <mrow>
                    <mo fence="true">
                     (
                    </mo>
                    <msub>
                     <mi>
                      W
                     </mi>
                     <mi>
                      i
                     </mi>
                    </msub>
                    <msub>
                     <mi mathvariant="bold">
                      x
                     </mi>
                     <mi>
                      t
                     </mi>
                    </msub>
                    <mo>
                     +
                    </mo>
                    <msub>
                     <mi>
                      U
                     </mi>
                     <mi>
                      i
                     </mi>
                    </msub>
                    <msub>
                     <mi mathvariant="bold">
                      h
                     </mi>
                     <mrow>
                      <mi>
                       t
                      </mi>
                      <mo>
                       −
                      </mo>
                      <mn>
                       1
                      </mn>
                     </mrow>
                    </msub>
                    <mo>
                     +
                    </mo>
                    <msub>
                     <mi mathvariant="bold">
                      b
                     </mi>
                     <mi>
                      i
                     </mi>
                    </msub>
                    <mo fence="true">
                     )
                    </mo>
                   </mrow>
                  </mrow>
                 </mstyle>
                </mtd>
               </mtr>
               <mtr>
                <mtd>
                 <mstyle scriptlevel="0" displaystyle="true">
                  <msub>
                   <mi mathvariant="bold">
                    f
                   </mi>
                   <mi>
                    t
                   </mi>
                  </msub>
                 </mstyle>
                </mtd>
                <mtd>
                 <mstyle scriptlevel="0" displaystyle="true">
                  <mrow>
                   <mrow></mrow>
                   <mo>
                    =
                   </mo>
                   <mi>
                    σ
                   </mi>
                   <mrow>
                    <mo fence="true">
                     (
                    </mo>
                    <msub>
                     <mi>
                      W
                     </mi>
                     <mi>
                      f
                     </mi>
                    </msub>
                    <msub>
                     <mi mathvariant="bold">
                      x
                     </mi>
                     <mi>
                      t
                     </mi>
                    </msub>
                    <mo>
                     +
                    </mo>
                    <msub>
                     <mi>
                      U
                     </mi>
                     <mi>
                      f
                     </mi>
                    </msub>
                    <msub>
                     <mi mathvariant="bold">
                      h
                     </mi>
                     <mrow>
                      <mi>
                       t
                      </mi>
                      <mo>
                       −
                      </mo>
                      <mn>
                       1
                      </mn>
                     </mrow>
                    </msub>
                    <mo>
                     +
                    </mo>
                    <msub>
                     <mi mathvariant="bold">
                      b
                     </mi>
                     <mi>
                      f
                     </mi>
                    </msub>
                    <mo fence="true">
                     )
                    </mo>
                   </mrow>
                  </mrow>
                 </mstyle>
                </mtd>
               </mtr>
               <mtr>
                <mtd>
                 <mstyle scriptlevel="0" displaystyle="true">
                  <msub>
                   <mi mathvariant="bold">
                    o
                   </mi>
                   <mi>
                    t
                   </mi>
                  </msub>
                 </mstyle>
                </mtd>
                <mtd>
                 <mstyle scriptlevel="0" displaystyle="true">
                  <mrow>
                   <mrow></mrow>
                   <mo>
                    =
                   </mo>
                   <mi>
                    σ
                   </mi>
                   <mrow>
                    <mo fence="true">
                     (
                    </mo>
                    <msub>
                     <mi>
                      W
                     </mi>
                     <mi>
                      o
                     </mi>
                    </msub>
                    <msub>
                     <mi mathvariant="bold">
                      x
                     </mi>
                     <mi>
                      t
                     </mi>
                    </msub>
                    <mo>
                     +
                    </mo>
                    <msub>
                     <mi>
                      U
                     </mi>
                     <mi>
                      o
                     </mi>
                    </msub>
                    <msub>
                     <mi mathvariant="bold">
                      h
                     </mi>
                     <mrow>
                      <mi>
                       t
                      </mi>
                      <mo>
                       −
                      </mo>
                      <mn>
                       1
                      </mn>
                     </mrow>
                    </msub>
                    <mo>
                     +
                    </mo>
                    <msub>
                     <mi mathvariant="bold">
                      b
                     </mi>
                     <mi>
                      o
                     </mi>
                    </msub>
                    <mo fence="true">
                     )
                    </mo>
                   </mrow>
                  </mrow>
                 </mstyle>
                </mtd>
               </mtr>
              </mtable>
              <annotation encoding="application/x-tex">
                \begin{aligned} \mathbf{i}_{t} &amp;amp;=\sigma\left(W_{i} \mathbf{x}_{t}+U_{i} \mathbf{h}_{t-1}+\mathbf{b}_{i}\right) \\ \mathbf{f}_{t} &amp;amp;=\sigma\left(W_{f} \mathbf{x}_{t}+U_{f} \mathbf{h}_{t-1}+\mathbf{b}_{f}\right) \\ \mathbf{o}_{t} &amp;amp;=\sigma\left(W_{o} \mathbf{x}_{t}+U_{o} \mathbf{h}_{t-1}+\mathbf{b}_{o}\right) \end{aligned} 
              </annotation>
             </semantics>
            </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 4.5em; vertical-align: -2em;"></span><span class="mord"><span class="mtable"><span class="col-align-r"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 2.5em;"><span class="" style="top: -4.66em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord"><span class="mord"><span class="mord mathbf">i</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.280556em;"><span class="" style="top: -2.55em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">t</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span><span class="" style="top: -3.16em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord"><span class="mord"><span class="mord mathbf" style="margin-right: 0.10903em;">f</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.280556em;"><span class="" style="top: -2.55em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">t</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span><span class="" style="top: -1.66em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord"><span class="mord"><span class="mord mathbf">o</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.280556em;"><span class="" style="top: -2.55em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">t</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 2em;"><span class=""></span></span></span></span></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 2.5em;"><span class="" style="top: -4.66em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mord mathit" style="margin-right: 0.03588em;">σ</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="minner"><span class="mopen delimcenter" style="top: 0em;">(</span><span class="mord"><span class="mord mathit" style="margin-right: 0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.311664em;"><span class="" style="top: -2.55em; margin-left: -0.13889em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">i</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mord"><span class="mord"><span class="mord mathbf">x</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.280556em;"><span class="" style="top: -2.55em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">t</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mord"><span class="mord mathit" style="margin-right: 0.10903em;">U</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.311664em;"><span class="" style="top: -2.55em; margin-left: -0.10903em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">i</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mord"><span class="mord"><span class="mord mathbf">h</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">t</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.208331em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mord"><span class="mord"><span class="mord mathbf">b</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.311664em;"><span class="" style="top: -2.55em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">i</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mclose delimcenter" style="top: 0em;">)</span></span></span></span><span class="" style="top: -3.16em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mord mathit" style="margin-right: 0.03588em;">σ</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="minner"><span class="mopen delimcenter" style="top: 0em;">(</span><span class="mord"><span class="mord mathit" style="margin-right: 0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.336108em;"><span class="" style="top: -2.55em; margin-left: -0.13889em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight" style="margin-right: 0.10764em;">f</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.286108em;"><span class=""></span></span></span></span></span></span><span class="mord"><span class="mord"><span class="mord mathbf">x</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.280556em;"><span class="" style="top: -2.55em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">t</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mord"><span class="mord mathit" style="margin-right: 0.10903em;">U</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.336108em;"><span class="" style="top: -2.55em; margin-left: -0.10903em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight" style="margin-right: 0.10764em;">f</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.286108em;"><span class=""></span></span></span></span></span></span><span class="mord"><span class="mord"><span class="mord mathbf">h</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">t</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.208331em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mord"><span class="mord"><span class="mord mathbf">b</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.336108em;"><span class="" style="top: -2.55em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight" style="margin-right: 0.10764em;">f</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.286108em;"><span class=""></span></span></span></span></span></span><span class="mclose delimcenter" style="top: 0em;">)</span></span></span></span><span class="" style="top: -1.66em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mord mathit" style="margin-right: 0.03588em;">σ</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="minner"><span class="mopen delimcenter" style="top: 0em;">(</span><span class="mord"><span class="mord mathit" style="margin-right: 0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.151392em;"><span class="" style="top: -2.55em; margin-left: -0.13889em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">o</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mord"><span class="mord"><span class="mord mathbf">x</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.280556em;"><span class="" style="top: -2.55em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">t</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mord"><span class="mord mathit" style="margin-right: 0.10903em;">U</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.151392em;"><span class="" style="top: -2.55em; margin-left: -0.10903em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">o</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mord"><span class="mord"><span class="mord mathbf">h</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">t</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.208331em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mord"><span class="mord"><span class="mord mathbf">b</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.151392em;"><span class="" style="top: -2.55em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">o</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mclose delimcenter" style="top: 0em;">)</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 2em;"><span class=""></span></span></span></span></span></span></span></span></span></span></span></span><br> 其中，激活函数使用sigmoid函数，其输出区间是(0,1)，<span class="katex--inline"><span class="katex"><span class="katex-mathml">
           <math>
            <semantics>
             <mrow>
              <msub>
               <mi mathvariant="bold">
                x
               </mi>
               <mi>
                t
               </mi>
              </msub>
             </mrow>
             <annotation encoding="application/x-tex">
              \mathbf{x}_{t}
             </annotation>
            </semantics>
           </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.59444em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord"><span class="mord mathbf">x</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.280556em;"><span class="" style="top: -2.55em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">t</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span>表示当前时刻的输入，<span class="katex--inline"><span class="katex"><span class="katex-mathml">
           <math>
            <semantics>
             <mrow>
              <msub>
               <mi mathvariant="bold">
                h
               </mi>
               <mrow>
                <mi>
                 t
                </mi>
                <mo>
                 −
                </mo>
                <mn>
                 1
                </mn>
               </mrow>
              </msub>
             </mrow>
             <annotation encoding="application/x-tex">
              \mathbf{h}_{t-1}
             </annotation>
            </semantics>
           </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.902771em; vertical-align: -0.208331em;"></span><span class="mord"><span class="mord"><span class="mord mathbf">h</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">t</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.208331em;"><span class=""></span></span></span></span></span></span></span></span></span></span>表示上一时刻的外部状态。</li> 
      </ul> </li> 
    </ul> </li> 
   <li> <p>2.2 LSTM网络的循环单元结构如下图所示，计算过程如下：</p> 
    <ul> 
     <li>a.利用上一时刻的外部状态<span class="katex--inline"><span class="katex"><span class="katex-mathml">
         <math>
          <semantics>
           <mrow>
            <msub>
             <mi mathvariant="bold">
              h
             </mi>
             <mrow>
              <mi>
               t
              </mi>
              <mo>
               −
              </mo>
              <mn>
               1
              </mn>
             </mrow>
            </msub>
           </mrow>
           <annotation encoding="application/x-tex">
            \mathbf{h}_{t-1}
           </annotation>
          </semantics>
         </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.902771em; vertical-align: -0.208331em;"></span><span class="mord"><span class="mord"><span class="mord mathbf">h</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">t</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.208331em;"><span class=""></span></span></span></span></span></span></span></span></span></span>和当前时刻的输入<span class="katex--inline"><span class="katex"><span class="katex-mathml">
         <math>
          <semantics>
           <mrow>
            <msub>
             <mi mathvariant="bold">
              x
             </mi>
             <mi>
              t
             </mi>
            </msub>
           </mrow>
           <annotation encoding="application/x-tex">
            \mathbf{x}_{t}
           </annotation>
          </semantics>
         </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.59444em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord"><span class="mord mathbf">x</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.280556em;"><span class="" style="top: -2.55em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">t</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span>，计算出三个门，已经候选状态<span class="katex--inline"><span class="katex"><span class="katex-mathml">
         <math>
          <semantics>
           <mrow>
            <msub>
             <mover accent="true">
              <mi mathvariant="bold">
               c
              </mi>
              <mo>
               ~
              </mo>
             </mover>
             <mi>
              t
             </mi>
            </msub>
           </mrow>
           <annotation encoding="application/x-tex">
            \tilde{\mathbf{c}}_{t}
           </annotation>
          </semantics>
         </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.8313em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.6813em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord"><span class="mord mathbf">c</span></span></span></span><span class="" style="top: -3.36344em;"><span class="pstrut" style="height: 3em;"></span><span class="accent-body" style="left: -0.19444em;">~</span></span></span></span></span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.280556em;"><span class="" style="top: -2.55em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">t</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span><br> <span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml">
          <math>
           <semantics>
            <mtable>
             <mtr>
              <mtd>
               <mstyle scriptlevel="0" displaystyle="true">
                <msub>
                 <mi mathvariant="bold">
                  i
                 </mi>
                 <mi>
                  t
                 </mi>
                </msub>
               </mstyle>
              </mtd>
              <mtd>
               <mstyle scriptlevel="0" displaystyle="true">
                <mrow>
                 <mrow></mrow>
                 <mo>
                  =
                 </mo>
                 <mi>
                  σ
                 </mi>
                 <mrow>
                  <mo fence="true">
                   (
                  </mo>
                  <msub>
                   <mi>
                    W
                   </mi>
                   <mi>
                    i
                   </mi>
                  </msub>
                  <msub>
                   <mi mathvariant="bold">
                    x
                   </mi>
                   <mi>
                    t
                   </mi>
                  </msub>
                  <mo>
                   +
                  </mo>
                  <msub>
                   <mi>
                    U
                   </mi>
                   <mi>
                    i
                   </mi>
                  </msub>
                  <msub>
                   <mi mathvariant="bold">
                    h
                   </mi>
                   <mrow>
                    <mi>
                     t
                    </mi>
                    <mo>
                     −
                    </mo>
                    <mn>
                     1
                    </mn>
                   </mrow>
                  </msub>
                  <mo>
                   +
                  </mo>
                  <msub>
                   <mi mathvariant="bold">
                    b
                   </mi>
                   <mi>
                    i
                   </mi>
                  </msub>
                  <mo fence="true">
                   )
                  </mo>
                 </mrow>
                </mrow>
               </mstyle>
              </mtd>
             </mtr>
             <mtr>
              <mtd>
               <mstyle scriptlevel="0" displaystyle="true">
                <msub>
                 <mi mathvariant="bold">
                  f
                 </mi>
                 <mi>
                  t
                 </mi>
                </msub>
               </mstyle>
              </mtd>
              <mtd>
               <mstyle scriptlevel="0" displaystyle="true">
                <mrow>
                 <mrow></mrow>
                 <mo>
                  =
                 </mo>
                 <mi>
                  σ
                 </mi>
                 <mrow>
                  <mo fence="true">
                   (
                  </mo>
                  <msub>
                   <mi>
                    W
                   </mi>
                   <mi>
                    f
                   </mi>
                  </msub>
                  <msub>
                   <mi mathvariant="bold">
                    x
                   </mi>
                   <mi>
                    t
                   </mi>
                  </msub>
                  <mo>
                   +
                  </mo>
                  <msub>
                   <mi>
                    U
                   </mi>
                   <mi>
                    f
                   </mi>
                  </msub>
                  <msub>
                   <mi mathvariant="bold">
                    h
                   </mi>
                   <mrow>
                    <mi>
                     t
                    </mi>
                    <mo>
                     −
                    </mo>
                    <mn>
                     1
                    </mn>
                   </mrow>
                  </msub>
                  <mo>
                   +
                  </mo>
                  <msub>
                   <mi mathvariant="bold">
                    b
                   </mi>
                   <mi>
                    f
                   </mi>
                  </msub>
                  <mo fence="true">
                   )
                  </mo>
                 </mrow>
                </mrow>
               </mstyle>
              </mtd>
             </mtr>
             <mtr>
              <mtd>
               <mstyle scriptlevel="0" displaystyle="true">
                <msub>
                 <mi mathvariant="bold">
                  o
                 </mi>
                 <mi>
                  t
                 </mi>
                </msub>
               </mstyle>
              </mtd>
              <mtd>
               <mstyle scriptlevel="0" displaystyle="true">
                <mrow>
                 <mrow></mrow>
                 <mo>
                  =
                 </mo>
                 <mi>
                  σ
                 </mi>
                 <mrow>
                  <mo fence="true">
                   (
                  </mo>
                  <msub>
                   <mi>
                    W
                   </mi>
                   <mi>
                    o
                   </mi>
                  </msub>
                  <msub>
                   <mi mathvariant="bold">
                    x
                   </mi>
                   <mi>
                    t
                   </mi>
                  </msub>
                  <mo>
                   +
                  </mo>
                  <msub>
                   <mi>
                    U
                   </mi>
                   <mi>
                    o
                   </mi>
                  </msub>
                  <msub>
                   <mi mathvariant="bold">
                    h
                   </mi>
                   <mrow>
                    <mi>
                     t
                    </mi>
                    <mo>
                     −
                    </mo>
                    <mn>
                     1
                    </mn>
                   </mrow>
                  </msub>
                  <mo>
                   +
                  </mo>
                  <msub>
                   <mi mathvariant="bold">
                    b
                   </mi>
                   <mi>
                    o
                   </mi>
                  </msub>
                  <mo fence="true">
                   )
                  </mo>
                 </mrow>
                </mrow>
               </mstyle>
              </mtd>
             </mtr>
            </mtable>
            <annotation encoding="application/x-tex">
              \begin{aligned} \mathbf{i}_{t} &amp;amp;=\sigma\left(W_{i} \mathbf{x}_{t}+U_{i} \mathbf{h}_{t-1}+\mathbf{b}_{i}\right) \\ \mathbf{f}_{t} &amp;amp;=\sigma\left(W_{f} \mathbf{x}_{t}+U_{f} \mathbf{h}_{t-1}+\mathbf{b}_{f}\right) \\ \mathbf{o}_{t} &amp;amp;=\sigma\left(W_{o} \mathbf{x}_{t}+U_{o} \mathbf{h}_{t-1}+\mathbf{b}_{o}\right) \end{aligned} 
            </annotation>
           </semantics>
          </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 4.5em; vertical-align: -2em;"></span><span class="mord"><span class="mtable"><span class="col-align-r"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 2.5em;"><span class="" style="top: -4.66em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord"><span class="mord"><span class="mord mathbf">i</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.280556em;"><span class="" style="top: -2.55em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">t</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span><span class="" style="top: -3.16em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord"><span class="mord"><span class="mord mathbf" style="margin-right: 0.10903em;">f</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.280556em;"><span class="" style="top: -2.55em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">t</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span><span class="" style="top: -1.66em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord"><span class="mord"><span class="mord mathbf">o</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.280556em;"><span class="" style="top: -2.55em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">t</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 2em;"><span class=""></span></span></span></span></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 2.5em;"><span class="" style="top: -4.66em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mord mathit" style="margin-right: 0.03588em;">σ</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="minner"><span class="mopen delimcenter" style="top: 0em;">(</span><span class="mord"><span class="mord mathit" style="margin-right: 0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.311664em;"><span class="" style="top: -2.55em; margin-left: -0.13889em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">i</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mord"><span class="mord"><span class="mord mathbf">x</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.280556em;"><span class="" style="top: -2.55em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">t</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mord"><span class="mord mathit" style="margin-right: 0.10903em;">U</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.311664em;"><span class="" style="top: -2.55em; margin-left: -0.10903em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">i</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mord"><span class="mord"><span class="mord mathbf">h</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">t</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.208331em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mord"><span class="mord"><span class="mord mathbf">b</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.311664em;"><span class="" style="top: -2.55em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">i</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mclose delimcenter" style="top: 0em;">)</span></span></span></span><span class="" style="top: -3.16em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mord mathit" style="margin-right: 0.03588em;">σ</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="minner"><span class="mopen delimcenter" style="top: 0em;">(</span><span class="mord"><span class="mord mathit" style="margin-right: 0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.336108em;"><span class="" style="top: -2.55em; margin-left: -0.13889em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight" style="margin-right: 0.10764em;">f</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.286108em;"><span class=""></span></span></span></span></span></span><span class="mord"><span class="mord"><span class="mord mathbf">x</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.280556em;"><span class="" style="top: -2.55em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">t</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mord"><span class="mord mathit" style="margin-right: 0.10903em;">U</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.336108em;"><span class="" style="top: -2.55em; margin-left: -0.10903em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight" style="margin-right: 0.10764em;">f</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.286108em;"><span class=""></span></span></span></span></span></span><span class="mord"><span class="mord"><span class="mord mathbf">h</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">t</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.208331em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mord"><span class="mord"><span class="mord mathbf">b</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.336108em;"><span class="" style="top: -2.55em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight" style="margin-right: 0.10764em;">f</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.286108em;"><span class=""></span></span></span></span></span></span><span class="mclose delimcenter" style="top: 0em;">)</span></span></span></span><span class="" style="top: -1.66em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mord mathit" style="margin-right: 0.03588em;">σ</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="minner"><span class="mopen delimcenter" style="top: 0em;">(</span><span class="mord"><span class="mord mathit" style="margin-right: 0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.151392em;"><span class="" style="top: -2.55em; margin-left: -0.13889em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">o</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mord"><span class="mord"><span class="mord mathbf">x</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.280556em;"><span class="" style="top: -2.55em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">t</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mord"><span class="mord mathit" style="margin-right: 0.10903em;">U</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.151392em;"><span class="" style="top: -2.55em; margin-left: -0.10903em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">o</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mord"><span class="mord"><span class="mord mathbf">h</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">t</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.208331em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mord"><span class="mord"><span class="mord mathbf">b</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.151392em;"><span class="" style="top: -2.55em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">o</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mclose delimcenter" style="top: 0em;">)</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 2em;"><span class=""></span></span></span></span></span></span></span></span></span></span></span></span></li> 
    </ul> <p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml">
         <math>
          <semantics>
           <mrow>
            <msub>
             <mover accent="true">
              <mi mathvariant="bold">
               c
              </mi>
              <mo>
               ~
              </mo>
             </mover>
             <mi>
              t
             </mi>
            </msub>
            <mo>
             =
            </mo>
            <mi>
             tanh
            </mi>
            <mo>
             ⁡
            </mo>
            <mrow>
             <mo fence="true">
              (
             </mo>
             <msub>
              <mi>
               W
              </mi>
              <mi>
               c
              </mi>
             </msub>
             <msub>
              <mi mathvariant="bold">
               x
              </mi>
              <mi>
               t
              </mi>
             </msub>
             <mo>
              +
             </mo>
             <msub>
              <mi>
               U
              </mi>
              <mi>
               c
              </mi>
             </msub>
             <msub>
              <mi mathvariant="bold">
               h
              </mi>
              <mrow>
               <mi>
                t
               </mi>
               <mo>
                −
               </mo>
               <mn>
                1
               </mn>
              </mrow>
             </msub>
             <mo>
              +
             </mo>
             <msub>
              <mi mathvariant="bold">
               b
              </mi>
              <mi>
               c
              </mi>
             </msub>
             <mo fence="true">
              )
             </mo>
            </mrow>
           </mrow>
           <annotation encoding="application/x-tex">
             \tilde{\mathbf{c}}_{t}=\tanh \left(W_{c} \mathbf{x}_{t}+U_{c} \mathbf{h}_{t-1}+\mathbf{b}_{c}\right) 
           </annotation>
          </semantics>
         </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.8313em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.6813em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord"><span class="mord mathbf">c</span></span></span></span><span class="" style="top: -3.36344em;"><span class="pstrut" style="height: 3em;"></span><span class="accent-body" style="left: -0.19444em;">~</span></span></span></span></span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.280556em;"><span class="" style="top: -2.55em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">t</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mop">tanh</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="minner"><span class="mopen delimcenter" style="top: 0em;">(</span><span class="mord"><span class="mord mathit" style="margin-right: 0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.151392em;"><span class="" style="top: -2.55em; margin-left: -0.13889em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">c</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mord"><span class="mord"><span class="mord mathbf">x</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.280556em;"><span class="" style="top: -2.55em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">t</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mord"><span class="mord mathit" style="margin-right: 0.10903em;">U</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.151392em;"><span class="" style="top: -2.55em; margin-left: -0.10903em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">c</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mord"><span class="mord"><span class="mord mathbf">h</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">t</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.208331em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mord"><span class="mord"><span class="mord mathbf">b</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.151392em;"><span class="" style="top: -2.55em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">c</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mclose delimcenter" style="top: 0em;">)</span></span></span></span></span></span></span></p> 
    <ul> 
     <li>b.结合遗忘门<span class="katex--inline"><span class="katex"><span class="katex-mathml">
         <math>
          <semantics>
           <mrow>
            <msub>
             <mi mathvariant="bold">
              f
             </mi>
             <mi>
              t
             </mi>
            </msub>
           </mrow>
           <annotation encoding="application/x-tex">
            \mathbf{f}_{t}
           </annotation>
          </semantics>
         </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.84444em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord"><span class="mord mathbf" style="margin-right: 0.10903em;">f</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.280556em;"><span class="" style="top: -2.55em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">t</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span>和输入门<span class="katex--inline"><span class="katex"><span class="katex-mathml">
         <math>
          <semantics>
           <mrow>
            <msub>
             <mi mathvariant="bold">
              i
             </mi>
             <mi>
              t
             </mi>
            </msub>
           </mrow>
           <annotation encoding="application/x-tex">
            \mathbf{i}_{t}
           </annotation>
          </semantics>
         </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.84444em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord"><span class="mord mathbf">i</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.280556em;"><span class="" style="top: -2.55em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">t</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span>来更新记忆单元<span class="katex--inline"><span class="katex"><span class="katex-mathml">
         <math>
          <semantics>
           <mrow>
            <msub>
             <mi mathvariant="bold">
              c
             </mi>
             <mi>
              t
             </mi>
            </msub>
           </mrow>
           <annotation encoding="application/x-tex">
            \mathbf{c}_{t}
           </annotation>
          </semantics>
         </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.59444em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord"><span class="mord mathbf">c</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.280556em;"><span class="" style="top: -2.55em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">t</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span><br> <span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml">
          <math>
           <semantics>
            <mrow>
             <msub>
              <mi mathvariant="bold">
               c
              </mi>
              <mi>
               t
              </mi>
             </msub>
             <mo>
              =
             </mo>
             <msub>
              <mi mathvariant="bold">
               f
              </mi>
              <mi>
               t
              </mi>
             </msub>
             <mo>
              ⊙
             </mo>
             <msub>
              <mi mathvariant="bold">
               c
              </mi>
              <mrow>
               <mi>
                t
               </mi>
               <mo>
                −
               </mo>
               <mn>
                1
               </mn>
              </mrow>
             </msub>
             <mo>
              +
             </mo>
             <msub>
              <mi mathvariant="bold">
               i
              </mi>
              <mi>
               t
              </mi>
             </msub>
             <mo>
              ⊙
             </mo>
             <msub>
              <mover accent="true">
               <mi mathvariant="bold">
                c
               </mi>
               <mo>
                ~
               </mo>
              </mover>
              <mi>
               t
              </mi>
             </msub>
            </mrow>
            <annotation encoding="application/x-tex">
              \mathbf{c}_{t}=\mathbf{f}_{t} \odot \mathbf{c}_{t-1}+\mathbf{i}_{t} \odot \tilde{\mathbf{c}}_{t} 
            </annotation>
           </semantics>
          </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.59444em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord"><span class="mord mathbf">c</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.280556em;"><span class="" style="top: -2.55em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">t</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 0.84444em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord"><span class="mord mathbf" style="margin-right: 0.10903em;">f</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.280556em;"><span class="" style="top: -2.55em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">t</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">⊙</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 0.791661em; vertical-align: -0.208331em;"></span><span class="mord"><span class="mord"><span class="mord mathbf">c</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">t</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.208331em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 0.84444em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord"><span class="mord mathbf">i</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.280556em;"><span class="" style="top: -2.55em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">t</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">⊙</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 0.8313em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.6813em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord"><span class="mord mathbf">c</span></span></span></span><span class="" style="top: -3.36344em;"><span class="pstrut" style="height: 3em;"></span><span class="accent-body" style="left: -0.19444em;">~</span></span></span></span></span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.280556em;"><span class="" style="top: -2.55em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">t</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span></span></li> 
     <li>c.结合输出门<span class="katex--inline"><span class="katex"><span class="katex-mathml">
         <math>
          <semantics>
           <mrow>
            <msub>
             <mi mathvariant="bold">
              o
             </mi>
             <mi>
              t
             </mi>
            </msub>
           </mrow>
           <annotation encoding="application/x-tex">
            \mathbf{o}_{t}
           </annotation>
          </semantics>
         </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.59444em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord"><span class="mord mathbf">o</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.280556em;"><span class="" style="top: -2.55em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">t</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span>，将内部状态的信息传递给外部状态<span class="katex--inline"><span class="katex"><span class="katex-mathml">
         <math>
          <semantics>
           <mrow>
            <msub>
             <mi mathvariant="bold">
              h
             </mi>
             <mi>
              t
             </mi>
            </msub>
           </mrow>
           <annotation encoding="application/x-tex">
            \mathbf{h}_{t}
           </annotation>
          </semantics>
         </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.84444em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord"><span class="mord mathbf">h</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.280556em;"><span class="" style="top: -2.55em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">t</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span><br> <span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml">
          <math>
           <semantics>
            <mrow>
             <msub>
              <mi mathvariant="bold">
               h
              </mi>
              <mi>
               t
              </mi>
             </msub>
             <mo>
              =
             </mo>
             <msub>
              <mi mathvariant="bold">
               o
              </mi>
              <mi>
               t
              </mi>
             </msub>
             <mo>
              ⊙
             </mo>
             <mi>
              tanh
             </mi>
             <mo>
              ⁡
             </mo>
             <mrow>
              <mo fence="true">
               (
              </mo>
              <msub>
               <mi mathvariant="bold">
                c
               </mi>
               <mi>
                t
               </mi>
              </msub>
              <mo fence="true">
               )
              </mo>
             </mrow>
            </mrow>
            <annotation encoding="application/x-tex">
              \mathbf{h}_{t}=\mathbf{o}_{t} \odot \tanh \left(\mathbf{c}_{t}\right) 
            </annotation>
           </semantics>
          </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.84444em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord"><span class="mord mathbf">h</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.280556em;"><span class="" style="top: -2.55em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">t</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 0.73333em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord"><span class="mord mathbf">o</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.280556em;"><span class="" style="top: -2.55em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">t</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">⊙</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mop">tanh</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="minner"><span class="mopen delimcenter" style="top: 0em;">(</span><span class="mord"><span class="mord"><span class="mord mathbf">c</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.280556em;"><span class="" style="top: -2.55em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">t</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mclose delimcenter" style="top: 0em;">)</span></span></span></span></span></span></span></li> 
    </ul> </li> 
  </ul> 
  <p><img src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190705155900805.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2NkbHdobTEyMTcwOTYyMzE=,size_16,color_FFFFFF,t_70" alt="LSTM Cell"></p> 
  <h4><a id="3GRU_41"></a>3.门控循环单元网络GRU</h4> 
  <ul> 
   <li>GRU与LSTM的不同之处在于：<strong>GRU不引入额外的记忆单元<span class="katex--inline"><span class="katex"><span class="katex-mathml">
        <math>
         <semantics>
          <mrow>
           <msub>
            <mi mathvariant="bold">
             c
            </mi>
            <mi>
             t
            </mi>
           </msub>
          </mrow>
          <annotation encoding="application/x-tex">
           \mathbf{c}_{t}
          </annotation>
         </semantics>
        </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.59444em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord"><span class="mord mathbf">c</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.280556em;"><span class="" style="top: -2.55em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">t</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span>，GRU网络引入一个更新门来控制当前状态需要从历史状态中保留多少信息(不经过非线性变换)，以及需要从候选状态中接收多少新的信息。</strong><br> <span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml">
        <math>
         <semantics>
          <mrow>
           <msub>
            <mi mathvariant="bold">
             h
            </mi>
            <mi>
             t
            </mi>
           </msub>
           <mo>
            =
           </mo>
           <msub>
            <mi mathvariant="bold">
             z
            </mi>
            <mi>
             t
            </mi>
           </msub>
           <mo>
            ⊙
           </mo>
           <msub>
            <mi mathvariant="bold">
             h
            </mi>
            <mrow>
             <mi>
              t
             </mi>
             <mo>
              −
             </mo>
             <mn>
              1
             </mn>
            </mrow>
           </msub>
           <mo>
            +
           </mo>
           <mrow>
            <mo fence="true">
             (
            </mo>
            <mn>
             1
            </mn>
            <mo>
             −
            </mo>
            <msub>
             <mi mathvariant="bold">
              z
             </mi>
             <mi>
              t
             </mi>
            </msub>
            <mo fence="true">
             )
            </mo>
           </mrow>
           <mo>
            ⊙
           </mo>
           <mi>
            g
           </mi>
           <mrow>
            <mo fence="true">
             (
            </mo>
            <msub>
             <mi mathvariant="bold">
              x
             </mi>
             <mi>
              t
             </mi>
            </msub>
            <mo separator="true">
             ,
            </mo>
            <msub>
             <mi mathvariant="bold">
              h
             </mi>
             <mrow>
              <mi>
               t
              </mi>
              <mo>
               −
              </mo>
              <mn>
               1
              </mn>
             </mrow>
            </msub>
            <mo separator="true">
             ;
            </mo>
            <mi>
             θ
            </mi>
            <mo fence="true">
             )
            </mo>
           </mrow>
          </mrow>
          <annotation encoding="application/x-tex">
            \mathbf{h}_{t}=\mathbf{z}_{t} \odot \mathbf{h}_{t-1}+\left(1-\mathbf{z}_{t}\right) \odot g\left(\mathbf{x}_{t}, \mathbf{h}_{t-1} ; \theta\right) 
          </annotation>
         </semantics>
        </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.84444em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord"><span class="mord mathbf">h</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.280556em;"><span class="" style="top: -2.55em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">t</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 0.73333em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord"><span class="mord mathbf">z</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.280556em;"><span class="" style="top: -2.55em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">t</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">⊙</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 0.902771em; vertical-align: -0.208331em;"></span><span class="mord"><span class="mord"><span class="mord mathbf">h</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">t</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.208331em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="minner"><span class="mopen delimcenter" style="top: 0em;">(</span><span class="mord">1</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mord"><span class="mord"><span class="mord mathbf">z</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.280556em;"><span class="" style="top: -2.55em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">t</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mclose delimcenter" style="top: 0em;">)</span></span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">⊙</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathit" style="margin-right: 0.03588em;">g</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="minner"><span class="mopen delimcenter" style="top: 0em;">(</span><span class="mord"><span class="mord"><span class="mord mathbf">x</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.280556em;"><span class="" style="top: -2.55em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">t</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord"><span class="mord"><span class="mord mathbf">h</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">t</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.208331em;"><span class=""></span></span></span></span></span></span><span class="mpunct">;</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord mathit" style="margin-right: 0.02778em;">θ</span><span class="mclose delimcenter" style="top: 0em;">)</span></span></span></span></span></span></span><br> 其中，<span class="katex--inline"><span class="katex"><span class="katex-mathml">
       <math>
        <semantics>
         <mrow>
          <msub>
           <mi mathvariant="bold">
            z
           </mi>
           <mi>
            t
           </mi>
          </msub>
          <mo>
           ∈
          </mo>
          <mo>
           [
          </mo>
          <mn>
           0
          </mn>
          <mo separator="true">
           ,
          </mo>
          <mn>
           1
          </mn>
          <mo>
           ]
          </mo>
         </mrow>
         <annotation encoding="application/x-tex">
          \mathbf{z}_{t} \in[0,1]
         </annotation>
        </semantics>
       </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.6891em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord"><span class="mord mathbf">z</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.280556em;"><span class="" style="top: -2.55em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">t</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mopen">[</span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord">1</span><span class="mclose">]</span></span></span></span></span>为更新门<br> <span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml">
        <math>
         <semantics>
          <mrow>
           <msub>
            <mi mathvariant="bold">
             z
            </mi>
            <mi>
             t
            </mi>
           </msub>
           <mo>
            =
           </mo>
           <mi>
            σ
           </mi>
           <mrow>
            <mo fence="true">
             (
            </mo>
            <msub>
             <mi mathvariant="bold">
              W
             </mi>
             <mi>
              z
             </mi>
            </msub>
            <msub>
             <mi mathvariant="bold">
              x
             </mi>
             <mi>
              t
             </mi>
            </msub>
            <mo>
             +
            </mo>
            <msub>
             <mi mathvariant="bold">
              U
             </mi>
             <mi>
              z
             </mi>
            </msub>
            <msub>
             <mi mathvariant="bold">
              h
             </mi>
             <mrow>
              <mi>
               t
              </mi>
              <mo>
               −
              </mo>
              <mn>
               1
              </mn>
             </mrow>
            </msub>
            <mo>
             +
            </mo>
            <msub>
             <mi mathvariant="bold">
              b
             </mi>
             <mi>
              z
             </mi>
            </msub>
            <mo fence="true">
             )
            </mo>
           </mrow>
          </mrow>
          <annotation encoding="application/x-tex">
            \mathbf{z}_{t}=\sigma\left(\mathbf{W}_{z} \mathbf{x}_{t}+\mathbf{U}_{z} \mathbf{h}_{t-1}+\mathbf{b}_{z}\right) 
          </annotation>
         </semantics>
        </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.59444em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord"><span class="mord mathbf">z</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.280556em;"><span class="" style="top: -2.55em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">t</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathit" style="margin-right: 0.03588em;">σ</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="minner"><span class="mopen delimcenter" style="top: 0em;">(</span><span class="mord"><span class="mord"><span class="mord mathbf" style="margin-right: 0.01597em;">W</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.151392em;"><span class="" style="top: -2.55em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight" style="margin-right: 0.04398em;">z</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mord"><span class="mord"><span class="mord mathbf">x</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.280556em;"><span class="" style="top: -2.55em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">t</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mord"><span class="mord"><span class="mord mathbf">U</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.151392em;"><span class="" style="top: -2.55em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight" style="margin-right: 0.04398em;">z</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mord"><span class="mord"><span class="mord mathbf">h</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">t</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.208331em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mord"><span class="mord"><span class="mord mathbf">b</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.151392em;"><span class="" style="top: -2.55em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight" style="margin-right: 0.04398em;">z</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mclose delimcenter" style="top: 0em;">)</span></span></span></span></span></span></span><br> 在GRU网络中，函数<span class="katex--inline"><span class="katex"><span class="katex-mathml">
       <math>
        <semantics>
         <mrow>
          <mi>
           g
          </mi>
          <mrow>
           <mo fence="true">
            (
           </mo>
           <msub>
            <mi mathvariant="bold">
             x
            </mi>
            <mi>
             t
            </mi>
           </msub>
           <mo separator="true">
            ,
           </mo>
           <msub>
            <mi mathvariant="bold">
             h
            </mi>
            <mrow>
             <mi>
              t
             </mi>
             <mo>
              −
             </mo>
             <mn>
              1
             </mn>
            </mrow>
           </msub>
           <mo separator="true">
            ;
           </mo>
           <mi>
            θ
           </mi>
           <mo fence="true">
            )
           </mo>
          </mrow>
         </mrow>
         <annotation encoding="application/x-tex">
          g\left(\mathbf{x}_{t}, \mathbf{h}_{t-1} ; \theta\right)
         </annotation>
        </semantics>
       </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathit" style="margin-right: 0.03588em;">g</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="minner"><span class="mopen delimcenter" style="top: 0em;">(</span><span class="mord"><span class="mord"><span class="mord mathbf">x</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.280556em;"><span class="" style="top: -2.55em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">t</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord"><span class="mord"><span class="mord mathbf">h</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">t</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.208331em;"><span class=""></span></span></span></span></span></span><span class="mpunct">;</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord mathit" style="margin-right: 0.02778em;">θ</span><span class="mclose delimcenter" style="top: 0em;">)</span></span></span></span></span></span>定义为：<br> <span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml">
        <math>
         <semantics>
          <mrow>
           <msub>
            <mover accent="true">
             <mi mathvariant="bold">
              h
             </mi>
             <mo>
              ~
             </mo>
            </mover>
            <mi>
             t
            </mi>
           </msub>
           <mo>
            =
           </mo>
           <mi>
            tanh
           </mi>
           <mo>
            ⁡
           </mo>
           <mrow>
            <mo fence="true">
             (
            </mo>
            <msub>
             <mi>
              W
             </mi>
             <mi>
              h
             </mi>
            </msub>
            <msub>
             <mi mathvariant="bold">
              x
             </mi>
             <mi>
              t
             </mi>
            </msub>
            <mo>
             +
            </mo>
            <msub>
             <mi>
              U
             </mi>
             <mi>
              h
             </mi>
            </msub>
            <mrow>
             <mo fence="true">
              (
             </mo>
             <msub>
              <mi mathvariant="bold">
               r
              </mi>
              <mi>
               t
              </mi>
             </msub>
             <mo>
              ⊙
             </mo>
             <msub>
              <mi mathvariant="bold">
               h
              </mi>
              <mrow>
               <mi>
                t
               </mi>
               <mo>
                −
               </mo>
               <mn>
                1
               </mn>
              </mrow>
             </msub>
             <mo fence="true">
              )
             </mo>
            </mrow>
            <mo>
             +
            </mo>
            <msub>
             <mi mathvariant="bold">
              b
             </mi>
             <mi>
              h
             </mi>
            </msub>
            <mo fence="true">
             )
            </mo>
           </mrow>
          </mrow>
          <annotation encoding="application/x-tex">
            \tilde{\mathbf{h}}_{t}=\tanh \left(W_{h} \mathbf{x}_{t}+U_{h}\left(\mathbf{r}_{t} \odot \mathbf{h}_{t-1}\right)+\mathbf{b}_{h}\right) 
          </annotation>
         </semantics>
        </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1.0813em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.9313em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord"><span class="mord mathbf">h</span></span></span></span><span class="" style="top: -3.61344em;"><span class="pstrut" style="height: 3em;"></span><span class="accent-body" style="left: -0.25em;">~</span></span></span></span></span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.280556em;"><span class="" style="top: -2.55em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">t</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mop">tanh</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="minner"><span class="mopen delimcenter" style="top: 0em;">(</span><span class="mord"><span class="mord mathit" style="margin-right: 0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.336108em;"><span class="" style="top: -2.55em; margin-left: -0.13889em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">h</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mord"><span class="mord"><span class="mord mathbf">x</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.280556em;"><span class="" style="top: -2.55em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">t</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mord"><span class="mord mathit" style="margin-right: 0.10903em;">U</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.336108em;"><span class="" style="top: -2.55em; margin-left: -0.10903em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">h</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="minner"><span class="mopen delimcenter" style="top: 0em;">(</span><span class="mord"><span class="mord"><span class="mord mathbf">r</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.280556em;"><span class="" style="top: -2.55em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">t</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">⊙</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mord"><span class="mord"><span class="mord mathbf">h</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">t</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.208331em;"><span class=""></span></span></span></span></span></span><span class="mclose delimcenter" style="top: 0em;">)</span></span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mord"><span class="mord"><span class="mord mathbf">b</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.336108em;"><span class="" style="top: -2.55em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">h</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mclose delimcenter" style="top: 0em;">)</span></span></span></span></span></span></span><br> 上式中的符号说明：<span class="katex--inline"><span class="katex"><span class="katex-mathml">
       <math>
        <semantics>
         <mrow>
          <msub>
           <mover accent="true">
            <mi mathvariant="bold">
             h
            </mi>
            <mo>
             ~
            </mo>
           </mover>
           <mi>
            t
           </mi>
          </msub>
         </mrow>
         <annotation encoding="application/x-tex">
          \tilde{\mathbf{h}}_{t}
         </annotation>
        </semantics>
       </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1.0813em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.9313em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord"><span class="mord mathbf">h</span></span></span></span><span class="" style="top: -3.61344em;"><span class="pstrut" style="height: 3em;"></span><span class="accent-body" style="left: -0.25em;">~</span></span></span></span></span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.280556em;"><span class="" style="top: -2.55em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">t</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span>表示当前时刻的候选状态，<span class="katex--inline"><span class="katex"><span class="katex-mathml">
       <math>
        <semantics>
         <mrow>
          <msub>
           <mi mathvariant="bold">
            r
           </mi>
           <mi>
            t
           </mi>
          </msub>
          <mo>
           ∈
          </mo>
          <mo>
           [
          </mo>
          <mn>
           0
          </mn>
          <mo separator="true">
           ,
          </mo>
          <mn>
           1
          </mn>
          <mo>
           ]
          </mo>
         </mrow>
         <annotation encoding="application/x-tex">
          \mathbf{r}_{t} \in[0,1]
         </annotation>
        </semantics>
       </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.6891em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord"><span class="mord mathbf">r</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.280556em;"><span class="" style="top: -2.55em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">t</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mopen">[</span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord">1</span><span class="mclose">]</span></span></span></span></span>为重置门，用来控制候选状态<span class="katex--inline"><span class="katex"><span class="katex-mathml">
       <math>
        <semantics>
         <mrow>
          <msub>
           <mover accent="true">
            <mi mathvariant="bold">
             h
            </mi>
            <mo>
             ~
            </mo>
           </mover>
           <mi>
            t
           </mi>
          </msub>
         </mrow>
         <annotation encoding="application/x-tex">
          \tilde{\mathbf{h}}_{t}
         </annotation>
        </semantics>
       </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1.0813em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.9313em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord"><span class="mord mathbf">h</span></span></span></span><span class="" style="top: -3.61344em;"><span class="pstrut" style="height: 3em;"></span><span class="accent-body" style="left: -0.25em;">~</span></span></span></span></span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.280556em;"><span class="" style="top: -2.55em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">t</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span>的计算是否依赖上一时刻的状态<span class="katex--inline"><span class="katex"><span class="katex-mathml">
       <math>
        <semantics>
         <mrow>
          <msub>
           <mi mathvariant="bold">
            h
           </mi>
           <mrow>
            <mi>
             t
            </mi>
            <mo>
             −
            </mo>
            <mn>
             1
            </mn>
           </mrow>
          </msub>
         </mrow>
         <annotation encoding="application/x-tex">
          \mathbf{h}_{t-1}
         </annotation>
        </semantics>
       </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.902771em; vertical-align: -0.208331em;"></span><span class="mord"><span class="mord"><span class="mord mathbf">h</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">t</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.208331em;"><span class=""></span></span></span></span></span></span></span></span></span></span>。<br> <span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml">
        <math>
         <semantics>
          <mrow>
           <msub>
            <mi mathvariant="bold">
             r
            </mi>
            <mi>
             t
            </mi>
           </msub>
           <mo>
            =
           </mo>
           <mi>
            σ
           </mi>
           <mrow>
            <mo fence="true">
             (
            </mo>
            <msub>
             <mi>
              W
             </mi>
             <mi>
              r
             </mi>
            </msub>
            <msub>
             <mi mathvariant="bold">
              x
             </mi>
             <mi>
              t
             </mi>
            </msub>
            <mo>
             +
            </mo>
            <msub>
             <mi>
              U
             </mi>
             <mi>
              r
             </mi>
            </msub>
            <msub>
             <mi mathvariant="bold">
              h
             </mi>
             <mrow>
              <mi>
               t
              </mi>
              <mo>
               −
              </mo>
              <mn>
               1
              </mn>
             </mrow>
            </msub>
            <mo>
             +
            </mo>
            <msub>
             <mi mathvariant="bold">
              b
             </mi>
             <mi>
              r
             </mi>
            </msub>
            <mo fence="true">
             )
            </mo>
           </mrow>
          </mrow>
          <annotation encoding="application/x-tex">
            \mathbf{r}_{t}=\sigma\left(W_{r} \mathbf{x}_{t}+U_{r} \mathbf{h}_{t-1}+\mathbf{b}_{r}\right) 
          </annotation>
         </semantics>
        </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.59444em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord"><span class="mord mathbf">r</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.280556em;"><span class="" style="top: -2.55em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">t</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathit" style="margin-right: 0.03588em;">σ</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="minner"><span class="mopen delimcenter" style="top: 0em;">(</span><span class="mord"><span class="mord mathit" style="margin-right: 0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.151392em;"><span class="" style="top: -2.55em; margin-left: -0.13889em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight" style="margin-right: 0.02778em;">r</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mord"><span class="mord"><span class="mord mathbf">x</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.280556em;"><span class="" style="top: -2.55em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">t</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mord"><span class="mord mathit" style="margin-right: 0.10903em;">U</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.151392em;"><span class="" style="top: -2.55em; margin-left: -0.10903em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight" style="margin-right: 0.02778em;">r</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mord"><span class="mord"><span class="mord mathbf">h</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">t</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.208331em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mord"><span class="mord"><span class="mord mathbf">b</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.151392em;"><span class="" style="top: -2.55em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight" style="margin-right: 0.02778em;">r</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mclose delimcenter" style="top: 0em;">)</span></span></span></span></span></span></span><br> 当<span class="katex--inline"><span class="katex"><span class="katex-mathml">
       <math>
        <semantics>
         <mrow>
          <msub>
           <mi mathvariant="bold">
            r
           </mi>
           <mi>
            t
           </mi>
          </msub>
         </mrow>
         <annotation encoding="application/x-tex">
          \mathbf{r}_{t}
         </annotation>
        </semantics>
       </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.59444em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord"><span class="mord mathbf">r</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.280556em;"><span class="" style="top: -2.55em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">t</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span>=0时，候选状态<span class="katex--inline"><span class="katex"><span class="katex-mathml">
       <math>
        <semantics>
         <mrow>
          <msub>
           <mover accent="true">
            <mi mathvariant="bold">
             h
            </mi>
            <mo>
             ~
            </mo>
           </mover>
           <mi>
            t
           </mi>
          </msub>
          <mo>
           =
          </mo>
          <mi>
           tanh
          </mi>
          <mo>
           ⁡
          </mo>
          <mrow>
           <mo fence="true">
            (
           </mo>
           <msub>
            <mi>
             W
            </mi>
            <mi>
             c
            </mi>
           </msub>
           <msub>
            <mi mathvariant="bold">
             x
            </mi>
            <mi>
             t
            </mi>
           </msub>
           <mo>
            +
           </mo>
           <mi mathvariant="bold">
            b
           </mi>
           <mo fence="true">
            )
           </mo>
          </mrow>
         </mrow>
         <annotation encoding="application/x-tex">
          \tilde{\mathbf{h}}_{t}=\tanh \left(W_{c} \mathbf{x}_{t}+\mathbf{b}\right)
         </annotation>
        </semantics>
       </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1.0813em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.9313em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord"><span class="mord mathbf">h</span></span></span></span><span class="" style="top: -3.61344em;"><span class="pstrut" style="height: 3em;"></span><span class="accent-body" style="left: -0.25em;">~</span></span></span></span></span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.280556em;"><span class="" style="top: -2.55em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">t</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mop">tanh</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="minner"><span class="mopen delimcenter" style="top: 0em;">(</span><span class="mord"><span class="mord mathit" style="margin-right: 0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.151392em;"><span class="" style="top: -2.55em; margin-left: -0.13889em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">c</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mord"><span class="mord"><span class="mord mathbf">x</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.280556em;"><span class="" style="top: -2.55em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">t</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mord"><span class="mord mathbf">b</span></span><span class="mclose delimcenter" style="top: 0em;">)</span></span></span></span></span></span>只和当前输入<span class="katex--inline"><span class="katex"><span class="katex-mathml">
       <math>
        <semantics>
         <mrow>
          <msub>
           <mi mathvariant="bold">
            x
           </mi>
           <mi>
            t
           </mi>
          </msub>
         </mrow>
         <annotation encoding="application/x-tex">
          \mathbf{x}_{t}
         </annotation>
        </semantics>
       </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.59444em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord"><span class="mord mathbf">x</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.280556em;"><span class="" style="top: -2.55em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">t</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span>相关而与历史状态无关。当<span class="katex--inline"><span class="katex"><span class="katex-mathml">
       <math>
        <semantics>
         <mrow>
          <msub>
           <mi mathvariant="bold">
            r
           </mi>
           <mi>
            t
           </mi>
          </msub>
         </mrow>
         <annotation encoding="application/x-tex">
          \mathbf{r}_{t}
         </annotation>
        </semantics>
       </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.59444em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord"><span class="mord mathbf">r</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.280556em;"><span class="" style="top: -2.55em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">t</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span>=1时，候选状态<span class="katex--inline"><span class="katex"><span class="katex-mathml">
       <math>
        <semantics>
         <mrow>
          <msub>
           <mover accent="true">
            <mi mathvariant="bold">
             h
            </mi>
            <mo>
             ~
            </mo>
           </mover>
           <mi>
            t
           </mi>
          </msub>
          <mo>
           =
          </mo>
          <mi>
           tanh
          </mi>
          <mo>
           ⁡
          </mo>
          <mrow>
           <mo fence="true">
            (
           </mo>
           <msub>
            <mi>
             W
            </mi>
            <mi>
             h
            </mi>
           </msub>
           <msub>
            <mi mathvariant="bold">
             x
            </mi>
            <mi>
             t
            </mi>
           </msub>
           <mo>
            +
           </mo>
           <msub>
            <mi>
             U
            </mi>
            <mi>
             h
            </mi>
           </msub>
           <msub>
            <mi mathvariant="bold">
             h
            </mi>
            <mrow>
             <mi>
              t
             </mi>
             <mo>
              −
             </mo>
             <mn>
              1
             </mn>
            </mrow>
           </msub>
           <mo>
            +
           </mo>
           <msub>
            <mi mathvariant="bold">
             b
            </mi>
            <mi>
             h
            </mi>
           </msub>
           <mo fence="true">
            )
           </mo>
          </mrow>
         </mrow>
         <annotation encoding="application/x-tex">
          \tilde{\mathbf{h}}_{t}=\tanh \left(W_{h} \mathbf{x}_{t}+U_{h} \mathbf{h}_{t-1}+\mathbf{b}_{h}\right)
         </annotation>
        </semantics>
       </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1.0813em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.9313em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord"><span class="mord mathbf">h</span></span></span></span><span class="" style="top: -3.61344em;"><span class="pstrut" style="height: 3em;"></span><span class="accent-body" style="left: -0.25em;">~</span></span></span></span></span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.280556em;"><span class="" style="top: -2.55em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">t</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mop">tanh</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="minner"><span class="mopen delimcenter" style="top: 0em;">(</span><span class="mord"><span class="mord mathit" style="margin-right: 0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.336108em;"><span class="" style="top: -2.55em; margin-left: -0.13889em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">h</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mord"><span class="mord"><span class="mord mathbf">x</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.280556em;"><span class="" style="top: -2.55em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">t</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mord"><span class="mord mathit" style="margin-right: 0.10903em;">U</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.336108em;"><span class="" style="top: -2.55em; margin-left: -0.10903em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">h</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mord"><span class="mord"><span class="mord mathbf">h</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">t</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.208331em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mord"><span class="mord"><span class="mord mathbf">b</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.336108em;"><span class="" style="top: -2.55em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">h</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mclose delimcenter" style="top: 0em;">)</span></span></span></span></span></span>和当前输入<span class="katex--inline"><span class="katex"><span class="katex-mathml">
       <math>
        <semantics>
         <mrow>
          <msub>
           <mi mathvariant="bold">
            x
           </mi>
           <mi>
            t
           </mi>
          </msub>
         </mrow>
         <annotation encoding="application/x-tex">
          \mathbf{x}_{t}
         </annotation>
        </semantics>
       </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.59444em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord"><span class="mord mathbf">x</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.280556em;"><span class="" style="top: -2.55em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">t</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span>相关，也和历史状态<span class="katex--inline"><span class="katex"><span class="katex-mathml">
       <math>
        <semantics>
         <mrow>
          <msub>
           <mi mathvariant="bold">
            h
           </mi>
           <mrow>
            <mi>
             t
            </mi>
            <mo>
             −
            </mo>
            <mn>
             1
            </mn>
           </mrow>
          </msub>
         </mrow>
         <annotation encoding="application/x-tex">
          \mathbf{h}_{t-1}
         </annotation>
        </semantics>
       </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.902771em; vertical-align: -0.208331em;"></span><span class="mord"><span class="mord"><span class="mord mathbf">h</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">t</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.208331em;"><span class=""></span></span></span></span></span></span></span></span></span></span>相关，此时和简单的RNN是一样的。<br> <strong>综合上述各式，GRU网络的状态更新方式为</strong>:<br> <span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml">
        <math>
         <semantics>
          <mrow>
           <msub>
            <mi mathvariant="bold">
             h
            </mi>
            <mi>
             t
            </mi>
           </msub>
           <mo>
            =
           </mo>
           <msub>
            <mi mathvariant="bold">
             z
            </mi>
            <mi>
             t
            </mi>
           </msub>
           <mo>
            ⊙
           </mo>
           <msub>
            <mi mathvariant="bold">
             h
            </mi>
            <mrow>
             <mi>
              t
             </mi>
             <mo>
              −
             </mo>
             <mn>
              1
             </mn>
            </mrow>
           </msub>
           <mo>
            +
           </mo>
           <mrow>
            <mo fence="true">
             (
            </mo>
            <mn>
             1
            </mn>
            <mo>
             −
            </mo>
            <msub>
             <mi mathvariant="bold">
              z
             </mi>
             <mi>
              t
             </mi>
            </msub>
            <mo fence="true">
             )
            </mo>
           </mrow>
           <mo>
            ⊙
           </mo>
           <msub>
            <mover accent="true">
             <mi mathvariant="bold">
              h
             </mi>
             <mo>
              ~
             </mo>
            </mover>
            <mi>
             t
            </mi>
           </msub>
          </mrow>
          <annotation encoding="application/x-tex">
            \mathbf{h}_{t}=\mathbf{z}_{t} \odot \mathbf{h}_{t-1}+\left(1-\mathbf{z}_{t}\right) \odot \tilde{\mathbf{h}}_{t} 
          </annotation>
         </semantics>
        </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.84444em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord"><span class="mord mathbf">h</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.280556em;"><span class="" style="top: -2.55em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">t</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 0.73333em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord"><span class="mord mathbf">z</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.280556em;"><span class="" style="top: -2.55em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">t</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">⊙</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 0.902771em; vertical-align: -0.208331em;"></span><span class="mord"><span class="mord"><span class="mord mathbf">h</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">t</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.208331em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="minner"><span class="mopen delimcenter" style="top: 0em;">(</span><span class="mord">1</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mord"><span class="mord"><span class="mord mathbf">z</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.280556em;"><span class="" style="top: -2.55em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">t</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mclose delimcenter" style="top: 0em;">)</span></span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">⊙</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 1.0813em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.9313em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord"><span class="mord mathbf">h</span></span></span></span><span class="" style="top: -3.61344em;"><span class="pstrut" style="height: 3em;"></span><span class="accent-body" style="left: -0.25em;">~</span></span></span></span></span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.280556em;"><span class="" style="top: -2.55em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">t</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span></span></li> 
   <li>总结：当<span class="katex--inline"><span class="katex"><span class="katex-mathml">
       <math>
        <semantics>
         <mrow>
          <msub>
           <mi mathvariant="bold">
            z
           </mi>
           <mi>
            t
           </mi>
          </msub>
          <mo>
           =
          </mo>
          <mn>
           0
          </mn>
          <mo separator="true">
           ,
          </mo>
          <mi mathvariant="bold">
           r
          </mi>
          <mo>
           =
          </mo>
          <mn>
           1
          </mn>
         </mrow>
         <annotation encoding="application/x-tex">
          \mathbf{z}_{t}=0, \mathbf{r}=1
         </annotation>
        </semantics>
       </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.59444em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord"><span class="mord mathbf">z</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.280556em;"><span class="" style="top: -2.55em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">t</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 0.83888em; vertical-align: -0.19444em;"></span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord"><span class="mord mathbf">r</span></span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 0.64444em; vertical-align: 0em;"></span><span class="mord">1</span></span></span></span></span>时，GRU网络退化为简单的RNN；若<span class="katex--inline"><span class="katex"><span class="katex-mathml">
       <math>
        <semantics>
         <mrow>
          <msub>
           <mi mathvariant="bold">
            z
           </mi>
           <mi>
            t
           </mi>
          </msub>
          <mo>
           =
          </mo>
          <mn>
           0
          </mn>
          <mo separator="true">
           ,
          </mo>
          <mi mathvariant="bold">
           r
          </mi>
          <mo>
           =
          </mo>
          <mn>
           0
          </mn>
         </mrow>
         <annotation encoding="application/x-tex">
          \mathbf{z}_{t}=0, \mathbf{r}=0
         </annotation>
        </semantics>
       </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.59444em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord"><span class="mord mathbf">z</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.280556em;"><span class="" style="top: -2.55em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">t</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 0.83888em; vertical-align: -0.19444em;"></span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord"><span class="mord mathbf">r</span></span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 0.64444em; vertical-align: 0em;"></span><span class="mord">0</span></span></span></span></span>时，当前状态<span class="katex--inline"><span class="katex"><span class="katex-mathml">
       <math>
        <semantics>
         <mrow>
          <msub>
           <mi mathvariant="bold">
            h
           </mi>
           <mi>
            t
           </mi>
          </msub>
         </mrow>
         <annotation encoding="application/x-tex">
          \mathbf{h}_{t}
         </annotation>
        </semantics>
       </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.84444em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord"><span class="mord mathbf">h</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.280556em;"><span class="" style="top: -2.55em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">t</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span>只和当前输入<span class="katex--inline"><span class="katex"><span class="katex-mathml">
       <math>
        <semantics>
         <mrow>
          <msub>
           <mi mathvariant="bold">
            x
           </mi>
           <mi>
            t
           </mi>
          </msub>
         </mrow>
         <annotation encoding="application/x-tex">
          \mathbf{x}_{t}
         </annotation>
        </semantics>
       </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.59444em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord"><span class="mord mathbf">x</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.280556em;"><span class="" style="top: -2.55em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">t</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span>相关，和历史状态<span class="katex--inline"><span class="katex"><span class="katex-mathml">
       <math>
        <semantics>
         <mrow>
          <msub>
           <mi mathvariant="bold">
            h
           </mi>
           <mrow>
            <mi>
             t
            </mi>
            <mo>
             −
            </mo>
            <mn>
             1
            </mn>
           </mrow>
          </msub>
         </mrow>
         <annotation encoding="application/x-tex">
          \mathbf{h}_{t-1}
         </annotation>
        </semantics>
       </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.902771em; vertical-align: -0.208331em;"></span><span class="mord"><span class="mord"><span class="mord mathbf">h</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">t</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.208331em;"><span class=""></span></span></span></span></span></span></span></span></span></span>无关。当<span class="katex--inline"><span class="katex"><span class="katex-mathml">
       <math>
        <semantics>
         <mrow>
          <msub>
           <mi mathvariant="bold">
            z
           </mi>
           <mi>
            t
           </mi>
          </msub>
          <mo>
           =
          </mo>
          <mn>
           1
          </mn>
         </mrow>
         <annotation encoding="application/x-tex">
          \mathbf{z}_{t}=1
         </annotation>
        </semantics>
       </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.59444em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord"><span class="mord mathbf">z</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.280556em;"><span class="" style="top: -2.55em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">t</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 0.64444em; vertical-align: 0em;"></span><span class="mord">1</span></span></span></span></span>时，当前状态<span class="katex--inline"><span class="katex"><span class="katex-mathml">
       <math>
        <semantics>
         <mrow>
          <msub>
           <mi mathvariant="bold">
            h
           </mi>
           <mi>
            t
           </mi>
          </msub>
         </mrow>
         <annotation encoding="application/x-tex">
          \mathbf{h}_{t}
         </annotation>
        </semantics>
       </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.84444em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord"><span class="mord mathbf">h</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.280556em;"><span class="" style="top: -2.55em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">t</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span>等于上一时刻状态<span class="katex--inline"><span class="katex"><span class="katex-mathml">
       <math>
        <semantics>
         <mrow>
          <msub>
           <mi mathvariant="bold">
            h
           </mi>
           <mrow>
            <mi>
             t
            </mi>
            <mo>
             −
            </mo>
            <mn>
             1
            </mn>
           </mrow>
          </msub>
         </mrow>
         <annotation encoding="application/x-tex">
          \mathbf{h}_{t-1}
         </annotation>
        </semantics>
       </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.902771em; vertical-align: -0.208331em;"></span><span class="mord"><span class="mord"><span class="mord mathbf">h</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">t</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.208331em;"><span class=""></span></span></span></span></span></span></span></span></span></span>和当前输入<span class="katex--inline"><span class="katex"><span class="katex-mathml">
       <math>
        <semantics>
         <mrow>
          <msub>
           <mi mathvariant="bold">
            x
           </mi>
           <mi>
            t
           </mi>
          </msub>
         </mrow>
         <annotation encoding="application/x-tex">
          \mathbf{x}_{t}
         </annotation>
        </semantics>
       </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.59444em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord"><span class="mord mathbf">x</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.280556em;"><span class="" style="top: -2.55em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">t</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span>无关。<br> <img src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190705162704208.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2NkbHdobTEyMTcwOTYyMzE=,size_16,color_FFFFFF,t_70" alt="GRU Cell"></li> 
  </ul> 
 </div> 
 <link href="https://csdnimg.cn/release/phoenix/mdeditor/markdown_views-e44c3c0e64.css" rel="stylesheet"> 
</div>

	<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
	<!-- 自定义广告 -->
	<ins class="adsbygoogle"
	     style="display:block"
	     data-ad-client="ca-pub-8889449066804352"
	     data-ad-slot="1494696990"
	     data-ad-format="auto"
	     data-full-width-responsive="true"></ins>
	<script>
		(adsbygoogle = window.adsbygoogle || []).push({});
	</script>


        <br />
        <a href="https://uzshare.com/">更多精彩内容</a>
      </section>
      
      <header style="right: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
        <ul style="display: block;">
          <li><a href="/" style="line-height: 40px;padding-top:0px;">回首页</a></li>
        </ul>
      </header>
      <header class="sm-hidden" style="right: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
          <img src="https://uzzz.org.cn/imgqcode.png" style="width:160px;" />
      </header>
      
      <header class="sm-hidden" style="left: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
          <img src="https://uzzz.org.cn/hou_imgqcode.png" style="width:160px;">
      </header>
    </div>
    
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->

    <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?d293c49e1e4bfe8f276695a5aa953300";
      var s = document.getElementsByTagName("script")[0]; 
      s.parentNode.insertBefore(hm, s);
    })();
    </script>

  </body>
</html>
