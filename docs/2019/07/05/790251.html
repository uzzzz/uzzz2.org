<!doctype html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

<!-- Begin Jekyll SEO tag v2.5.0 -->
<title>hadoop+hive三节点环境搭建 | 有组织在！</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="hadoop+hive三节点环境搭建" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="以下使用虚拟机搭建Hadoop+Hive环境 虚拟机：Oracle VirtualBox 操作系统：centos7.6 JDK：1.8.0_201 MySql： 5.7.25 Hadoop：hadoop-2.8.1 Hive：apache-hive-1.2.2-bin Hadoop集群为三个节点： 主节点hadoop1 192.168.18.171 从节点hadoop2 192.168.18.172 从节点Hadoop3 192.168.18.173 1、Centos7镜像下载 http://mirrors.aliyun.com/centos/7/isos/x86_64/ 2、三个节点分别设置hostname，hadoop1、hadoop2、hadoop3 永久修改hostname，以hadoop1为例： Centos7：hostnamectl set-hostname hadoop1 Centos6： ① vi /etc/sysconfig/network 修改localhost.localdomain为hadoop1 ② vi /etc/hosts 添加一条：192.168.18.171 hadoop1 ③ reboot 每个节点的host文件都配置包含三个节点信息： 3、关闭防火墙和selinux 三台节点都需要需要关闭防火墙和selinux systemctl stop firewalld.service systemctl disable firewalld.service vi /etc/selinux/config 重启设备生效 4、创建hadoop用户 为三个节点分别创建相同的用户hadoop，后续都在此用户下操作： useradd -m hadoop passwd hadoop 为hadoop添加sudo权限：hadoop ALL=(ALL) ALL 切换到hadoop用户：su - hadoop 注意：三个节点的用户名必须相同，不然以后会对后面ssh及hadoop集群搭建 产生影响 5、设置ssh免密登录 以hadoop1节点ssh免密登陆hadoop2、hadoop3节点设置为例： 生成hadoop1的rsa密钥：ssh-keygen -t rsa 设置全部采用默认值进行回车 将生成的rsa追加写入授权文件： cat ~/.ssh/id_rsa.pub &gt;&gt; ~/.ssh/authorized_keys 给授权文件权限：chmod 600 ~/.ssh/authorized_keys 进行本机ssh测试： ssh hadoop1正常免密登陆后所有的ssh第一次都需要密码，此后都不需要密码 将hadoop1上的authorized_keys分别传到hadoop2、hadoop3 sudo scp ~/.ssh/id_rsa.pub hadoop@hadoop2:~/ sudo scp ~/.ssh/id_rsa.pub hadoop@hadoop3:~/ 以hadoop2为例（hadoop3同样操作）： 登陆到hadoop2操作：$ssh hadoop2输入密码登陆 cat ~/id_rsa.pub &gt;&gt; ~/.ssh/authorized_keys 修改authorized_keys权限：chmod 600 ~/.ssh/authorized_keys 退出hadoop2：exit 进行免密ssh登陆测试：ssh hadoop2 6、JDK安装，三个节点都需要安装 下载地址：https://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html 为jdk8的新版本，下载jdk-8u201-linux-x64.tar.gz 解压：sudo tar -zxvf jdk-8u201-linux-x64.tar.gz -C /usr/local/ 配置hadoop用户的JAVA环境变量 vi ~/.bashrc 文件末尾追加以下内容： export JAVA_HOME=/usr/local/jdk1.8.0_201 export JRE_HOME= J A V A H O M E / j r e e x p o r t C L A S S P A T H = . : {JAVA_HOME}/jre export CLASSPATH=.: JAVAH​OME/jreexportCLASSPATH=.:{JAVA_HOME}/lib: J R E H O M E / l i b e x p o r t P A T H = {JRE_HOME}/lib export PATH= JREH​OME/libexportPATH={JAVA_HOME}/bin:$PATH 使环境变量生效：source ~/.bashrc 7、Hadoop安装，在hadoop1节点安装，拷贝到hadoop2、hadoop3节点 下载地址：http://archive.apache.org/dist/hadoop/common/hadoop-2.8.1/ 下载hadoop-2.8.1.tar.gz 解压：sudo tar -zxvf hadoop-2.8.1.tar.gz -C /usr/local/ sudo chown -R hadoop:hadoop hadoop-2.8.1/ 8、Hadoop主节点hadoop1配置文件（路径/usr/local/hadoop-2.8.1/etc/hadoop）修改 8.1、core-site.xml fs.default.name hdfs://hadoop1:9000 hadoop.tmp.dir file:/home/hadoop/hadoop/tmp 8.2、hdfs-site.xml dfs.replication 2 dfs.namenode.name.dir file:/home/hadoop/hadoop/tmp/dfs/name dfs.datanode.data.dir file:/home/hadoop/hadoop/tmp/dfs/data dfs.namenode.secondary.http-address hadoop1:9001 8.3、mapred-site.xml cp mapred-site.xml.template mapred-site.xml mapreduce.framework.name yarn 8.4、yarn-site.xml yarn.resourcemanager.hostname hadoop1 yarn.nodemanager.aux-services mapreduce_shuffle yarn.log-aggregation-enable true yarn.log-aggregation.retain-seconds 604800 8.5、修改 hadoop-env.sh 将${JAVA_HOME} 修改为自己的JDK路径 # The java implementation to use. export JAVA_HOME=/usr/local/jdk1.8.0_201 8.6、编辑slaves文件 hadoop2 hadoop3 9、Hadoop其他节点配置 从主节点Hadoop安装目录复制到hadoop2、hadoop3节点 在hadoop2和hadoop3的/usr/local/目录下分别创建目录hadoop-2.8.1： sudo chown -R hadoop:hadoop hadoop-2.8.1/ sudo scp -r /usr/local/hadoop-2.8.1/* hadoop@hadoop2:/usr/local/hadoop-2.8.1/ sudo scp -r /usr/local/hadoop-2.8.1/* hadoop@hadoop3:/usr/local/hadoop-2.8.1/ 10、Hadoop环境变量配置 配置hadoop用户的HAOOP_HOME变量（每个节点都需要此步操作） vi ~/.bashrc # hadoop environment vars export HADOOP_HOME=/usr/local/hadoop-2.8.1 export HADOOP_INSTALL= H A D O O P H O M E e x p o r t H A D O O P M A P R E D H O M E = {HADOOP_HOME} export HADOOP_MAPRED_HOME= HADOOPH​OMEexportHADOOPM​APREDH​OME={HADOOP_HOME} export HADOOP_COMMON_HOME= H A D O O P H O M E e x p o r t H A D O O P H D F S H O M E = {HADOOP_HOME} export HADOOP_HDFS_HOME= HADOOPH​OMEexportHADOOPH​DFSH​OME={HADOOP_HOME} export YARN_HOME= H A D O O P H O M E e x p o r t H A D O O P C O M M O N L I B N A T I V E D I R = {HADOOP_HOME} export HADOOP_COMMON_LIB_NATIVE_DIR= HADOOPH​OMEexportHADOOPC​OMMONL​IBN​ATIVED​IR={HADOOP_HOME}/lib/native export HADOOP_OPTS=&quot;-Djava.library.path= H A D O O P H O M E / l i b &amp;quot; e x p o r t P A T H = {HADOOP_HOME}/lib&amp;quot; export PATH= HADOOPH​OME/lib&quot;exportPATH={JAVA_HOME}/bin: H A D O O P H O M E / b i n : {HADOOP_HOME}/bin: HADOOPH​OME/bin:PATH 使环境变量生效：source ~/.bashrc 11、Hadoop启动 格式化namenode：hadoop namenode -format 启动Hadoop（脚本目录/usr/local/hadoop-2.8.1/sbin）： cd /usr/local/hadoop-2.8.1/sbin ./start-dfs.sh ./start-yarn.sh jps查看一下进程，hadoop分布式搭建完成 12、安装MySQL数据库（在主节点hadoop1安装） 使用MySQL作为hive的元数据库 CentOS7默认数据库是mariadb，需要下载安装mysql yum源 wget -i -c http://dev.mysql.com/get/mysql57-community-release-el7-10.noarch.rpm yum -y install mysql57-community-release-el7-10.noarch.rpm yum -y install mysql-community-server 启动服务：systemctl start mysqld.service 默认密码grep ‘temporary password’ /var/log/mysqld.log，需要修改 5.7默认开启密码策略，修改不符合策略会报错： mysql&gt; alter user ‘root’@‘localhost’ IDENTIFIED BY ‘123456’; ERROR 1819 (HY000): Your password does not satisfy the current policy requirements 需修改/etc/my.cnf 增加validate_password = off，重启mysqld mysql -u root -p alter user ‘root’@‘localhost’ IDENTIFIED BY ‘123456’; 允许远程登录： GRANT ALL PRIVILEGES ON . TO ‘root’@’%’ IDENTIFIED BY ‘123456’ WITH GRANT OPTION; flush privileges; 13、安装hive 下载地址http://archive.apache.org/dist/hive/hive-1.2.2/ 下载apache-hive-1.2.2-bin.tar.gz 解压：sudo tar -zxvf apache-hive-1.2.2-bin.tar.gz -C /usr/local/ 配置环境变量vi ~/.bashrc # hive environment vars export HIVE_HOME=/usr/local/apache-hive-1.2.2-bin export HIVE_CONF_DIR= H I V E H O M E / c o n f e x p o r t P A T H = {HIVE_HOME}/conf export PATH= HIVEH​OME/confexportPATH={JAVA_HOME}/bin: H A D O O P H O M E / b i n : {HADOOP_HOME}/bin: HADOOPH​OME/bin:{HIVE_HOME}/bin: P A T H 环 境 变 量 生 效 ： s o u r c e &nbsp; / . b a s h r c [ h a d o o p @ h a d o o p 1 a p a c h e − h i v e − 1.2.2 − b i n ] PATH 环境变量生效：source ~/.bashrc [hadoop@hadoop1 apache-hive-1.2.2-bin] PATH环境变量生效：source&nbsp;/.bashrc[hadoop@hadoop1apache−hive−1.2.2−bin] echo $HIVE_HOME /usr/local/apache-hive-1.2.2-bin 修改配置文件之前，先创建以下目录： mkdir /home/hadoop/hive mkdir /home/hadoop/hive/warehouse mkdir /home/hadoop/hive/tmp hive配置文件目录/usr/local/apache-hive-1.2.2-bin/conf ①修改hive-site.xml 若不存在则cp hive-default.xml.template hive-site.xml hive.metastore.warehouse.dir /home/hadoop/hive/warehouse hive.exec.scratchdir /home/hadoop/hive hive.metastore.uris javax.jdo.option.ConnectionURL jdbc:mysql://hadoop1:3306/hive?createDatabaseIfNotExist=true javax.jdo.option.ConnectionDriverName com.mysql.jdbc.Driver javax.jdo.option.ConnectionUserName root javax.jdo.option.ConnectionPassword 123456 hive.metastore.schema.verification false 替换文件中${system:java.io.tmpdir}为/home/hadoop/hive/tmp 替换文件中${system:user.name}为hadoop ② 修改hive-env.sh 若不存在则cp hive-env.sh.template hive-env.sh # Config export HADOOP_HOME=/usr/local/hadoop-2.8.1 export HIVE_CONF_DIR=/usr/local/apache-hive-1.2.2-bin/conf export HIVE_AUX_JARS_PATH=/usr/local/apache-hive-1.2.2-bin/lib ③添加数据驱动包 配置的是MySQL数据库，将mysql 的驱动包下载地址： https://dev.mysql.com/get/Downloads/Connector-J/mysql-connector-java-5.1.47.zip 解压将mysql-connector-java-5.1.47.jar上传到 /usr/local/apache-hive-1.2.2-bin/lib 首先初始化数据库,进入目录/usr/local/apache-hive-1.2.2-bin/bin 初始化的时候注意要将mysql启动 输入:schematool -initSchema -dbType mysql 启动服务： nohup hive --service metastore &amp; nohup hive --service hiveserver2 &amp; Hive的端口是10000，查看是否正常启动 使用hive自带的beeline客户端连接测试： 在/home/hadoop目录下创建employee.txt（列分隔符\t，行分隔符\n），内容如下： 1201 Gopal 45000 Technical manager 1202 Manisha 45000 Proof reader 1203 Masthanvali 40000 Technical writer 1204 Kiran 40000 Hr Admin 1205 Kranthi 30000 Op Admin 建表语句： CREATE TABLE IF NOT EXISTS employee ( eid int, name String, salary String, destination String) COMMENT ‘Employee details’ ROW FORMAT DELIMITED FIELDS TERMINATED BY ‘\t’ LINES TERMINATED BY ‘\n’ STORED AS TEXTFILE;" />
<meta property="og:description" content="以下使用虚拟机搭建Hadoop+Hive环境 虚拟机：Oracle VirtualBox 操作系统：centos7.6 JDK：1.8.0_201 MySql： 5.7.25 Hadoop：hadoop-2.8.1 Hive：apache-hive-1.2.2-bin Hadoop集群为三个节点： 主节点hadoop1 192.168.18.171 从节点hadoop2 192.168.18.172 从节点Hadoop3 192.168.18.173 1、Centos7镜像下载 http://mirrors.aliyun.com/centos/7/isos/x86_64/ 2、三个节点分别设置hostname，hadoop1、hadoop2、hadoop3 永久修改hostname，以hadoop1为例： Centos7：hostnamectl set-hostname hadoop1 Centos6： ① vi /etc/sysconfig/network 修改localhost.localdomain为hadoop1 ② vi /etc/hosts 添加一条：192.168.18.171 hadoop1 ③ reboot 每个节点的host文件都配置包含三个节点信息： 3、关闭防火墙和selinux 三台节点都需要需要关闭防火墙和selinux systemctl stop firewalld.service systemctl disable firewalld.service vi /etc/selinux/config 重启设备生效 4、创建hadoop用户 为三个节点分别创建相同的用户hadoop，后续都在此用户下操作： useradd -m hadoop passwd hadoop 为hadoop添加sudo权限：hadoop ALL=(ALL) ALL 切换到hadoop用户：su - hadoop 注意：三个节点的用户名必须相同，不然以后会对后面ssh及hadoop集群搭建 产生影响 5、设置ssh免密登录 以hadoop1节点ssh免密登陆hadoop2、hadoop3节点设置为例： 生成hadoop1的rsa密钥：ssh-keygen -t rsa 设置全部采用默认值进行回车 将生成的rsa追加写入授权文件： cat ~/.ssh/id_rsa.pub &gt;&gt; ~/.ssh/authorized_keys 给授权文件权限：chmod 600 ~/.ssh/authorized_keys 进行本机ssh测试： ssh hadoop1正常免密登陆后所有的ssh第一次都需要密码，此后都不需要密码 将hadoop1上的authorized_keys分别传到hadoop2、hadoop3 sudo scp ~/.ssh/id_rsa.pub hadoop@hadoop2:~/ sudo scp ~/.ssh/id_rsa.pub hadoop@hadoop3:~/ 以hadoop2为例（hadoop3同样操作）： 登陆到hadoop2操作：$ssh hadoop2输入密码登陆 cat ~/id_rsa.pub &gt;&gt; ~/.ssh/authorized_keys 修改authorized_keys权限：chmod 600 ~/.ssh/authorized_keys 退出hadoop2：exit 进行免密ssh登陆测试：ssh hadoop2 6、JDK安装，三个节点都需要安装 下载地址：https://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html 为jdk8的新版本，下载jdk-8u201-linux-x64.tar.gz 解压：sudo tar -zxvf jdk-8u201-linux-x64.tar.gz -C /usr/local/ 配置hadoop用户的JAVA环境变量 vi ~/.bashrc 文件末尾追加以下内容： export JAVA_HOME=/usr/local/jdk1.8.0_201 export JRE_HOME= J A V A H O M E / j r e e x p o r t C L A S S P A T H = . : {JAVA_HOME}/jre export CLASSPATH=.: JAVAH​OME/jreexportCLASSPATH=.:{JAVA_HOME}/lib: J R E H O M E / l i b e x p o r t P A T H = {JRE_HOME}/lib export PATH= JREH​OME/libexportPATH={JAVA_HOME}/bin:$PATH 使环境变量生效：source ~/.bashrc 7、Hadoop安装，在hadoop1节点安装，拷贝到hadoop2、hadoop3节点 下载地址：http://archive.apache.org/dist/hadoop/common/hadoop-2.8.1/ 下载hadoop-2.8.1.tar.gz 解压：sudo tar -zxvf hadoop-2.8.1.tar.gz -C /usr/local/ sudo chown -R hadoop:hadoop hadoop-2.8.1/ 8、Hadoop主节点hadoop1配置文件（路径/usr/local/hadoop-2.8.1/etc/hadoop）修改 8.1、core-site.xml fs.default.name hdfs://hadoop1:9000 hadoop.tmp.dir file:/home/hadoop/hadoop/tmp 8.2、hdfs-site.xml dfs.replication 2 dfs.namenode.name.dir file:/home/hadoop/hadoop/tmp/dfs/name dfs.datanode.data.dir file:/home/hadoop/hadoop/tmp/dfs/data dfs.namenode.secondary.http-address hadoop1:9001 8.3、mapred-site.xml cp mapred-site.xml.template mapred-site.xml mapreduce.framework.name yarn 8.4、yarn-site.xml yarn.resourcemanager.hostname hadoop1 yarn.nodemanager.aux-services mapreduce_shuffle yarn.log-aggregation-enable true yarn.log-aggregation.retain-seconds 604800 8.5、修改 hadoop-env.sh 将${JAVA_HOME} 修改为自己的JDK路径 # The java implementation to use. export JAVA_HOME=/usr/local/jdk1.8.0_201 8.6、编辑slaves文件 hadoop2 hadoop3 9、Hadoop其他节点配置 从主节点Hadoop安装目录复制到hadoop2、hadoop3节点 在hadoop2和hadoop3的/usr/local/目录下分别创建目录hadoop-2.8.1： sudo chown -R hadoop:hadoop hadoop-2.8.1/ sudo scp -r /usr/local/hadoop-2.8.1/* hadoop@hadoop2:/usr/local/hadoop-2.8.1/ sudo scp -r /usr/local/hadoop-2.8.1/* hadoop@hadoop3:/usr/local/hadoop-2.8.1/ 10、Hadoop环境变量配置 配置hadoop用户的HAOOP_HOME变量（每个节点都需要此步操作） vi ~/.bashrc # hadoop environment vars export HADOOP_HOME=/usr/local/hadoop-2.8.1 export HADOOP_INSTALL= H A D O O P H O M E e x p o r t H A D O O P M A P R E D H O M E = {HADOOP_HOME} export HADOOP_MAPRED_HOME= HADOOPH​OMEexportHADOOPM​APREDH​OME={HADOOP_HOME} export HADOOP_COMMON_HOME= H A D O O P H O M E e x p o r t H A D O O P H D F S H O M E = {HADOOP_HOME} export HADOOP_HDFS_HOME= HADOOPH​OMEexportHADOOPH​DFSH​OME={HADOOP_HOME} export YARN_HOME= H A D O O P H O M E e x p o r t H A D O O P C O M M O N L I B N A T I V E D I R = {HADOOP_HOME} export HADOOP_COMMON_LIB_NATIVE_DIR= HADOOPH​OMEexportHADOOPC​OMMONL​IBN​ATIVED​IR={HADOOP_HOME}/lib/native export HADOOP_OPTS=&quot;-Djava.library.path= H A D O O P H O M E / l i b &amp;quot; e x p o r t P A T H = {HADOOP_HOME}/lib&amp;quot; export PATH= HADOOPH​OME/lib&quot;exportPATH={JAVA_HOME}/bin: H A D O O P H O M E / b i n : {HADOOP_HOME}/bin: HADOOPH​OME/bin:PATH 使环境变量生效：source ~/.bashrc 11、Hadoop启动 格式化namenode：hadoop namenode -format 启动Hadoop（脚本目录/usr/local/hadoop-2.8.1/sbin）： cd /usr/local/hadoop-2.8.1/sbin ./start-dfs.sh ./start-yarn.sh jps查看一下进程，hadoop分布式搭建完成 12、安装MySQL数据库（在主节点hadoop1安装） 使用MySQL作为hive的元数据库 CentOS7默认数据库是mariadb，需要下载安装mysql yum源 wget -i -c http://dev.mysql.com/get/mysql57-community-release-el7-10.noarch.rpm yum -y install mysql57-community-release-el7-10.noarch.rpm yum -y install mysql-community-server 启动服务：systemctl start mysqld.service 默认密码grep ‘temporary password’ /var/log/mysqld.log，需要修改 5.7默认开启密码策略，修改不符合策略会报错： mysql&gt; alter user ‘root’@‘localhost’ IDENTIFIED BY ‘123456’; ERROR 1819 (HY000): Your password does not satisfy the current policy requirements 需修改/etc/my.cnf 增加validate_password = off，重启mysqld mysql -u root -p alter user ‘root’@‘localhost’ IDENTIFIED BY ‘123456’; 允许远程登录： GRANT ALL PRIVILEGES ON . TO ‘root’@’%’ IDENTIFIED BY ‘123456’ WITH GRANT OPTION; flush privileges; 13、安装hive 下载地址http://archive.apache.org/dist/hive/hive-1.2.2/ 下载apache-hive-1.2.2-bin.tar.gz 解压：sudo tar -zxvf apache-hive-1.2.2-bin.tar.gz -C /usr/local/ 配置环境变量vi ~/.bashrc # hive environment vars export HIVE_HOME=/usr/local/apache-hive-1.2.2-bin export HIVE_CONF_DIR= H I V E H O M E / c o n f e x p o r t P A T H = {HIVE_HOME}/conf export PATH= HIVEH​OME/confexportPATH={JAVA_HOME}/bin: H A D O O P H O M E / b i n : {HADOOP_HOME}/bin: HADOOPH​OME/bin:{HIVE_HOME}/bin: P A T H 环 境 变 量 生 效 ： s o u r c e &nbsp; / . b a s h r c [ h a d o o p @ h a d o o p 1 a p a c h e − h i v e − 1.2.2 − b i n ] PATH 环境变量生效：source ~/.bashrc [hadoop@hadoop1 apache-hive-1.2.2-bin] PATH环境变量生效：source&nbsp;/.bashrc[hadoop@hadoop1apache−hive−1.2.2−bin] echo $HIVE_HOME /usr/local/apache-hive-1.2.2-bin 修改配置文件之前，先创建以下目录： mkdir /home/hadoop/hive mkdir /home/hadoop/hive/warehouse mkdir /home/hadoop/hive/tmp hive配置文件目录/usr/local/apache-hive-1.2.2-bin/conf ①修改hive-site.xml 若不存在则cp hive-default.xml.template hive-site.xml hive.metastore.warehouse.dir /home/hadoop/hive/warehouse hive.exec.scratchdir /home/hadoop/hive hive.metastore.uris javax.jdo.option.ConnectionURL jdbc:mysql://hadoop1:3306/hive?createDatabaseIfNotExist=true javax.jdo.option.ConnectionDriverName com.mysql.jdbc.Driver javax.jdo.option.ConnectionUserName root javax.jdo.option.ConnectionPassword 123456 hive.metastore.schema.verification false 替换文件中${system:java.io.tmpdir}为/home/hadoop/hive/tmp 替换文件中${system:user.name}为hadoop ② 修改hive-env.sh 若不存在则cp hive-env.sh.template hive-env.sh # Config export HADOOP_HOME=/usr/local/hadoop-2.8.1 export HIVE_CONF_DIR=/usr/local/apache-hive-1.2.2-bin/conf export HIVE_AUX_JARS_PATH=/usr/local/apache-hive-1.2.2-bin/lib ③添加数据驱动包 配置的是MySQL数据库，将mysql 的驱动包下载地址： https://dev.mysql.com/get/Downloads/Connector-J/mysql-connector-java-5.1.47.zip 解压将mysql-connector-java-5.1.47.jar上传到 /usr/local/apache-hive-1.2.2-bin/lib 首先初始化数据库,进入目录/usr/local/apache-hive-1.2.2-bin/bin 初始化的时候注意要将mysql启动 输入:schematool -initSchema -dbType mysql 启动服务： nohup hive --service metastore &amp; nohup hive --service hiveserver2 &amp; Hive的端口是10000，查看是否正常启动 使用hive自带的beeline客户端连接测试： 在/home/hadoop目录下创建employee.txt（列分隔符\t，行分隔符\n），内容如下： 1201 Gopal 45000 Technical manager 1202 Manisha 45000 Proof reader 1203 Masthanvali 40000 Technical writer 1204 Kiran 40000 Hr Admin 1205 Kranthi 30000 Op Admin 建表语句： CREATE TABLE IF NOT EXISTS employee ( eid int, name String, salary String, destination String) COMMENT ‘Employee details’ ROW FORMAT DELIMITED FIELDS TERMINATED BY ‘\t’ LINES TERMINATED BY ‘\n’ STORED AS TEXTFILE;" />
<link rel="canonical" href="https://uzzz.org/2019/07/05/790251.html" />
<meta property="og:url" content="https://uzzz.org/2019/07/05/790251.html" />
<meta property="og:site_name" content="有组织在！" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2019-07-05T00:00:00+08:00" />
<script type="application/ld+json">
{"description":"以下使用虚拟机搭建Hadoop+Hive环境 虚拟机：Oracle VirtualBox 操作系统：centos7.6 JDK：1.8.0_201 MySql： 5.7.25 Hadoop：hadoop-2.8.1 Hive：apache-hive-1.2.2-bin Hadoop集群为三个节点： 主节点hadoop1 192.168.18.171 从节点hadoop2 192.168.18.172 从节点Hadoop3 192.168.18.173 1、Centos7镜像下载 http://mirrors.aliyun.com/centos/7/isos/x86_64/ 2、三个节点分别设置hostname，hadoop1、hadoop2、hadoop3 永久修改hostname，以hadoop1为例： Centos7：hostnamectl set-hostname hadoop1 Centos6： ① vi /etc/sysconfig/network 修改localhost.localdomain为hadoop1 ② vi /etc/hosts 添加一条：192.168.18.171 hadoop1 ③ reboot 每个节点的host文件都配置包含三个节点信息： 3、关闭防火墙和selinux 三台节点都需要需要关闭防火墙和selinux systemctl stop firewalld.service systemctl disable firewalld.service vi /etc/selinux/config 重启设备生效 4、创建hadoop用户 为三个节点分别创建相同的用户hadoop，后续都在此用户下操作： useradd -m hadoop passwd hadoop 为hadoop添加sudo权限：hadoop ALL=(ALL) ALL 切换到hadoop用户：su - hadoop 注意：三个节点的用户名必须相同，不然以后会对后面ssh及hadoop集群搭建 产生影响 5、设置ssh免密登录 以hadoop1节点ssh免密登陆hadoop2、hadoop3节点设置为例： 生成hadoop1的rsa密钥：ssh-keygen -t rsa 设置全部采用默认值进行回车 将生成的rsa追加写入授权文件： cat ~/.ssh/id_rsa.pub &gt;&gt; ~/.ssh/authorized_keys 给授权文件权限：chmod 600 ~/.ssh/authorized_keys 进行本机ssh测试： ssh hadoop1正常免密登陆后所有的ssh第一次都需要密码，此后都不需要密码 将hadoop1上的authorized_keys分别传到hadoop2、hadoop3 sudo scp ~/.ssh/id_rsa.pub hadoop@hadoop2:~/ sudo scp ~/.ssh/id_rsa.pub hadoop@hadoop3:~/ 以hadoop2为例（hadoop3同样操作）： 登陆到hadoop2操作：$ssh hadoop2输入密码登陆 cat ~/id_rsa.pub &gt;&gt; ~/.ssh/authorized_keys 修改authorized_keys权限：chmod 600 ~/.ssh/authorized_keys 退出hadoop2：exit 进行免密ssh登陆测试：ssh hadoop2 6、JDK安装，三个节点都需要安装 下载地址：https://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html 为jdk8的新版本，下载jdk-8u201-linux-x64.tar.gz 解压：sudo tar -zxvf jdk-8u201-linux-x64.tar.gz -C /usr/local/ 配置hadoop用户的JAVA环境变量 vi ~/.bashrc 文件末尾追加以下内容： export JAVA_HOME=/usr/local/jdk1.8.0_201 export JRE_HOME= J A V A H O M E / j r e e x p o r t C L A S S P A T H = . : {JAVA_HOME}/jre export CLASSPATH=.: JAVAH​OME/jreexportCLASSPATH=.:{JAVA_HOME}/lib: J R E H O M E / l i b e x p o r t P A T H = {JRE_HOME}/lib export PATH= JREH​OME/libexportPATH={JAVA_HOME}/bin:$PATH 使环境变量生效：source ~/.bashrc 7、Hadoop安装，在hadoop1节点安装，拷贝到hadoop2、hadoop3节点 下载地址：http://archive.apache.org/dist/hadoop/common/hadoop-2.8.1/ 下载hadoop-2.8.1.tar.gz 解压：sudo tar -zxvf hadoop-2.8.1.tar.gz -C /usr/local/ sudo chown -R hadoop:hadoop hadoop-2.8.1/ 8、Hadoop主节点hadoop1配置文件（路径/usr/local/hadoop-2.8.1/etc/hadoop）修改 8.1、core-site.xml fs.default.name hdfs://hadoop1:9000 hadoop.tmp.dir file:/home/hadoop/hadoop/tmp 8.2、hdfs-site.xml dfs.replication 2 dfs.namenode.name.dir file:/home/hadoop/hadoop/tmp/dfs/name dfs.datanode.data.dir file:/home/hadoop/hadoop/tmp/dfs/data dfs.namenode.secondary.http-address hadoop1:9001 8.3、mapred-site.xml cp mapred-site.xml.template mapred-site.xml mapreduce.framework.name yarn 8.4、yarn-site.xml yarn.resourcemanager.hostname hadoop1 yarn.nodemanager.aux-services mapreduce_shuffle yarn.log-aggregation-enable true yarn.log-aggregation.retain-seconds 604800 8.5、修改 hadoop-env.sh 将${JAVA_HOME} 修改为自己的JDK路径 # The java implementation to use. export JAVA_HOME=/usr/local/jdk1.8.0_201 8.6、编辑slaves文件 hadoop2 hadoop3 9、Hadoop其他节点配置 从主节点Hadoop安装目录复制到hadoop2、hadoop3节点 在hadoop2和hadoop3的/usr/local/目录下分别创建目录hadoop-2.8.1： sudo chown -R hadoop:hadoop hadoop-2.8.1/ sudo scp -r /usr/local/hadoop-2.8.1/* hadoop@hadoop2:/usr/local/hadoop-2.8.1/ sudo scp -r /usr/local/hadoop-2.8.1/* hadoop@hadoop3:/usr/local/hadoop-2.8.1/ 10、Hadoop环境变量配置 配置hadoop用户的HAOOP_HOME变量（每个节点都需要此步操作） vi ~/.bashrc # hadoop environment vars export HADOOP_HOME=/usr/local/hadoop-2.8.1 export HADOOP_INSTALL= H A D O O P H O M E e x p o r t H A D O O P M A P R E D H O M E = {HADOOP_HOME} export HADOOP_MAPRED_HOME= HADOOPH​OMEexportHADOOPM​APREDH​OME={HADOOP_HOME} export HADOOP_COMMON_HOME= H A D O O P H O M E e x p o r t H A D O O P H D F S H O M E = {HADOOP_HOME} export HADOOP_HDFS_HOME= HADOOPH​OMEexportHADOOPH​DFSH​OME={HADOOP_HOME} export YARN_HOME= H A D O O P H O M E e x p o r t H A D O O P C O M M O N L I B N A T I V E D I R = {HADOOP_HOME} export HADOOP_COMMON_LIB_NATIVE_DIR= HADOOPH​OMEexportHADOOPC​OMMONL​IBN​ATIVED​IR={HADOOP_HOME}/lib/native export HADOOP_OPTS=&quot;-Djava.library.path= H A D O O P H O M E / l i b &amp;quot; e x p o r t P A T H = {HADOOP_HOME}/lib&amp;quot; export PATH= HADOOPH​OME/lib&quot;exportPATH={JAVA_HOME}/bin: H A D O O P H O M E / b i n : {HADOOP_HOME}/bin: HADOOPH​OME/bin:PATH 使环境变量生效：source ~/.bashrc 11、Hadoop启动 格式化namenode：hadoop namenode -format 启动Hadoop（脚本目录/usr/local/hadoop-2.8.1/sbin）： cd /usr/local/hadoop-2.8.1/sbin ./start-dfs.sh ./start-yarn.sh jps查看一下进程，hadoop分布式搭建完成 12、安装MySQL数据库（在主节点hadoop1安装） 使用MySQL作为hive的元数据库 CentOS7默认数据库是mariadb，需要下载安装mysql yum源 wget -i -c http://dev.mysql.com/get/mysql57-community-release-el7-10.noarch.rpm yum -y install mysql57-community-release-el7-10.noarch.rpm yum -y install mysql-community-server 启动服务：systemctl start mysqld.service 默认密码grep ‘temporary password’ /var/log/mysqld.log，需要修改 5.7默认开启密码策略，修改不符合策略会报错： mysql&gt; alter user ‘root’@‘localhost’ IDENTIFIED BY ‘123456’; ERROR 1819 (HY000): Your password does not satisfy the current policy requirements 需修改/etc/my.cnf 增加validate_password = off，重启mysqld mysql -u root -p alter user ‘root’@‘localhost’ IDENTIFIED BY ‘123456’; 允许远程登录： GRANT ALL PRIVILEGES ON . TO ‘root’@’%’ IDENTIFIED BY ‘123456’ WITH GRANT OPTION; flush privileges; 13、安装hive 下载地址http://archive.apache.org/dist/hive/hive-1.2.2/ 下载apache-hive-1.2.2-bin.tar.gz 解压：sudo tar -zxvf apache-hive-1.2.2-bin.tar.gz -C /usr/local/ 配置环境变量vi ~/.bashrc # hive environment vars export HIVE_HOME=/usr/local/apache-hive-1.2.2-bin export HIVE_CONF_DIR= H I V E H O M E / c o n f e x p o r t P A T H = {HIVE_HOME}/conf export PATH= HIVEH​OME/confexportPATH={JAVA_HOME}/bin: H A D O O P H O M E / b i n : {HADOOP_HOME}/bin: HADOOPH​OME/bin:{HIVE_HOME}/bin: P A T H 环 境 变 量 生 效 ： s o u r c e &nbsp; / . b a s h r c [ h a d o o p @ h a d o o p 1 a p a c h e − h i v e − 1.2.2 − b i n ] PATH 环境变量生效：source ~/.bashrc [hadoop@hadoop1 apache-hive-1.2.2-bin] PATH环境变量生效：source&nbsp;/.bashrc[hadoop@hadoop1apache−hive−1.2.2−bin] echo $HIVE_HOME /usr/local/apache-hive-1.2.2-bin 修改配置文件之前，先创建以下目录： mkdir /home/hadoop/hive mkdir /home/hadoop/hive/warehouse mkdir /home/hadoop/hive/tmp hive配置文件目录/usr/local/apache-hive-1.2.2-bin/conf ①修改hive-site.xml 若不存在则cp hive-default.xml.template hive-site.xml hive.metastore.warehouse.dir /home/hadoop/hive/warehouse hive.exec.scratchdir /home/hadoop/hive hive.metastore.uris javax.jdo.option.ConnectionURL jdbc:mysql://hadoop1:3306/hive?createDatabaseIfNotExist=true javax.jdo.option.ConnectionDriverName com.mysql.jdbc.Driver javax.jdo.option.ConnectionUserName root javax.jdo.option.ConnectionPassword 123456 hive.metastore.schema.verification false 替换文件中${system:java.io.tmpdir}为/home/hadoop/hive/tmp 替换文件中${system:user.name}为hadoop ② 修改hive-env.sh 若不存在则cp hive-env.sh.template hive-env.sh # Config export HADOOP_HOME=/usr/local/hadoop-2.8.1 export HIVE_CONF_DIR=/usr/local/apache-hive-1.2.2-bin/conf export HIVE_AUX_JARS_PATH=/usr/local/apache-hive-1.2.2-bin/lib ③添加数据驱动包 配置的是MySQL数据库，将mysql 的驱动包下载地址： https://dev.mysql.com/get/Downloads/Connector-J/mysql-connector-java-5.1.47.zip 解压将mysql-connector-java-5.1.47.jar上传到 /usr/local/apache-hive-1.2.2-bin/lib 首先初始化数据库,进入目录/usr/local/apache-hive-1.2.2-bin/bin 初始化的时候注意要将mysql启动 输入:schematool -initSchema -dbType mysql 启动服务： nohup hive --service metastore &amp; nohup hive --service hiveserver2 &amp; Hive的端口是10000，查看是否正常启动 使用hive自带的beeline客户端连接测试： 在/home/hadoop目录下创建employee.txt（列分隔符\\t，行分隔符\\n），内容如下： 1201 Gopal 45000 Technical manager 1202 Manisha 45000 Proof reader 1203 Masthanvali 40000 Technical writer 1204 Kiran 40000 Hr Admin 1205 Kranthi 30000 Op Admin 建表语句： CREATE TABLE IF NOT EXISTS employee ( eid int, name String, salary String, destination String) COMMENT ‘Employee details’ ROW FORMAT DELIMITED FIELDS TERMINATED BY ‘\\t’ LINES TERMINATED BY ‘\\n’ STORED AS TEXTFILE;","@type":"BlogPosting","url":"https://uzzz.org/2019/07/05/790251.html","headline":"hadoop+hive三节点环境搭建","dateModified":"2019-07-05T00:00:00+08:00","datePublished":"2019-07-05T00:00:00+08:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://uzzz.org/2019/07/05/790251.html"},"@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->


    <link rel="stylesheet" href="/assets/css/style.css?v=">
    <script src="/assets/js/scale.fix.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-123344652-1"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-123344652-1');
    </script>
    
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <script>
      (adsbygoogle = window.adsbygoogle || []).push({
        google_ad_client: "ca-pub-8889449066804352",
        enable_page_level_ads: true
      });
    </script>
    
    <script async custom-element="amp-auto-ads"
        src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
    </script>
    
    <style>
      @media screen and (max-width:760px){
        .sm-hidden{display:none; }
      }
    </style>

  </head>
  <body>
    
        <amp-auto-ads type="adsense"
              data-ad-client="ca-pub-8889449066804352">
        </amp-auto-ads>
    
    <div class="wrapper">
      <header  class="without-description" >
        <h1>hadoop+hive三节点环境搭建</h1>
        
        
        <ul style="display: block;">
            <li><a href="https://uzshare.com/" style="line-height: unset;" target="_blank"><strong>柚子社区</strong></a></li>
 	    <li><a href="/donate/" style="line-height: unset;" target="_blank"><strong>Donate</strong></a></li>
        </ul>
        
      </header>
      <section>

<div style="margin:0 0 8px 0;">
<style>
table.gsc-input {
    margin: 0;
}
.cse .gsc-control-cse, .gsc-control-cse {
    padding: 0;
    width: auto;
}
.gsc-search-box td {
    border-bottom: none;
}
</style>
<script>
  (function() {
    var cx = '004431708863642777669:qan2_6ugotw';
    var gcse = document.createElement('script');
    gcse.type = 'text/javascript';
    gcse.async = true;
    gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(gcse, s);
  })();
</script>
<gcse:search></gcse:search>
</div>
<!-- match content ads -->
	        <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
			<ins class="adsbygoogle"
			     style="display:block"
			     data-ad-format="autorelaxed"
			     data-ad-client="ca-pub-8889449066804352"
			     data-ad-slot="1928667997"></ins>
			<script>
			     (adsbygoogle = window.adsbygoogle || []).push({});
			</script>	



        <div id="article_content" class="article_content clearfix" data-track-view="{&quot;mod&quot;:&quot;popu_307&quot;,&quot;con&quot;:&quot;,https://blog.csdn.net/jmz19910110/article/details/94735443,&quot;}" data-track-click="{&quot;mod&quot;:&quot;popu_307&quot;,&quot;con&quot;:&quot;,https://blog.csdn.net/jmz19910110/article/details/94735443&quot;}"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-cd6c485e8b.css"> 
 <div id="content_views" class="markdown_views prism-atom-one-dark"> 
  <!-- flowchart 箭头图标 勿删 --> 
  <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"> 
   <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path> 
  </svg> 
  <p>以下使用虚拟机搭建Hadoop+Hive环境<br> 虚拟机：Oracle VirtualBox<br> 操作系统：centos7.6<br> JDK：1.8.0_201<br> MySql： 5.7.25<br> Hadoop：hadoop-2.8.1<br> Hive：apache-hive-1.2.2-bin</p> 
  <p>Hadoop集群为三个节点：<br> 主节点hadoop1 192.168.18.171<br> 从节点hadoop2 192.168.18.172<br> 从节点Hadoop3 192.168.18.173<br> <img src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190705144740425.?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2ptejE5OTEwMTEw,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述">1、Centos7镜像下载<br> <a href="http://mirrors.aliyun.com/centos/7/isos/x86_64/" rel="nofollow">http://mirrors.aliyun.com/centos/7/isos/x86_64/</a><br> 2、三个节点分别设置hostname，hadoop1、hadoop2、hadoop3<br> 永久修改hostname，以hadoop1为例：<br> Centos7：hostnamectl set-hostname hadoop1<br> Centos6：<br> ① vi /etc/sysconfig/network<br> 修改localhost.localdomain为hadoop1</p> 
  <p>② vi /etc/hosts<br> 添加一条：192.168.18.171 hadoop1<br> ③ reboot<br> 每个节点的host文件都配置包含三个节点信息：<br> <img src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190705144812329." alt="在这里插入图片描述"><br> 3、关闭防火墙和selinux<br> 三台节点都需要需要关闭防火墙和selinux<br> systemctl stop firewalld.service<br> systemctl disable firewalld.service<br> vi /etc/selinux/config<br> <img src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190705144826283." alt="在这里插入图片描述"><br> 重启设备生效<br> 4、创建hadoop用户<br> 为三个节点分别创建相同的用户hadoop，后续都在此用户下操作：<br> useradd -m hadoop<br> passwd hadoop<br> 为hadoop添加sudo权限：hadoop ALL=(ALL) ALL<br> <img src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190705144847696." alt="在这里插入图片描述"><br> 切换到hadoop用户：su - hadoop<br> 注意：三个节点的用户名必须相同，不然以后会对后面ssh及hadoop集群搭建<br> 产生影响<br> 5、设置ssh免密登录<br> 以hadoop1节点ssh免密登陆hadoop2、hadoop3节点设置为例：<br> 生成hadoop1的rsa密钥：ssh-keygen -t rsa<br> 设置全部采用默认值进行回车<br> 将生成的rsa追加写入授权文件：<br> cat ~/.ssh/id_rsa.pub &gt;&gt; ~/.ssh/authorized_keys<br> 给授权文件权限：chmod 600 ~/.ssh/authorized_keys<br> 进行本机ssh测试：<br> ssh hadoop1正常免密登陆后所有的ssh第一次都需要密码，此后都不需要密码<br> 将hadoop1上的authorized_keys分别传到hadoop2、hadoop3<br> sudo scp ~/.ssh/id_rsa.pub hadoop@hadoop2:~/<br> sudo scp ~/.ssh/id_rsa.pub hadoop@hadoop3:~/<br> 以hadoop2为例（hadoop3同样操作）：<br> 登陆到hadoop2操作：$ssh hadoop2输入密码登陆<br> cat ~/id_rsa.pub &gt;&gt; ~/.ssh/authorized_keys<br> 修改authorized_keys权限：chmod 600 ~/.ssh/authorized_keys<br> 退出hadoop2：exit<br> 进行免密ssh登陆测试：ssh hadoop2</p> 
  <p>6、JDK安装，三个节点都需要安装<br> 下载地址：<a href="https://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html" rel="nofollow">https://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html</a><br> 为jdk8的新版本，下载jdk-8u201-linux-x64.tar.gz<br> 解压：sudo tar -zxvf jdk-8u201-linux-x64.tar.gz -C /usr/local/<br> 配置hadoop用户的JAVA环境变量<br> vi ~/.bashrc<br> 文件末尾追加以下内容：<br> export JAVA_HOME=/usr/local/jdk1.8.0_201<br> export JRE_HOME=<span class="katex--inline"><span class="katex"><span class="katex-mathml">
      <math>
       <semantics>
        <mrow>
         <mrow>
          <mi>
           J
          </mi>
          <mi>
           A
          </mi>
          <mi>
           V
          </mi>
          <msub>
           <mi>
            A
           </mi>
           <mi>
            H
           </mi>
          </msub>
          <mi>
           O
          </mi>
          <mi>
           M
          </mi>
          <mi>
           E
          </mi>
         </mrow>
         <mi mathvariant="normal">
          /
         </mi>
         <mi>
          j
         </mi>
         <mi>
          r
         </mi>
         <mi>
          e
         </mi>
         <mi>
          e
         </mi>
         <mi>
          x
         </mi>
         <mi>
          p
         </mi>
         <mi>
          o
         </mi>
         <mi>
          r
         </mi>
         <mi>
          t
         </mi>
         <mi>
          C
         </mi>
         <mi>
          L
         </mi>
         <mi>
          A
         </mi>
         <mi>
          S
         </mi>
         <mi>
          S
         </mi>
         <mi>
          P
         </mi>
         <mi>
          A
         </mi>
         <mi>
          T
         </mi>
         <mi>
          H
         </mi>
         <mo>
          =
         </mo>
         <mi mathvariant="normal">
          .
         </mi>
         <mo>
          :
         </mo>
        </mrow>
        <annotation encoding="application/x-tex">
         {JAVA_HOME}/jre export CLASSPATH=.:
        </annotation>
       </semantics>
      </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord"><span class="mord mathit" style="margin-right: 0.09618em;">J</span><span class="mord mathit">A</span><span class="mord mathit" style="margin-right: 0.22222em;">V</span><span class="mord"><span class="mord mathit">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.328331em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight" style="margin-right: 0.08125em;">H</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mord mathit" style="margin-right: 0.02778em;">O</span><span class="mord mathit" style="margin-right: 0.10903em;">M</span><span class="mord mathit" style="margin-right: 0.05764em;">E</span></span><span class="mord">/</span><span class="mord mathit" style="margin-right: 0.05724em;">j</span><span class="mord mathit" style="margin-right: 0.02778em;">r</span><span class="mord mathit">e</span><span class="mord mathit">e</span><span class="mord mathit">x</span><span class="mord mathit">p</span><span class="mord mathit">o</span><span class="mord mathit" style="margin-right: 0.02778em;">r</span><span class="mord mathit">t</span><span class="mord mathit" style="margin-right: 0.07153em;">C</span><span class="mord mathit">L</span><span class="mord mathit">A</span><span class="mord mathit" style="margin-right: 0.05764em;">S</span><span class="mord mathit" style="margin-right: 0.05764em;">S</span><span class="mord mathit" style="margin-right: 0.13889em;">P</span><span class="mord mathit">A</span><span class="mord mathit" style="margin-right: 0.13889em;">T</span><span class="mord mathit" style="margin-right: 0.08125em;">H</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 0.43056em; vertical-align: 0em;"></span><span class="mord">.</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">:</span></span></span></span></span>{JAVA_HOME}/lib:<span class="katex--inline"><span class="katex"><span class="katex-mathml">
      <math>
       <semantics>
        <mrow>
         <mrow>
          <mi>
           J
          </mi>
          <mi>
           R
          </mi>
          <msub>
           <mi>
            E
           </mi>
           <mi>
            H
           </mi>
          </msub>
          <mi>
           O
          </mi>
          <mi>
           M
          </mi>
          <mi>
           E
          </mi>
         </mrow>
         <mi mathvariant="normal">
          /
         </mi>
         <mi>
          l
         </mi>
         <mi>
          i
         </mi>
         <mi>
          b
         </mi>
         <mi>
          e
         </mi>
         <mi>
          x
         </mi>
         <mi>
          p
         </mi>
         <mi>
          o
         </mi>
         <mi>
          r
         </mi>
         <mi>
          t
         </mi>
         <mi>
          P
         </mi>
         <mi>
          A
         </mi>
         <mi>
          T
         </mi>
         <mi>
          H
         </mi>
         <mo>
          =
         </mo>
        </mrow>
        <annotation encoding="application/x-tex">
         {JRE_HOME}/lib export PATH=
        </annotation>
       </semantics>
      </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord"><span class="mord mathit" style="margin-right: 0.09618em;">J</span><span class="mord mathit" style="margin-right: 0.00773em;">R</span><span class="mord"><span class="mord mathit" style="margin-right: 0.05764em;">E</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.328331em;"><span class="" style="top: -2.55em; margin-left: -0.05764em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight" style="margin-right: 0.08125em;">H</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mord mathit" style="margin-right: 0.02778em;">O</span><span class="mord mathit" style="margin-right: 0.10903em;">M</span><span class="mord mathit" style="margin-right: 0.05764em;">E</span></span><span class="mord">/</span><span class="mord mathit" style="margin-right: 0.01968em;">l</span><span class="mord mathit">i</span><span class="mord mathit">b</span><span class="mord mathit">e</span><span class="mord mathit">x</span><span class="mord mathit">p</span><span class="mord mathit">o</span><span class="mord mathit" style="margin-right: 0.02778em;">r</span><span class="mord mathit">t</span><span class="mord mathit" style="margin-right: 0.13889em;">P</span><span class="mord mathit">A</span><span class="mord mathit" style="margin-right: 0.13889em;">T</span><span class="mord mathit" style="margin-right: 0.08125em;">H</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span></span></span></span></span>{JAVA_HOME}/bin:$PATH<br> 使环境变量生效：source ~/.bashrc<br> <img src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/2019070514490720." alt="在这里插入图片描述"><br> 7、Hadoop安装，在hadoop1节点安装，拷贝到hadoop2、hadoop3节点<br> 下载地址：<a href="http://archive.apache.org/dist/hadoop/common/hadoop-2.8.1/" rel="nofollow">http://archive.apache.org/dist/hadoop/common/hadoop-2.8.1/</a><br> 下载hadoop-2.8.1.tar.gz<br> 解压：sudo tar -zxvf hadoop-2.8.1.tar.gz -C /usr/local/<br> sudo chown -R hadoop:hadoop hadoop-2.8.1/<br> 8、Hadoop主节点hadoop1配置文件（路径/usr/local/hadoop-2.8.1/etc/hadoop）修改<br> 8.1、core-site.xml<br> <br> <br> <a href="http://fs.default.name" rel="nofollow">fs.default.name</a><br> hdfs://hadoop1:9000<br> <br> <br> hadoop.tmp.dir<br> file:/home/hadoop/hadoop/tmp<br> <br> <br> 8.2、hdfs-site.xml<br> <br> <br> dfs.replication<br> 2<br> <br> <br> dfs.namenode.name.dir<br> file:/home/hadoop/hadoop/tmp/dfs/name<br> <br> <br> dfs.datanode.data.dir<br> file:/home/hadoop/hadoop/tmp/dfs/data<br> <br> <br> dfs.namenode.secondary.http-address<br> hadoop1:9001<br> <br> <br> 8.3、mapred-site.xml<br> cp mapred-site.xml.template mapred-site.xml<br> <br> <br> <a href="http://mapreduce.framework.name" rel="nofollow">mapreduce.framework.name</a><br> yarn<br> <br> </p> 
  <p>8.4、yarn-site.xml<br> </p> 
  <!-- Site specific YARN configuration properties --> yarn.resourcemanager.hostname hadoop1 yarn.nodemanager.aux-services mapreduce_shuffle yarn.log-aggregation-enable true yarn.log-aggregation.retain-seconds 604800 8.5、修改 hadoop-env.sh 将${JAVA_HOME} 修改为自己的JDK路径 
  <pre><code># The java implementation to use.
</code></pre> 
  <p>export JAVA_HOME=/usr/local/jdk1.8.0_201<br> 8.6、编辑slaves文件<br> hadoop2<br> hadoop3<br> 9、Hadoop其他节点配置<br> 从主节点Hadoop安装目录复制到hadoop2、hadoop3节点<br> 在hadoop2和hadoop3的/usr/local/目录下分别创建目录hadoop-2.8.1：<br> sudo chown -R hadoop:hadoop hadoop-2.8.1/<br> sudo scp -r /usr/local/hadoop-2.8.1/* hadoop@hadoop2:/usr/local/hadoop-2.8.1/<br> sudo scp -r /usr/local/hadoop-2.8.1/* hadoop@hadoop3:/usr/local/hadoop-2.8.1/</p> 
  <p>10、Hadoop环境变量配置<br> 配置hadoop用户的HAOOP_HOME变量（每个节点都需要此步操作）<br> vi ~/.bashrc</p> 
  <pre><code># hadoop environment vars
</code></pre> 
  <p>export HADOOP_HOME=/usr/local/hadoop-2.8.1<br> export HADOOP_INSTALL=<span class="katex--inline"><span class="katex"><span class="katex-mathml">
      <math>
       <semantics>
        <mrow>
         <mrow>
          <mi>
           H
          </mi>
          <mi>
           A
          </mi>
          <mi>
           D
          </mi>
          <mi>
           O
          </mi>
          <mi>
           O
          </mi>
          <msub>
           <mi>
            P
           </mi>
           <mi>
            H
           </mi>
          </msub>
          <mi>
           O
          </mi>
          <mi>
           M
          </mi>
          <mi>
           E
          </mi>
         </mrow>
         <mi>
          e
         </mi>
         <mi>
          x
         </mi>
         <mi>
          p
         </mi>
         <mi>
          o
         </mi>
         <mi>
          r
         </mi>
         <mi>
          t
         </mi>
         <mi>
          H
         </mi>
         <mi>
          A
         </mi>
         <mi>
          D
         </mi>
         <mi>
          O
         </mi>
         <mi>
          O
         </mi>
         <msub>
          <mi>
           P
          </mi>
          <mi>
           M
          </mi>
         </msub>
         <mi>
          A
         </mi>
         <mi>
          P
         </mi>
         <mi>
          R
         </mi>
         <mi>
          E
         </mi>
         <msub>
          <mi>
           D
          </mi>
          <mi>
           H
          </mi>
         </msub>
         <mi>
          O
         </mi>
         <mi>
          M
         </mi>
         <mi>
          E
         </mi>
         <mo>
          =
         </mo>
        </mrow>
        <annotation encoding="application/x-tex">
         {HADOOP_HOME} export HADOOP_MAPRED_HOME=
        </annotation>
       </semantics>
      </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.87777em; vertical-align: -0.19444em;"></span><span class="mord"><span class="mord mathit" style="margin-right: 0.08125em;">H</span><span class="mord mathit">A</span><span class="mord mathit" style="margin-right: 0.02778em;">D</span><span class="mord mathit" style="margin-right: 0.02778em;">O</span><span class="mord mathit" style="margin-right: 0.02778em;">O</span><span class="mord"><span class="mord mathit" style="margin-right: 0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.328331em;"><span class="" style="top: -2.55em; margin-left: -0.13889em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight" style="margin-right: 0.08125em;">H</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mord mathit" style="margin-right: 0.02778em;">O</span><span class="mord mathit" style="margin-right: 0.10903em;">M</span><span class="mord mathit" style="margin-right: 0.05764em;">E</span></span><span class="mord mathit">e</span><span class="mord mathit">x</span><span class="mord mathit">p</span><span class="mord mathit">o</span><span class="mord mathit" style="margin-right: 0.02778em;">r</span><span class="mord mathit">t</span><span class="mord mathit" style="margin-right: 0.08125em;">H</span><span class="mord mathit">A</span><span class="mord mathit" style="margin-right: 0.02778em;">D</span><span class="mord mathit" style="margin-right: 0.02778em;">O</span><span class="mord mathit" style="margin-right: 0.02778em;">O</span><span class="mord"><span class="mord mathit" style="margin-right: 0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.328331em;"><span class="" style="top: -2.55em; margin-left: -0.13889em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight" style="margin-right: 0.10903em;">M</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mord mathit">A</span><span class="mord mathit" style="margin-right: 0.13889em;">P</span><span class="mord mathit" style="margin-right: 0.00773em;">R</span><span class="mord mathit" style="margin-right: 0.05764em;">E</span><span class="mord"><span class="mord mathit" style="margin-right: 0.02778em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.328331em;"><span class="" style="top: -2.55em; margin-left: -0.02778em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight" style="margin-right: 0.08125em;">H</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mord mathit" style="margin-right: 0.02778em;">O</span><span class="mord mathit" style="margin-right: 0.10903em;">M</span><span class="mord mathit" style="margin-right: 0.05764em;">E</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span></span></span></span></span>{HADOOP_HOME}<br> export HADOOP_COMMON_HOME=<span class="katex--inline"><span class="katex"><span class="katex-mathml">
      <math>
       <semantics>
        <mrow>
         <mrow>
          <mi>
           H
          </mi>
          <mi>
           A
          </mi>
          <mi>
           D
          </mi>
          <mi>
           O
          </mi>
          <mi>
           O
          </mi>
          <msub>
           <mi>
            P
           </mi>
           <mi>
            H
           </mi>
          </msub>
          <mi>
           O
          </mi>
          <mi>
           M
          </mi>
          <mi>
           E
          </mi>
         </mrow>
         <mi>
          e
         </mi>
         <mi>
          x
         </mi>
         <mi>
          p
         </mi>
         <mi>
          o
         </mi>
         <mi>
          r
         </mi>
         <mi>
          t
         </mi>
         <mi>
          H
         </mi>
         <mi>
          A
         </mi>
         <mi>
          D
         </mi>
         <mi>
          O
         </mi>
         <mi>
          O
         </mi>
         <msub>
          <mi>
           P
          </mi>
          <mi>
           H
          </mi>
         </msub>
         <mi>
          D
         </mi>
         <mi>
          F
         </mi>
         <msub>
          <mi>
           S
          </mi>
          <mi>
           H
          </mi>
         </msub>
         <mi>
          O
         </mi>
         <mi>
          M
         </mi>
         <mi>
          E
         </mi>
         <mo>
          =
         </mo>
        </mrow>
        <annotation encoding="application/x-tex">
         {HADOOP_HOME} export HADOOP_HDFS_HOME=
        </annotation>
       </semantics>
      </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.87777em; vertical-align: -0.19444em;"></span><span class="mord"><span class="mord mathit" style="margin-right: 0.08125em;">H</span><span class="mord mathit">A</span><span class="mord mathit" style="margin-right: 0.02778em;">D</span><span class="mord mathit" style="margin-right: 0.02778em;">O</span><span class="mord mathit" style="margin-right: 0.02778em;">O</span><span class="mord"><span class="mord mathit" style="margin-right: 0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.328331em;"><span class="" style="top: -2.55em; margin-left: -0.13889em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight" style="margin-right: 0.08125em;">H</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mord mathit" style="margin-right: 0.02778em;">O</span><span class="mord mathit" style="margin-right: 0.10903em;">M</span><span class="mord mathit" style="margin-right: 0.05764em;">E</span></span><span class="mord mathit">e</span><span class="mord mathit">x</span><span class="mord mathit">p</span><span class="mord mathit">o</span><span class="mord mathit" style="margin-right: 0.02778em;">r</span><span class="mord mathit">t</span><span class="mord mathit" style="margin-right: 0.08125em;">H</span><span class="mord mathit">A</span><span class="mord mathit" style="margin-right: 0.02778em;">D</span><span class="mord mathit" style="margin-right: 0.02778em;">O</span><span class="mord mathit" style="margin-right: 0.02778em;">O</span><span class="mord"><span class="mord mathit" style="margin-right: 0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.328331em;"><span class="" style="top: -2.55em; margin-left: -0.13889em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight" style="margin-right: 0.08125em;">H</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mord mathit" style="margin-right: 0.02778em;">D</span><span class="mord mathit" style="margin-right: 0.13889em;">F</span><span class="mord"><span class="mord mathit" style="margin-right: 0.05764em;">S</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.328331em;"><span class="" style="top: -2.55em; margin-left: -0.05764em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight" style="margin-right: 0.08125em;">H</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mord mathit" style="margin-right: 0.02778em;">O</span><span class="mord mathit" style="margin-right: 0.10903em;">M</span><span class="mord mathit" style="margin-right: 0.05764em;">E</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span></span></span></span></span>{HADOOP_HOME}<br> export YARN_HOME=<span class="katex--inline"><span class="katex"><span class="katex-mathml">
      <math>
       <semantics>
        <mrow>
         <mrow>
          <mi>
           H
          </mi>
          <mi>
           A
          </mi>
          <mi>
           D
          </mi>
          <mi>
           O
          </mi>
          <mi>
           O
          </mi>
          <msub>
           <mi>
            P
           </mi>
           <mi>
            H
           </mi>
          </msub>
          <mi>
           O
          </mi>
          <mi>
           M
          </mi>
          <mi>
           E
          </mi>
         </mrow>
         <mi>
          e
         </mi>
         <mi>
          x
         </mi>
         <mi>
          p
         </mi>
         <mi>
          o
         </mi>
         <mi>
          r
         </mi>
         <mi>
          t
         </mi>
         <mi>
          H
         </mi>
         <mi>
          A
         </mi>
         <mi>
          D
         </mi>
         <mi>
          O
         </mi>
         <mi>
          O
         </mi>
         <msub>
          <mi>
           P
          </mi>
          <mi>
           C
          </mi>
         </msub>
         <mi>
          O
         </mi>
         <mi>
          M
         </mi>
         <mi>
          M
         </mi>
         <mi>
          O
         </mi>
         <msub>
          <mi>
           N
          </mi>
          <mi>
           L
          </mi>
         </msub>
         <mi>
          I
         </mi>
         <msub>
          <mi>
           B
          </mi>
          <mi>
           N
          </mi>
         </msub>
         <mi>
          A
         </mi>
         <mi>
          T
         </mi>
         <mi>
          I
         </mi>
         <mi>
          V
         </mi>
         <msub>
          <mi>
           E
          </mi>
          <mi>
           D
          </mi>
         </msub>
         <mi>
          I
         </mi>
         <mi>
          R
         </mi>
         <mo>
          =
         </mo>
        </mrow>
        <annotation encoding="application/x-tex">
         {HADOOP_HOME} export HADOOP_COMMON_LIB_NATIVE_DIR=
        </annotation>
       </semantics>
      </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.87777em; vertical-align: -0.19444em;"></span><span class="mord"><span class="mord mathit" style="margin-right: 0.08125em;">H</span><span class="mord mathit">A</span><span class="mord mathit" style="margin-right: 0.02778em;">D</span><span class="mord mathit" style="margin-right: 0.02778em;">O</span><span class="mord mathit" style="margin-right: 0.02778em;">O</span><span class="mord"><span class="mord mathit" style="margin-right: 0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.328331em;"><span class="" style="top: -2.55em; margin-left: -0.13889em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight" style="margin-right: 0.08125em;">H</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mord mathit" style="margin-right: 0.02778em;">O</span><span class="mord mathit" style="margin-right: 0.10903em;">M</span><span class="mord mathit" style="margin-right: 0.05764em;">E</span></span><span class="mord mathit">e</span><span class="mord mathit">x</span><span class="mord mathit">p</span><span class="mord mathit">o</span><span class="mord mathit" style="margin-right: 0.02778em;">r</span><span class="mord mathit">t</span><span class="mord mathit" style="margin-right: 0.08125em;">H</span><span class="mord mathit">A</span><span class="mord mathit" style="margin-right: 0.02778em;">D</span><span class="mord mathit" style="margin-right: 0.02778em;">O</span><span class="mord mathit" style="margin-right: 0.02778em;">O</span><span class="mord"><span class="mord mathit" style="margin-right: 0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.328331em;"><span class="" style="top: -2.55em; margin-left: -0.13889em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight" style="margin-right: 0.07153em;">C</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mord mathit" style="margin-right: 0.02778em;">O</span><span class="mord mathit" style="margin-right: 0.10903em;">M</span><span class="mord mathit" style="margin-right: 0.10903em;">M</span><span class="mord mathit" style="margin-right: 0.02778em;">O</span><span class="mord"><span class="mord mathit" style="margin-right: 0.10903em;">N</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.328331em;"><span class="" style="top: -2.55em; margin-left: -0.10903em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">L</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mord mathit" style="margin-right: 0.07847em;">I</span><span class="mord"><span class="mord mathit" style="margin-right: 0.05017em;">B</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.328331em;"><span class="" style="top: -2.55em; margin-left: -0.05017em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight" style="margin-right: 0.10903em;">N</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mord mathit">A</span><span class="mord mathit" style="margin-right: 0.13889em;">T</span><span class="mord mathit" style="margin-right: 0.07847em;">I</span><span class="mord mathit" style="margin-right: 0.22222em;">V</span><span class="mord"><span class="mord mathit" style="margin-right: 0.05764em;">E</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.328331em;"><span class="" style="top: -2.55em; margin-left: -0.05764em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight" style="margin-right: 0.02778em;">D</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mord mathit" style="margin-right: 0.07847em;">I</span><span class="mord mathit" style="margin-right: 0.00773em;">R</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span></span></span></span></span>{HADOOP_HOME}/lib/native<br> export HADOOP_OPTS="-Djava.library.path=<span class="katex--inline"><span class="katex"><span class="katex-mathml">
      <math>
       <semantics>
        <mrow>
         <mrow>
          <mi>
           H
          </mi>
          <mi>
           A
          </mi>
          <mi>
           D
          </mi>
          <mi>
           O
          </mi>
          <mi>
           O
          </mi>
          <msub>
           <mi>
            P
           </mi>
           <mi>
            H
           </mi>
          </msub>
          <mi>
           O
          </mi>
          <mi>
           M
          </mi>
          <mi>
           E
          </mi>
         </mrow>
         <mi mathvariant="normal">
          /
         </mi>
         <mi>
          l
         </mi>
         <mi>
          i
         </mi>
         <mi>
          b
         </mi>
         <mi mathvariant="normal">
          &amp;quot;
         </mi>
         <mi>
          e
         </mi>
         <mi>
          x
         </mi>
         <mi>
          p
         </mi>
         <mi>
          o
         </mi>
         <mi>
          r
         </mi>
         <mi>
          t
         </mi>
         <mi>
          P
         </mi>
         <mi>
          A
         </mi>
         <mi>
          T
         </mi>
         <mi>
          H
         </mi>
         <mo>
          =
         </mo>
        </mrow>
        <annotation encoding="application/x-tex">
         {HADOOP_HOME}/lib&amp;quot; export PATH=
        </annotation>
       </semantics>
      </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord"><span class="mord mathit" style="margin-right: 0.08125em;">H</span><span class="mord mathit">A</span><span class="mord mathit" style="margin-right: 0.02778em;">D</span><span class="mord mathit" style="margin-right: 0.02778em;">O</span><span class="mord mathit" style="margin-right: 0.02778em;">O</span><span class="mord"><span class="mord mathit" style="margin-right: 0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.328331em;"><span class="" style="top: -2.55em; margin-left: -0.13889em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight" style="margin-right: 0.08125em;">H</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mord mathit" style="margin-right: 0.02778em;">O</span><span class="mord mathit" style="margin-right: 0.10903em;">M</span><span class="mord mathit" style="margin-right: 0.05764em;">E</span></span><span class="mord">/</span><span class="mord mathit" style="margin-right: 0.01968em;">l</span><span class="mord mathit">i</span><span class="mord mathit">b</span><span class="mord">"</span><span class="mord mathit">e</span><span class="mord mathit">x</span><span class="mord mathit">p</span><span class="mord mathit">o</span><span class="mord mathit" style="margin-right: 0.02778em;">r</span><span class="mord mathit">t</span><span class="mord mathit" style="margin-right: 0.13889em;">P</span><span class="mord mathit">A</span><span class="mord mathit" style="margin-right: 0.13889em;">T</span><span class="mord mathit" style="margin-right: 0.08125em;">H</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span></span></span></span></span>{JAVA_HOME}/bin:<span class="katex--inline"><span class="katex"><span class="katex-mathml">
      <math>
       <semantics>
        <mrow>
         <mrow>
          <mi>
           H
          </mi>
          <mi>
           A
          </mi>
          <mi>
           D
          </mi>
          <mi>
           O
          </mi>
          <mi>
           O
          </mi>
          <msub>
           <mi>
            P
           </mi>
           <mi>
            H
           </mi>
          </msub>
          <mi>
           O
          </mi>
          <mi>
           M
          </mi>
          <mi>
           E
          </mi>
         </mrow>
         <mi mathvariant="normal">
          /
         </mi>
         <mi>
          b
         </mi>
         <mi>
          i
         </mi>
         <mi>
          n
         </mi>
         <mo>
          :
         </mo>
        </mrow>
        <annotation encoding="application/x-tex">
         {HADOOP_HOME}/bin:
        </annotation>
       </semantics>
      </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord"><span class="mord mathit" style="margin-right: 0.08125em;">H</span><span class="mord mathit">A</span><span class="mord mathit" style="margin-right: 0.02778em;">D</span><span class="mord mathit" style="margin-right: 0.02778em;">O</span><span class="mord mathit" style="margin-right: 0.02778em;">O</span><span class="mord"><span class="mord mathit" style="margin-right: 0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.328331em;"><span class="" style="top: -2.55em; margin-left: -0.13889em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight" style="margin-right: 0.08125em;">H</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mord mathit" style="margin-right: 0.02778em;">O</span><span class="mord mathit" style="margin-right: 0.10903em;">M</span><span class="mord mathit" style="margin-right: 0.05764em;">E</span></span><span class="mord">/</span><span class="mord mathit">b</span><span class="mord mathit">i</span><span class="mord mathit">n</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">:</span></span></span></span></span>PATH<br> 使环境变量生效：source ~/.bashrc<br> <img src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190705144940669." alt="在这里插入图片描述"><br> 11、Hadoop启动<br> 格式化namenode：hadoop namenode -format<br> 启动Hadoop（脚本目录/usr/local/hadoop-2.8.1/sbin）：<br> cd /usr/local/hadoop-2.8.1/sbin<br> ./start-dfs.sh<br> ./start-yarn.sh<br> jps查看一下进程，hadoop分布式搭建完成<br> 12、安装MySQL数据库（在主节点hadoop1安装）<br> 使用MySQL作为hive的元数据库<br> CentOS7默认数据库是mariadb，需要下载安装mysql yum源<br> wget -i -c <a href="http://dev.mysql.com/get/mysql57-community-release-el7-10.noarch.rpm" rel="nofollow">http://dev.mysql.com/get/mysql57-community-release-el7-10.noarch.rpm</a><br> yum -y install mysql57-community-release-el7-10.noarch.rpm<br> yum -y install mysql-community-server<br> 启动服务：systemctl start mysqld.service<br> 默认密码grep ‘temporary password’ /var/log/mysqld.log，需要修改<br> 5.7默认开启密码策略，修改不符合策略会报错：<br> mysql&gt; alter user ‘root’@‘localhost’ IDENTIFIED BY ‘123456’;<br> ERROR 1819 (HY000): Your password does not satisfy the current policy requirements<br> 需修改/etc/my.cnf 增加validate_password = off，重启mysqld<br> mysql -u root -p<br> alter user ‘root’@‘localhost’ IDENTIFIED BY ‘123456’;<br> 允许远程登录：<br> GRANT ALL PRIVILEGES ON <em>.</em> TO ‘root’@’%’ IDENTIFIED BY ‘123456’ WITH GRANT OPTION;<br> flush privileges;</p> 
  <p>13、安装hive<br> 下载地址http://archive.apache.org/dist/hive/hive-1.2.2/<br> 下载apache-hive-1.2.2-bin.tar.gz<br> 解压：sudo tar -zxvf apache-hive-1.2.2-bin.tar.gz -C /usr/local/<br> 配置环境变量vi ~/.bashrc</p> 
  <pre><code># hive environment vars
</code></pre> 
  <p>export HIVE_HOME=/usr/local/apache-hive-1.2.2-bin<br> export HIVE_CONF_DIR=<span class="katex--inline"><span class="katex"><span class="katex-mathml">
      <math>
       <semantics>
        <mrow>
         <mrow>
          <mi>
           H
          </mi>
          <mi>
           I
          </mi>
          <mi>
           V
          </mi>
          <msub>
           <mi>
            E
           </mi>
           <mi>
            H
           </mi>
          </msub>
          <mi>
           O
          </mi>
          <mi>
           M
          </mi>
          <mi>
           E
          </mi>
         </mrow>
         <mi mathvariant="normal">
          /
         </mi>
         <mi>
          c
         </mi>
         <mi>
          o
         </mi>
         <mi>
          n
         </mi>
         <mi>
          f
         </mi>
         <mi>
          e
         </mi>
         <mi>
          x
         </mi>
         <mi>
          p
         </mi>
         <mi>
          o
         </mi>
         <mi>
          r
         </mi>
         <mi>
          t
         </mi>
         <mi>
          P
         </mi>
         <mi>
          A
         </mi>
         <mi>
          T
         </mi>
         <mi>
          H
         </mi>
         <mo>
          =
         </mo>
        </mrow>
        <annotation encoding="application/x-tex">
         {HIVE_HOME}/conf export PATH=
        </annotation>
       </semantics>
      </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord"><span class="mord mathit" style="margin-right: 0.08125em;">H</span><span class="mord mathit" style="margin-right: 0.07847em;">I</span><span class="mord mathit" style="margin-right: 0.22222em;">V</span><span class="mord"><span class="mord mathit" style="margin-right: 0.05764em;">E</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.328331em;"><span class="" style="top: -2.55em; margin-left: -0.05764em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight" style="margin-right: 0.08125em;">H</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mord mathit" style="margin-right: 0.02778em;">O</span><span class="mord mathit" style="margin-right: 0.10903em;">M</span><span class="mord mathit" style="margin-right: 0.05764em;">E</span></span><span class="mord">/</span><span class="mord mathit">c</span><span class="mord mathit">o</span><span class="mord mathit">n</span><span class="mord mathit" style="margin-right: 0.10764em;">f</span><span class="mord mathit">e</span><span class="mord mathit">x</span><span class="mord mathit">p</span><span class="mord mathit">o</span><span class="mord mathit" style="margin-right: 0.02778em;">r</span><span class="mord mathit">t</span><span class="mord mathit" style="margin-right: 0.13889em;">P</span><span class="mord mathit">A</span><span class="mord mathit" style="margin-right: 0.13889em;">T</span><span class="mord mathit" style="margin-right: 0.08125em;">H</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span></span></span></span></span>{JAVA_HOME}/bin:<span class="katex--inline"><span class="katex"><span class="katex-mathml">
      <math>
       <semantics>
        <mrow>
         <mrow>
          <mi>
           H
          </mi>
          <mi>
           A
          </mi>
          <mi>
           D
          </mi>
          <mi>
           O
          </mi>
          <mi>
           O
          </mi>
          <msub>
           <mi>
            P
           </mi>
           <mi>
            H
           </mi>
          </msub>
          <mi>
           O
          </mi>
          <mi>
           M
          </mi>
          <mi>
           E
          </mi>
         </mrow>
         <mi mathvariant="normal">
          /
         </mi>
         <mi>
          b
         </mi>
         <mi>
          i
         </mi>
         <mi>
          n
         </mi>
         <mo>
          :
         </mo>
        </mrow>
        <annotation encoding="application/x-tex">
         {HADOOP_HOME}/bin:
        </annotation>
       </semantics>
      </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord"><span class="mord mathit" style="margin-right: 0.08125em;">H</span><span class="mord mathit">A</span><span class="mord mathit" style="margin-right: 0.02778em;">D</span><span class="mord mathit" style="margin-right: 0.02778em;">O</span><span class="mord mathit" style="margin-right: 0.02778em;">O</span><span class="mord"><span class="mord mathit" style="margin-right: 0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.328331em;"><span class="" style="top: -2.55em; margin-left: -0.13889em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight" style="margin-right: 0.08125em;">H</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mord mathit" style="margin-right: 0.02778em;">O</span><span class="mord mathit" style="margin-right: 0.10903em;">M</span><span class="mord mathit" style="margin-right: 0.05764em;">E</span></span><span class="mord">/</span><span class="mord mathit">b</span><span class="mord mathit">i</span><span class="mord mathit">n</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">:</span></span></span></span></span>{HIVE_HOME}/bin:<span class="katex--inline"><span class="katex"><span class="katex-mathml">
      <math>
       <semantics>
        <mrow>
         <mi>
          P
         </mi>
         <mi>
          A
         </mi>
         <mi>
          T
         </mi>
         <mi>
          H
         </mi>
         <mi mathvariant="normal">
          环
         </mi>
         <mi mathvariant="normal">
          境
         </mi>
         <mi mathvariant="normal">
          变
         </mi>
         <mi mathvariant="normal">
          量
         </mi>
         <mi mathvariant="normal">
          生
         </mi>
         <mi mathvariant="normal">
          效
         </mi>
         <mi mathvariant="normal">
          ：
         </mi>
         <mi>
          s
         </mi>
         <mi>
          o
         </mi>
         <mi>
          u
         </mi>
         <mi>
          r
         </mi>
         <mi>
          c
         </mi>
         <mi>
          e
         </mi>
         <mtext>
          &nbsp;
         </mtext>
         <mi mathvariant="normal">
          /
         </mi>
         <mi mathvariant="normal">
          .
         </mi>
         <mi>
          b
         </mi>
         <mi>
          a
         </mi>
         <mi>
          s
         </mi>
         <mi>
          h
         </mi>
         <mi>
          r
         </mi>
         <mi>
          c
         </mi>
         <mo>
          [
         </mo>
         <mi>
          h
         </mi>
         <mi>
          a
         </mi>
         <mi>
          d
         </mi>
         <mi>
          o
         </mi>
         <mi>
          o
         </mi>
         <mi>
          p
         </mi>
         <mi mathvariant="normal">
          @
         </mi>
         <mi>
          h
         </mi>
         <mi>
          a
         </mi>
         <mi>
          d
         </mi>
         <mi>
          o
         </mi>
         <mi>
          o
         </mi>
         <mi>
          p
         </mi>
         <mn>
          1
         </mn>
         <mi>
          a
         </mi>
         <mi>
          p
         </mi>
         <mi>
          a
         </mi>
         <mi>
          c
         </mi>
         <mi>
          h
         </mi>
         <mi>
          e
         </mi>
         <mo>
          −
         </mo>
         <mi>
          h
         </mi>
         <mi>
          i
         </mi>
         <mi>
          v
         </mi>
         <mi>
          e
         </mi>
         <mo>
          −
         </mo>
         <mn>
          1.2.2
         </mn>
         <mo>
          −
         </mo>
         <mi>
          b
         </mi>
         <mi>
          i
         </mi>
         <mi>
          n
         </mi>
         <mo>
          ]
         </mo>
        </mrow>
        <annotation encoding="application/x-tex">
         PATH 环境变量生效：source ~/.bashrc [hadoop@hadoop1 apache-hive-1.2.2-bin]
        </annotation>
       </semantics>
      </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathit" style="margin-right: 0.13889em;">P</span><span class="mord mathit">A</span><span class="mord mathit" style="margin-right: 0.13889em;">T</span><span class="mord mathit" style="margin-right: 0.08125em;">H</span><span class="mord cjk_fallback">环</span><span class="mord cjk_fallback">境</span><span class="mord cjk_fallback">变</span><span class="mord cjk_fallback">量</span><span class="mord cjk_fallback">生</span><span class="mord cjk_fallback">效</span><span class="mord cjk_fallback">：</span><span class="mord mathit">s</span><span class="mord mathit">o</span><span class="mord mathit">u</span><span class="mord mathit" style="margin-right: 0.02778em;">r</span><span class="mord mathit">c</span><span class="mord mathit">e</span><span class="mspace nobreak">&nbsp;</span><span class="mord">/</span><span class="mord">.</span><span class="mord mathit">b</span><span class="mord mathit">a</span><span class="mord mathit">s</span><span class="mord mathit">h</span><span class="mord mathit" style="margin-right: 0.02778em;">r</span><span class="mord mathit">c</span><span class="mopen">[</span><span class="mord mathit">h</span><span class="mord mathit">a</span><span class="mord mathit">d</span><span class="mord mathit">o</span><span class="mord mathit">o</span><span class="mord mathit">p</span><span class="mord">@</span><span class="mord mathit">h</span><span class="mord mathit">a</span><span class="mord mathit">d</span><span class="mord mathit">o</span><span class="mord mathit">o</span><span class="mord mathit">p</span><span class="mord">1</span><span class="mord mathit">a</span><span class="mord mathit">p</span><span class="mord mathit">a</span><span class="mord mathit">c</span><span class="mord mathit">h</span><span class="mord mathit">e</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 0.77777em; vertical-align: -0.08333em;"></span><span class="mord mathit">h</span><span class="mord mathit">i</span><span class="mord mathit" style="margin-right: 0.03588em;">v</span><span class="mord mathit">e</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 0.72777em; vertical-align: -0.08333em;"></span><span class="mord">1</span><span class="mord">.</span><span class="mord">2</span><span class="mord">.</span><span class="mord">2</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathit">b</span><span class="mord mathit">i</span><span class="mord mathit">n</span><span class="mclose">]</span></span></span></span></span> echo $HIVE_HOME<br> /usr/local/apache-hive-1.2.2-bin</p> 
  <p>修改配置文件之前，先创建以下目录：<br> mkdir /home/hadoop/hive<br> mkdir /home/hadoop/hive/warehouse<br> mkdir /home/hadoop/hive/tmp</p> 
  <p>hive配置文件目录/usr/local/apache-hive-1.2.2-bin/conf<br> ①修改hive-site.xml<br> 若不存在则cp hive-default.xml.template hive-site.xml</p> 
  <!-- &#25351;&#23450;HDFS&#20013;&#30340;hive&#20179;&#24211;&#22320;&#22336; --> hive.metastore.warehouse.dir /home/hadoop/hive/warehouse hive.exec.scratchdir /home/hadoop/hive 
  <!-- &#35813;&#23646;&#24615;&#20026;&#31354;&#34920;&#31034;&#23884;&#20837;&#27169;&#24335;&#25110;&#26412;&#22320;&#27169;&#24335;&#65292;&#21542;&#21017;&#20026;&#36828;&#31243;&#27169;&#24335; --> hive.metastore.uris 
  <!-- &#25351;&#23450;mysql&#30340;&#36830;&#25509; --> javax.jdo.option.ConnectionURL jdbc:mysql://hadoop1:3306/hive?createDatabaseIfNotExist=true 
  <!-- &#25351;&#23450;&#39537;&#21160;&#31867; --> javax.jdo.option.ConnectionDriverName com.mysql.jdbc.Driver 
  <!-- &#25351;&#23450;&#29992;&#25143;&#21517; --> javax.jdo.option.ConnectionUserName root 
  <!-- &#25351;&#23450;&#23494;&#30721; --> javax.jdo.option.ConnectionPassword 123456 hive.metastore.schema.verification false 替换文件中${system:java.io.tmpdir}为/home/hadoop/hive/tmp 替换文件中${system:user.name}为hadoop ② 修改hive-env.sh 若不存在则cp hive-env.sh.template hive-env.sh 
  <pre><code># Config
</code></pre> 
  <p>export HADOOP_HOME=/usr/local/hadoop-2.8.1<br> export HIVE_CONF_DIR=/usr/local/apache-hive-1.2.2-bin/conf<br> export HIVE_AUX_JARS_PATH=/usr/local/apache-hive-1.2.2-bin/lib</p> 
  <p>③添加数据驱动包<br> 配置的是MySQL数据库，将mysql 的驱动包下载地址：<br> <a href="https://dev.mysql.com/get/Downloads/Connector-J/mysql-connector-java-5.1.47.zip" rel="nofollow">https://dev.mysql.com/get/Downloads/Connector-J/mysql-connector-java-5.1.47.zip</a><br> 解压将mysql-connector-java-5.1.47.jar上传到 /usr/local/apache-hive-1.2.2-bin/lib<br> 首先初始化数据库,进入目录/usr/local/apache-hive-1.2.2-bin/bin<br> 初始化的时候注意要将mysql启动<br> 输入:schematool -initSchema -dbType mysql<br> 启动服务：<br> nohup hive --service metastore &amp;<br> nohup hive --service hiveserver2 &amp;</p> 
  <p>Hive的端口是10000，查看是否正常启动</p> 
  <p><img src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190705145042749." alt="在这里插入图片描述"></p> 
  <p>使用hive自带的beeline客户端连接测试：<br> 在/home/hadoop目录下创建employee.txt（列分隔符\t，行分隔符\n），内容如下：<br> 1201 Gopal 45000 Technical manager<br> 1202 Manisha 45000 Proof reader<br> 1203 Masthanvali 40000 Technical writer<br> 1204 Kiran 40000 Hr Admin<br> 1205 Kranthi 30000 Op Admin</p> 
  <p>建表语句：<br> CREATE TABLE IF NOT EXISTS employee ( eid int, name String, salary String, destination String) COMMENT ‘Employee details’ ROW FORMAT DELIMITED FIELDS TERMINATED BY ‘\t’ LINES TERMINATED BY ‘\n’ STORED AS TEXTFILE;</p> 
  <p><img src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190705145102591.?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2ptejE5OTEwMTEw,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p> 
 </div> 
 <link href="https://csdnimg.cn/release/phoenix/mdeditor/markdown_views-e44c3c0e64.css" rel="stylesheet"> 
</div>

	<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
	<!-- 自定义广告 -->
	<ins class="adsbygoogle"
	     style="display:block"
	     data-ad-client="ca-pub-8889449066804352"
	     data-ad-slot="1494696990"
	     data-ad-format="auto"
	     data-full-width-responsive="true"></ins>
	<script>
		(adsbygoogle = window.adsbygoogle || []).push({});
	</script>


        <br />
        <a href="https://uzshare.com/">更多精彩内容</a>
      </section>
      
      <header style="right: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
        <ul style="display: block;">
          <li><a href="/" style="line-height: 40px;padding-top:0px;">回首页</a></li>
        </ul>
      </header>
      <header class="sm-hidden" style="right: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
          <img src="https://uzzz.org.cn/imgqcode.png" style="width:160px;" />
      </header>
      
      <header class="sm-hidden" style="left: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
          <img src="https://uzzz.org.cn/hou_imgqcode.png" style="width:160px;">
      </header>
    </div>
    
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->

    <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?d293c49e1e4bfe8f276695a5aa953300";
      var s = document.getElementsByTagName("script")[0]; 
      s.parentNode.insertBefore(hm, s);
    })();
    </script>

  </body>
</html>
