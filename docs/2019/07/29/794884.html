<!doctype html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

<!-- Begin Jekyll SEO tag v2.5.0 -->
<title>leetcode123. Best Time to Buy and Sell Stock III（ 买卖股票的最佳时机 III） | 有组织在！</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="leetcode123. Best Time to Buy and Sell Stock III（ 买卖股票的最佳时机 III）" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="题目要求 给定一个数组，它的第 i 个元素是一支给定的股票在第 i 天的价格。 设计一个算法来计算你所能获取的最大利润。你最多可以完成 两笔 交易。 注意: 你不能同时参与多笔交易（你必须在再次购买前出售掉之前的股票）。 补充 股票四连合集，看了不亏，没看后悔！！： NO.1 leetcode 121 Best Time to Buy and Sell Stock（买卖股票的最佳时机） NO.2 leetcode122. Best Time to Buy and Sell Stock II (买卖股票的最佳时机 II) NO.3 leetcode123. Best Time to Buy and Sell Stock III（ 买卖股票的最佳时机 III） NO.4 leetcode188. Best Time to Buy and Sell Stock IV(买卖股票的最佳时机 IV) 解题思路 是第一道题的扩展，股票的最大盈利，但是限定了最多只能买卖两次，所以为了在限制条件中解题，我们设置四个变量 first_buy:在该天第一次买入股票可获得的最大收益 first_profit:在该天第一次卖出股票可获得的最大收益 second_buy: 在该天第二次买入股票可获得的最大收益 second_profit: 在该天第二次卖出股票可获得的最大收益 分别对四个变量进行相应的更新, 最后的secondprofit就是最后的收益。 实际上是找两段波峰波谷的问题。 主要代码python class Solution(object): def maxProfit(self, prices): &quot;&quot;&quot; :type prices: List[int] :rtype: int &quot;&quot;&quot; first_buy = second_buy = float(&#39;inf&#39;) first_profit = second_profit = 0 for i in range(len(prices)): # first_buy = min(first_buy, prices[i]) # first_profit = max(first_profit, prices[i]-first_buy) # second_buy = min(second_buy, prices[i]-first_profit) # second_profit = max(second_profit, prices[i] - second_buy) if prices[i]&lt;first_buy: first_buy = prices[i] if first_profit&lt;prices[i] - first_buy: first_profit = prices[i] - first_buy # 第二次的当前买入价格要减去第一次的利润来求。 if prices[i]-first_profit &lt; second_buy: second_buy = prices[i]-first_profit if second_profit&lt; prices[i] - second_buy: second_profit = prices[i] - second_buy return second_profit 原题链接：https://leetcode-cn.com/problems/best-time-to-buy-and-sell-stock-iii" />
<meta property="og:description" content="题目要求 给定一个数组，它的第 i 个元素是一支给定的股票在第 i 天的价格。 设计一个算法来计算你所能获取的最大利润。你最多可以完成 两笔 交易。 注意: 你不能同时参与多笔交易（你必须在再次购买前出售掉之前的股票）。 补充 股票四连合集，看了不亏，没看后悔！！： NO.1 leetcode 121 Best Time to Buy and Sell Stock（买卖股票的最佳时机） NO.2 leetcode122. Best Time to Buy and Sell Stock II (买卖股票的最佳时机 II) NO.3 leetcode123. Best Time to Buy and Sell Stock III（ 买卖股票的最佳时机 III） NO.4 leetcode188. Best Time to Buy and Sell Stock IV(买卖股票的最佳时机 IV) 解题思路 是第一道题的扩展，股票的最大盈利，但是限定了最多只能买卖两次，所以为了在限制条件中解题，我们设置四个变量 first_buy:在该天第一次买入股票可获得的最大收益 first_profit:在该天第一次卖出股票可获得的最大收益 second_buy: 在该天第二次买入股票可获得的最大收益 second_profit: 在该天第二次卖出股票可获得的最大收益 分别对四个变量进行相应的更新, 最后的secondprofit就是最后的收益。 实际上是找两段波峰波谷的问题。 主要代码python class Solution(object): def maxProfit(self, prices): &quot;&quot;&quot; :type prices: List[int] :rtype: int &quot;&quot;&quot; first_buy = second_buy = float(&#39;inf&#39;) first_profit = second_profit = 0 for i in range(len(prices)): # first_buy = min(first_buy, prices[i]) # first_profit = max(first_profit, prices[i]-first_buy) # second_buy = min(second_buy, prices[i]-first_profit) # second_profit = max(second_profit, prices[i] - second_buy) if prices[i]&lt;first_buy: first_buy = prices[i] if first_profit&lt;prices[i] - first_buy: first_profit = prices[i] - first_buy # 第二次的当前买入价格要减去第一次的利润来求。 if prices[i]-first_profit &lt; second_buy: second_buy = prices[i]-first_profit if second_profit&lt; prices[i] - second_buy: second_profit = prices[i] - second_buy return second_profit 原题链接：https://leetcode-cn.com/problems/best-time-to-buy-and-sell-stock-iii" />
<link rel="canonical" href="https://uzzz.org/2019/07/29/794884.html" />
<meta property="og:url" content="https://uzzz.org/2019/07/29/794884.html" />
<meta property="og:site_name" content="有组织在！" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2019-07-29T00:00:00+08:00" />
<script type="application/ld+json">
{"description":"题目要求 给定一个数组，它的第 i 个元素是一支给定的股票在第 i 天的价格。 设计一个算法来计算你所能获取的最大利润。你最多可以完成 两笔 交易。 注意: 你不能同时参与多笔交易（你必须在再次购买前出售掉之前的股票）。 补充 股票四连合集，看了不亏，没看后悔！！： NO.1 leetcode 121 Best Time to Buy and Sell Stock（买卖股票的最佳时机） NO.2 leetcode122. Best Time to Buy and Sell Stock II (买卖股票的最佳时机 II) NO.3 leetcode123. Best Time to Buy and Sell Stock III（ 买卖股票的最佳时机 III） NO.4 leetcode188. Best Time to Buy and Sell Stock IV(买卖股票的最佳时机 IV) 解题思路 是第一道题的扩展，股票的最大盈利，但是限定了最多只能买卖两次，所以为了在限制条件中解题，我们设置四个变量 first_buy:在该天第一次买入股票可获得的最大收益 first_profit:在该天第一次卖出股票可获得的最大收益 second_buy: 在该天第二次买入股票可获得的最大收益 second_profit: 在该天第二次卖出股票可获得的最大收益 分别对四个变量进行相应的更新, 最后的secondprofit就是最后的收益。 实际上是找两段波峰波谷的问题。 主要代码python class Solution(object): def maxProfit(self, prices): &quot;&quot;&quot; :type prices: List[int] :rtype: int &quot;&quot;&quot; first_buy = second_buy = float(&#39;inf&#39;) first_profit = second_profit = 0 for i in range(len(prices)): # first_buy = min(first_buy, prices[i]) # first_profit = max(first_profit, prices[i]-first_buy) # second_buy = min(second_buy, prices[i]-first_profit) # second_profit = max(second_profit, prices[i] - second_buy) if prices[i]&lt;first_buy: first_buy = prices[i] if first_profit&lt;prices[i] - first_buy: first_profit = prices[i] - first_buy # 第二次的当前买入价格要减去第一次的利润来求。 if prices[i]-first_profit &lt; second_buy: second_buy = prices[i]-first_profit if second_profit&lt; prices[i] - second_buy: second_profit = prices[i] - second_buy return second_profit 原题链接：https://leetcode-cn.com/problems/best-time-to-buy-and-sell-stock-iii","@type":"BlogPosting","url":"https://uzzz.org/2019/07/29/794884.html","headline":"leetcode123. Best Time to Buy and Sell Stock III（ 买卖股票的最佳时机 III）","dateModified":"2019-07-29T00:00:00+08:00","datePublished":"2019-07-29T00:00:00+08:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://uzzz.org/2019/07/29/794884.html"},"@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->


    <link rel="stylesheet" href="/assets/css/style.css?v=">
    <script src="/assets/js/scale.fix.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-123344652-1"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-123344652-1');
    </script>
    
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <script>
      (adsbygoogle = window.adsbygoogle || []).push({
        google_ad_client: "ca-pub-8889449066804352",
        enable_page_level_ads: true
      });
    </script>
    
    <script async custom-element="amp-auto-ads"
        src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
    </script>
    
    <style>
      @media screen and (max-width:760px){
        .sm-hidden{display:none; }
      }
    </style>

  </head>
  <body>
    
        <amp-auto-ads type="adsense"
              data-ad-client="ca-pub-8889449066804352">
        </amp-auto-ads>
    
    <div class="wrapper">
      <header  class="without-description" >
        <h1>leetcode123. Best Time to Buy and Sell Stock III（ 买卖股票的最佳时机 III）</h1>
        
        
        <ul style="display: block;">
            <li><a href="https://uzshare.com/" style="line-height: unset;" target="_blank"><strong>柚子社区</strong></a></li>
 	    <li><a href="/donate/" style="line-height: unset;" target="_blank"><strong>Donate</strong></a></li>
        </ul>
        
      </header>
      <section>

<div style="margin:0 0 8px 0;">
<style>
table.gsc-input {
    margin: 0;
}
.cse .gsc-control-cse, .gsc-control-cse {
    padding: 0;
    width: auto;
}
.gsc-search-box td {
    border-bottom: none;
}
</style>
<script>
  (function() {
    var cx = '004431708863642777669:qan2_6ugotw';
    var gcse = document.createElement('script');
    gcse.type = 'text/javascript';
    gcse.async = true;
    gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(gcse, s);
  })();
</script>
<gcse:search></gcse:search>
</div>
<!-- match content ads -->
	        <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
			<ins class="adsbygoogle"
			     style="display:block"
			     data-ad-format="autorelaxed"
			     data-ad-client="ca-pub-8889449066804352"
			     data-ad-slot="1928667997"></ins>
			<script>
			     (adsbygoogle = window.adsbygoogle || []).push({});
			</script>	



        <div id="article_content" class="article_content clearfix">  
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-3019150162.css"> 
 <div id="content_views" class="markdown_views prism-atom-one-dark"> 
  <!-- flowchart 箭头图标 勿删 --> 
  <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"> 
   <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path> 
  </svg> 
  <h3><a id="_0"></a>题目要求</h3> 
  <p>给定一个数组，它的第 i 个元素是一支给定的股票在第 i 天的价格。<br> 设计一个算法来计算你所能获取的最大利润。你最多可以完成 两笔 交易。<br> 注意: 你不能同时参与多笔交易（你必须在再次购买前出售掉之前的股票）。<br> <img src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190725155927243.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM3NDY2MTIx,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br> <font color="red"><strong>补充 股票四连合集，看了不亏，没看后悔！！：</strong></font></p> 
  <p>NO.1 <a href="https://blog.csdn.net/qq_37466121/article/details/85285892" rel="nofollow" data-token="7ac93347d1523c1befbb883f4d312fbd">leetcode 121 Best Time to Buy and Sell Stock（买卖股票的最佳时机）</a><br> NO.2 <a href="https://blog.csdn.net/qq_37466121/article/details/97056337" rel="nofollow" data-token="c9502c3854bf1d0e39c48f58a0751128">leetcode122. Best Time to Buy and Sell Stock II (买卖股票的最佳时机 II)</a><br> NO.3 <a href="https://blog.csdn.net/qq_37466121/article/details/97269105" rel="nofollow" data-token="4af3336b956bca2900ba573503beffd8">leetcode123. Best Time to Buy and Sell Stock III（ 买卖股票的最佳时机 III）</a><br> NO.4 <a href="https://blog.csdn.net/qq_37466121/article/details/97271778" rel="nofollow" data-token="8ef4e7f35745a1de437ce86df3c5dc43">leetcode188. Best Time to Buy and Sell Stock IV(买卖股票的最佳时机 IV)</a></p> 
  <h3><a id="_11"></a>解题思路</h3> 
  <p>是第一道题的扩展，<a href="https://blog.csdn.net/qq_37466121/article/details/85285892" rel="nofollow" data-token="7ac93347d1523c1befbb883f4d312fbd">股票的最大盈利</a>，但是限定了最多只能买卖两次，所以为了在限制条件中解题，我们设置四个变量<br> first_buy:在该天第一次买入股票可获得的最大收益<br> first_profit:在该天第一次卖出股票可获得的最大收益<br> second_buy: 在该天第二次买入股票可获得的最大收益<br> second_profit: 在该天第二次卖出股票可获得的最大收益<br> 分别对四个变量进行相应的更新, 最后的secondprofit就是最后的收益。</p> 
  <p>实际上是找两段波峰波谷的问题。</p> 
  <h3><a id="python_20"></a>主要代码python</h3> 
  <pre><code class="prism language-py"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">(</span><span class="token builtin">object</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">maxProfit</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> prices<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token triple-quoted-string string">""" :type prices: List[int] :rtype: int """</span>
        first_buy <span class="token operator">=</span> second_buy <span class="token operator">=</span> <span class="token builtin">float</span><span class="token punctuation">(</span><span class="token string">'inf'</span><span class="token punctuation">)</span>
        first_profit <span class="token operator">=</span> second_profit <span class="token operator">=</span> <span class="token number">0</span>
        <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>prices<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token comment"># first_buy = min(first_buy, prices[i])</span>
            <span class="token comment"># first_profit = max(first_profit, prices[i]-first_buy)</span>
            <span class="token comment"># second_buy = min(second_buy, prices[i]-first_profit)</span>
            <span class="token comment"># second_profit = max(second_profit, prices[i] - second_buy)</span>
            <span class="token keyword">if</span> prices<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">&lt;</span>first_buy<span class="token punctuation">:</span>
                first_buy <span class="token operator">=</span> prices<span class="token punctuation">[</span>i<span class="token punctuation">]</span>
            <span class="token keyword">if</span> first_profit<span class="token operator">&lt;</span>prices<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">-</span> first_buy<span class="token punctuation">:</span>
                first_profit <span class="token operator">=</span> prices<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">-</span> first_buy
            <span class="token comment"># 第二次的当前买入价格要减去第一次的利润来求。</span>
            <span class="token keyword">if</span> prices<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">-</span>first_profit <span class="token operator">&lt;</span> second_buy<span class="token punctuation">:</span>
                second_buy <span class="token operator">=</span>  prices<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">-</span>first_profit 
            <span class="token keyword">if</span> second_profit<span class="token operator">&lt;</span> prices<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">-</span> second_buy<span class="token punctuation">:</span>
                second_profit  <span class="token operator">=</span> prices<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">-</span> second_buy
        <span class="token keyword">return</span> second_profit
</code></pre> 
  <h3><a id="httpsleetcodecncomproblemsbesttimetobuyandsellstockiii_47"></a>原题链接：<a href="https://leetcode-cn.com/problems/best-time-to-buy-and-sell-stock-iii" rel="nofollow" data-token="480c45a899cbbbe0866accbfa1732aaa">https://leetcode-cn.com/problems/best-time-to-buy-and-sell-stock-iii</a></h3> 
 </div> 
 <link href="https://csdnimg.cn/release/phoenix/mdeditor/markdown_views-e44c3c0e64.css" rel="stylesheet"> 
</div>

	<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
	<!-- 自定义广告 -->
	<ins class="adsbygoogle"
	     style="display:block"
	     data-ad-client="ca-pub-8889449066804352"
	     data-ad-slot="1494696990"
	     data-ad-format="auto"
	     data-full-width-responsive="true"></ins>
	<script>
		(adsbygoogle = window.adsbygoogle || []).push({});
	</script>


        <br />
        <a href="https://uzshare.com/">更多精彩内容</a>
      </section>
      
      <header style="right: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
        <ul style="display: block;">
          <li><a href="/" style="line-height: 40px;padding-top:0px;">回首页</a></li>
        </ul>
      </header>
      <header class="sm-hidden" style="right: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
          <img src="https://uzzz.org.cn/imgqcode.png" style="width:160px;" />
      </header>
      
      <header class="sm-hidden" style="left: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
          <img src="https://uzzz.org.cn/hou_imgqcode.png" style="width:160px;">
      </header>
    </div>
    
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->

    <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?d293c49e1e4bfe8f276695a5aa953300";
      var s = document.getElementsByTagName("script")[0]; 
      s.parentNode.insertBefore(hm, s);
    })();
    </script>

  </body>
</html>
