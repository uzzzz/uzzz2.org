<!doctype html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

<!-- Begin Jekyll SEO tag v2.5.0 -->
<title>为了给小女友挑合适罩杯的内衣，我用 Python 爬了淘宝内衣店的数据！ | 有组织在！</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="为了给小女友挑合适罩杯的内衣，我用 Python 爬了淘宝内衣店的数据！" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="原文链接： https://github.com/zwwjava/python_capture 编辑: 开发者最前线 &amp; 可可|&nbsp;作者：躲猫猫的猫， 原文链接：https://www.cnblogs.com/zhaww/p/9636383.html大家好，希望各位能怀着正直、严谨、专业的心态观看这篇文章。ヾ(๑╹◡╹)ﾉ&quot;老天真的对我不薄，让我终于有了女友，自从有了女友后， 我为了能替女朋友买上一件心怡的内衣 。接下来我们尝试用 Python 抓取天猫内衣销售数据，并分析得到中国女性普遍的罩杯数据、最受欢迎的内衣颜色是什么、评论的关键字。我们先看看分析得到的成果是怎样的？（讲的很详细，推荐跟着敲一遍） 　　 （买个内衣这么开心） 图片看不清楚的话，可以把图片单独拉到另一个窗口。这里是分析了一万条数据得出的结论，可能会有误差，但是还是希望单身的你们能找到 0.06% 那一批妹纸。下面我会详细介绍怎么抓取天猫内衣销售数据，存储、分析、展示。 研究天猫网站 抓取天猫评论数据 存储、分析数据 可视化 研究天猫网站我们随意进入一个商品的购买界面（能看到评论的那个界面），F12 开发者模式 -- Network 栏 -- 刷新下界面 -- 在如图的位置搜索 list_ 会看到一个 list_detail_rate.htm?itemId= ….如下图：【单击】这个url 能看到返回的是一个 Json 数据 ，检查一下你会发现这串 Json 就是商品的评论数据 [ rateDetail ][ rateList ] 【双击】这个url 你会得到一个新界面，如图 看一下这个信息 这里的路径 就是获取评论数据的 url了。这个 URL 有很多参数你可以分析一下每个值都是干嘛的。 itemId 对应的是商品id， sellerId &nbsp;对应的是店铺id，currentPage 是当前页。这里 sellerId &nbsp;可以填任意值，不影响数据的获取。 抓取天猫评论数据写一个抓取天猫评论数据的方法。getCommentDetail #&nbsp;获取商品评论数据def&nbsp;getCommentDetail(itemId,currentPage):&nbsp;&nbsp;&nbsp;&nbsp;url&nbsp;=&nbsp; https://rate.tmall.com/list_detail_rate.htm?itemId= &nbsp;+&nbsp;str(&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;itemId)&nbsp;+&nbsp; &amp;sellerId=2451699564&amp;order=3&amp;currentPage= &nbsp;+&nbsp;str(currentPage)&nbsp;+&nbsp; &amp;append=0callback=jsonp336 &nbsp;&nbsp;&nbsp;&nbsp;# itemId 产品id ；sellerId 店铺id 字段必须有值，但随意值就行&nbsp;&nbsp;&nbsp;&nbsp;html&nbsp;=&nbsp;common.getUrlContent(url)&nbsp;&nbsp;#&nbsp;获取网页信息&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;删掉返回的多余信息&nbsp;&nbsp;&nbsp;&nbsp;html&nbsp;=&nbsp;html.replace( jsonp128( , )&nbsp;#需要确定是不是&nbsp;jsonp128&nbsp;&nbsp;&nbsp;&nbsp;html&nbsp;=&nbsp;html.replace( ) , )&nbsp;&nbsp;&nbsp;&nbsp;html&nbsp;=&nbsp;html.replace( false , &quot;false&quot; )&nbsp;&nbsp;&nbsp;&nbsp;html&nbsp;=&nbsp;html.replace( true , &quot;true&quot; )&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;将string&nbsp;转换为字典对象&nbsp;&nbsp;&nbsp;&nbsp;tmalljson&nbsp;=&nbsp;json.loads(html)&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;tmalljson这里需要注意的是 jsonp128 这个值需要你自己看一下，你那边跟我这个应该是不同的。在上面的方法里有两个变量，itemId 和 currentPage 这两个值我们动态来控制，所以我们需要获得 一批 商品id号 和 评论的最大页数 用来遍历。写个获取商品评论最大页数的方法 getLastPage #&nbsp;获取商品评论最大页数def&nbsp;getLastPage(itemId):&nbsp;&nbsp;&nbsp;&nbsp;tmalljson&nbsp;=&nbsp;getCommentDetail(itemId,1)&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;tmalljson[ rateDetail ][ paginator ][ lastPage ]&nbsp;#最大页数那现在怎么获取 产品的id 列表呢？我们可以在天猫中搜索商品关键字 用开发者模式观察 这里观察一下这个页面的元素分布，很容易就发现了 商品的id 信息，当然你可以想办法确认一下。 现在就写个 获取商品id 的方法 getProductIdList #&nbsp;获取商品iddef&nbsp;getProductIdList():&nbsp;&nbsp;&nbsp;&nbsp;url&nbsp;=&nbsp; https://list.tmall.com/search_product.htm?q=内衣 &nbsp;#&nbsp;q参数&nbsp;是查询的关键字&nbsp;&nbsp;&nbsp;&nbsp;html&nbsp;=&nbsp;common.getUrlContent(url)&nbsp;&nbsp;#&nbsp;获取网页信息&nbsp;&nbsp;&nbsp;&nbsp;soup&nbsp;=&nbsp;BeautifulSoup(html, html.parser )&nbsp;&nbsp;&nbsp;&nbsp;idList&nbsp;=&nbsp;[]&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;用Beautiful&nbsp;Soup提取商品页面中所有的商品ID&nbsp;&nbsp;&nbsp;&nbsp;productList&nbsp;=&nbsp;soup.find_all( div ,&nbsp;{ class :&nbsp; product })&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;product&nbsp;in&nbsp;productList:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;idList.append(product[ data-id ])&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;idList现在所有的基本要求都有了，是时候把他们组合起来。在 main 方法中写剩下的组装部分 if&nbsp;__name__&nbsp;==&nbsp; __main__ :&nbsp;&nbsp;&nbsp;&nbsp;productIdList&nbsp;=&nbsp;getProductIdList()&nbsp;#获取商品id&nbsp;&nbsp;&nbsp;&nbsp;initial&nbsp;=&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;while&nbsp;initial&nbsp;&lt;&nbsp;len(productIdList)&nbsp;-&nbsp;30:&nbsp;&nbsp;#&nbsp;总共有60个商品，我只取了前30个&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;try:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;itemId&nbsp;=&nbsp;productIdList[initial]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print( ---------- ,&nbsp;itemId,&nbsp; ------------ )&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;maxPage&nbsp;=&nbsp;getLastPage(itemId)&nbsp;#获取商品评论最大页数&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;num&nbsp;=&nbsp;1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while&nbsp;num&nbsp;&lt;=&nbsp;maxPage&nbsp;and&nbsp;num&nbsp;&lt;&nbsp;20:&nbsp;#每个商品的评论我最多取20&nbsp;页，每页有20条评论，也就是每个商品最多只取&nbsp;400&nbsp;个评论&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;try:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;抓取某个商品的某页评论数据&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tmalljson&nbsp;=&nbsp;getCommentDetail(itemId,&nbsp;num)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rateList&nbsp;=&nbsp;tmalljson[ rateDetail ][ rateList ]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;commentList&nbsp;=&nbsp;[]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;n&nbsp;=&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while&nbsp;(n&nbsp;&lt;&nbsp;len(rateList)):&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;comment&nbsp;=&nbsp;[]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;商品描述&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;colorSize&nbsp;=&nbsp;rateList[n][ auctionSku ]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;m&nbsp;=&nbsp;re.split( [:;] ,&nbsp;colorSize)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rateContent&nbsp;=&nbsp;rateList[n][ rateContent ]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dtime&nbsp;=&nbsp;rateList[n][ rateDate ]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;comment.append(m[1])&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;comment.append(m[3])&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;comment.append( 天猫 )&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;comment.append(rateContent)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;comment.append(dtime)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;commentList.append(comment)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;n&nbsp;+=&nbsp;1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print(num)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sql&nbsp;=&nbsp;&quot;insert&nbsp;into&nbsp;bras(bra_id,&nbsp;bra_color,&nbsp;bra_size,&nbsp;resource,&nbsp;comment,&nbsp;comment_time)&nbsp;&nbsp;value(null,&nbsp;%s,&nbsp;%s,&nbsp;%s,&nbsp;%s,&nbsp;%s)&quot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;common.patchInsertData(sql,&nbsp;commentList)&nbsp;#&nbsp;mysql操作的批量插入&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;num&nbsp;+=&nbsp;1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;except&nbsp;Exception&nbsp;as&nbsp;e:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;num&nbsp;+=&nbsp;1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print(e)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;continue&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;initial&nbsp;+=&nbsp;1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;except&nbsp;Exception&nbsp;as&nbsp;e:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print(e)所有的代码就这样完成了，我现在把 common.py 的代码，还有 tmallbra.py 的代码都贴出来 #&nbsp;-*-&nbsp;coding:utf-8&nbsp;-*-#&nbsp;Author:&nbsp;zwwimport&nbsp;requestsimport&nbsp;timeimport&nbsp;randomimport&nbsp;socketimport&nbsp;http.clientimport&nbsp;pymysqlimport&nbsp;csv#&nbsp;封装requestsclass&nbsp;Common(object):&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;getUrlContent(self,&nbsp;url,&nbsp;data=None):&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;header&nbsp;=&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Accept :&nbsp; text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8 ,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Accept-Encoding :&nbsp; gzip,&nbsp;deflate,&nbsp;br ,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Accept-Language :&nbsp; zh-CN,zh;q=0.9,en;q=0.8 ,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; user-agent :&nbsp;&quot;User-Agent:Mozilla/5.0&nbsp;(Windows&nbsp;NT&nbsp;10.0;&nbsp;Win64;&nbsp;x64)&nbsp;AppleWebKit/537.36&nbsp;(KHTML,&nbsp;like&nbsp;Gecko)&nbsp;Chrome/62.0.3202.94&nbsp;Safari/537.36&quot;,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; cache-control :&nbsp; max-age=0 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;#&nbsp;request&nbsp;的请求头&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;timeout&nbsp;=&nbsp;random.choice(range(80,&nbsp;180))&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while&nbsp;True:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;try:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rep&nbsp;=&nbsp;requests.get(url,&nbsp;headers=header,&nbsp;timeout=timeout)&nbsp;&nbsp;#&nbsp;请求url地址，获得返回&nbsp;response&nbsp;信息&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;rep.encoding&nbsp;=&nbsp; utf-8 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;except&nbsp;socket.timeout&nbsp;as&nbsp;e:&nbsp;&nbsp;#&nbsp;以下都是异常处理&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print( 3: ,&nbsp;e)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;time.sleep(random.choice(range(8,&nbsp;15)))&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;except&nbsp;socket.error&nbsp;as&nbsp;e:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print( 4: ,&nbsp;e)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;time.sleep(random.choice(range(20,&nbsp;60)))&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;except&nbsp;http.client.BadStatusLine&nbsp;as&nbsp;e:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print( 5: ,&nbsp;e)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;time.sleep(random.choice(range(30,&nbsp;80)))&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;except&nbsp;http.client.IncompleteRead&nbsp;as&nbsp;e:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print( 6: ,&nbsp;e)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;time.sleep(random.choice(range(5,&nbsp;15)))&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print( request&nbsp;success )&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;rep.text&nbsp;&nbsp;#&nbsp;返回的&nbsp;Html&nbsp;全文&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;writeData(self,&nbsp;data,&nbsp;url):&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;with&nbsp;open(url,&nbsp; a ,&nbsp;errors= ignore ,&nbsp;newline= )&nbsp;as&nbsp;f:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;f_csv&nbsp;=&nbsp;csv.writer(f)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;f_csv.writerows(data)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print( write_csv&nbsp;success )&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;queryData(self,&nbsp;sql):&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;db&nbsp;=&nbsp;pymysql.connect(&quot;localhost&quot;,&nbsp;&quot;zww&quot;,&nbsp;&quot;960128&quot;,&nbsp;&quot;test&quot;)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cursor&nbsp;=&nbsp;db.cursor()&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;results&nbsp;=&nbsp;[]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;try:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cursor.execute(sql)&nbsp;&nbsp;&nbsp;&nbsp;#执行查询语句&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;results&nbsp;=&nbsp;cursor.fetchall()&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;except&nbsp;Exception&nbsp;as&nbsp;e:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print( 查询时发生异常 &nbsp;+&nbsp;e)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;如果发生错误则回滚&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;db.rollback()&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;关闭数据库连接&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;db.close()&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;results&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print( insert&nbsp;data&nbsp;success )&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;insertData(self,&nbsp;sql):&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;打开数据库连接&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;db&nbsp;=&nbsp;pymysql.connect(&quot;localhost&quot;,&nbsp;&quot;zww&quot;,&nbsp;&quot;000000&quot;,&nbsp;&quot;zwwdb&quot;)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;使用&nbsp;cursor()&nbsp;方法创建一个游标对象&nbsp;cursor&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cursor&nbsp;=&nbsp;db.cursor()&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;try:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;sql&nbsp;=&nbsp;&quot;INSERT&nbsp;INTO&nbsp;WEATHER(w_id,&nbsp;w_date,&nbsp;w_detail,&nbsp;w_temperature)&nbsp;VALUES&nbsp;(null,&nbsp; %s , %s , %s )&quot;&nbsp;%&nbsp;(data[0],&nbsp;data[1],&nbsp;data[2])&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cursor.execute(sql)&nbsp;&nbsp;&nbsp;&nbsp;#单条数据写入&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;提交到数据库执行&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;db.commit()&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;except&nbsp;Exception&nbsp;as&nbsp;e:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print( 插入时发生异常 &nbsp;+&nbsp;e)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;如果发生错误则回滚&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;db.rollback()&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;关闭数据库连接&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;db.close()&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print( insert&nbsp;data&nbsp;success )&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;patchInsertData(self,&nbsp;sql,&nbsp;datas):&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;打开数据库连接&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;db&nbsp;=&nbsp;pymysql.connect(&quot;localhost&quot;,&nbsp;&quot;zww&quot;,&nbsp;&quot;960128&quot;,&nbsp;&quot;test&quot;)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;使用&nbsp;cursor()&nbsp;方法创建一个游标对象&nbsp;cursor&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cursor&nbsp;=&nbsp;db.cursor()&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;try:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;批量插入数据&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;cursor.executemany( insert&nbsp;into&nbsp;WEATHER(w_id,&nbsp;w_date,&nbsp;w_detail,&nbsp;w_temperature_low,&nbsp;w_temperature_high)&nbsp;value(null,&nbsp;%s,%s,%s,%s) ,datas)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cursor.executemany(sql,&nbsp;datas)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;提交到数据库执行&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;db.commit()&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;except&nbsp;Exception&nbsp;as&nbsp;e:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print( 插入时发生异常 &nbsp;+&nbsp;e)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;如果发生错误则回滚&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;db.rollback()&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;关闭数据库连接&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;db.close()&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print( insert&nbsp;data&nbsp;success )上面需要注意，数据库的配置。 #&nbsp;-*-&nbsp;coding:utf-8&nbsp;-*-#&nbsp;Author:&nbsp;zwwfrom&nbsp;Include.commons.common&nbsp;import&nbsp;Commonfrom&nbsp;bs4&nbsp;import&nbsp;BeautifulSoupimport&nbsp;jsonimport&nbsp;reimport&nbsp;pymysqlcommon&nbsp;=&nbsp;Common()#&nbsp;获取商品iddef&nbsp;getProductIdList():&nbsp;&nbsp;&nbsp;&nbsp;url&nbsp;=&nbsp; https://list.tmall.com/search_product.htm?q=内衣 &nbsp;#&nbsp;q参数&nbsp;是查询的关键字，这要改变一下查询值，就可以抓取任意你想知道的数据&nbsp;&nbsp;&nbsp;&nbsp;html&nbsp;=&nbsp;common.getUrlContent(url)&nbsp;&nbsp;#&nbsp;获取网页信息&nbsp;&nbsp;&nbsp;&nbsp;soup&nbsp;=&nbsp;BeautifulSoup(html, html.parser )&nbsp;&nbsp;&nbsp;&nbsp;idList&nbsp;=&nbsp;[]&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;用Beautiful&nbsp;Soup提取商品页面中所有的商品ID&nbsp;&nbsp;&nbsp;&nbsp;productList&nbsp;=&nbsp;soup.find_all( div ,&nbsp;{ class :&nbsp; product })&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;product&nbsp;in&nbsp;productList:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;idList.append(product[ data-id ])&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;idList#&nbsp;获取商品评论数据def&nbsp;getCommentDetail(itemId,currentPage):&nbsp;&nbsp;&nbsp;&nbsp;url&nbsp;=&nbsp; https://rate.tmall.com/list_detail_rate.htm?itemId= &nbsp;+&nbsp;str(&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;itemId)&nbsp;+&nbsp; &amp;sellerId=2451699564&amp;order=3&amp;currentPage= &nbsp;+&nbsp;str(currentPage)&nbsp;+&nbsp; &amp;append=0callback=jsonp336 &nbsp;&nbsp;&nbsp;&nbsp;# itemId 产品id ；sellerId 店铺id 字段必须有值，但随意值就行&nbsp;&nbsp;&nbsp;&nbsp;html&nbsp;=&nbsp;common.getUrlContent(url)&nbsp;&nbsp;#&nbsp;获取网页信息&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;删掉返回的多余信息&nbsp;&nbsp;&nbsp;&nbsp;html&nbsp;=&nbsp;html.replace( jsonp128( , )&nbsp;#需要确定是不是&nbsp;jsonp128&nbsp;&nbsp;&nbsp;&nbsp;html&nbsp;=&nbsp;html.replace( ) , )&nbsp;&nbsp;&nbsp;&nbsp;html&nbsp;=&nbsp;html.replace( false , &quot;false&quot; )&nbsp;&nbsp;&nbsp;&nbsp;html&nbsp;=&nbsp;html.replace( true , &quot;true&quot; )&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;将string&nbsp;转换为字典对象&nbsp;&nbsp;&nbsp;&nbsp;tmalljson&nbsp;=&nbsp;json.loads(html)&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;tmalljson#&nbsp;获取商品评论最大页数def&nbsp;getLastPage(itemId):&nbsp;&nbsp;&nbsp;&nbsp;tmalljson&nbsp;=&nbsp;getCommentDetail(itemId,1)&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;tmalljson[ rateDetail ][ paginator ][ lastPage ]&nbsp;#最大页数if&nbsp;__name__&nbsp;==&nbsp; __main__ :&nbsp;&nbsp;&nbsp;&nbsp;productIdList&nbsp;=&nbsp;getProductIdList()&nbsp;#获取商品id&nbsp;&nbsp;&nbsp;&nbsp;initial&nbsp;=&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;while&nbsp;initial&nbsp;&lt;&nbsp;len(productIdList)&nbsp;-&nbsp;30:&nbsp;&nbsp;#&nbsp;总共有60个商品，我只取了前30个&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;try:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;itemId&nbsp;=&nbsp;productIdList[initial]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print( ---------- ,&nbsp;itemId,&nbsp; ------------ )&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;maxPage&nbsp;=&nbsp;getLastPage(itemId)&nbsp;#获取商品评论最大页数&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;num&nbsp;=&nbsp;1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while&nbsp;num&nbsp;&lt;=&nbsp;maxPage&nbsp;and&nbsp;num&nbsp;&lt;&nbsp;20:&nbsp;#每个商品的评论我最多取20&nbsp;页，每页有20条评论，也就是每个商品最多只取&nbsp;400&nbsp;个评论&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;try:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;抓取某个商品的某页评论数据&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tmalljson&nbsp;=&nbsp;getCommentDetail(itemId,&nbsp;num)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rateList&nbsp;=&nbsp;tmalljson[ rateDetail ][ rateList ]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;commentList&nbsp;=&nbsp;[]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;n&nbsp;=&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while&nbsp;(n&nbsp;&lt;&nbsp;len(rateList)):&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;comment&nbsp;=&nbsp;[]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;商品描述&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;colorSize&nbsp;=&nbsp;rateList[n][ auctionSku ]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;m&nbsp;=&nbsp;re.split( [:;] ,&nbsp;colorSize)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rateContent&nbsp;=&nbsp;rateList[n][ rateContent ]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dtime&nbsp;=&nbsp;rateList[n][ rateDate ]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;comment.append(m[1])&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;comment.append(m[3])&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;comment.append( 天猫 )&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;comment.append(rateContent)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;comment.append(dtime)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;commentList.append(comment)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;n&nbsp;+=&nbsp;1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print(num)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sql&nbsp;=&nbsp;&quot;insert&nbsp;into&nbsp;bras(bra_id,&nbsp;bra_color,&nbsp;bra_size,&nbsp;resource,&nbsp;comment,&nbsp;comment_time)&nbsp;&nbsp;value(null,&nbsp;%s,&nbsp;%s,&nbsp;%s,&nbsp;%s,&nbsp;%s)&quot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;common.patchInsertData(sql,&nbsp;commentList)&nbsp;#&nbsp;mysql操作的批量插入&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;num&nbsp;+=&nbsp;1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;except&nbsp;Exception&nbsp;as&nbsp;e:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;num&nbsp;+=&nbsp;1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print(e)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;continue&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;initial&nbsp;+=&nbsp;1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;except&nbsp;Exception&nbsp;as&nbsp;e:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print(e) 存储、分析数据所有的代码都有了，就差数据库的建立了。我这里用的是 MySql 数据库。 CREATE&nbsp;TABLE&nbsp;`bra`&nbsp;(`bra_id`&nbsp;&nbsp;int(11)&nbsp;NOT&nbsp;NULL&nbsp;AUTO_INCREMENT&nbsp;COMMENT&nbsp; id &nbsp;,`bra_color`&nbsp;&nbsp;varchar(25)&nbsp;NULL&nbsp;COMMENT&nbsp; 颜色 &nbsp;,`bra_size`&nbsp;&nbsp;varchar(25)&nbsp;NULL&nbsp;COMMENT&nbsp; 罩杯 &nbsp;,`resource`&nbsp;&nbsp;varchar(25)&nbsp;NULL&nbsp;COMMENT&nbsp; 数据来源 &nbsp;,`comment`&nbsp;&nbsp;varchar(500)&nbsp;CHARACTER&nbsp;SET&nbsp;utf8mb4&nbsp;DEFAULT&nbsp;NULL&nbsp;COMMENT&nbsp; 评论 &nbsp;,`comment_time`&nbsp;&nbsp;datetime&nbsp;NULL&nbsp;COMMENT&nbsp; 评论时间 &nbsp;,PRIMARY&nbsp;KEY&nbsp;(`bra_id`))&nbsp;character&nbsp;set&nbsp;utf8;这里有两个地方需要注意， comment 评论字段需要设置编码格式为 utf8mb4 &nbsp;，因为可能有表情文字。还有表需要设置为 utf8 编码，不然存不了中文。 建好了表，就可以完整执行代码了。（这里的执行可能需要点时间，可以做成多线程的方式）。看一下执行完之后，数据库有没有数据。 数据是有了，但是有些我们多余的文字描述，我们可以稍微整理一下。 update&nbsp;bra&nbsp;set&nbsp;bra_color&nbsp;=&nbsp;REPLACE(bra_color, 2B6521-无钢圈4- , );update&nbsp;bra&nbsp;set&nbsp;bra_color&nbsp;=&nbsp;REPLACE(bra_color, -1 , );update&nbsp;bra&nbsp;set&nbsp;bra_color&nbsp;=&nbsp;REPLACE(bra_color, 5 , );update&nbsp;bra&nbsp;set&nbsp;bra_size&nbsp;=&nbsp;substr(bra_size,1,3);这里需要根据自己实际情况来修改。如果数据整理的差不多了，我们可以分析一下数据库的信息。 select&nbsp; A罩杯 &nbsp;as&nbsp;罩杯,&nbsp;CONCAT(ROUND(COUNT(*)/(select&nbsp;count(*)&nbsp;from&nbsp;bra)&nbsp;*&nbsp;100,&nbsp;2)&nbsp;,&nbsp;&quot;%&quot;)&nbsp;as&nbsp;比例,&nbsp;COUNT(*)&nbsp;as&nbsp;销量&nbsp;&nbsp;from&nbsp;bra&nbsp;where&nbsp;bra_size&nbsp;like&nbsp; %A union&nbsp;all&nbsp;select&nbsp; B罩杯 &nbsp;as&nbsp;罩杯,&nbsp;CONCAT(ROUND(COUNT(*)/(select&nbsp;count(*)&nbsp;from&nbsp;bra)&nbsp;*&nbsp;100,&nbsp;2)&nbsp;,&nbsp;&quot;%&quot;)&nbsp;as&nbsp;比例,&nbsp;COUNT(*)&nbsp;as&nbsp;销量&nbsp;&nbsp;from&nbsp;bra&nbsp;where&nbsp;bra_size&nbsp;like&nbsp; %B union&nbsp;all&nbsp;select&nbsp; C罩杯 &nbsp;as&nbsp;罩杯,&nbsp;CONCAT(ROUND(COUNT(*)/(select&nbsp;count(*)&nbsp;from&nbsp;bra)&nbsp;*&nbsp;100,&nbsp;2)&nbsp;,&nbsp;&quot;%&quot;)&nbsp;as&nbsp;比例,&nbsp;COUNT(*)&nbsp;as&nbsp;销量&nbsp;&nbsp;from&nbsp;bra&nbsp;where&nbsp;bra_size&nbsp;like&nbsp; %C union&nbsp;all&nbsp;select&nbsp; D罩杯 &nbsp;as&nbsp;罩杯,&nbsp;CONCAT(ROUND(COUNT(*)/(select&nbsp;count(*)&nbsp;from&nbsp;bra)&nbsp;*&nbsp;100,&nbsp;2)&nbsp;,&nbsp;&quot;%&quot;)&nbsp;as&nbsp;比例,&nbsp;COUNT(*)&nbsp;as&nbsp;销量&nbsp;&nbsp;from&nbsp;bra&nbsp;where&nbsp;bra_size&nbsp;like&nbsp; %D union&nbsp;all&nbsp;select&nbsp; E罩杯 &nbsp;as&nbsp;罩杯,&nbsp;CONCAT(ROUND(COUNT(*)/(select&nbsp;count(*)&nbsp;from&nbsp;bra)&nbsp;*&nbsp;100,&nbsp;2)&nbsp;,&nbsp;&quot;%&quot;)&nbsp;as&nbsp;比例,&nbsp;COUNT(*)&nbsp;as&nbsp;销量&nbsp;&nbsp;from&nbsp;bra&nbsp;where&nbsp;bra_size&nbsp;like&nbsp; %E union&nbsp;all&nbsp;select&nbsp; F罩杯 &nbsp;as&nbsp;罩杯,&nbsp;CONCAT(ROUND(COUNT(*)/(select&nbsp;count(*)&nbsp;from&nbsp;bra)&nbsp;*&nbsp;100,&nbsp;2)&nbsp;,&nbsp;&quot;%&quot;)&nbsp;as&nbsp;比例,&nbsp;COUNT(*)&nbsp;as&nbsp;销量&nbsp;&nbsp;from&nbsp;bra&nbsp;where&nbsp;bra_size&nbsp;like&nbsp; %F union&nbsp;all&nbsp;select&nbsp; G罩杯 &nbsp;as&nbsp;罩杯,&nbsp;CONCAT(ROUND(COUNT(*)/(select&nbsp;count(*)&nbsp;from&nbsp;bra)&nbsp;*&nbsp;100,&nbsp;2)&nbsp;,&nbsp;&quot;%&quot;)&nbsp;as&nbsp;比例,&nbsp;COUNT(*)&nbsp;as&nbsp;销量&nbsp;&nbsp;from&nbsp;bra&nbsp;where&nbsp;bra_size&nbsp;like&nbsp; %G union&nbsp;all&nbsp;select&nbsp; H罩杯 &nbsp;as&nbsp;罩杯,&nbsp;CONCAT(ROUND(COUNT(*)/(select&nbsp;count(*)&nbsp;from&nbsp;bra)&nbsp;*&nbsp;100,&nbsp;2)&nbsp;,&nbsp;&quot;%&quot;)&nbsp;as&nbsp;比例,&nbsp;COUNT(*)&nbsp;as&nbsp;销量&nbsp;&nbsp;from&nbsp;bra&nbsp;where&nbsp;bra_size&nbsp;like&nbsp; %H order&nbsp;by&nbsp;销量&nbsp;desc; 　 　 （想知道是哪6位小姐姐买的 G&nbsp;(～￣▽￣)～ ） 数据可视化数据的展示，我用了是 mycharts 模块，如果不了解的可以去学习一下http://pyecharts.org/#/zh-cn/prepare这里我就不细说了，直接贴代码看 #&nbsp;encoding:&nbsp;utf-8#&nbsp;author&nbsp;zwwfrom&nbsp;pyecharts&nbsp;import&nbsp;Piefrom&nbsp;Include.commons.common&nbsp;import&nbsp;Commonif&nbsp;__name__&nbsp;==&nbsp; __main__ :&nbsp;&nbsp;&nbsp;&nbsp;common&nbsp;=&nbsp;Common()&nbsp;&nbsp;&nbsp;&nbsp;results&nbsp;=&nbsp;common.queryData(&quot;&quot;&quot;select&nbsp;count(*)&nbsp;from&nbsp;bra&nbsp;where&nbsp;bra_size&nbsp;like&nbsp; %A &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;union&nbsp;all&nbsp;select&nbsp;count(*)&nbsp;from&nbsp;bra&nbsp;where&nbsp;bra_size&nbsp;like&nbsp; %B &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;union&nbsp;all&nbsp;select&nbsp;count(*)&nbsp;from&nbsp;bra&nbsp;where&nbsp;bra_size&nbsp;like&nbsp; %C &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;union&nbsp;all&nbsp;select&nbsp;count(*)&nbsp;from&nbsp;bra&nbsp;where&nbsp;bra_size&nbsp;like&nbsp; %D &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;union&nbsp;all&nbsp;select&nbsp;count(*)&nbsp;from&nbsp;bra&nbsp;where&nbsp;bra_size&nbsp;like&nbsp; %E &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;union&nbsp;all&nbsp;select&nbsp;count(*)&nbsp;from&nbsp;bra&nbsp;where&nbsp;bra_size&nbsp;like&nbsp; %F &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;union&nbsp;all&nbsp;select&nbsp;count(*)&nbsp;from&nbsp;bra&nbsp;where&nbsp;bra_size&nbsp;like&nbsp; %G &quot;&quot;&quot;)&nbsp;&nbsp;#&nbsp;获取每个罩杯数量&nbsp;&nbsp;&nbsp;&nbsp;attr&nbsp;=&nbsp;[&quot;A罩杯&quot;,&nbsp; G罩杯 ,&nbsp;&quot;B罩杯&quot;,&nbsp;&quot;C罩杯&quot;,&nbsp;&quot;D罩杯&quot;,&nbsp;&quot;E罩杯&quot;,&nbsp;&quot;F罩杯&quot;]&nbsp;&nbsp;&nbsp;&nbsp;v1&nbsp;=&nbsp;[results[0][0],&nbsp;results[6][0],&nbsp;results[1][0],&nbsp;results[2][0],&nbsp;results[3][0],&nbsp;results[4][0],&nbsp;results[5][0]]&nbsp;&nbsp;&nbsp;&nbsp;pie&nbsp;=&nbsp;Pie(&quot;内衣罩杯&quot;,&nbsp;width=1300,&nbsp;height=620)&nbsp;&nbsp;&nbsp;&nbsp;pie.add(&quot;&quot;,&nbsp;attr,&nbsp;v1,&nbsp;is_label_show=True)&nbsp;&nbsp;&nbsp;&nbsp;pie.render( size.html )&nbsp;&nbsp;&nbsp;&nbsp;print( success )&nbsp;&nbsp;&nbsp;&nbsp;results&nbsp;=&nbsp;common.queryData(&quot;&quot;&quot;select&nbsp;count(*)&nbsp;from&nbsp;bra&nbsp;where&nbsp;bra_color&nbsp;like&nbsp; %肤% &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;union&nbsp;all&nbsp;select&nbsp;count(*)&nbsp;from&nbsp;bra&nbsp;where&nbsp;bra_color&nbsp;like&nbsp; %灰% &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;union&nbsp;all&nbsp;select&nbsp;count(*)&nbsp;from&nbsp;bra&nbsp;where&nbsp;bra_color&nbsp;like&nbsp; %黑% &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;union&nbsp;all&nbsp;select&nbsp;count(*)&nbsp;from&nbsp;bra&nbsp;where&nbsp;bra_color&nbsp;like&nbsp; %蓝% &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;union&nbsp;all&nbsp;select&nbsp;count(*)&nbsp;from&nbsp;bra&nbsp;where&nbsp;bra_color&nbsp;like&nbsp; %粉% &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;union&nbsp;all&nbsp;select&nbsp;count(*)&nbsp;from&nbsp;bra&nbsp;where&nbsp;bra_color&nbsp;like&nbsp; %红% &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;union&nbsp;all&nbsp;select&nbsp;count(*)&nbsp;from&nbsp;bra&nbsp;where&nbsp;bra_color&nbsp;like&nbsp; %紫% &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;union&nbsp;all&nbsp;select&nbsp;count(*)&nbsp;from&nbsp;bra&nbsp;where&nbsp;bra_color&nbsp;like&nbsp; %绿% &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;union&nbsp;all&nbsp;select&nbsp;count(*)&nbsp;from&nbsp;bra&nbsp;where&nbsp;bra_color&nbsp;like&nbsp; %白% &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;union&nbsp;all&nbsp;select&nbsp;count(*)&nbsp;from&nbsp;bra&nbsp;where&nbsp;bra_color&nbsp;like&nbsp; %褐% &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;union&nbsp;all&nbsp;select&nbsp;count(*)&nbsp;from&nbsp;bra&nbsp;where&nbsp;bra_color&nbsp;like&nbsp; %黄% &nbsp;&quot;&quot;&quot;)&nbsp;&nbsp;#&nbsp;获取每个罩杯数量&nbsp;&nbsp;&nbsp;&nbsp;attr&nbsp;=&nbsp;[&quot;肤色&quot;,&nbsp; 灰色 ,&nbsp;&quot;黑色&quot;,&nbsp;&quot;蓝色&quot;,&nbsp;&quot;粉色&quot;,&nbsp;&quot;红色&quot;,&nbsp;&quot;紫色&quot;,&nbsp; 绿色 ,&nbsp;&quot;白色&quot;,&nbsp;&quot;褐色&quot;,&nbsp;&quot;黄色&quot;]&nbsp;&nbsp;&nbsp;&nbsp;v1&nbsp;=&nbsp;[results[0][0],&nbsp;results[1][0],&nbsp;results[2][0],&nbsp;results[3][0],&nbsp;results[4][0],&nbsp;results[5][0],&nbsp;results[6][0],&nbsp;results[7][0],&nbsp;results[8][0],&nbsp;results[9][0],&nbsp;results[10][0]]&nbsp;&nbsp;&nbsp;&nbsp;pieColor&nbsp;=&nbsp;Pie(&quot;内衣颜色&quot;,&nbsp;width=1300,&nbsp;height=620)&nbsp;&nbsp;&nbsp;&nbsp;pieColor.add(&quot;&quot;,&nbsp;attr,&nbsp;v1,&nbsp;is_label_show=True)&nbsp;&nbsp;&nbsp;&nbsp;pieColor.render( color.html )&nbsp;&nbsp;&nbsp;&nbsp;print( success )这一章就到这里了，该知道的你也知道了，不该知道的你也知道了。哪些人是G杯，哪些妹子是A杯，以后找对象就不用担心这块的了。 代码已放到github, 点击文末阅读原文，获取全部源码。 推荐阅读 超全！深度学习在计算机视觉领域的应用一览 都All in AI啦，应该自己学会补全 Python 代码了！ 收藏！！BAT 程序员们常用的开发工具 8200+ Star！Python学习的必备法宝，随查随用 Google Q2 利润暴增 211%，但业务营收危机依然在 喜欢就点击“在看”吧！" />
<meta property="og:description" content="原文链接： https://github.com/zwwjava/python_capture 编辑: 开发者最前线 &amp; 可可|&nbsp;作者：躲猫猫的猫， 原文链接：https://www.cnblogs.com/zhaww/p/9636383.html大家好，希望各位能怀着正直、严谨、专业的心态观看这篇文章。ヾ(๑╹◡╹)ﾉ&quot;老天真的对我不薄，让我终于有了女友，自从有了女友后， 我为了能替女朋友买上一件心怡的内衣 。接下来我们尝试用 Python 抓取天猫内衣销售数据，并分析得到中国女性普遍的罩杯数据、最受欢迎的内衣颜色是什么、评论的关键字。我们先看看分析得到的成果是怎样的？（讲的很详细，推荐跟着敲一遍） 　　 （买个内衣这么开心） 图片看不清楚的话，可以把图片单独拉到另一个窗口。这里是分析了一万条数据得出的结论，可能会有误差，但是还是希望单身的你们能找到 0.06% 那一批妹纸。下面我会详细介绍怎么抓取天猫内衣销售数据，存储、分析、展示。 研究天猫网站 抓取天猫评论数据 存储、分析数据 可视化 研究天猫网站我们随意进入一个商品的购买界面（能看到评论的那个界面），F12 开发者模式 -- Network 栏 -- 刷新下界面 -- 在如图的位置搜索 list_ 会看到一个 list_detail_rate.htm?itemId= ….如下图：【单击】这个url 能看到返回的是一个 Json 数据 ，检查一下你会发现这串 Json 就是商品的评论数据 [ rateDetail ][ rateList ] 【双击】这个url 你会得到一个新界面，如图 看一下这个信息 这里的路径 就是获取评论数据的 url了。这个 URL 有很多参数你可以分析一下每个值都是干嘛的。 itemId 对应的是商品id， sellerId &nbsp;对应的是店铺id，currentPage 是当前页。这里 sellerId &nbsp;可以填任意值，不影响数据的获取。 抓取天猫评论数据写一个抓取天猫评论数据的方法。getCommentDetail #&nbsp;获取商品评论数据def&nbsp;getCommentDetail(itemId,currentPage):&nbsp;&nbsp;&nbsp;&nbsp;url&nbsp;=&nbsp; https://rate.tmall.com/list_detail_rate.htm?itemId= &nbsp;+&nbsp;str(&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;itemId)&nbsp;+&nbsp; &amp;sellerId=2451699564&amp;order=3&amp;currentPage= &nbsp;+&nbsp;str(currentPage)&nbsp;+&nbsp; &amp;append=0callback=jsonp336 &nbsp;&nbsp;&nbsp;&nbsp;# itemId 产品id ；sellerId 店铺id 字段必须有值，但随意值就行&nbsp;&nbsp;&nbsp;&nbsp;html&nbsp;=&nbsp;common.getUrlContent(url)&nbsp;&nbsp;#&nbsp;获取网页信息&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;删掉返回的多余信息&nbsp;&nbsp;&nbsp;&nbsp;html&nbsp;=&nbsp;html.replace( jsonp128( , )&nbsp;#需要确定是不是&nbsp;jsonp128&nbsp;&nbsp;&nbsp;&nbsp;html&nbsp;=&nbsp;html.replace( ) , )&nbsp;&nbsp;&nbsp;&nbsp;html&nbsp;=&nbsp;html.replace( false , &quot;false&quot; )&nbsp;&nbsp;&nbsp;&nbsp;html&nbsp;=&nbsp;html.replace( true , &quot;true&quot; )&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;将string&nbsp;转换为字典对象&nbsp;&nbsp;&nbsp;&nbsp;tmalljson&nbsp;=&nbsp;json.loads(html)&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;tmalljson这里需要注意的是 jsonp128 这个值需要你自己看一下，你那边跟我这个应该是不同的。在上面的方法里有两个变量，itemId 和 currentPage 这两个值我们动态来控制，所以我们需要获得 一批 商品id号 和 评论的最大页数 用来遍历。写个获取商品评论最大页数的方法 getLastPage #&nbsp;获取商品评论最大页数def&nbsp;getLastPage(itemId):&nbsp;&nbsp;&nbsp;&nbsp;tmalljson&nbsp;=&nbsp;getCommentDetail(itemId,1)&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;tmalljson[ rateDetail ][ paginator ][ lastPage ]&nbsp;#最大页数那现在怎么获取 产品的id 列表呢？我们可以在天猫中搜索商品关键字 用开发者模式观察 这里观察一下这个页面的元素分布，很容易就发现了 商品的id 信息，当然你可以想办法确认一下。 现在就写个 获取商品id 的方法 getProductIdList #&nbsp;获取商品iddef&nbsp;getProductIdList():&nbsp;&nbsp;&nbsp;&nbsp;url&nbsp;=&nbsp; https://list.tmall.com/search_product.htm?q=内衣 &nbsp;#&nbsp;q参数&nbsp;是查询的关键字&nbsp;&nbsp;&nbsp;&nbsp;html&nbsp;=&nbsp;common.getUrlContent(url)&nbsp;&nbsp;#&nbsp;获取网页信息&nbsp;&nbsp;&nbsp;&nbsp;soup&nbsp;=&nbsp;BeautifulSoup(html, html.parser )&nbsp;&nbsp;&nbsp;&nbsp;idList&nbsp;=&nbsp;[]&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;用Beautiful&nbsp;Soup提取商品页面中所有的商品ID&nbsp;&nbsp;&nbsp;&nbsp;productList&nbsp;=&nbsp;soup.find_all( div ,&nbsp;{ class :&nbsp; product })&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;product&nbsp;in&nbsp;productList:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;idList.append(product[ data-id ])&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;idList现在所有的基本要求都有了，是时候把他们组合起来。在 main 方法中写剩下的组装部分 if&nbsp;__name__&nbsp;==&nbsp; __main__ :&nbsp;&nbsp;&nbsp;&nbsp;productIdList&nbsp;=&nbsp;getProductIdList()&nbsp;#获取商品id&nbsp;&nbsp;&nbsp;&nbsp;initial&nbsp;=&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;while&nbsp;initial&nbsp;&lt;&nbsp;len(productIdList)&nbsp;-&nbsp;30:&nbsp;&nbsp;#&nbsp;总共有60个商品，我只取了前30个&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;try:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;itemId&nbsp;=&nbsp;productIdList[initial]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print( ---------- ,&nbsp;itemId,&nbsp; ------------ )&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;maxPage&nbsp;=&nbsp;getLastPage(itemId)&nbsp;#获取商品评论最大页数&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;num&nbsp;=&nbsp;1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while&nbsp;num&nbsp;&lt;=&nbsp;maxPage&nbsp;and&nbsp;num&nbsp;&lt;&nbsp;20:&nbsp;#每个商品的评论我最多取20&nbsp;页，每页有20条评论，也就是每个商品最多只取&nbsp;400&nbsp;个评论&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;try:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;抓取某个商品的某页评论数据&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tmalljson&nbsp;=&nbsp;getCommentDetail(itemId,&nbsp;num)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rateList&nbsp;=&nbsp;tmalljson[ rateDetail ][ rateList ]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;commentList&nbsp;=&nbsp;[]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;n&nbsp;=&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while&nbsp;(n&nbsp;&lt;&nbsp;len(rateList)):&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;comment&nbsp;=&nbsp;[]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;商品描述&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;colorSize&nbsp;=&nbsp;rateList[n][ auctionSku ]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;m&nbsp;=&nbsp;re.split( [:;] ,&nbsp;colorSize)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rateContent&nbsp;=&nbsp;rateList[n][ rateContent ]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dtime&nbsp;=&nbsp;rateList[n][ rateDate ]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;comment.append(m[1])&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;comment.append(m[3])&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;comment.append( 天猫 )&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;comment.append(rateContent)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;comment.append(dtime)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;commentList.append(comment)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;n&nbsp;+=&nbsp;1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print(num)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sql&nbsp;=&nbsp;&quot;insert&nbsp;into&nbsp;bras(bra_id,&nbsp;bra_color,&nbsp;bra_size,&nbsp;resource,&nbsp;comment,&nbsp;comment_time)&nbsp;&nbsp;value(null,&nbsp;%s,&nbsp;%s,&nbsp;%s,&nbsp;%s,&nbsp;%s)&quot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;common.patchInsertData(sql,&nbsp;commentList)&nbsp;#&nbsp;mysql操作的批量插入&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;num&nbsp;+=&nbsp;1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;except&nbsp;Exception&nbsp;as&nbsp;e:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;num&nbsp;+=&nbsp;1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print(e)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;continue&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;initial&nbsp;+=&nbsp;1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;except&nbsp;Exception&nbsp;as&nbsp;e:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print(e)所有的代码就这样完成了，我现在把 common.py 的代码，还有 tmallbra.py 的代码都贴出来 #&nbsp;-*-&nbsp;coding:utf-8&nbsp;-*-#&nbsp;Author:&nbsp;zwwimport&nbsp;requestsimport&nbsp;timeimport&nbsp;randomimport&nbsp;socketimport&nbsp;http.clientimport&nbsp;pymysqlimport&nbsp;csv#&nbsp;封装requestsclass&nbsp;Common(object):&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;getUrlContent(self,&nbsp;url,&nbsp;data=None):&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;header&nbsp;=&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Accept :&nbsp; text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8 ,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Accept-Encoding :&nbsp; gzip,&nbsp;deflate,&nbsp;br ,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Accept-Language :&nbsp; zh-CN,zh;q=0.9,en;q=0.8 ,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; user-agent :&nbsp;&quot;User-Agent:Mozilla/5.0&nbsp;(Windows&nbsp;NT&nbsp;10.0;&nbsp;Win64;&nbsp;x64)&nbsp;AppleWebKit/537.36&nbsp;(KHTML,&nbsp;like&nbsp;Gecko)&nbsp;Chrome/62.0.3202.94&nbsp;Safari/537.36&quot;,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; cache-control :&nbsp; max-age=0 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;#&nbsp;request&nbsp;的请求头&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;timeout&nbsp;=&nbsp;random.choice(range(80,&nbsp;180))&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while&nbsp;True:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;try:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rep&nbsp;=&nbsp;requests.get(url,&nbsp;headers=header,&nbsp;timeout=timeout)&nbsp;&nbsp;#&nbsp;请求url地址，获得返回&nbsp;response&nbsp;信息&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;rep.encoding&nbsp;=&nbsp; utf-8 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;except&nbsp;socket.timeout&nbsp;as&nbsp;e:&nbsp;&nbsp;#&nbsp;以下都是异常处理&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print( 3: ,&nbsp;e)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;time.sleep(random.choice(range(8,&nbsp;15)))&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;except&nbsp;socket.error&nbsp;as&nbsp;e:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print( 4: ,&nbsp;e)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;time.sleep(random.choice(range(20,&nbsp;60)))&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;except&nbsp;http.client.BadStatusLine&nbsp;as&nbsp;e:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print( 5: ,&nbsp;e)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;time.sleep(random.choice(range(30,&nbsp;80)))&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;except&nbsp;http.client.IncompleteRead&nbsp;as&nbsp;e:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print( 6: ,&nbsp;e)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;time.sleep(random.choice(range(5,&nbsp;15)))&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print( request&nbsp;success )&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;rep.text&nbsp;&nbsp;#&nbsp;返回的&nbsp;Html&nbsp;全文&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;writeData(self,&nbsp;data,&nbsp;url):&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;with&nbsp;open(url,&nbsp; a ,&nbsp;errors= ignore ,&nbsp;newline= )&nbsp;as&nbsp;f:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;f_csv&nbsp;=&nbsp;csv.writer(f)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;f_csv.writerows(data)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print( write_csv&nbsp;success )&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;queryData(self,&nbsp;sql):&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;db&nbsp;=&nbsp;pymysql.connect(&quot;localhost&quot;,&nbsp;&quot;zww&quot;,&nbsp;&quot;960128&quot;,&nbsp;&quot;test&quot;)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cursor&nbsp;=&nbsp;db.cursor()&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;results&nbsp;=&nbsp;[]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;try:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cursor.execute(sql)&nbsp;&nbsp;&nbsp;&nbsp;#执行查询语句&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;results&nbsp;=&nbsp;cursor.fetchall()&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;except&nbsp;Exception&nbsp;as&nbsp;e:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print( 查询时发生异常 &nbsp;+&nbsp;e)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;如果发生错误则回滚&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;db.rollback()&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;关闭数据库连接&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;db.close()&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;results&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print( insert&nbsp;data&nbsp;success )&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;insertData(self,&nbsp;sql):&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;打开数据库连接&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;db&nbsp;=&nbsp;pymysql.connect(&quot;localhost&quot;,&nbsp;&quot;zww&quot;,&nbsp;&quot;000000&quot;,&nbsp;&quot;zwwdb&quot;)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;使用&nbsp;cursor()&nbsp;方法创建一个游标对象&nbsp;cursor&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cursor&nbsp;=&nbsp;db.cursor()&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;try:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;sql&nbsp;=&nbsp;&quot;INSERT&nbsp;INTO&nbsp;WEATHER(w_id,&nbsp;w_date,&nbsp;w_detail,&nbsp;w_temperature)&nbsp;VALUES&nbsp;(null,&nbsp; %s , %s , %s )&quot;&nbsp;%&nbsp;(data[0],&nbsp;data[1],&nbsp;data[2])&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cursor.execute(sql)&nbsp;&nbsp;&nbsp;&nbsp;#单条数据写入&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;提交到数据库执行&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;db.commit()&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;except&nbsp;Exception&nbsp;as&nbsp;e:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print( 插入时发生异常 &nbsp;+&nbsp;e)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;如果发生错误则回滚&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;db.rollback()&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;关闭数据库连接&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;db.close()&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print( insert&nbsp;data&nbsp;success )&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;patchInsertData(self,&nbsp;sql,&nbsp;datas):&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;打开数据库连接&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;db&nbsp;=&nbsp;pymysql.connect(&quot;localhost&quot;,&nbsp;&quot;zww&quot;,&nbsp;&quot;960128&quot;,&nbsp;&quot;test&quot;)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;使用&nbsp;cursor()&nbsp;方法创建一个游标对象&nbsp;cursor&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cursor&nbsp;=&nbsp;db.cursor()&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;try:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;批量插入数据&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;cursor.executemany( insert&nbsp;into&nbsp;WEATHER(w_id,&nbsp;w_date,&nbsp;w_detail,&nbsp;w_temperature_low,&nbsp;w_temperature_high)&nbsp;value(null,&nbsp;%s,%s,%s,%s) ,datas)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cursor.executemany(sql,&nbsp;datas)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;提交到数据库执行&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;db.commit()&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;except&nbsp;Exception&nbsp;as&nbsp;e:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print( 插入时发生异常 &nbsp;+&nbsp;e)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;如果发生错误则回滚&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;db.rollback()&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;关闭数据库连接&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;db.close()&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print( insert&nbsp;data&nbsp;success )上面需要注意，数据库的配置。 #&nbsp;-*-&nbsp;coding:utf-8&nbsp;-*-#&nbsp;Author:&nbsp;zwwfrom&nbsp;Include.commons.common&nbsp;import&nbsp;Commonfrom&nbsp;bs4&nbsp;import&nbsp;BeautifulSoupimport&nbsp;jsonimport&nbsp;reimport&nbsp;pymysqlcommon&nbsp;=&nbsp;Common()#&nbsp;获取商品iddef&nbsp;getProductIdList():&nbsp;&nbsp;&nbsp;&nbsp;url&nbsp;=&nbsp; https://list.tmall.com/search_product.htm?q=内衣 &nbsp;#&nbsp;q参数&nbsp;是查询的关键字，这要改变一下查询值，就可以抓取任意你想知道的数据&nbsp;&nbsp;&nbsp;&nbsp;html&nbsp;=&nbsp;common.getUrlContent(url)&nbsp;&nbsp;#&nbsp;获取网页信息&nbsp;&nbsp;&nbsp;&nbsp;soup&nbsp;=&nbsp;BeautifulSoup(html, html.parser )&nbsp;&nbsp;&nbsp;&nbsp;idList&nbsp;=&nbsp;[]&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;用Beautiful&nbsp;Soup提取商品页面中所有的商品ID&nbsp;&nbsp;&nbsp;&nbsp;productList&nbsp;=&nbsp;soup.find_all( div ,&nbsp;{ class :&nbsp; product })&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;product&nbsp;in&nbsp;productList:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;idList.append(product[ data-id ])&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;idList#&nbsp;获取商品评论数据def&nbsp;getCommentDetail(itemId,currentPage):&nbsp;&nbsp;&nbsp;&nbsp;url&nbsp;=&nbsp; https://rate.tmall.com/list_detail_rate.htm?itemId= &nbsp;+&nbsp;str(&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;itemId)&nbsp;+&nbsp; &amp;sellerId=2451699564&amp;order=3&amp;currentPage= &nbsp;+&nbsp;str(currentPage)&nbsp;+&nbsp; &amp;append=0callback=jsonp336 &nbsp;&nbsp;&nbsp;&nbsp;# itemId 产品id ；sellerId 店铺id 字段必须有值，但随意值就行&nbsp;&nbsp;&nbsp;&nbsp;html&nbsp;=&nbsp;common.getUrlContent(url)&nbsp;&nbsp;#&nbsp;获取网页信息&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;删掉返回的多余信息&nbsp;&nbsp;&nbsp;&nbsp;html&nbsp;=&nbsp;html.replace( jsonp128( , )&nbsp;#需要确定是不是&nbsp;jsonp128&nbsp;&nbsp;&nbsp;&nbsp;html&nbsp;=&nbsp;html.replace( ) , )&nbsp;&nbsp;&nbsp;&nbsp;html&nbsp;=&nbsp;html.replace( false , &quot;false&quot; )&nbsp;&nbsp;&nbsp;&nbsp;html&nbsp;=&nbsp;html.replace( true , &quot;true&quot; )&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;将string&nbsp;转换为字典对象&nbsp;&nbsp;&nbsp;&nbsp;tmalljson&nbsp;=&nbsp;json.loads(html)&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;tmalljson#&nbsp;获取商品评论最大页数def&nbsp;getLastPage(itemId):&nbsp;&nbsp;&nbsp;&nbsp;tmalljson&nbsp;=&nbsp;getCommentDetail(itemId,1)&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;tmalljson[ rateDetail ][ paginator ][ lastPage ]&nbsp;#最大页数if&nbsp;__name__&nbsp;==&nbsp; __main__ :&nbsp;&nbsp;&nbsp;&nbsp;productIdList&nbsp;=&nbsp;getProductIdList()&nbsp;#获取商品id&nbsp;&nbsp;&nbsp;&nbsp;initial&nbsp;=&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;while&nbsp;initial&nbsp;&lt;&nbsp;len(productIdList)&nbsp;-&nbsp;30:&nbsp;&nbsp;#&nbsp;总共有60个商品，我只取了前30个&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;try:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;itemId&nbsp;=&nbsp;productIdList[initial]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print( ---------- ,&nbsp;itemId,&nbsp; ------------ )&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;maxPage&nbsp;=&nbsp;getLastPage(itemId)&nbsp;#获取商品评论最大页数&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;num&nbsp;=&nbsp;1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while&nbsp;num&nbsp;&lt;=&nbsp;maxPage&nbsp;and&nbsp;num&nbsp;&lt;&nbsp;20:&nbsp;#每个商品的评论我最多取20&nbsp;页，每页有20条评论，也就是每个商品最多只取&nbsp;400&nbsp;个评论&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;try:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;抓取某个商品的某页评论数据&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tmalljson&nbsp;=&nbsp;getCommentDetail(itemId,&nbsp;num)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rateList&nbsp;=&nbsp;tmalljson[ rateDetail ][ rateList ]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;commentList&nbsp;=&nbsp;[]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;n&nbsp;=&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while&nbsp;(n&nbsp;&lt;&nbsp;len(rateList)):&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;comment&nbsp;=&nbsp;[]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;商品描述&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;colorSize&nbsp;=&nbsp;rateList[n][ auctionSku ]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;m&nbsp;=&nbsp;re.split( [:;] ,&nbsp;colorSize)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rateContent&nbsp;=&nbsp;rateList[n][ rateContent ]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dtime&nbsp;=&nbsp;rateList[n][ rateDate ]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;comment.append(m[1])&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;comment.append(m[3])&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;comment.append( 天猫 )&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;comment.append(rateContent)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;comment.append(dtime)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;commentList.append(comment)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;n&nbsp;+=&nbsp;1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print(num)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sql&nbsp;=&nbsp;&quot;insert&nbsp;into&nbsp;bras(bra_id,&nbsp;bra_color,&nbsp;bra_size,&nbsp;resource,&nbsp;comment,&nbsp;comment_time)&nbsp;&nbsp;value(null,&nbsp;%s,&nbsp;%s,&nbsp;%s,&nbsp;%s,&nbsp;%s)&quot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;common.patchInsertData(sql,&nbsp;commentList)&nbsp;#&nbsp;mysql操作的批量插入&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;num&nbsp;+=&nbsp;1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;except&nbsp;Exception&nbsp;as&nbsp;e:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;num&nbsp;+=&nbsp;1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print(e)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;continue&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;initial&nbsp;+=&nbsp;1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;except&nbsp;Exception&nbsp;as&nbsp;e:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print(e) 存储、分析数据所有的代码都有了，就差数据库的建立了。我这里用的是 MySql 数据库。 CREATE&nbsp;TABLE&nbsp;`bra`&nbsp;(`bra_id`&nbsp;&nbsp;int(11)&nbsp;NOT&nbsp;NULL&nbsp;AUTO_INCREMENT&nbsp;COMMENT&nbsp; id &nbsp;,`bra_color`&nbsp;&nbsp;varchar(25)&nbsp;NULL&nbsp;COMMENT&nbsp; 颜色 &nbsp;,`bra_size`&nbsp;&nbsp;varchar(25)&nbsp;NULL&nbsp;COMMENT&nbsp; 罩杯 &nbsp;,`resource`&nbsp;&nbsp;varchar(25)&nbsp;NULL&nbsp;COMMENT&nbsp; 数据来源 &nbsp;,`comment`&nbsp;&nbsp;varchar(500)&nbsp;CHARACTER&nbsp;SET&nbsp;utf8mb4&nbsp;DEFAULT&nbsp;NULL&nbsp;COMMENT&nbsp; 评论 &nbsp;,`comment_time`&nbsp;&nbsp;datetime&nbsp;NULL&nbsp;COMMENT&nbsp; 评论时间 &nbsp;,PRIMARY&nbsp;KEY&nbsp;(`bra_id`))&nbsp;character&nbsp;set&nbsp;utf8;这里有两个地方需要注意， comment 评论字段需要设置编码格式为 utf8mb4 &nbsp;，因为可能有表情文字。还有表需要设置为 utf8 编码，不然存不了中文。 建好了表，就可以完整执行代码了。（这里的执行可能需要点时间，可以做成多线程的方式）。看一下执行完之后，数据库有没有数据。 数据是有了，但是有些我们多余的文字描述，我们可以稍微整理一下。 update&nbsp;bra&nbsp;set&nbsp;bra_color&nbsp;=&nbsp;REPLACE(bra_color, 2B6521-无钢圈4- , );update&nbsp;bra&nbsp;set&nbsp;bra_color&nbsp;=&nbsp;REPLACE(bra_color, -1 , );update&nbsp;bra&nbsp;set&nbsp;bra_color&nbsp;=&nbsp;REPLACE(bra_color, 5 , );update&nbsp;bra&nbsp;set&nbsp;bra_size&nbsp;=&nbsp;substr(bra_size,1,3);这里需要根据自己实际情况来修改。如果数据整理的差不多了，我们可以分析一下数据库的信息。 select&nbsp; A罩杯 &nbsp;as&nbsp;罩杯,&nbsp;CONCAT(ROUND(COUNT(*)/(select&nbsp;count(*)&nbsp;from&nbsp;bra)&nbsp;*&nbsp;100,&nbsp;2)&nbsp;,&nbsp;&quot;%&quot;)&nbsp;as&nbsp;比例,&nbsp;COUNT(*)&nbsp;as&nbsp;销量&nbsp;&nbsp;from&nbsp;bra&nbsp;where&nbsp;bra_size&nbsp;like&nbsp; %A union&nbsp;all&nbsp;select&nbsp; B罩杯 &nbsp;as&nbsp;罩杯,&nbsp;CONCAT(ROUND(COUNT(*)/(select&nbsp;count(*)&nbsp;from&nbsp;bra)&nbsp;*&nbsp;100,&nbsp;2)&nbsp;,&nbsp;&quot;%&quot;)&nbsp;as&nbsp;比例,&nbsp;COUNT(*)&nbsp;as&nbsp;销量&nbsp;&nbsp;from&nbsp;bra&nbsp;where&nbsp;bra_size&nbsp;like&nbsp; %B union&nbsp;all&nbsp;select&nbsp; C罩杯 &nbsp;as&nbsp;罩杯,&nbsp;CONCAT(ROUND(COUNT(*)/(select&nbsp;count(*)&nbsp;from&nbsp;bra)&nbsp;*&nbsp;100,&nbsp;2)&nbsp;,&nbsp;&quot;%&quot;)&nbsp;as&nbsp;比例,&nbsp;COUNT(*)&nbsp;as&nbsp;销量&nbsp;&nbsp;from&nbsp;bra&nbsp;where&nbsp;bra_size&nbsp;like&nbsp; %C union&nbsp;all&nbsp;select&nbsp; D罩杯 &nbsp;as&nbsp;罩杯,&nbsp;CONCAT(ROUND(COUNT(*)/(select&nbsp;count(*)&nbsp;from&nbsp;bra)&nbsp;*&nbsp;100,&nbsp;2)&nbsp;,&nbsp;&quot;%&quot;)&nbsp;as&nbsp;比例,&nbsp;COUNT(*)&nbsp;as&nbsp;销量&nbsp;&nbsp;from&nbsp;bra&nbsp;where&nbsp;bra_size&nbsp;like&nbsp; %D union&nbsp;all&nbsp;select&nbsp; E罩杯 &nbsp;as&nbsp;罩杯,&nbsp;CONCAT(ROUND(COUNT(*)/(select&nbsp;count(*)&nbsp;from&nbsp;bra)&nbsp;*&nbsp;100,&nbsp;2)&nbsp;,&nbsp;&quot;%&quot;)&nbsp;as&nbsp;比例,&nbsp;COUNT(*)&nbsp;as&nbsp;销量&nbsp;&nbsp;from&nbsp;bra&nbsp;where&nbsp;bra_size&nbsp;like&nbsp; %E union&nbsp;all&nbsp;select&nbsp; F罩杯 &nbsp;as&nbsp;罩杯,&nbsp;CONCAT(ROUND(COUNT(*)/(select&nbsp;count(*)&nbsp;from&nbsp;bra)&nbsp;*&nbsp;100,&nbsp;2)&nbsp;,&nbsp;&quot;%&quot;)&nbsp;as&nbsp;比例,&nbsp;COUNT(*)&nbsp;as&nbsp;销量&nbsp;&nbsp;from&nbsp;bra&nbsp;where&nbsp;bra_size&nbsp;like&nbsp; %F union&nbsp;all&nbsp;select&nbsp; G罩杯 &nbsp;as&nbsp;罩杯,&nbsp;CONCAT(ROUND(COUNT(*)/(select&nbsp;count(*)&nbsp;from&nbsp;bra)&nbsp;*&nbsp;100,&nbsp;2)&nbsp;,&nbsp;&quot;%&quot;)&nbsp;as&nbsp;比例,&nbsp;COUNT(*)&nbsp;as&nbsp;销量&nbsp;&nbsp;from&nbsp;bra&nbsp;where&nbsp;bra_size&nbsp;like&nbsp; %G union&nbsp;all&nbsp;select&nbsp; H罩杯 &nbsp;as&nbsp;罩杯,&nbsp;CONCAT(ROUND(COUNT(*)/(select&nbsp;count(*)&nbsp;from&nbsp;bra)&nbsp;*&nbsp;100,&nbsp;2)&nbsp;,&nbsp;&quot;%&quot;)&nbsp;as&nbsp;比例,&nbsp;COUNT(*)&nbsp;as&nbsp;销量&nbsp;&nbsp;from&nbsp;bra&nbsp;where&nbsp;bra_size&nbsp;like&nbsp; %H order&nbsp;by&nbsp;销量&nbsp;desc; 　 　 （想知道是哪6位小姐姐买的 G&nbsp;(～￣▽￣)～ ） 数据可视化数据的展示，我用了是 mycharts 模块，如果不了解的可以去学习一下http://pyecharts.org/#/zh-cn/prepare这里我就不细说了，直接贴代码看 #&nbsp;encoding:&nbsp;utf-8#&nbsp;author&nbsp;zwwfrom&nbsp;pyecharts&nbsp;import&nbsp;Piefrom&nbsp;Include.commons.common&nbsp;import&nbsp;Commonif&nbsp;__name__&nbsp;==&nbsp; __main__ :&nbsp;&nbsp;&nbsp;&nbsp;common&nbsp;=&nbsp;Common()&nbsp;&nbsp;&nbsp;&nbsp;results&nbsp;=&nbsp;common.queryData(&quot;&quot;&quot;select&nbsp;count(*)&nbsp;from&nbsp;bra&nbsp;where&nbsp;bra_size&nbsp;like&nbsp; %A &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;union&nbsp;all&nbsp;select&nbsp;count(*)&nbsp;from&nbsp;bra&nbsp;where&nbsp;bra_size&nbsp;like&nbsp; %B &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;union&nbsp;all&nbsp;select&nbsp;count(*)&nbsp;from&nbsp;bra&nbsp;where&nbsp;bra_size&nbsp;like&nbsp; %C &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;union&nbsp;all&nbsp;select&nbsp;count(*)&nbsp;from&nbsp;bra&nbsp;where&nbsp;bra_size&nbsp;like&nbsp; %D &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;union&nbsp;all&nbsp;select&nbsp;count(*)&nbsp;from&nbsp;bra&nbsp;where&nbsp;bra_size&nbsp;like&nbsp; %E &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;union&nbsp;all&nbsp;select&nbsp;count(*)&nbsp;from&nbsp;bra&nbsp;where&nbsp;bra_size&nbsp;like&nbsp; %F &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;union&nbsp;all&nbsp;select&nbsp;count(*)&nbsp;from&nbsp;bra&nbsp;where&nbsp;bra_size&nbsp;like&nbsp; %G &quot;&quot;&quot;)&nbsp;&nbsp;#&nbsp;获取每个罩杯数量&nbsp;&nbsp;&nbsp;&nbsp;attr&nbsp;=&nbsp;[&quot;A罩杯&quot;,&nbsp; G罩杯 ,&nbsp;&quot;B罩杯&quot;,&nbsp;&quot;C罩杯&quot;,&nbsp;&quot;D罩杯&quot;,&nbsp;&quot;E罩杯&quot;,&nbsp;&quot;F罩杯&quot;]&nbsp;&nbsp;&nbsp;&nbsp;v1&nbsp;=&nbsp;[results[0][0],&nbsp;results[6][0],&nbsp;results[1][0],&nbsp;results[2][0],&nbsp;results[3][0],&nbsp;results[4][0],&nbsp;results[5][0]]&nbsp;&nbsp;&nbsp;&nbsp;pie&nbsp;=&nbsp;Pie(&quot;内衣罩杯&quot;,&nbsp;width=1300,&nbsp;height=620)&nbsp;&nbsp;&nbsp;&nbsp;pie.add(&quot;&quot;,&nbsp;attr,&nbsp;v1,&nbsp;is_label_show=True)&nbsp;&nbsp;&nbsp;&nbsp;pie.render( size.html )&nbsp;&nbsp;&nbsp;&nbsp;print( success )&nbsp;&nbsp;&nbsp;&nbsp;results&nbsp;=&nbsp;common.queryData(&quot;&quot;&quot;select&nbsp;count(*)&nbsp;from&nbsp;bra&nbsp;where&nbsp;bra_color&nbsp;like&nbsp; %肤% &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;union&nbsp;all&nbsp;select&nbsp;count(*)&nbsp;from&nbsp;bra&nbsp;where&nbsp;bra_color&nbsp;like&nbsp; %灰% &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;union&nbsp;all&nbsp;select&nbsp;count(*)&nbsp;from&nbsp;bra&nbsp;where&nbsp;bra_color&nbsp;like&nbsp; %黑% &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;union&nbsp;all&nbsp;select&nbsp;count(*)&nbsp;from&nbsp;bra&nbsp;where&nbsp;bra_color&nbsp;like&nbsp; %蓝% &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;union&nbsp;all&nbsp;select&nbsp;count(*)&nbsp;from&nbsp;bra&nbsp;where&nbsp;bra_color&nbsp;like&nbsp; %粉% &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;union&nbsp;all&nbsp;select&nbsp;count(*)&nbsp;from&nbsp;bra&nbsp;where&nbsp;bra_color&nbsp;like&nbsp; %红% &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;union&nbsp;all&nbsp;select&nbsp;count(*)&nbsp;from&nbsp;bra&nbsp;where&nbsp;bra_color&nbsp;like&nbsp; %紫% &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;union&nbsp;all&nbsp;select&nbsp;count(*)&nbsp;from&nbsp;bra&nbsp;where&nbsp;bra_color&nbsp;like&nbsp; %绿% &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;union&nbsp;all&nbsp;select&nbsp;count(*)&nbsp;from&nbsp;bra&nbsp;where&nbsp;bra_color&nbsp;like&nbsp; %白% &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;union&nbsp;all&nbsp;select&nbsp;count(*)&nbsp;from&nbsp;bra&nbsp;where&nbsp;bra_color&nbsp;like&nbsp; %褐% &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;union&nbsp;all&nbsp;select&nbsp;count(*)&nbsp;from&nbsp;bra&nbsp;where&nbsp;bra_color&nbsp;like&nbsp; %黄% &nbsp;&quot;&quot;&quot;)&nbsp;&nbsp;#&nbsp;获取每个罩杯数量&nbsp;&nbsp;&nbsp;&nbsp;attr&nbsp;=&nbsp;[&quot;肤色&quot;,&nbsp; 灰色 ,&nbsp;&quot;黑色&quot;,&nbsp;&quot;蓝色&quot;,&nbsp;&quot;粉色&quot;,&nbsp;&quot;红色&quot;,&nbsp;&quot;紫色&quot;,&nbsp; 绿色 ,&nbsp;&quot;白色&quot;,&nbsp;&quot;褐色&quot;,&nbsp;&quot;黄色&quot;]&nbsp;&nbsp;&nbsp;&nbsp;v1&nbsp;=&nbsp;[results[0][0],&nbsp;results[1][0],&nbsp;results[2][0],&nbsp;results[3][0],&nbsp;results[4][0],&nbsp;results[5][0],&nbsp;results[6][0],&nbsp;results[7][0],&nbsp;results[8][0],&nbsp;results[9][0],&nbsp;results[10][0]]&nbsp;&nbsp;&nbsp;&nbsp;pieColor&nbsp;=&nbsp;Pie(&quot;内衣颜色&quot;,&nbsp;width=1300,&nbsp;height=620)&nbsp;&nbsp;&nbsp;&nbsp;pieColor.add(&quot;&quot;,&nbsp;attr,&nbsp;v1,&nbsp;is_label_show=True)&nbsp;&nbsp;&nbsp;&nbsp;pieColor.render( color.html )&nbsp;&nbsp;&nbsp;&nbsp;print( success )这一章就到这里了，该知道的你也知道了，不该知道的你也知道了。哪些人是G杯，哪些妹子是A杯，以后找对象就不用担心这块的了。 代码已放到github, 点击文末阅读原文，获取全部源码。 推荐阅读 超全！深度学习在计算机视觉领域的应用一览 都All in AI啦，应该自己学会补全 Python 代码了！ 收藏！！BAT 程序员们常用的开发工具 8200+ Star！Python学习的必备法宝，随查随用 Google Q2 利润暴增 211%，但业务营收危机依然在 喜欢就点击“在看”吧！" />
<link rel="canonical" href="https://uzzz.org/2019/07/31/792798.html" />
<meta property="og:url" content="https://uzzz.org/2019/07/31/792798.html" />
<meta property="og:site_name" content="有组织在！" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2019-07-31T00:00:00+08:00" />
<script type="application/ld+json">
{"description":"原文链接： https://github.com/zwwjava/python_capture 编辑: 开发者最前线 &amp; 可可|&nbsp;作者：躲猫猫的猫， 原文链接：https://www.cnblogs.com/zhaww/p/9636383.html大家好，希望各位能怀着正直、严谨、专业的心态观看这篇文章。ヾ(๑╹◡╹)ﾉ&quot;老天真的对我不薄，让我终于有了女友，自从有了女友后， 我为了能替女朋友买上一件心怡的内衣 。接下来我们尝试用 Python 抓取天猫内衣销售数据，并分析得到中国女性普遍的罩杯数据、最受欢迎的内衣颜色是什么、评论的关键字。我们先看看分析得到的成果是怎样的？（讲的很详细，推荐跟着敲一遍） 　　 （买个内衣这么开心） 图片看不清楚的话，可以把图片单独拉到另一个窗口。这里是分析了一万条数据得出的结论，可能会有误差，但是还是希望单身的你们能找到 0.06% 那一批妹纸。下面我会详细介绍怎么抓取天猫内衣销售数据，存储、分析、展示。 研究天猫网站 抓取天猫评论数据 存储、分析数据 可视化 研究天猫网站我们随意进入一个商品的购买界面（能看到评论的那个界面），F12 开发者模式 -- Network 栏 -- 刷新下界面 -- 在如图的位置搜索 list_ 会看到一个 list_detail_rate.htm?itemId= ….如下图：【单击】这个url 能看到返回的是一个 Json 数据 ，检查一下你会发现这串 Json 就是商品的评论数据 [ rateDetail ][ rateList ] 【双击】这个url 你会得到一个新界面，如图 看一下这个信息 这里的路径 就是获取评论数据的 url了。这个 URL 有很多参数你可以分析一下每个值都是干嘛的。 itemId 对应的是商品id， sellerId &nbsp;对应的是店铺id，currentPage 是当前页。这里 sellerId &nbsp;可以填任意值，不影响数据的获取。 抓取天猫评论数据写一个抓取天猫评论数据的方法。getCommentDetail #&nbsp;获取商品评论数据def&nbsp;getCommentDetail(itemId,currentPage):&nbsp;&nbsp;&nbsp;&nbsp;url&nbsp;=&nbsp; https://rate.tmall.com/list_detail_rate.htm?itemId= &nbsp;+&nbsp;str(&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;itemId)&nbsp;+&nbsp; &amp;sellerId=2451699564&amp;order=3&amp;currentPage= &nbsp;+&nbsp;str(currentPage)&nbsp;+&nbsp; &amp;append=0callback=jsonp336 &nbsp;&nbsp;&nbsp;&nbsp;# itemId 产品id ；sellerId 店铺id 字段必须有值，但随意值就行&nbsp;&nbsp;&nbsp;&nbsp;html&nbsp;=&nbsp;common.getUrlContent(url)&nbsp;&nbsp;#&nbsp;获取网页信息&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;删掉返回的多余信息&nbsp;&nbsp;&nbsp;&nbsp;html&nbsp;=&nbsp;html.replace( jsonp128( , )&nbsp;#需要确定是不是&nbsp;jsonp128&nbsp;&nbsp;&nbsp;&nbsp;html&nbsp;=&nbsp;html.replace( ) , )&nbsp;&nbsp;&nbsp;&nbsp;html&nbsp;=&nbsp;html.replace( false , &quot;false&quot; )&nbsp;&nbsp;&nbsp;&nbsp;html&nbsp;=&nbsp;html.replace( true , &quot;true&quot; )&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;将string&nbsp;转换为字典对象&nbsp;&nbsp;&nbsp;&nbsp;tmalljson&nbsp;=&nbsp;json.loads(html)&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;tmalljson这里需要注意的是 jsonp128 这个值需要你自己看一下，你那边跟我这个应该是不同的。在上面的方法里有两个变量，itemId 和 currentPage 这两个值我们动态来控制，所以我们需要获得 一批 商品id号 和 评论的最大页数 用来遍历。写个获取商品评论最大页数的方法 getLastPage #&nbsp;获取商品评论最大页数def&nbsp;getLastPage(itemId):&nbsp;&nbsp;&nbsp;&nbsp;tmalljson&nbsp;=&nbsp;getCommentDetail(itemId,1)&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;tmalljson[ rateDetail ][ paginator ][ lastPage ]&nbsp;#最大页数那现在怎么获取 产品的id 列表呢？我们可以在天猫中搜索商品关键字 用开发者模式观察 这里观察一下这个页面的元素分布，很容易就发现了 商品的id 信息，当然你可以想办法确认一下。 现在就写个 获取商品id 的方法 getProductIdList #&nbsp;获取商品iddef&nbsp;getProductIdList():&nbsp;&nbsp;&nbsp;&nbsp;url&nbsp;=&nbsp; https://list.tmall.com/search_product.htm?q=内衣 &nbsp;#&nbsp;q参数&nbsp;是查询的关键字&nbsp;&nbsp;&nbsp;&nbsp;html&nbsp;=&nbsp;common.getUrlContent(url)&nbsp;&nbsp;#&nbsp;获取网页信息&nbsp;&nbsp;&nbsp;&nbsp;soup&nbsp;=&nbsp;BeautifulSoup(html, html.parser )&nbsp;&nbsp;&nbsp;&nbsp;idList&nbsp;=&nbsp;[]&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;用Beautiful&nbsp;Soup提取商品页面中所有的商品ID&nbsp;&nbsp;&nbsp;&nbsp;productList&nbsp;=&nbsp;soup.find_all( div ,&nbsp;{ class :&nbsp; product })&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;product&nbsp;in&nbsp;productList:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;idList.append(product[ data-id ])&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;idList现在所有的基本要求都有了，是时候把他们组合起来。在 main 方法中写剩下的组装部分 if&nbsp;__name__&nbsp;==&nbsp; __main__ :&nbsp;&nbsp;&nbsp;&nbsp;productIdList&nbsp;=&nbsp;getProductIdList()&nbsp;#获取商品id&nbsp;&nbsp;&nbsp;&nbsp;initial&nbsp;=&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;while&nbsp;initial&nbsp;&lt;&nbsp;len(productIdList)&nbsp;-&nbsp;30:&nbsp;&nbsp;#&nbsp;总共有60个商品，我只取了前30个&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;try:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;itemId&nbsp;=&nbsp;productIdList[initial]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print( ---------- ,&nbsp;itemId,&nbsp; ------------ )&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;maxPage&nbsp;=&nbsp;getLastPage(itemId)&nbsp;#获取商品评论最大页数&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;num&nbsp;=&nbsp;1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while&nbsp;num&nbsp;&lt;=&nbsp;maxPage&nbsp;and&nbsp;num&nbsp;&lt;&nbsp;20:&nbsp;#每个商品的评论我最多取20&nbsp;页，每页有20条评论，也就是每个商品最多只取&nbsp;400&nbsp;个评论&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;try:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;抓取某个商品的某页评论数据&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tmalljson&nbsp;=&nbsp;getCommentDetail(itemId,&nbsp;num)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rateList&nbsp;=&nbsp;tmalljson[ rateDetail ][ rateList ]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;commentList&nbsp;=&nbsp;[]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;n&nbsp;=&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while&nbsp;(n&nbsp;&lt;&nbsp;len(rateList)):&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;comment&nbsp;=&nbsp;[]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;商品描述&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;colorSize&nbsp;=&nbsp;rateList[n][ auctionSku ]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;m&nbsp;=&nbsp;re.split( [:;] ,&nbsp;colorSize)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rateContent&nbsp;=&nbsp;rateList[n][ rateContent ]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dtime&nbsp;=&nbsp;rateList[n][ rateDate ]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;comment.append(m[1])&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;comment.append(m[3])&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;comment.append( 天猫 )&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;comment.append(rateContent)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;comment.append(dtime)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;commentList.append(comment)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;n&nbsp;+=&nbsp;1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print(num)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sql&nbsp;=&nbsp;&quot;insert&nbsp;into&nbsp;bras(bra_id,&nbsp;bra_color,&nbsp;bra_size,&nbsp;resource,&nbsp;comment,&nbsp;comment_time)&nbsp;&nbsp;value(null,&nbsp;%s,&nbsp;%s,&nbsp;%s,&nbsp;%s,&nbsp;%s)&quot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;common.patchInsertData(sql,&nbsp;commentList)&nbsp;#&nbsp;mysql操作的批量插入&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;num&nbsp;+=&nbsp;1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;except&nbsp;Exception&nbsp;as&nbsp;e:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;num&nbsp;+=&nbsp;1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print(e)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;continue&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;initial&nbsp;+=&nbsp;1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;except&nbsp;Exception&nbsp;as&nbsp;e:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print(e)所有的代码就这样完成了，我现在把 common.py 的代码，还有 tmallbra.py 的代码都贴出来 #&nbsp;-*-&nbsp;coding:utf-8&nbsp;-*-#&nbsp;Author:&nbsp;zwwimport&nbsp;requestsimport&nbsp;timeimport&nbsp;randomimport&nbsp;socketimport&nbsp;http.clientimport&nbsp;pymysqlimport&nbsp;csv#&nbsp;封装requestsclass&nbsp;Common(object):&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;getUrlContent(self,&nbsp;url,&nbsp;data=None):&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;header&nbsp;=&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Accept :&nbsp; text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8 ,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Accept-Encoding :&nbsp; gzip,&nbsp;deflate,&nbsp;br ,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Accept-Language :&nbsp; zh-CN,zh;q=0.9,en;q=0.8 ,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; user-agent :&nbsp;&quot;User-Agent:Mozilla/5.0&nbsp;(Windows&nbsp;NT&nbsp;10.0;&nbsp;Win64;&nbsp;x64)&nbsp;AppleWebKit/537.36&nbsp;(KHTML,&nbsp;like&nbsp;Gecko)&nbsp;Chrome/62.0.3202.94&nbsp;Safari/537.36&quot;,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; cache-control :&nbsp; max-age=0 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;#&nbsp;request&nbsp;的请求头&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;timeout&nbsp;=&nbsp;random.choice(range(80,&nbsp;180))&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while&nbsp;True:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;try:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rep&nbsp;=&nbsp;requests.get(url,&nbsp;headers=header,&nbsp;timeout=timeout)&nbsp;&nbsp;#&nbsp;请求url地址，获得返回&nbsp;response&nbsp;信息&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;rep.encoding&nbsp;=&nbsp; utf-8 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;except&nbsp;socket.timeout&nbsp;as&nbsp;e:&nbsp;&nbsp;#&nbsp;以下都是异常处理&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print( 3: ,&nbsp;e)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;time.sleep(random.choice(range(8,&nbsp;15)))&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;except&nbsp;socket.error&nbsp;as&nbsp;e:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print( 4: ,&nbsp;e)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;time.sleep(random.choice(range(20,&nbsp;60)))&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;except&nbsp;http.client.BadStatusLine&nbsp;as&nbsp;e:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print( 5: ,&nbsp;e)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;time.sleep(random.choice(range(30,&nbsp;80)))&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;except&nbsp;http.client.IncompleteRead&nbsp;as&nbsp;e:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print( 6: ,&nbsp;e)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;time.sleep(random.choice(range(5,&nbsp;15)))&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print( request&nbsp;success )&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;rep.text&nbsp;&nbsp;#&nbsp;返回的&nbsp;Html&nbsp;全文&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;writeData(self,&nbsp;data,&nbsp;url):&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;with&nbsp;open(url,&nbsp; a ,&nbsp;errors= ignore ,&nbsp;newline= )&nbsp;as&nbsp;f:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;f_csv&nbsp;=&nbsp;csv.writer(f)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;f_csv.writerows(data)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print( write_csv&nbsp;success )&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;queryData(self,&nbsp;sql):&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;db&nbsp;=&nbsp;pymysql.connect(&quot;localhost&quot;,&nbsp;&quot;zww&quot;,&nbsp;&quot;960128&quot;,&nbsp;&quot;test&quot;)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cursor&nbsp;=&nbsp;db.cursor()&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;results&nbsp;=&nbsp;[]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;try:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cursor.execute(sql)&nbsp;&nbsp;&nbsp;&nbsp;#执行查询语句&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;results&nbsp;=&nbsp;cursor.fetchall()&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;except&nbsp;Exception&nbsp;as&nbsp;e:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print( 查询时发生异常 &nbsp;+&nbsp;e)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;如果发生错误则回滚&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;db.rollback()&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;关闭数据库连接&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;db.close()&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;results&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print( insert&nbsp;data&nbsp;success )&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;insertData(self,&nbsp;sql):&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;打开数据库连接&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;db&nbsp;=&nbsp;pymysql.connect(&quot;localhost&quot;,&nbsp;&quot;zww&quot;,&nbsp;&quot;000000&quot;,&nbsp;&quot;zwwdb&quot;)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;使用&nbsp;cursor()&nbsp;方法创建一个游标对象&nbsp;cursor&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cursor&nbsp;=&nbsp;db.cursor()&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;try:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;sql&nbsp;=&nbsp;&quot;INSERT&nbsp;INTO&nbsp;WEATHER(w_id,&nbsp;w_date,&nbsp;w_detail,&nbsp;w_temperature)&nbsp;VALUES&nbsp;(null,&nbsp; %s , %s , %s )&quot;&nbsp;%&nbsp;(data[0],&nbsp;data[1],&nbsp;data[2])&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cursor.execute(sql)&nbsp;&nbsp;&nbsp;&nbsp;#单条数据写入&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;提交到数据库执行&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;db.commit()&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;except&nbsp;Exception&nbsp;as&nbsp;e:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print( 插入时发生异常 &nbsp;+&nbsp;e)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;如果发生错误则回滚&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;db.rollback()&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;关闭数据库连接&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;db.close()&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print( insert&nbsp;data&nbsp;success )&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;patchInsertData(self,&nbsp;sql,&nbsp;datas):&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;打开数据库连接&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;db&nbsp;=&nbsp;pymysql.connect(&quot;localhost&quot;,&nbsp;&quot;zww&quot;,&nbsp;&quot;960128&quot;,&nbsp;&quot;test&quot;)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;使用&nbsp;cursor()&nbsp;方法创建一个游标对象&nbsp;cursor&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cursor&nbsp;=&nbsp;db.cursor()&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;try:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;批量插入数据&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;cursor.executemany( insert&nbsp;into&nbsp;WEATHER(w_id,&nbsp;w_date,&nbsp;w_detail,&nbsp;w_temperature_low,&nbsp;w_temperature_high)&nbsp;value(null,&nbsp;%s,%s,%s,%s) ,datas)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cursor.executemany(sql,&nbsp;datas)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;提交到数据库执行&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;db.commit()&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;except&nbsp;Exception&nbsp;as&nbsp;e:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print( 插入时发生异常 &nbsp;+&nbsp;e)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;如果发生错误则回滚&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;db.rollback()&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;关闭数据库连接&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;db.close()&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print( insert&nbsp;data&nbsp;success )上面需要注意，数据库的配置。 #&nbsp;-*-&nbsp;coding:utf-8&nbsp;-*-#&nbsp;Author:&nbsp;zwwfrom&nbsp;Include.commons.common&nbsp;import&nbsp;Commonfrom&nbsp;bs4&nbsp;import&nbsp;BeautifulSoupimport&nbsp;jsonimport&nbsp;reimport&nbsp;pymysqlcommon&nbsp;=&nbsp;Common()#&nbsp;获取商品iddef&nbsp;getProductIdList():&nbsp;&nbsp;&nbsp;&nbsp;url&nbsp;=&nbsp; https://list.tmall.com/search_product.htm?q=内衣 &nbsp;#&nbsp;q参数&nbsp;是查询的关键字，这要改变一下查询值，就可以抓取任意你想知道的数据&nbsp;&nbsp;&nbsp;&nbsp;html&nbsp;=&nbsp;common.getUrlContent(url)&nbsp;&nbsp;#&nbsp;获取网页信息&nbsp;&nbsp;&nbsp;&nbsp;soup&nbsp;=&nbsp;BeautifulSoup(html, html.parser )&nbsp;&nbsp;&nbsp;&nbsp;idList&nbsp;=&nbsp;[]&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;用Beautiful&nbsp;Soup提取商品页面中所有的商品ID&nbsp;&nbsp;&nbsp;&nbsp;productList&nbsp;=&nbsp;soup.find_all( div ,&nbsp;{ class :&nbsp; product })&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;product&nbsp;in&nbsp;productList:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;idList.append(product[ data-id ])&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;idList#&nbsp;获取商品评论数据def&nbsp;getCommentDetail(itemId,currentPage):&nbsp;&nbsp;&nbsp;&nbsp;url&nbsp;=&nbsp; https://rate.tmall.com/list_detail_rate.htm?itemId= &nbsp;+&nbsp;str(&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;itemId)&nbsp;+&nbsp; &amp;sellerId=2451699564&amp;order=3&amp;currentPage= &nbsp;+&nbsp;str(currentPage)&nbsp;+&nbsp; &amp;append=0callback=jsonp336 &nbsp;&nbsp;&nbsp;&nbsp;# itemId 产品id ；sellerId 店铺id 字段必须有值，但随意值就行&nbsp;&nbsp;&nbsp;&nbsp;html&nbsp;=&nbsp;common.getUrlContent(url)&nbsp;&nbsp;#&nbsp;获取网页信息&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;删掉返回的多余信息&nbsp;&nbsp;&nbsp;&nbsp;html&nbsp;=&nbsp;html.replace( jsonp128( , )&nbsp;#需要确定是不是&nbsp;jsonp128&nbsp;&nbsp;&nbsp;&nbsp;html&nbsp;=&nbsp;html.replace( ) , )&nbsp;&nbsp;&nbsp;&nbsp;html&nbsp;=&nbsp;html.replace( false , &quot;false&quot; )&nbsp;&nbsp;&nbsp;&nbsp;html&nbsp;=&nbsp;html.replace( true , &quot;true&quot; )&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;将string&nbsp;转换为字典对象&nbsp;&nbsp;&nbsp;&nbsp;tmalljson&nbsp;=&nbsp;json.loads(html)&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;tmalljson#&nbsp;获取商品评论最大页数def&nbsp;getLastPage(itemId):&nbsp;&nbsp;&nbsp;&nbsp;tmalljson&nbsp;=&nbsp;getCommentDetail(itemId,1)&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;tmalljson[ rateDetail ][ paginator ][ lastPage ]&nbsp;#最大页数if&nbsp;__name__&nbsp;==&nbsp; __main__ :&nbsp;&nbsp;&nbsp;&nbsp;productIdList&nbsp;=&nbsp;getProductIdList()&nbsp;#获取商品id&nbsp;&nbsp;&nbsp;&nbsp;initial&nbsp;=&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;while&nbsp;initial&nbsp;&lt;&nbsp;len(productIdList)&nbsp;-&nbsp;30:&nbsp;&nbsp;#&nbsp;总共有60个商品，我只取了前30个&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;try:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;itemId&nbsp;=&nbsp;productIdList[initial]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print( ---------- ,&nbsp;itemId,&nbsp; ------------ )&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;maxPage&nbsp;=&nbsp;getLastPage(itemId)&nbsp;#获取商品评论最大页数&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;num&nbsp;=&nbsp;1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while&nbsp;num&nbsp;&lt;=&nbsp;maxPage&nbsp;and&nbsp;num&nbsp;&lt;&nbsp;20:&nbsp;#每个商品的评论我最多取20&nbsp;页，每页有20条评论，也就是每个商品最多只取&nbsp;400&nbsp;个评论&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;try:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;抓取某个商品的某页评论数据&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tmalljson&nbsp;=&nbsp;getCommentDetail(itemId,&nbsp;num)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rateList&nbsp;=&nbsp;tmalljson[ rateDetail ][ rateList ]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;commentList&nbsp;=&nbsp;[]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;n&nbsp;=&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while&nbsp;(n&nbsp;&lt;&nbsp;len(rateList)):&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;comment&nbsp;=&nbsp;[]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;商品描述&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;colorSize&nbsp;=&nbsp;rateList[n][ auctionSku ]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;m&nbsp;=&nbsp;re.split( [:;] ,&nbsp;colorSize)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rateContent&nbsp;=&nbsp;rateList[n][ rateContent ]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dtime&nbsp;=&nbsp;rateList[n][ rateDate ]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;comment.append(m[1])&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;comment.append(m[3])&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;comment.append( 天猫 )&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;comment.append(rateContent)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;comment.append(dtime)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;commentList.append(comment)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;n&nbsp;+=&nbsp;1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print(num)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sql&nbsp;=&nbsp;&quot;insert&nbsp;into&nbsp;bras(bra_id,&nbsp;bra_color,&nbsp;bra_size,&nbsp;resource,&nbsp;comment,&nbsp;comment_time)&nbsp;&nbsp;value(null,&nbsp;%s,&nbsp;%s,&nbsp;%s,&nbsp;%s,&nbsp;%s)&quot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;common.patchInsertData(sql,&nbsp;commentList)&nbsp;#&nbsp;mysql操作的批量插入&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;num&nbsp;+=&nbsp;1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;except&nbsp;Exception&nbsp;as&nbsp;e:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;num&nbsp;+=&nbsp;1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print(e)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;continue&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;initial&nbsp;+=&nbsp;1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;except&nbsp;Exception&nbsp;as&nbsp;e:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print(e) 存储、分析数据所有的代码都有了，就差数据库的建立了。我这里用的是 MySql 数据库。 CREATE&nbsp;TABLE&nbsp;`bra`&nbsp;(`bra_id`&nbsp;&nbsp;int(11)&nbsp;NOT&nbsp;NULL&nbsp;AUTO_INCREMENT&nbsp;COMMENT&nbsp; id &nbsp;,`bra_color`&nbsp;&nbsp;varchar(25)&nbsp;NULL&nbsp;COMMENT&nbsp; 颜色 &nbsp;,`bra_size`&nbsp;&nbsp;varchar(25)&nbsp;NULL&nbsp;COMMENT&nbsp; 罩杯 &nbsp;,`resource`&nbsp;&nbsp;varchar(25)&nbsp;NULL&nbsp;COMMENT&nbsp; 数据来源 &nbsp;,`comment`&nbsp;&nbsp;varchar(500)&nbsp;CHARACTER&nbsp;SET&nbsp;utf8mb4&nbsp;DEFAULT&nbsp;NULL&nbsp;COMMENT&nbsp; 评论 &nbsp;,`comment_time`&nbsp;&nbsp;datetime&nbsp;NULL&nbsp;COMMENT&nbsp; 评论时间 &nbsp;,PRIMARY&nbsp;KEY&nbsp;(`bra_id`))&nbsp;character&nbsp;set&nbsp;utf8;这里有两个地方需要注意， comment 评论字段需要设置编码格式为 utf8mb4 &nbsp;，因为可能有表情文字。还有表需要设置为 utf8 编码，不然存不了中文。 建好了表，就可以完整执行代码了。（这里的执行可能需要点时间，可以做成多线程的方式）。看一下执行完之后，数据库有没有数据。 数据是有了，但是有些我们多余的文字描述，我们可以稍微整理一下。 update&nbsp;bra&nbsp;set&nbsp;bra_color&nbsp;=&nbsp;REPLACE(bra_color, 2B6521-无钢圈4- , );update&nbsp;bra&nbsp;set&nbsp;bra_color&nbsp;=&nbsp;REPLACE(bra_color, -1 , );update&nbsp;bra&nbsp;set&nbsp;bra_color&nbsp;=&nbsp;REPLACE(bra_color, 5 , );update&nbsp;bra&nbsp;set&nbsp;bra_size&nbsp;=&nbsp;substr(bra_size,1,3);这里需要根据自己实际情况来修改。如果数据整理的差不多了，我们可以分析一下数据库的信息。 select&nbsp; A罩杯 &nbsp;as&nbsp;罩杯,&nbsp;CONCAT(ROUND(COUNT(*)/(select&nbsp;count(*)&nbsp;from&nbsp;bra)&nbsp;*&nbsp;100,&nbsp;2)&nbsp;,&nbsp;&quot;%&quot;)&nbsp;as&nbsp;比例,&nbsp;COUNT(*)&nbsp;as&nbsp;销量&nbsp;&nbsp;from&nbsp;bra&nbsp;where&nbsp;bra_size&nbsp;like&nbsp; %A union&nbsp;all&nbsp;select&nbsp; B罩杯 &nbsp;as&nbsp;罩杯,&nbsp;CONCAT(ROUND(COUNT(*)/(select&nbsp;count(*)&nbsp;from&nbsp;bra)&nbsp;*&nbsp;100,&nbsp;2)&nbsp;,&nbsp;&quot;%&quot;)&nbsp;as&nbsp;比例,&nbsp;COUNT(*)&nbsp;as&nbsp;销量&nbsp;&nbsp;from&nbsp;bra&nbsp;where&nbsp;bra_size&nbsp;like&nbsp; %B union&nbsp;all&nbsp;select&nbsp; C罩杯 &nbsp;as&nbsp;罩杯,&nbsp;CONCAT(ROUND(COUNT(*)/(select&nbsp;count(*)&nbsp;from&nbsp;bra)&nbsp;*&nbsp;100,&nbsp;2)&nbsp;,&nbsp;&quot;%&quot;)&nbsp;as&nbsp;比例,&nbsp;COUNT(*)&nbsp;as&nbsp;销量&nbsp;&nbsp;from&nbsp;bra&nbsp;where&nbsp;bra_size&nbsp;like&nbsp; %C union&nbsp;all&nbsp;select&nbsp; D罩杯 &nbsp;as&nbsp;罩杯,&nbsp;CONCAT(ROUND(COUNT(*)/(select&nbsp;count(*)&nbsp;from&nbsp;bra)&nbsp;*&nbsp;100,&nbsp;2)&nbsp;,&nbsp;&quot;%&quot;)&nbsp;as&nbsp;比例,&nbsp;COUNT(*)&nbsp;as&nbsp;销量&nbsp;&nbsp;from&nbsp;bra&nbsp;where&nbsp;bra_size&nbsp;like&nbsp; %D union&nbsp;all&nbsp;select&nbsp; E罩杯 &nbsp;as&nbsp;罩杯,&nbsp;CONCAT(ROUND(COUNT(*)/(select&nbsp;count(*)&nbsp;from&nbsp;bra)&nbsp;*&nbsp;100,&nbsp;2)&nbsp;,&nbsp;&quot;%&quot;)&nbsp;as&nbsp;比例,&nbsp;COUNT(*)&nbsp;as&nbsp;销量&nbsp;&nbsp;from&nbsp;bra&nbsp;where&nbsp;bra_size&nbsp;like&nbsp; %E union&nbsp;all&nbsp;select&nbsp; F罩杯 &nbsp;as&nbsp;罩杯,&nbsp;CONCAT(ROUND(COUNT(*)/(select&nbsp;count(*)&nbsp;from&nbsp;bra)&nbsp;*&nbsp;100,&nbsp;2)&nbsp;,&nbsp;&quot;%&quot;)&nbsp;as&nbsp;比例,&nbsp;COUNT(*)&nbsp;as&nbsp;销量&nbsp;&nbsp;from&nbsp;bra&nbsp;where&nbsp;bra_size&nbsp;like&nbsp; %F union&nbsp;all&nbsp;select&nbsp; G罩杯 &nbsp;as&nbsp;罩杯,&nbsp;CONCAT(ROUND(COUNT(*)/(select&nbsp;count(*)&nbsp;from&nbsp;bra)&nbsp;*&nbsp;100,&nbsp;2)&nbsp;,&nbsp;&quot;%&quot;)&nbsp;as&nbsp;比例,&nbsp;COUNT(*)&nbsp;as&nbsp;销量&nbsp;&nbsp;from&nbsp;bra&nbsp;where&nbsp;bra_size&nbsp;like&nbsp; %G union&nbsp;all&nbsp;select&nbsp; H罩杯 &nbsp;as&nbsp;罩杯,&nbsp;CONCAT(ROUND(COUNT(*)/(select&nbsp;count(*)&nbsp;from&nbsp;bra)&nbsp;*&nbsp;100,&nbsp;2)&nbsp;,&nbsp;&quot;%&quot;)&nbsp;as&nbsp;比例,&nbsp;COUNT(*)&nbsp;as&nbsp;销量&nbsp;&nbsp;from&nbsp;bra&nbsp;where&nbsp;bra_size&nbsp;like&nbsp; %H order&nbsp;by&nbsp;销量&nbsp;desc; 　 　 （想知道是哪6位小姐姐买的 G&nbsp;(～￣▽￣)～ ） 数据可视化数据的展示，我用了是 mycharts 模块，如果不了解的可以去学习一下http://pyecharts.org/#/zh-cn/prepare这里我就不细说了，直接贴代码看 #&nbsp;encoding:&nbsp;utf-8#&nbsp;author&nbsp;zwwfrom&nbsp;pyecharts&nbsp;import&nbsp;Piefrom&nbsp;Include.commons.common&nbsp;import&nbsp;Commonif&nbsp;__name__&nbsp;==&nbsp; __main__ :&nbsp;&nbsp;&nbsp;&nbsp;common&nbsp;=&nbsp;Common()&nbsp;&nbsp;&nbsp;&nbsp;results&nbsp;=&nbsp;common.queryData(&quot;&quot;&quot;select&nbsp;count(*)&nbsp;from&nbsp;bra&nbsp;where&nbsp;bra_size&nbsp;like&nbsp; %A &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;union&nbsp;all&nbsp;select&nbsp;count(*)&nbsp;from&nbsp;bra&nbsp;where&nbsp;bra_size&nbsp;like&nbsp; %B &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;union&nbsp;all&nbsp;select&nbsp;count(*)&nbsp;from&nbsp;bra&nbsp;where&nbsp;bra_size&nbsp;like&nbsp; %C &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;union&nbsp;all&nbsp;select&nbsp;count(*)&nbsp;from&nbsp;bra&nbsp;where&nbsp;bra_size&nbsp;like&nbsp; %D &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;union&nbsp;all&nbsp;select&nbsp;count(*)&nbsp;from&nbsp;bra&nbsp;where&nbsp;bra_size&nbsp;like&nbsp; %E &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;union&nbsp;all&nbsp;select&nbsp;count(*)&nbsp;from&nbsp;bra&nbsp;where&nbsp;bra_size&nbsp;like&nbsp; %F &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;union&nbsp;all&nbsp;select&nbsp;count(*)&nbsp;from&nbsp;bra&nbsp;where&nbsp;bra_size&nbsp;like&nbsp; %G &quot;&quot;&quot;)&nbsp;&nbsp;#&nbsp;获取每个罩杯数量&nbsp;&nbsp;&nbsp;&nbsp;attr&nbsp;=&nbsp;[&quot;A罩杯&quot;,&nbsp; G罩杯 ,&nbsp;&quot;B罩杯&quot;,&nbsp;&quot;C罩杯&quot;,&nbsp;&quot;D罩杯&quot;,&nbsp;&quot;E罩杯&quot;,&nbsp;&quot;F罩杯&quot;]&nbsp;&nbsp;&nbsp;&nbsp;v1&nbsp;=&nbsp;[results[0][0],&nbsp;results[6][0],&nbsp;results[1][0],&nbsp;results[2][0],&nbsp;results[3][0],&nbsp;results[4][0],&nbsp;results[5][0]]&nbsp;&nbsp;&nbsp;&nbsp;pie&nbsp;=&nbsp;Pie(&quot;内衣罩杯&quot;,&nbsp;width=1300,&nbsp;height=620)&nbsp;&nbsp;&nbsp;&nbsp;pie.add(&quot;&quot;,&nbsp;attr,&nbsp;v1,&nbsp;is_label_show=True)&nbsp;&nbsp;&nbsp;&nbsp;pie.render( size.html )&nbsp;&nbsp;&nbsp;&nbsp;print( success )&nbsp;&nbsp;&nbsp;&nbsp;results&nbsp;=&nbsp;common.queryData(&quot;&quot;&quot;select&nbsp;count(*)&nbsp;from&nbsp;bra&nbsp;where&nbsp;bra_color&nbsp;like&nbsp; %肤% &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;union&nbsp;all&nbsp;select&nbsp;count(*)&nbsp;from&nbsp;bra&nbsp;where&nbsp;bra_color&nbsp;like&nbsp; %灰% &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;union&nbsp;all&nbsp;select&nbsp;count(*)&nbsp;from&nbsp;bra&nbsp;where&nbsp;bra_color&nbsp;like&nbsp; %黑% &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;union&nbsp;all&nbsp;select&nbsp;count(*)&nbsp;from&nbsp;bra&nbsp;where&nbsp;bra_color&nbsp;like&nbsp; %蓝% &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;union&nbsp;all&nbsp;select&nbsp;count(*)&nbsp;from&nbsp;bra&nbsp;where&nbsp;bra_color&nbsp;like&nbsp; %粉% &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;union&nbsp;all&nbsp;select&nbsp;count(*)&nbsp;from&nbsp;bra&nbsp;where&nbsp;bra_color&nbsp;like&nbsp; %红% &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;union&nbsp;all&nbsp;select&nbsp;count(*)&nbsp;from&nbsp;bra&nbsp;where&nbsp;bra_color&nbsp;like&nbsp; %紫% &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;union&nbsp;all&nbsp;select&nbsp;count(*)&nbsp;from&nbsp;bra&nbsp;where&nbsp;bra_color&nbsp;like&nbsp; %绿% &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;union&nbsp;all&nbsp;select&nbsp;count(*)&nbsp;from&nbsp;bra&nbsp;where&nbsp;bra_color&nbsp;like&nbsp; %白% &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;union&nbsp;all&nbsp;select&nbsp;count(*)&nbsp;from&nbsp;bra&nbsp;where&nbsp;bra_color&nbsp;like&nbsp; %褐% &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;union&nbsp;all&nbsp;select&nbsp;count(*)&nbsp;from&nbsp;bra&nbsp;where&nbsp;bra_color&nbsp;like&nbsp; %黄% &nbsp;&quot;&quot;&quot;)&nbsp;&nbsp;#&nbsp;获取每个罩杯数量&nbsp;&nbsp;&nbsp;&nbsp;attr&nbsp;=&nbsp;[&quot;肤色&quot;,&nbsp; 灰色 ,&nbsp;&quot;黑色&quot;,&nbsp;&quot;蓝色&quot;,&nbsp;&quot;粉色&quot;,&nbsp;&quot;红色&quot;,&nbsp;&quot;紫色&quot;,&nbsp; 绿色 ,&nbsp;&quot;白色&quot;,&nbsp;&quot;褐色&quot;,&nbsp;&quot;黄色&quot;]&nbsp;&nbsp;&nbsp;&nbsp;v1&nbsp;=&nbsp;[results[0][0],&nbsp;results[1][0],&nbsp;results[2][0],&nbsp;results[3][0],&nbsp;results[4][0],&nbsp;results[5][0],&nbsp;results[6][0],&nbsp;results[7][0],&nbsp;results[8][0],&nbsp;results[9][0],&nbsp;results[10][0]]&nbsp;&nbsp;&nbsp;&nbsp;pieColor&nbsp;=&nbsp;Pie(&quot;内衣颜色&quot;,&nbsp;width=1300,&nbsp;height=620)&nbsp;&nbsp;&nbsp;&nbsp;pieColor.add(&quot;&quot;,&nbsp;attr,&nbsp;v1,&nbsp;is_label_show=True)&nbsp;&nbsp;&nbsp;&nbsp;pieColor.render( color.html )&nbsp;&nbsp;&nbsp;&nbsp;print( success )这一章就到这里了，该知道的你也知道了，不该知道的你也知道了。哪些人是G杯，哪些妹子是A杯，以后找对象就不用担心这块的了。 代码已放到github, 点击文末阅读原文，获取全部源码。 推荐阅读 超全！深度学习在计算机视觉领域的应用一览 都All in AI啦，应该自己学会补全 Python 代码了！ 收藏！！BAT 程序员们常用的开发工具 8200+ Star！Python学习的必备法宝，随查随用 Google Q2 利润暴增 211%，但业务营收危机依然在 喜欢就点击“在看”吧！","@type":"BlogPosting","url":"https://uzzz.org/2019/07/31/792798.html","headline":"为了给小女友挑合适罩杯的内衣，我用 Python 爬了淘宝内衣店的数据！","dateModified":"2019-07-31T00:00:00+08:00","datePublished":"2019-07-31T00:00:00+08:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://uzzz.org/2019/07/31/792798.html"},"@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->


    <link rel="stylesheet" href="/assets/css/style.css?v=">
    <script src="/assets/js/scale.fix.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-123344652-1"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-123344652-1');
    </script>
    
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <script>
      (adsbygoogle = window.adsbygoogle || []).push({
        google_ad_client: "ca-pub-8889449066804352",
        enable_page_level_ads: true
      });
    </script>
    
    <script async custom-element="amp-auto-ads"
        src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
    </script>
    
    <style>
      @media screen and (max-width:760px){
        .sm-hidden{display:none; }
      }
    </style>

  </head>
  <body>
    
        <amp-auto-ads type="adsense"
              data-ad-client="ca-pub-8889449066804352">
        </amp-auto-ads>
    
    <div class="wrapper">
      <header  class="without-description" >
        <h1>为了给小女友挑合适罩杯的内衣，我用 Python 爬了淘宝内衣店的数据！</h1>
        
        
        <ul style="display: block;">
            <li><a href="https://uzshare.com/" style="line-height: unset;" target="_blank"><strong>柚子社区</strong></a></li>
 	    <li><a href="/donate/" style="line-height: unset;" target="_blank"><strong>Donate</strong></a></li>
        </ul>
        
      </header>
      <section>

<div style="margin:0 0 8px 0;">
<style>
table.gsc-input {
    margin: 0;
}
.cse .gsc-control-cse, .gsc-control-cse {
    padding: 0;
    width: auto;
}
.gsc-search-box td {
    border-bottom: none;
}
</style>
<script>
  (function() {
    var cx = '004431708863642777669:qan2_6ugotw';
    var gcse = document.createElement('script');
    gcse.type = 'text/javascript';
    gcse.async = true;
    gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(gcse, s);
  })();
</script>
<gcse:search></gcse:search>
</div>
<!-- match content ads -->
	        <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
			<ins class="adsbygoogle"
			     style="display:block"
			     data-ad-format="autorelaxed"
			     data-ad-client="ca-pub-8889449066804352"
			     data-ad-slot="1928667997"></ins>
			<script>
			     (adsbygoogle = window.adsbygoogle || []).push({});
			</script>	



        <div id="article_content" class="article_content clearfix"> 
 <div class="article-source-link">
   原文链接：
  <a href="https://github.com/zwwjava/python_capture" target="_blank">https://github.com/zwwjava/python_capture</a> 
 </div> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-3019150162.css"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-3019150162.css"> 
 <div class="htmledit_views" id="content_views"> 
  <div class="rich_media_content" id="js_content"> 
   <p class="XiGuaChajian"><br></p>
   <img class="rich_pages" style="font-family:'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif;letter-spacing:2px;width:574px;" src="https://ss.csdn.net/p?https://mmbiz.qpic.cn/mmbiz_jpg/Uic0S1r5o6OtgwnSictvFjnpJt5dDdxD3HUEkLfDicSzvyAiakUMCVeevLOPXYVbVjibOs7mKzjrkdMibKlSBRUrvHKA/640?wx_fmt=jpeg" alt="640?wx_fmt=jpeg">
   <span style="color:rgb(136,136,136);font-family:'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif;font-size:14px;letter-spacing:.544px;line-height:1.5em;word-spacing:2px;"></span>
   <span style="color:rgb(136,136,136);font-size:14px;letter-spacing:2px;text-align:left;word-spacing:2px;font-family:'-apple-system-font', BlinkMacSystemFont, 'Helvetica Neue', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei UI', 'Microsoft YaHei', Arial, sans-serif;">编辑: 开发者最前线 &amp; 可可|&nbsp;作者：躲猫猫的猫，</span>
   <span style="font-size:14px;color:rgb(136,136,136);"><span style="font-size:14px;letter-spacing:2px;text-align:left;word-spacing:2px;font-family:'-apple-system-font', BlinkMacSystemFont, 'Helvetica Neue', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei UI', 'Microsoft YaHei', Arial, sans-serif;">原文链接：</span><span style="font-size:14px;font-family:'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif;letter-spacing:2px;text-align:left;word-spacing:2px;">https://www.cnblogs.com/zhaww/p/9636383.html</span></span>大家好，希望各位能怀着正直、严谨、专业的心态观看这篇文章。ヾ(๑╹◡╹)ﾉ"老天真的对我不薄，让我终于有了女友，自从有了女友后，
   <strong>我为了<span style="color:rgb(62,62,62);font-family:'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif;font-size:15px;letter-spacing:2px;word-spacing:2px;">能替女朋友买上一件心怡的内衣</span></strong>
   <span style="color:rgb(62,62,62);font-family:'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif;font-size:15px;letter-spacing:2px;word-spacing:2px;">。</span>接下来我们尝试用 Python 抓取天猫内衣销售数据，并分析得到中国女性普遍的罩杯数据、最受欢迎的内衣颜色是什么、评论的关键字。我们先看看分析得到的成果是怎样的？（讲的很详细，推荐跟着敲一遍）
   <br>　　
   <img class="rich_pages" src="https://ss.csdn.net/p?https://mmbiz.qpic.cn/mmbiz_png/MJGgTibvywfW2OWlmHXPXxYWGVSdeWFSsH8EwFvI7ZCJAWvxbd9rQDGsgiaLj4SEU2QCLlPdriaVsPwHv4kHn6MxA/640?wx_fmt=png" alt="640?wx_fmt=png">
   <img class="rich_pages" src="https://ss.csdn.net/p?https://mmbiz.qpic.cn/mmbiz_png/MJGgTibvywfW2OWlmHXPXxYWGVSdeWFSsM8KfD8oGH73EZ2UibTAChTzNzdhj1MjRN4BNmTDFuNZe9zhU2qCxSZA/640?wx_fmt=png" alt="640?wx_fmt=png">
   <img class="rich_pages" src="https://ss.csdn.net/p?https://mmbiz.qpic.cn/mmbiz_png/MJGgTibvywfW2OWlmHXPXxYWGVSdeWFSsADPZxFZ1pNR75dwic0qwVIS7Kic3xC5C1jmBamcAMkbaC0ncwFYianBfQ/640?wx_fmt=png" alt="640?wx_fmt=png">
   <span style="font-size:10px;color:rgb(136,136,136);">（买个内衣这么开心）</span>
   <br>
   <span style="color:rgb(0,0,0);">图片看不清楚的话，可以把图片单独拉到另一个窗口。</span>这里是分析了一万条数据得出的结论，可能会有误差，但是还是希望单身的你们能找到 0.06% 那一批妹纸。下面我会详细介绍怎么抓取天猫内衣销售数据，存储、分析、展示。
   <ul style="margin-left:16px;" class="list-paddingleft-2">
    <li><p><span style="font-size:inherit;color:inherit;line-height:inherit;">研究天猫网站</span></p></li>
    <li><p><span style="font-size:inherit;color:inherit;line-height:inherit;">抓取天猫评论数据</span></p></li>
    <li><p><span style="font-size:inherit;color:inherit;line-height:inherit;">存储、分析数据</span></p></li>
    <li><p><span style="font-size:inherit;color:inherit;line-height:inherit;">可视化</span></p></li>
   </ul>
   <h4 style="color:inherit;line-height:inherit;font-weight:bold;font-size:1.2em;"><span style="font-size:inherit;line-height:inherit;color:rgb(0,128,255);">研究天猫网站</span></h4>我们随意进入一个商品的购买界面（能看到评论的那个界面），F12 开发者模式 -- Network 栏 -- 刷新下界面 -- 在如图的位置搜索 list_ 会看到一个 list_detail_rate.htm?itemId= ….如下图：【单击】这个url 能看到返回的是一个 Json 数据 ，检查一下你会发现这串 Json 就是商品的评论数据 [ rateDetail ][ rateList ]
   <img class="rich_pages" src="https://ss.csdn.net/p?https://mmbiz.qpic.cn/mmbiz_png/MJGgTibvywfW2OWlmHXPXxYWGVSdeWFSsZhGGl0LdcyQyjYR28wLeI6AyD4sp3o7a5d5P6Hjjs85z3olmaicCxFw/640?wx_fmt=png" alt="640?wx_fmt=png">【双击】这个url 你会得到一个新界面，如图
   <img class="rich_pages" src="https://ss.csdn.net/p?https://mmbiz.qpic.cn/mmbiz_png/MJGgTibvywfW2OWlmHXPXxYWGVSdeWFSsmMEjYbC6Y2eTT16pymowUQ3nMVCmYh5SGcHs9ibibTml3WC2CGRHQRBw/640?wx_fmt=png" alt="640?wx_fmt=png">看一下这个信息
   <img class="rich_pages" src="https://ss.csdn.net/p?https://mmbiz.qpic.cn/mmbiz_png/MJGgTibvywfW2OWlmHXPXxYWGVSdeWFSseCznU8TZWCaDQicnAHRev4eZ9zib3KxFhPcKbAVnSv6ricvsg2bZBzLbQ/640?wx_fmt=png" alt="640?wx_fmt=png">这里的路径 就是获取评论数据的 url了。这个 URL 有很多参数你可以分析一下每个值都是干嘛的。
   <br>itemId 对应的是商品id， sellerId &nbsp;对应的是店铺id，currentPage 是当前页。这里 sellerId &nbsp;可以填任意值，不影响数据的获取。
   <h4 style="color:inherit;line-height:inherit;font-weight:bold;font-size:1.2em;"><span style="font-size:inherit;line-height:inherit;color:rgb(0,128,255);">抓取天猫评论数据</span></h4>写一个抓取天猫评论数据的方法。getCommentDetail
   <pre style="font-size:inherit;color:inherit;line-height:inherit;"><span class="hljs-comment" style="font-size:inherit;line-height:inherit;color:rgb(112,120,128);">#&nbsp;获取商品评论数据</span><br><span class="hljs-function" style="font-size:inherit;color:inherit;line-height:inherit;"><span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">def</span>&nbsp;<span class="hljs-title" style="font-size:inherit;line-height:inherit;color:rgb(240,198,116);">getCommentDetail</span><span class="hljs-params" style="font-size:inherit;color:inherit;line-height:inherit;">(itemId,currentPage)</span>:</span><br>&nbsp;&nbsp;&nbsp;&nbsp;url&nbsp;=&nbsp;<span class="hljs-string" style="font-size:inherit;line-height:inherit;color:rgb(181,189,104);"> https://rate.tmall.com/list_detail_rate.htm?itemId= </span>&nbsp;+&nbsp;str(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;itemId)&nbsp;+&nbsp;<span class="hljs-string" style="font-size:inherit;line-height:inherit;color:rgb(181,189,104);"> &amp;sellerId=2451699564&amp;order=3&amp;currentPage= </span>&nbsp;+&nbsp;str(currentPage)&nbsp;+&nbsp;<span class="hljs-string" style="font-size:inherit;line-height:inherit;color:rgb(181,189,104);"> &amp;append=0callback=jsonp336 </span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment" style="font-size:inherit;line-height:inherit;color:rgb(112,120,128);"># itemId 产品id ；sellerId 店铺id 字段必须有值，但随意值就行</span><br>&nbsp;&nbsp;&nbsp;&nbsp;html&nbsp;=&nbsp;common.getUrlContent(url)&nbsp;&nbsp;<span class="hljs-comment" style="font-size:inherit;line-height:inherit;color:rgb(112,120,128);">#&nbsp;获取网页信息</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment" style="font-size:inherit;line-height:inherit;color:rgb(112,120,128);">#&nbsp;删掉返回的多余信息</span><br>&nbsp;&nbsp;&nbsp;&nbsp;html&nbsp;=&nbsp;html.replace(<span class="hljs-string" style="font-size:inherit;line-height:inherit;color:rgb(181,189,104);"> jsonp128( </span>,<span class="hljs-string" style="font-size:inherit;line-height:inherit;color:rgb(181,189,104);">  </span>)&nbsp;<span class="hljs-comment" style="font-size:inherit;line-height:inherit;color:rgb(112,120,128);">#需要确定是不是&nbsp;jsonp128</span><br>&nbsp;&nbsp;&nbsp;&nbsp;html&nbsp;=&nbsp;html.replace(<span class="hljs-string" style="font-size:inherit;line-height:inherit;color:rgb(181,189,104);"> ) </span>,<span class="hljs-string" style="font-size:inherit;line-height:inherit;color:rgb(181,189,104);">  </span>)<br>&nbsp;&nbsp;&nbsp;&nbsp;html&nbsp;=&nbsp;html.replace(<span class="hljs-string" style="font-size:inherit;line-height:inherit;color:rgb(181,189,104);"> false </span>,<span class="hljs-string" style="font-size:inherit;line-height:inherit;color:rgb(181,189,104);"> "false" </span>)<br>&nbsp;&nbsp;&nbsp;&nbsp;html&nbsp;=&nbsp;html.replace(<span class="hljs-string" style="font-size:inherit;line-height:inherit;color:rgb(181,189,104);"> true </span>,<span class="hljs-string" style="font-size:inherit;line-height:inherit;color:rgb(181,189,104);"> "true" </span>)<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment" style="font-size:inherit;line-height:inherit;color:rgb(112,120,128);">#&nbsp;将string&nbsp;转换为字典对象</span><br>&nbsp;&nbsp;&nbsp;&nbsp;tmalljson&nbsp;=&nbsp;json.loads(html)<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">return</span>&nbsp;tmalljson<br></pre>这里需要注意的是 jsonp128 这个值需要你自己看一下，你那边跟我这个应该是不同的。在上面的方法里有两个变量，itemId 和 currentPage 这两个值我们动态来控制，所以我们需要获得 一批 商品id号 和 评论的最大页数 用来遍历。写个获取商品评论最大页数的方法 getLastPage
   <pre style="font-size:inherit;color:inherit;line-height:inherit;"><span class="hljs-section" style="font-size:inherit;line-height:inherit;color:rgb(222,147,95);">#&nbsp;获取商品评论最大页数</span><br>def&nbsp;getLastPage(itemId):<br>&nbsp;&nbsp;&nbsp;&nbsp;tmalljson&nbsp;=&nbsp;getCommentDetail(itemId,1)<br>&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;tmalljson[<span class="hljs-string" style="font-size:inherit;line-height:inherit;color:rgb(181,189,104);"> rateDetail </span>][<span class="hljs-symbol" style="font-size:inherit;line-height:inherit;color:rgb(204,102,102);"> paginator </span>][<span class="hljs-string" style="font-size:inherit;line-height:inherit;color:rgb(181,189,104);"> lastPage </span>]&nbsp;#最大页数<br></pre>那现在怎么获取 产品的id 列表呢？我们可以在天猫中搜索商品关键字 用开发者模式观察
   <img class="rich_pages" src="https://ss.csdn.net/p?https://mmbiz.qpic.cn/mmbiz_png/MJGgTibvywfW2OWlmHXPXxYWGVSdeWFSsJWNicrEZqsanGWkM78ImVFZY0iapM6Oy2GYabXE8jaicWkbZvMepJKm7w/640?wx_fmt=png" alt="640?wx_fmt=png">这里观察一下这个页面的元素分布，很容易就发现了 商品的id 信息，当然你可以想办法确认一下。
   <img class="rich_pages" src="https://ss.csdn.net/p?https://mmbiz.qpic.cn/mmbiz_png/MJGgTibvywfW2OWlmHXPXxYWGVSdeWFSsoB1dqgRh31jOekibrKXVSsAz8LhZbmDoPdozrmqKlfM9ueBJcoFEOwQ/640?wx_fmt=png" alt="640?wx_fmt=png">现在就写个 获取商品id 的方法 getProductIdList
   <pre style="font-size:inherit;color:inherit;line-height:inherit;"><span class="hljs-comment" style="font-size:inherit;line-height:inherit;color:rgb(112,120,128);">#&nbsp;获取商品id</span><br><span class="hljs-function" style="font-size:inherit;color:inherit;line-height:inherit;"><span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">def</span>&nbsp;<span class="hljs-title" style="font-size:inherit;line-height:inherit;color:rgb(240,198,116);">getProductIdList</span><span class="hljs-params" style="font-size:inherit;color:inherit;line-height:inherit;">()</span>:</span><br>&nbsp;&nbsp;&nbsp;&nbsp;url&nbsp;=&nbsp;<span class="hljs-string" style="font-size:inherit;line-height:inherit;color:rgb(181,189,104);"> https://list.tmall.com/search_product.htm?q=内衣 </span>&nbsp;<span class="hljs-comment" style="font-size:inherit;line-height:inherit;color:rgb(112,120,128);">#&nbsp;q参数&nbsp;是查询的关键字</span><br>&nbsp;&nbsp;&nbsp;&nbsp;html&nbsp;=&nbsp;common.getUrlContent(url)&nbsp;&nbsp;<span class="hljs-comment" style="font-size:inherit;line-height:inherit;color:rgb(112,120,128);">#&nbsp;获取网页信息</span><br>&nbsp;&nbsp;&nbsp;&nbsp;soup&nbsp;=&nbsp;BeautifulSoup(html,<span class="hljs-string" style="font-size:inherit;line-height:inherit;color:rgb(181,189,104);"> html.parser </span>)<br>&nbsp;&nbsp;&nbsp;&nbsp;idList&nbsp;=&nbsp;[]<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment" style="font-size:inherit;line-height:inherit;color:rgb(112,120,128);">#&nbsp;用Beautiful&nbsp;Soup提取商品页面中所有的商品ID</span><br>&nbsp;&nbsp;&nbsp;&nbsp;productList&nbsp;=&nbsp;soup.find_all(<span class="hljs-string" style="font-size:inherit;line-height:inherit;color:rgb(181,189,104);"> div </span>,&nbsp;{<span class="hljs-string" style="font-size:inherit;line-height:inherit;color:rgb(181,189,104);"> class </span>:&nbsp;<span class="hljs-string" style="font-size:inherit;line-height:inherit;color:rgb(181,189,104);"> product </span>})<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">for</span>&nbsp;product&nbsp;<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">in</span>&nbsp;productList:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;idList.append(product[<span class="hljs-string" style="font-size:inherit;line-height:inherit;color:rgb(181,189,104);"> data-id </span>])<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">return</span>&nbsp;idList<br></pre>现在所有的基本要求都有了，是时候把他们组合起来。在 main 方法中写剩下的组装部分
   <pre style="font-size:inherit;color:inherit;line-height:inherit;"><span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">if</span>&nbsp;__name_<span class="hljs-number" style="font-size:inherit;line-height:inherit;color:rgb(204,102,102);">_</span>&nbsp;==&nbsp;<span class="hljs-string" style="font-size:inherit;line-height:inherit;color:rgb(181,189,104);"> __main__ </span>:<br>&nbsp;&nbsp;&nbsp;&nbsp;productIdList&nbsp;=&nbsp;getProductIdList()&nbsp;<span class="hljs-comment" style="font-size:inherit;line-height:inherit;color:rgb(112,120,128);">#获取商品id</span><br>&nbsp;&nbsp;&nbsp;&nbsp;initial&nbsp;=&nbsp;<span class="hljs-number" style="font-size:inherit;line-height:inherit;color:rgb(204,102,102);">0</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">while</span>&nbsp;initial&nbsp;&lt;&nbsp;len(productIdList)&nbsp;-&nbsp;<span class="hljs-number" style="font-size:inherit;line-height:inherit;color:rgb(204,102,102);">30</span>:&nbsp;&nbsp;<span class="hljs-comment" style="font-size:inherit;line-height:inherit;color:rgb(112,120,128);">#&nbsp;总共有60个商品，我只取了前30个</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;try:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;itemId&nbsp;=&nbsp;productIdList[initial]<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">print</span>(<span class="hljs-string" style="font-size:inherit;line-height:inherit;color:rgb(181,189,104);"> ---------- </span>,&nbsp;itemId,&nbsp;<span class="hljs-string" style="font-size:inherit;line-height:inherit;color:rgb(181,189,104);"> ------------ </span>)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;maxPage&nbsp;=&nbsp;getLastPage(itemId)&nbsp;<span class="hljs-comment" style="font-size:inherit;line-height:inherit;color:rgb(112,120,128);">#获取商品评论最大页数</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;num&nbsp;=&nbsp;<span class="hljs-number" style="font-size:inherit;line-height:inherit;color:rgb(204,102,102);">1</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">while</span>&nbsp;num&nbsp;&lt;=&nbsp;maxPage&nbsp;<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">and</span>&nbsp;num&nbsp;&lt;&nbsp;<span class="hljs-number" style="font-size:inherit;line-height:inherit;color:rgb(204,102,102);">20</span>:&nbsp;<span class="hljs-comment" style="font-size:inherit;line-height:inherit;color:rgb(112,120,128);">#每个商品的评论我最多取20&nbsp;页，每页有20条评论，也就是每个商品最多只取&nbsp;400&nbsp;个评论</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;try:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment" style="font-size:inherit;line-height:inherit;color:rgb(112,120,128);">#&nbsp;抓取某个商品的某页评论数据</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tmalljson&nbsp;=&nbsp;getCommentDetail(itemId,&nbsp;num)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rateList&nbsp;=&nbsp;tmalljson[<span class="hljs-string" style="font-size:inherit;line-height:inherit;color:rgb(181,189,104);"> rateDetail </span>][<span class="hljs-string" style="font-size:inherit;line-height:inherit;color:rgb(181,189,104);"> rateList </span>]<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;commentList&nbsp;=&nbsp;[]<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;n&nbsp;=&nbsp;<span class="hljs-number" style="font-size:inherit;line-height:inherit;color:rgb(204,102,102);">0</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">while</span>&nbsp;(n&nbsp;&lt;&nbsp;len(rateList)):<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;comment&nbsp;=&nbsp;[]<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment" style="font-size:inherit;line-height:inherit;color:rgb(112,120,128);">#&nbsp;商品描述</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;colorSize&nbsp;=&nbsp;rateList[n][<span class="hljs-string" style="font-size:inherit;line-height:inherit;color:rgb(181,189,104);"> auctionSku </span>]<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">m</span>&nbsp;=&nbsp;re.<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">split</span>(<span class="hljs-string" style="font-size:inherit;line-height:inherit;color:rgb(181,189,104);"> [:;] </span>,&nbsp;colorSize)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rateContent&nbsp;=&nbsp;rateList[n][<span class="hljs-string" style="font-size:inherit;line-height:inherit;color:rgb(181,189,104);"> rateContent </span>]<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dtime&nbsp;=&nbsp;rateList[n][<span class="hljs-string" style="font-size:inherit;line-height:inherit;color:rgb(181,189,104);"> rateDate </span>]<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;comment.append(<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">m</span>[<span class="hljs-number" style="font-size:inherit;line-height:inherit;color:rgb(204,102,102);">1</span>])<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;comment.append(<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">m</span>[<span class="hljs-number" style="font-size:inherit;line-height:inherit;color:rgb(204,102,102);">3</span>])<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;comment.append(<span class="hljs-string" style="font-size:inherit;line-height:inherit;color:rgb(181,189,104);"> 天猫 </span>)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;comment.append(rateContent)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;comment.append(dtime)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;commentList.append(comment)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;n&nbsp;+=&nbsp;<span class="hljs-number" style="font-size:inherit;line-height:inherit;color:rgb(204,102,102);">1</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">print</span>(num)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sql&nbsp;=&nbsp;<span class="hljs-string" style="font-size:inherit;line-height:inherit;color:rgb(181,189,104);">"insert&nbsp;into&nbsp;bras(bra_id,&nbsp;bra_color,&nbsp;bra_size,&nbsp;resource,&nbsp;comment,&nbsp;comment_time)&nbsp;&nbsp;value(null,&nbsp;%s,&nbsp;%s,&nbsp;%s,&nbsp;%s,&nbsp;%s)"</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;common.patchInsertData(sql,&nbsp;commentList)&nbsp;<span class="hljs-comment" style="font-size:inherit;line-height:inherit;color:rgb(112,120,128);">#&nbsp;mysql操作的批量插入</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;num&nbsp;+=&nbsp;<span class="hljs-number" style="font-size:inherit;line-height:inherit;color:rgb(204,102,102);">1</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;except&nbsp;Exception&nbsp;as&nbsp;e:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;num&nbsp;+=&nbsp;<span class="hljs-number" style="font-size:inherit;line-height:inherit;color:rgb(204,102,102);">1</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">print</span>(e)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">continue</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;initial&nbsp;+=&nbsp;<span class="hljs-number" style="font-size:inherit;line-height:inherit;color:rgb(204,102,102);">1</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;except&nbsp;Exception&nbsp;as&nbsp;e:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">print</span>(e)<br></pre>所有的代码就这样完成了，我现在把 common.py 的代码，还有 tmallbra.py 的代码都贴出来
   <pre style="font-size:inherit;color:inherit;line-height:inherit;"><span class="hljs-comment" style="font-size:inherit;line-height:inherit;color:rgb(112,120,128);">#&nbsp;-*-&nbsp;coding:utf-8&nbsp;-*-</span><br><span class="hljs-comment" style="font-size:inherit;line-height:inherit;color:rgb(112,120,128);">#&nbsp;Author:&nbsp;zww</span><br><span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">import</span>&nbsp;requests<br><span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">import</span>&nbsp;time<br><span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">import</span>&nbsp;random<br><span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">import</span>&nbsp;socket<br><span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">import</span>&nbsp;http.client<br><span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">import</span>&nbsp;pymysql<br><span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">import</span>&nbsp;csv<br><br><span class="hljs-comment" style="font-size:inherit;line-height:inherit;color:rgb(112,120,128);">#&nbsp;封装requests</span><br><span class="hljs-class" style="font-size:inherit;color:inherit;line-height:inherit;"><span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">class</span>&nbsp;<span class="hljs-title" style="font-size:inherit;line-height:inherit;color:rgb(240,198,116);">Common</span><span class="hljs-params" style="font-size:inherit;color:inherit;line-height:inherit;">(object)</span>:</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-function" style="font-size:inherit;color:inherit;line-height:inherit;"><span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">def</span>&nbsp;<span class="hljs-title" style="font-size:inherit;line-height:inherit;color:rgb(240,198,116);">getUrlContent</span><span class="hljs-params" style="font-size:inherit;color:inherit;line-height:inherit;">(self,&nbsp;url,&nbsp;data=None)</span>:</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;header&nbsp;=&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-string" style="font-size:inherit;line-height:inherit;color:rgb(181,189,104);"> Accept </span>:&nbsp;<span class="hljs-string" style="font-size:inherit;line-height:inherit;color:rgb(181,189,104);"> text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8 </span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-string" style="font-size:inherit;line-height:inherit;color:rgb(181,189,104);"> Accept-Encoding </span>:&nbsp;<span class="hljs-string" style="font-size:inherit;line-height:inherit;color:rgb(181,189,104);"> gzip,&nbsp;deflate,&nbsp;br </span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-string" style="font-size:inherit;line-height:inherit;color:rgb(181,189,104);"> Accept-Language </span>:&nbsp;<span class="hljs-string" style="font-size:inherit;line-height:inherit;color:rgb(181,189,104);"> zh-CN,zh;q=0.9,en;q=0.8 </span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-string" style="font-size:inherit;line-height:inherit;color:rgb(181,189,104);"> user-agent </span>:&nbsp;<span class="hljs-string" style="font-size:inherit;line-height:inherit;color:rgb(181,189,104);">"User-Agent:Mozilla/5.0&nbsp;(Windows&nbsp;NT&nbsp;10.0;&nbsp;Win64;&nbsp;x64)&nbsp;AppleWebKit/537.36&nbsp;(KHTML,&nbsp;like&nbsp;Gecko)&nbsp;Chrome/62.0.3202.94&nbsp;Safari/537.36"</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-string" style="font-size:inherit;line-height:inherit;color:rgb(181,189,104);"> cache-control </span>:&nbsp;<span class="hljs-string" style="font-size:inherit;line-height:inherit;color:rgb(181,189,104);"> max-age=0 </span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;<span class="hljs-comment" style="font-size:inherit;line-height:inherit;color:rgb(112,120,128);">#&nbsp;request&nbsp;的请求头</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;timeout&nbsp;=&nbsp;random.choice(range(<span class="hljs-number" style="font-size:inherit;line-height:inherit;color:rgb(204,102,102);">80</span>,&nbsp;<span class="hljs-number" style="font-size:inherit;line-height:inherit;color:rgb(204,102,102);">180</span>))<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">while</span>&nbsp;<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">True</span>:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">try</span>:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rep&nbsp;=&nbsp;requests.get(url,&nbsp;headers=header,&nbsp;timeout=timeout)&nbsp;&nbsp;<span class="hljs-comment" style="font-size:inherit;line-height:inherit;color:rgb(112,120,128);">#&nbsp;请求url地址，获得返回&nbsp;response&nbsp;信息</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment" style="font-size:inherit;line-height:inherit;color:rgb(112,120,128);">#&nbsp;rep.encoding&nbsp;=&nbsp; utf-8 </span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">break</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">except</span>&nbsp;socket.timeout&nbsp;<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">as</span>&nbsp;e:&nbsp;&nbsp;<span class="hljs-comment" style="font-size:inherit;line-height:inherit;color:rgb(112,120,128);">#&nbsp;以下都是异常处理</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print(<span class="hljs-string" style="font-size:inherit;line-height:inherit;color:rgb(181,189,104);"> 3: </span>,&nbsp;e)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;time.sleep(random.choice(range(<span class="hljs-number" style="font-size:inherit;line-height:inherit;color:rgb(204,102,102);">8</span>,&nbsp;<span class="hljs-number" style="font-size:inherit;line-height:inherit;color:rgb(204,102,102);">15</span>)))<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">except</span>&nbsp;socket.error&nbsp;<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">as</span>&nbsp;e:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print(<span class="hljs-string" style="font-size:inherit;line-height:inherit;color:rgb(181,189,104);"> 4: </span>,&nbsp;e)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;time.sleep(random.choice(range(<span class="hljs-number" style="font-size:inherit;line-height:inherit;color:rgb(204,102,102);">20</span>,&nbsp;<span class="hljs-number" style="font-size:inherit;line-height:inherit;color:rgb(204,102,102);">60</span>)))<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">except</span>&nbsp;http.client.BadStatusLine&nbsp;<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">as</span>&nbsp;e:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print(<span class="hljs-string" style="font-size:inherit;line-height:inherit;color:rgb(181,189,104);"> 5: </span>,&nbsp;e)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;time.sleep(random.choice(range(<span class="hljs-number" style="font-size:inherit;line-height:inherit;color:rgb(204,102,102);">30</span>,&nbsp;<span class="hljs-number" style="font-size:inherit;line-height:inherit;color:rgb(204,102,102);">80</span>)))<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">except</span>&nbsp;http.client.IncompleteRead&nbsp;<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">as</span>&nbsp;e:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print(<span class="hljs-string" style="font-size:inherit;line-height:inherit;color:rgb(181,189,104);"> 6: </span>,&nbsp;e)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;time.sleep(random.choice(range(<span class="hljs-number" style="font-size:inherit;line-height:inherit;color:rgb(204,102,102);">5</span>,&nbsp;<span class="hljs-number" style="font-size:inherit;line-height:inherit;color:rgb(204,102,102);">15</span>)))<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print(<span class="hljs-string" style="font-size:inherit;line-height:inherit;color:rgb(181,189,104);"> request&nbsp;success </span>)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">return</span>&nbsp;rep.text&nbsp;&nbsp;<span class="hljs-comment" style="font-size:inherit;line-height:inherit;color:rgb(112,120,128);">#&nbsp;返回的&nbsp;Html&nbsp;全文</span><br><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-function" style="font-size:inherit;color:inherit;line-height:inherit;"><span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">def</span>&nbsp;<span class="hljs-title" style="font-size:inherit;line-height:inherit;color:rgb(240,198,116);">writeData</span><span class="hljs-params" style="font-size:inherit;color:inherit;line-height:inherit;">(self,&nbsp;data,&nbsp;url)</span>:</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">with</span>&nbsp;open(url,&nbsp;<span class="hljs-string" style="font-size:inherit;line-height:inherit;color:rgb(181,189,104);"> a </span>,&nbsp;errors=<span class="hljs-string" style="font-size:inherit;line-height:inherit;color:rgb(181,189,104);"> ignore </span>,&nbsp;newline=<span class="hljs-string" style="font-size:inherit;line-height:inherit;color:rgb(181,189,104);">  </span>)&nbsp;<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">as</span>&nbsp;f:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;f_csv&nbsp;=&nbsp;csv.writer(f)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;f_csv.writerows(data)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print(<span class="hljs-string" style="font-size:inherit;line-height:inherit;color:rgb(181,189,104);"> write_csv&nbsp;success </span>)<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-function" style="font-size:inherit;color:inherit;line-height:inherit;"><span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">def</span>&nbsp;<span class="hljs-title" style="font-size:inherit;line-height:inherit;color:rgb(240,198,116);">queryData</span><span class="hljs-params" style="font-size:inherit;color:inherit;line-height:inherit;">(self,&nbsp;sql)</span>:</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;db&nbsp;=&nbsp;pymysql.connect(<span class="hljs-string" style="font-size:inherit;line-height:inherit;color:rgb(181,189,104);">"localhost"</span>,&nbsp;<span class="hljs-string" style="font-size:inherit;line-height:inherit;color:rgb(181,189,104);">"zww"</span>,&nbsp;<span class="hljs-string" style="font-size:inherit;line-height:inherit;color:rgb(181,189,104);">"960128"</span>,&nbsp;<span class="hljs-string" style="font-size:inherit;line-height:inherit;color:rgb(181,189,104);">"test"</span>)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cursor&nbsp;=&nbsp;db.cursor()<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;results&nbsp;=&nbsp;[]<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">try</span>:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cursor.execute(sql)&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment" style="font-size:inherit;line-height:inherit;color:rgb(112,120,128);">#执行查询语句</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;results&nbsp;=&nbsp;cursor.fetchall()<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">except</span>&nbsp;Exception&nbsp;<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">as</span>&nbsp;e:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print(<span class="hljs-string" style="font-size:inherit;line-height:inherit;color:rgb(181,189,104);"> 查询时发生异常 </span>&nbsp;+&nbsp;e)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment" style="font-size:inherit;line-height:inherit;color:rgb(112,120,128);">#&nbsp;如果发生错误则回滚</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;db.rollback()<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment" style="font-size:inherit;line-height:inherit;color:rgb(112,120,128);">#&nbsp;关闭数据库连接</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;db.close()<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">return</span>&nbsp;results<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print(<span class="hljs-string" style="font-size:inherit;line-height:inherit;color:rgb(181,189,104);"> insert&nbsp;data&nbsp;success </span>)<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-function" style="font-size:inherit;color:inherit;line-height:inherit;"><span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">def</span>&nbsp;<span class="hljs-title" style="font-size:inherit;line-height:inherit;color:rgb(240,198,116);">insertData</span><span class="hljs-params" style="font-size:inherit;color:inherit;line-height:inherit;">(self,&nbsp;sql)</span>:</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment" style="font-size:inherit;line-height:inherit;color:rgb(112,120,128);">#&nbsp;打开数据库连接</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;db&nbsp;=&nbsp;pymysql.connect(<span class="hljs-string" style="font-size:inherit;line-height:inherit;color:rgb(181,189,104);">"localhost"</span>,&nbsp;<span class="hljs-string" style="font-size:inherit;line-height:inherit;color:rgb(181,189,104);">"zww"</span>,&nbsp;<span class="hljs-string" style="font-size:inherit;line-height:inherit;color:rgb(181,189,104);">"000000"</span>,&nbsp;<span class="hljs-string" style="font-size:inherit;line-height:inherit;color:rgb(181,189,104);">"zwwdb"</span>)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment" style="font-size:inherit;line-height:inherit;color:rgb(112,120,128);">#&nbsp;使用&nbsp;cursor()&nbsp;方法创建一个游标对象&nbsp;cursor</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cursor&nbsp;=&nbsp;db.cursor()<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">try</span>:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment" style="font-size:inherit;line-height:inherit;color:rgb(112,120,128);">#&nbsp;sql&nbsp;=&nbsp;"INSERT&nbsp;INTO&nbsp;WEATHER(w_id,&nbsp;w_date,&nbsp;w_detail,&nbsp;w_temperature)&nbsp;VALUES&nbsp;(null,&nbsp; %s , %s , %s )"&nbsp;%&nbsp;(data[0],&nbsp;data[1],&nbsp;data[2])</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cursor.execute(sql)&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment" style="font-size:inherit;line-height:inherit;color:rgb(112,120,128);">#单条数据写入</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment" style="font-size:inherit;line-height:inherit;color:rgb(112,120,128);">#&nbsp;提交到数据库执行</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;db.commit()<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">except</span>&nbsp;Exception&nbsp;<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">as</span>&nbsp;e:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print(<span class="hljs-string" style="font-size:inherit;line-height:inherit;color:rgb(181,189,104);"> 插入时发生异常 </span>&nbsp;+&nbsp;e)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment" style="font-size:inherit;line-height:inherit;color:rgb(112,120,128);">#&nbsp;如果发生错误则回滚</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;db.rollback()<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment" style="font-size:inherit;line-height:inherit;color:rgb(112,120,128);">#&nbsp;关闭数据库连接</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;db.close()<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print(<span class="hljs-string" style="font-size:inherit;line-height:inherit;color:rgb(181,189,104);"> insert&nbsp;data&nbsp;success </span>)<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-function" style="font-size:inherit;color:inherit;line-height:inherit;"><span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">def</span>&nbsp;<span class="hljs-title" style="font-size:inherit;line-height:inherit;color:rgb(240,198,116);">patchInsertData</span><span class="hljs-params" style="font-size:inherit;color:inherit;line-height:inherit;">(self,&nbsp;sql,&nbsp;datas)</span>:</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment" style="font-size:inherit;line-height:inherit;color:rgb(112,120,128);">#&nbsp;打开数据库连接</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;db&nbsp;=&nbsp;pymysql.connect(<span class="hljs-string" style="font-size:inherit;line-height:inherit;color:rgb(181,189,104);">"localhost"</span>,&nbsp;<span class="hljs-string" style="font-size:inherit;line-height:inherit;color:rgb(181,189,104);">"zww"</span>,&nbsp;<span class="hljs-string" style="font-size:inherit;line-height:inherit;color:rgb(181,189,104);">"960128"</span>,&nbsp;<span class="hljs-string" style="font-size:inherit;line-height:inherit;color:rgb(181,189,104);">"test"</span>)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment" style="font-size:inherit;line-height:inherit;color:rgb(112,120,128);">#&nbsp;使用&nbsp;cursor()&nbsp;方法创建一个游标对象&nbsp;cursor</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cursor&nbsp;=&nbsp;db.cursor()<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">try</span>:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment" style="font-size:inherit;line-height:inherit;color:rgb(112,120,128);">#&nbsp;批量插入数据</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment" style="font-size:inherit;line-height:inherit;color:rgb(112,120,128);">#&nbsp;cursor.executemany( insert&nbsp;into&nbsp;WEATHER(w_id,&nbsp;w_date,&nbsp;w_detail,&nbsp;w_temperature_low,&nbsp;w_temperature_high)&nbsp;value(null,&nbsp;%s,%s,%s,%s) ,datas)</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cursor.executemany(sql,&nbsp;datas)<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment" style="font-size:inherit;line-height:inherit;color:rgb(112,120,128);">#&nbsp;提交到数据库执行</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;db.commit()<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">except</span>&nbsp;Exception&nbsp;<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">as</span>&nbsp;e:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print(<span class="hljs-string" style="font-size:inherit;line-height:inherit;color:rgb(181,189,104);"> 插入时发生异常 </span>&nbsp;+&nbsp;e)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment" style="font-size:inherit;line-height:inherit;color:rgb(112,120,128);">#&nbsp;如果发生错误则回滚</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;db.rollback()<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment" style="font-size:inherit;line-height:inherit;color:rgb(112,120,128);">#&nbsp;关闭数据库连接</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;db.close()<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print(<span class="hljs-string" style="font-size:inherit;line-height:inherit;color:rgb(181,189,104);"> insert&nbsp;data&nbsp;success </span>)<br></pre>上面需要注意，数据库的配置。
   <pre style="font-size:inherit;color:inherit;line-height:inherit;"><span class="hljs-comment" style="font-size:inherit;line-height:inherit;color:rgb(112,120,128);">#&nbsp;-*-&nbsp;coding:utf-8&nbsp;-*-</span><br><span class="hljs-comment" style="font-size:inherit;line-height:inherit;color:rgb(112,120,128);">#&nbsp;Author:&nbsp;zww</span><br><br><span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">from</span>&nbsp;Include.commons.common&nbsp;<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">import</span>&nbsp;Common<br><span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">from</span>&nbsp;bs4&nbsp;<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">import</span>&nbsp;BeautifulSoup<br><span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">import</span>&nbsp;json<br><span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">import</span>&nbsp;re<br><span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">import</span>&nbsp;pymysql<br><br>common&nbsp;=&nbsp;Common()<br><br><span class="hljs-comment" style="font-size:inherit;line-height:inherit;color:rgb(112,120,128);">#&nbsp;获取商品id</span><br><span class="hljs-function" style="font-size:inherit;color:inherit;line-height:inherit;"><span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">def</span>&nbsp;<span class="hljs-title" style="font-size:inherit;line-height:inherit;color:rgb(240,198,116);">getProductIdList</span><span class="hljs-params" style="font-size:inherit;color:inherit;line-height:inherit;">()</span>:</span><br>&nbsp;&nbsp;&nbsp;&nbsp;url&nbsp;=&nbsp;<span class="hljs-string" style="font-size:inherit;line-height:inherit;color:rgb(181,189,104);"> https://list.tmall.com/search_product.htm?q=内衣 </span>&nbsp;<span class="hljs-comment" style="font-size:inherit;line-height:inherit;color:rgb(112,120,128);">#&nbsp;q参数&nbsp;是查询的关键字，这要改变一下查询值，就可以抓取任意你想知道的数据</span><br>&nbsp;&nbsp;&nbsp;&nbsp;html&nbsp;=&nbsp;common.getUrlContent(url)&nbsp;&nbsp;<span class="hljs-comment" style="font-size:inherit;line-height:inherit;color:rgb(112,120,128);">#&nbsp;获取网页信息</span><br>&nbsp;&nbsp;&nbsp;&nbsp;soup&nbsp;=&nbsp;BeautifulSoup(html,<span class="hljs-string" style="font-size:inherit;line-height:inherit;color:rgb(181,189,104);"> html.parser </span>)<br>&nbsp;&nbsp;&nbsp;&nbsp;idList&nbsp;=&nbsp;[]<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment" style="font-size:inherit;line-height:inherit;color:rgb(112,120,128);">#&nbsp;用Beautiful&nbsp;Soup提取商品页面中所有的商品ID</span><br>&nbsp;&nbsp;&nbsp;&nbsp;productList&nbsp;=&nbsp;soup.find_all(<span class="hljs-string" style="font-size:inherit;line-height:inherit;color:rgb(181,189,104);"> div </span>,&nbsp;{<span class="hljs-string" style="font-size:inherit;line-height:inherit;color:rgb(181,189,104);"> class </span>:&nbsp;<span class="hljs-string" style="font-size:inherit;line-height:inherit;color:rgb(181,189,104);"> product </span>})<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">for</span>&nbsp;product&nbsp;<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">in</span>&nbsp;productList:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;idList.append(product[<span class="hljs-string" style="font-size:inherit;line-height:inherit;color:rgb(181,189,104);"> data-id </span>])<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">return</span>&nbsp;idList<br><br><span class="hljs-comment" style="font-size:inherit;line-height:inherit;color:rgb(112,120,128);">#&nbsp;获取商品评论数据</span><br><span class="hljs-function" style="font-size:inherit;color:inherit;line-height:inherit;"><span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">def</span>&nbsp;<span class="hljs-title" style="font-size:inherit;line-height:inherit;color:rgb(240,198,116);">getCommentDetail</span><span class="hljs-params" style="font-size:inherit;color:inherit;line-height:inherit;">(itemId,currentPage)</span>:</span><br>&nbsp;&nbsp;&nbsp;&nbsp;url&nbsp;=&nbsp;<span class="hljs-string" style="font-size:inherit;line-height:inherit;color:rgb(181,189,104);"> https://rate.tmall.com/list_detail_rate.htm?itemId= </span>&nbsp;+&nbsp;str(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;itemId)&nbsp;+&nbsp;<span class="hljs-string" style="font-size:inherit;line-height:inherit;color:rgb(181,189,104);"> &amp;sellerId=2451699564&amp;order=3&amp;currentPage= </span>&nbsp;+&nbsp;str(currentPage)&nbsp;+&nbsp;<span class="hljs-string" style="font-size:inherit;line-height:inherit;color:rgb(181,189,104);"> &amp;append=0callback=jsonp336 </span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment" style="font-size:inherit;line-height:inherit;color:rgb(112,120,128);"># itemId 产品id ；sellerId 店铺id 字段必须有值，但随意值就行</span><br>&nbsp;&nbsp;&nbsp;&nbsp;html&nbsp;=&nbsp;common.getUrlContent(url)&nbsp;&nbsp;<span class="hljs-comment" style="font-size:inherit;line-height:inherit;color:rgb(112,120,128);">#&nbsp;获取网页信息</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment" style="font-size:inherit;line-height:inherit;color:rgb(112,120,128);">#&nbsp;删掉返回的多余信息</span><br>&nbsp;&nbsp;&nbsp;&nbsp;html&nbsp;=&nbsp;html.replace(<span class="hljs-string" style="font-size:inherit;line-height:inherit;color:rgb(181,189,104);"> jsonp128( </span>,<span class="hljs-string" style="font-size:inherit;line-height:inherit;color:rgb(181,189,104);">  </span>)&nbsp;<span class="hljs-comment" style="font-size:inherit;line-height:inherit;color:rgb(112,120,128);">#需要确定是不是&nbsp;jsonp128</span><br>&nbsp;&nbsp;&nbsp;&nbsp;html&nbsp;=&nbsp;html.replace(<span class="hljs-string" style="font-size:inherit;line-height:inherit;color:rgb(181,189,104);"> ) </span>,<span class="hljs-string" style="font-size:inherit;line-height:inherit;color:rgb(181,189,104);">  </span>)<br>&nbsp;&nbsp;&nbsp;&nbsp;html&nbsp;=&nbsp;html.replace(<span class="hljs-string" style="font-size:inherit;line-height:inherit;color:rgb(181,189,104);"> false </span>,<span class="hljs-string" style="font-size:inherit;line-height:inherit;color:rgb(181,189,104);"> "false" </span>)<br>&nbsp;&nbsp;&nbsp;&nbsp;html&nbsp;=&nbsp;html.replace(<span class="hljs-string" style="font-size:inherit;line-height:inherit;color:rgb(181,189,104);"> true </span>,<span class="hljs-string" style="font-size:inherit;line-height:inherit;color:rgb(181,189,104);"> "true" </span>)<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment" style="font-size:inherit;line-height:inherit;color:rgb(112,120,128);">#&nbsp;将string&nbsp;转换为字典对象</span><br>&nbsp;&nbsp;&nbsp;&nbsp;tmalljson&nbsp;=&nbsp;json.loads(html)<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">return</span>&nbsp;tmalljson<br><br><span class="hljs-comment" style="font-size:inherit;line-height:inherit;color:rgb(112,120,128);">#&nbsp;获取商品评论最大页数</span><br><span class="hljs-function" style="font-size:inherit;color:inherit;line-height:inherit;"><span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">def</span>&nbsp;<span class="hljs-title" style="font-size:inherit;line-height:inherit;color:rgb(240,198,116);">getLastPage</span><span class="hljs-params" style="font-size:inherit;color:inherit;line-height:inherit;">(itemId)</span>:</span><br>&nbsp;&nbsp;&nbsp;&nbsp;tmalljson&nbsp;=&nbsp;getCommentDetail(itemId,<span class="hljs-number" style="font-size:inherit;line-height:inherit;color:rgb(204,102,102);">1</span>)<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">return</span>&nbsp;tmalljson[<span class="hljs-string" style="font-size:inherit;line-height:inherit;color:rgb(181,189,104);"> rateDetail </span>][<span class="hljs-string" style="font-size:inherit;line-height:inherit;color:rgb(181,189,104);"> paginator </span>][<span class="hljs-string" style="font-size:inherit;line-height:inherit;color:rgb(181,189,104);"> lastPage </span>]&nbsp;<span class="hljs-comment" style="font-size:inherit;line-height:inherit;color:rgb(112,120,128);">#最大页数</span><br><br><span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">if</span>&nbsp;__name__&nbsp;==&nbsp;<span class="hljs-string" style="font-size:inherit;line-height:inherit;color:rgb(181,189,104);"> __main__ </span>:<br>&nbsp;&nbsp;&nbsp;&nbsp;productIdList&nbsp;=&nbsp;getProductIdList()&nbsp;<span class="hljs-comment" style="font-size:inherit;line-height:inherit;color:rgb(112,120,128);">#获取商品id</span><br>&nbsp;&nbsp;&nbsp;&nbsp;initial&nbsp;=&nbsp;<span class="hljs-number" style="font-size:inherit;line-height:inherit;color:rgb(204,102,102);">0</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">while</span>&nbsp;initial&nbsp;&lt;&nbsp;len(productIdList)&nbsp;-&nbsp;<span class="hljs-number" style="font-size:inherit;line-height:inherit;color:rgb(204,102,102);">30</span>:&nbsp;&nbsp;<span class="hljs-comment" style="font-size:inherit;line-height:inherit;color:rgb(112,120,128);">#&nbsp;总共有60个商品，我只取了前30个</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">try</span>:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;itemId&nbsp;=&nbsp;productIdList[initial]<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print(<span class="hljs-string" style="font-size:inherit;line-height:inherit;color:rgb(181,189,104);"> ---------- </span>,&nbsp;itemId,&nbsp;<span class="hljs-string" style="font-size:inherit;line-height:inherit;color:rgb(181,189,104);"> ------------ </span>)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;maxPage&nbsp;=&nbsp;getLastPage(itemId)&nbsp;<span class="hljs-comment" style="font-size:inherit;line-height:inherit;color:rgb(112,120,128);">#获取商品评论最大页数</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;num&nbsp;=&nbsp;<span class="hljs-number" style="font-size:inherit;line-height:inherit;color:rgb(204,102,102);">1</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">while</span>&nbsp;num&nbsp;&lt;=&nbsp;maxPage&nbsp;<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">and</span>&nbsp;num&nbsp;&lt;&nbsp;<span class="hljs-number" style="font-size:inherit;line-height:inherit;color:rgb(204,102,102);">20</span>:&nbsp;<span class="hljs-comment" style="font-size:inherit;line-height:inherit;color:rgb(112,120,128);">#每个商品的评论我最多取20&nbsp;页，每页有20条评论，也就是每个商品最多只取&nbsp;400&nbsp;个评论</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">try</span>:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment" style="font-size:inherit;line-height:inherit;color:rgb(112,120,128);">#&nbsp;抓取某个商品的某页评论数据</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tmalljson&nbsp;=&nbsp;getCommentDetail(itemId,&nbsp;num)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rateList&nbsp;=&nbsp;tmalljson[<span class="hljs-string" style="font-size:inherit;line-height:inherit;color:rgb(181,189,104);"> rateDetail </span>][<span class="hljs-string" style="font-size:inherit;line-height:inherit;color:rgb(181,189,104);"> rateList </span>]<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;commentList&nbsp;=&nbsp;[]<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;n&nbsp;=&nbsp;<span class="hljs-number" style="font-size:inherit;line-height:inherit;color:rgb(204,102,102);">0</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">while</span>&nbsp;(n&nbsp;&lt;&nbsp;len(rateList)):<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;comment&nbsp;=&nbsp;[]<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment" style="font-size:inherit;line-height:inherit;color:rgb(112,120,128);">#&nbsp;商品描述</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;colorSize&nbsp;=&nbsp;rateList[n][<span class="hljs-string" style="font-size:inherit;line-height:inherit;color:rgb(181,189,104);"> auctionSku </span>]<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;m&nbsp;=&nbsp;re.split(<span class="hljs-string" style="font-size:inherit;line-height:inherit;color:rgb(181,189,104);"> [:;] </span>,&nbsp;colorSize)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rateContent&nbsp;=&nbsp;rateList[n][<span class="hljs-string" style="font-size:inherit;line-height:inherit;color:rgb(181,189,104);"> rateContent </span>]<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dtime&nbsp;=&nbsp;rateList[n][<span class="hljs-string" style="font-size:inherit;line-height:inherit;color:rgb(181,189,104);"> rateDate </span>]<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;comment.append(m[<span class="hljs-number" style="font-size:inherit;line-height:inherit;color:rgb(204,102,102);">1</span>])<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;comment.append(m[<span class="hljs-number" style="font-size:inherit;line-height:inherit;color:rgb(204,102,102);">3</span>])<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;comment.append(<span class="hljs-string" style="font-size:inherit;line-height:inherit;color:rgb(181,189,104);"> 天猫 </span>)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;comment.append(rateContent)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;comment.append(dtime)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;commentList.append(comment)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;n&nbsp;+=&nbsp;<span class="hljs-number" style="font-size:inherit;line-height:inherit;color:rgb(204,102,102);">1</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print(num)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sql&nbsp;=&nbsp;<span class="hljs-string" style="font-size:inherit;line-height:inherit;color:rgb(181,189,104);">"insert&nbsp;into&nbsp;bras(bra_id,&nbsp;bra_color,&nbsp;bra_size,&nbsp;resource,&nbsp;comment,&nbsp;comment_time)&nbsp;&nbsp;value(null,&nbsp;%s,&nbsp;%s,&nbsp;%s,&nbsp;%s,&nbsp;%s)"</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;common.patchInsertData(sql,&nbsp;commentList)&nbsp;<span class="hljs-comment" style="font-size:inherit;line-height:inherit;color:rgb(112,120,128);">#&nbsp;mysql操作的批量插入</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;num&nbsp;+=&nbsp;<span class="hljs-number" style="font-size:inherit;line-height:inherit;color:rgb(204,102,102);">1</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">except</span>&nbsp;Exception&nbsp;<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">as</span>&nbsp;e:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;num&nbsp;+=&nbsp;<span class="hljs-number" style="font-size:inherit;line-height:inherit;color:rgb(204,102,102);">1</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print(e)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">continue</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;initial&nbsp;+=&nbsp;<span class="hljs-number" style="font-size:inherit;line-height:inherit;color:rgb(204,102,102);">1</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">except</span>&nbsp;Exception&nbsp;<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">as</span>&nbsp;e:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print(e)<br></pre>
   <h4 style="color:inherit;line-height:inherit;font-weight:bold;font-size:1.2em;"><span style="font-size:inherit;line-height:inherit;color:rgb(0,128,255);">存储、分析数据</span></h4>所有的代码都有了，就差数据库的建立了。我这里用的是 MySql 数据库。
   <pre style="font-size:inherit;color:inherit;line-height:inherit;"><span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">CREATE</span>&nbsp;<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">TABLE</span>&nbsp;<span class="hljs-string" style="font-size:inherit;line-height:inherit;color:rgb(181,189,104);">`bra`</span>&nbsp;(<br><span class="hljs-string" style="font-size:inherit;line-height:inherit;color:rgb(181,189,104);">`bra_id`</span>&nbsp;&nbsp;<span class="hljs-built_in" style="font-size:inherit;line-height:inherit;color:rgb(222,147,95);">int</span>(<span class="hljs-number" style="font-size:inherit;line-height:inherit;color:rgb(204,102,102);">11</span>)&nbsp;<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">NOT</span>&nbsp;<span class="hljs-literal" style="font-size:inherit;line-height:inherit;color:rgb(204,102,102);">NULL</span>&nbsp;AUTO_INCREMENT&nbsp;<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">COMMENT</span>&nbsp;<span class="hljs-string" style="font-size:inherit;line-height:inherit;color:rgb(181,189,104);"> id </span>&nbsp;,<br><span class="hljs-string" style="font-size:inherit;line-height:inherit;color:rgb(181,189,104);">`bra_color`</span>&nbsp;&nbsp;<span class="hljs-built_in" style="font-size:inherit;line-height:inherit;color:rgb(222,147,95);">varchar</span>(<span class="hljs-number" style="font-size:inherit;line-height:inherit;color:rgb(204,102,102);">25</span>)&nbsp;<span class="hljs-literal" style="font-size:inherit;line-height:inherit;color:rgb(204,102,102);">NULL</span>&nbsp;<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">COMMENT</span>&nbsp;<span class="hljs-string" style="font-size:inherit;line-height:inherit;color:rgb(181,189,104);"> 颜色 </span>&nbsp;,<br><span class="hljs-string" style="font-size:inherit;line-height:inherit;color:rgb(181,189,104);">`bra_size`</span>&nbsp;&nbsp;<span class="hljs-built_in" style="font-size:inherit;line-height:inherit;color:rgb(222,147,95);">varchar</span>(<span class="hljs-number" style="font-size:inherit;line-height:inherit;color:rgb(204,102,102);">25</span>)&nbsp;<span class="hljs-literal" style="font-size:inherit;line-height:inherit;color:rgb(204,102,102);">NULL</span>&nbsp;<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">COMMENT</span>&nbsp;<span class="hljs-string" style="font-size:inherit;line-height:inherit;color:rgb(181,189,104);"> 罩杯 </span>&nbsp;,<br><span class="hljs-string" style="font-size:inherit;line-height:inherit;color:rgb(181,189,104);">`resource`</span>&nbsp;&nbsp;<span class="hljs-built_in" style="font-size:inherit;line-height:inherit;color:rgb(222,147,95);">varchar</span>(<span class="hljs-number" style="font-size:inherit;line-height:inherit;color:rgb(204,102,102);">25</span>)&nbsp;<span class="hljs-literal" style="font-size:inherit;line-height:inherit;color:rgb(204,102,102);">NULL</span>&nbsp;<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">COMMENT</span>&nbsp;<span class="hljs-string" style="font-size:inherit;line-height:inherit;color:rgb(181,189,104);"> 数据来源 </span>&nbsp;,<br><span class="hljs-string" style="font-size:inherit;line-height:inherit;color:rgb(181,189,104);">`comment`</span>&nbsp;&nbsp;<span class="hljs-built_in" style="font-size:inherit;line-height:inherit;color:rgb(222,147,95);">varchar</span>(<span class="hljs-number" style="font-size:inherit;line-height:inherit;color:rgb(204,102,102);">500</span>)&nbsp;<span class="hljs-built_in" style="font-size:inherit;line-height:inherit;color:rgb(222,147,95);">CHARACTER</span>&nbsp;<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">SET</span>&nbsp;utf8mb4&nbsp;<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">DEFAULT</span>&nbsp;<span class="hljs-literal" style="font-size:inherit;line-height:inherit;color:rgb(204,102,102);">NULL</span>&nbsp;<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">COMMENT</span>&nbsp;<span class="hljs-string" style="font-size:inherit;line-height:inherit;color:rgb(181,189,104);"> 评论 </span>&nbsp;,<br><span class="hljs-string" style="font-size:inherit;line-height:inherit;color:rgb(181,189,104);">`comment_time`</span>&nbsp;&nbsp;datetime&nbsp;<span class="hljs-literal" style="font-size:inherit;line-height:inherit;color:rgb(204,102,102);">NULL</span>&nbsp;<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">COMMENT</span>&nbsp;<span class="hljs-string" style="font-size:inherit;line-height:inherit;color:rgb(181,189,104);"> 评论时间 </span>&nbsp;,<br>PRIMARY&nbsp;<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">KEY</span>&nbsp;(<span class="hljs-string" style="font-size:inherit;line-height:inherit;color:rgb(181,189,104);">`bra_id`</span>)<br>)&nbsp;<span class="hljs-built_in" style="font-size:inherit;line-height:inherit;color:rgb(222,147,95);">character</span>&nbsp;<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">set</span>&nbsp;utf8<br>;</pre>这里有两个地方需要注意， comment 评论字段需要设置编码格式为 utf8mb4 &nbsp;，因为可能有表情文字。还有表需要设置为 utf8 编码，不然存不了中文。
   <br>建好了表，就可以完整执行代码了。（这里的执行可能需要点时间，可以做成多线程的方式）。看一下执行完之后，数据库有没有数据。
   <img class="rich_pages" src="https://ss.csdn.net/p?https://mmbiz.qpic.cn/mmbiz_png/MJGgTibvywfW2OWlmHXPXxYWGVSdeWFSsC7UpYVZz5nWtuCCfhHXmOYMfiaxuMTgexCjVJGwA1FujiaIq8WbvpBZQ/640?wx_fmt=png" alt="640?wx_fmt=png">数据是有了，但是有些我们多余的文字描述，我们可以稍微整理一下。
   <br>
   <pre style="font-size:inherit;color:inherit;line-height:inherit;"><span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">update</span>&nbsp;bra&nbsp;<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">set</span>&nbsp;bra_color&nbsp;=&nbsp;<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">REPLACE</span>(bra_color,<span class="hljs-string" style="font-size:inherit;line-height:inherit;color:rgb(181,189,104);"> 2B6521-无钢圈4- </span>,<span class="hljs-string" style="font-size:inherit;line-height:inherit;color:rgb(181,189,104);">  </span>);<br><span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">update</span>&nbsp;bra&nbsp;<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">set</span>&nbsp;bra_color&nbsp;=&nbsp;<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">REPLACE</span>(bra_color,<span class="hljs-string" style="font-size:inherit;line-height:inherit;color:rgb(181,189,104);"> -1 </span>,<span class="hljs-string" style="font-size:inherit;line-height:inherit;color:rgb(181,189,104);">  </span>);<br><span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">update</span>&nbsp;bra&nbsp;<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">set</span>&nbsp;bra_color&nbsp;=&nbsp;<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">REPLACE</span>(bra_color,<span class="hljs-string" style="font-size:inherit;line-height:inherit;color:rgb(181,189,104);"> 5 </span>,<span class="hljs-string" style="font-size:inherit;line-height:inherit;color:rgb(181,189,104);">  </span>);<br><span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">update</span>&nbsp;bra&nbsp;<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">set</span>&nbsp;bra_size&nbsp;=&nbsp;<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">substr</span>(bra_size,<span class="hljs-number" style="font-size:inherit;line-height:inherit;color:rgb(204,102,102);">1</span>,<span class="hljs-number" style="font-size:inherit;line-height:inherit;color:rgb(204,102,102);">3</span>);<br></pre>这里需要根据自己实际情况来修改。如果数据整理的差不多了，我们可以分析一下数据库的信息。
   <pre style="font-size:inherit;color:inherit;line-height:inherit;"><span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">select</span>&nbsp;<span class="hljs-string" style="font-size:inherit;line-height:inherit;color:rgb(181,189,104);"> A罩杯 </span>&nbsp;<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">as</span>&nbsp;罩杯,&nbsp;<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">CONCAT</span>(<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">ROUND</span>(<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">COUNT</span>(*)/(<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">select</span>&nbsp;<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">count</span>(*)&nbsp;<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">from</span>&nbsp;bra)&nbsp;*&nbsp;<span class="hljs-number" style="font-size:inherit;line-height:inherit;color:rgb(204,102,102);">100</span>,&nbsp;<span class="hljs-number" style="font-size:inherit;line-height:inherit;color:rgb(204,102,102);">2</span>)&nbsp;,&nbsp;<span class="hljs-string" style="font-size:inherit;line-height:inherit;color:rgb(181,189,104);">"%"</span>)&nbsp;<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">as</span>&nbsp;比例,&nbsp;<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">COUNT</span>(*)&nbsp;<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">as</span>&nbsp;销量&nbsp;&nbsp;<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">from</span>&nbsp;bra&nbsp;<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">where</span>&nbsp;bra_size&nbsp;<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">like</span>&nbsp;<span class="hljs-string" style="font-size:inherit;line-height:inherit;color:rgb(181,189,104);"> %A </span><br><span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">union</span>&nbsp;all&nbsp;<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">select</span>&nbsp;<span class="hljs-string" style="font-size:inherit;line-height:inherit;color:rgb(181,189,104);"> B罩杯 </span>&nbsp;<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">as</span>&nbsp;罩杯,&nbsp;<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">CONCAT</span>(<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">ROUND</span>(<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">COUNT</span>(*)/(<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">select</span>&nbsp;<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">count</span>(*)&nbsp;<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">from</span>&nbsp;bra)&nbsp;*&nbsp;<span class="hljs-number" style="font-size:inherit;line-height:inherit;color:rgb(204,102,102);">100</span>,&nbsp;<span class="hljs-number" style="font-size:inherit;line-height:inherit;color:rgb(204,102,102);">2</span>)&nbsp;,&nbsp;<span class="hljs-string" style="font-size:inherit;line-height:inherit;color:rgb(181,189,104);">"%"</span>)&nbsp;<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">as</span>&nbsp;比例,&nbsp;<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">COUNT</span>(*)&nbsp;<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">as</span>&nbsp;销量&nbsp;&nbsp;<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">from</span>&nbsp;bra&nbsp;<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">where</span>&nbsp;bra_size&nbsp;<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">like</span>&nbsp;<span class="hljs-string" style="font-size:inherit;line-height:inherit;color:rgb(181,189,104);"> %B </span><br><span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">union</span>&nbsp;all&nbsp;<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">select</span>&nbsp;<span class="hljs-string" style="font-size:inherit;line-height:inherit;color:rgb(181,189,104);"> C罩杯 </span>&nbsp;<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">as</span>&nbsp;罩杯,&nbsp;<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">CONCAT</span>(<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">ROUND</span>(<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">COUNT</span>(*)/(<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">select</span>&nbsp;<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">count</span>(*)&nbsp;<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">from</span>&nbsp;bra)&nbsp;*&nbsp;<span class="hljs-number" style="font-size:inherit;line-height:inherit;color:rgb(204,102,102);">100</span>,&nbsp;<span class="hljs-number" style="font-size:inherit;line-height:inherit;color:rgb(204,102,102);">2</span>)&nbsp;,&nbsp;<span class="hljs-string" style="font-size:inherit;line-height:inherit;color:rgb(181,189,104);">"%"</span>)&nbsp;<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">as</span>&nbsp;比例,&nbsp;<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">COUNT</span>(*)&nbsp;<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">as</span>&nbsp;销量&nbsp;&nbsp;<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">from</span>&nbsp;bra&nbsp;<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">where</span>&nbsp;bra_size&nbsp;<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">like</span>&nbsp;<span class="hljs-string" style="font-size:inherit;line-height:inherit;color:rgb(181,189,104);"> %C </span><br><span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">union</span>&nbsp;all&nbsp;<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">select</span>&nbsp;<span class="hljs-string" style="font-size:inherit;line-height:inherit;color:rgb(181,189,104);"> D罩杯 </span>&nbsp;<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">as</span>&nbsp;罩杯,&nbsp;<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">CONCAT</span>(<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">ROUND</span>(<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">COUNT</span>(*)/(<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">select</span>&nbsp;<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">count</span>(*)&nbsp;<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">from</span>&nbsp;bra)&nbsp;*&nbsp;<span class="hljs-number" style="font-size:inherit;line-height:inherit;color:rgb(204,102,102);">100</span>,&nbsp;<span class="hljs-number" style="font-size:inherit;line-height:inherit;color:rgb(204,102,102);">2</span>)&nbsp;,&nbsp;<span class="hljs-string" style="font-size:inherit;line-height:inherit;color:rgb(181,189,104);">"%"</span>)&nbsp;<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">as</span>&nbsp;比例,&nbsp;<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">COUNT</span>(*)&nbsp;<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">as</span>&nbsp;销量&nbsp;&nbsp;<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">from</span>&nbsp;bra&nbsp;<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">where</span>&nbsp;bra_size&nbsp;<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">like</span>&nbsp;<span class="hljs-string" style="font-size:inherit;line-height:inherit;color:rgb(181,189,104);"> %D </span><br><span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">union</span>&nbsp;all&nbsp;<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">select</span>&nbsp;<span class="hljs-string" style="font-size:inherit;line-height:inherit;color:rgb(181,189,104);"> E罩杯 </span>&nbsp;<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">as</span>&nbsp;罩杯,&nbsp;<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">CONCAT</span>(<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">ROUND</span>(<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">COUNT</span>(*)/(<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">select</span>&nbsp;<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">count</span>(*)&nbsp;<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">from</span>&nbsp;bra)&nbsp;*&nbsp;<span class="hljs-number" style="font-size:inherit;line-height:inherit;color:rgb(204,102,102);">100</span>,&nbsp;<span class="hljs-number" style="font-size:inherit;line-height:inherit;color:rgb(204,102,102);">2</span>)&nbsp;,&nbsp;<span class="hljs-string" style="font-size:inherit;line-height:inherit;color:rgb(181,189,104);">"%"</span>)&nbsp;<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">as</span>&nbsp;比例,&nbsp;<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">COUNT</span>(*)&nbsp;<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">as</span>&nbsp;销量&nbsp;&nbsp;<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">from</span>&nbsp;bra&nbsp;<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">where</span>&nbsp;bra_size&nbsp;<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">like</span>&nbsp;<span class="hljs-string" style="font-size:inherit;line-height:inherit;color:rgb(181,189,104);"> %E </span><br><span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">union</span>&nbsp;all&nbsp;<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">select</span>&nbsp;<span class="hljs-string" style="font-size:inherit;line-height:inherit;color:rgb(181,189,104);"> F罩杯 </span>&nbsp;<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">as</span>&nbsp;罩杯,&nbsp;<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">CONCAT</span>(<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">ROUND</span>(<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">COUNT</span>(*)/(<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">select</span>&nbsp;<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">count</span>(*)&nbsp;<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">from</span>&nbsp;bra)&nbsp;*&nbsp;<span class="hljs-number" style="font-size:inherit;line-height:inherit;color:rgb(204,102,102);">100</span>,&nbsp;<span class="hljs-number" style="font-size:inherit;line-height:inherit;color:rgb(204,102,102);">2</span>)&nbsp;,&nbsp;<span class="hljs-string" style="font-size:inherit;line-height:inherit;color:rgb(181,189,104);">"%"</span>)&nbsp;<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">as</span>&nbsp;比例,&nbsp;<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">COUNT</span>(*)&nbsp;<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">as</span>&nbsp;销量&nbsp;&nbsp;<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">from</span>&nbsp;bra&nbsp;<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">where</span>&nbsp;bra_size&nbsp;<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">like</span>&nbsp;<span class="hljs-string" style="font-size:inherit;line-height:inherit;color:rgb(181,189,104);"> %F </span><br><span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">union</span>&nbsp;all&nbsp;<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">select</span>&nbsp;<span class="hljs-string" style="font-size:inherit;line-height:inherit;color:rgb(181,189,104);"> G罩杯 </span>&nbsp;<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">as</span>&nbsp;罩杯,&nbsp;<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">CONCAT</span>(<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">ROUND</span>(<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">COUNT</span>(*)/(<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">select</span>&nbsp;<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">count</span>(*)&nbsp;<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">from</span>&nbsp;bra)&nbsp;*&nbsp;<span class="hljs-number" style="font-size:inherit;line-height:inherit;color:rgb(204,102,102);">100</span>,&nbsp;<span class="hljs-number" style="font-size:inherit;line-height:inherit;color:rgb(204,102,102);">2</span>)&nbsp;,&nbsp;<span class="hljs-string" style="font-size:inherit;line-height:inherit;color:rgb(181,189,104);">"%"</span>)&nbsp;<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">as</span>&nbsp;比例,&nbsp;<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">COUNT</span>(*)&nbsp;<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">as</span>&nbsp;销量&nbsp;&nbsp;<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">from</span>&nbsp;bra&nbsp;<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">where</span>&nbsp;bra_size&nbsp;<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">like</span>&nbsp;<span class="hljs-string" style="font-size:inherit;line-height:inherit;color:rgb(181,189,104);"> %G </span><br><span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">union</span>&nbsp;all&nbsp;<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">select</span>&nbsp;<span class="hljs-string" style="font-size:inherit;line-height:inherit;color:rgb(181,189,104);"> H罩杯 </span>&nbsp;<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">as</span>&nbsp;罩杯,&nbsp;<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">CONCAT</span>(<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">ROUND</span>(<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">COUNT</span>(*)/(<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">select</span>&nbsp;<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">count</span>(*)&nbsp;<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">from</span>&nbsp;bra)&nbsp;*&nbsp;<span class="hljs-number" style="font-size:inherit;line-height:inherit;color:rgb(204,102,102);">100</span>,&nbsp;<span class="hljs-number" style="font-size:inherit;line-height:inherit;color:rgb(204,102,102);">2</span>)&nbsp;,&nbsp;<span class="hljs-string" style="font-size:inherit;line-height:inherit;color:rgb(181,189,104);">"%"</span>)&nbsp;<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">as</span>&nbsp;比例,&nbsp;<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">COUNT</span>(*)&nbsp;<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">as</span>&nbsp;销量&nbsp;&nbsp;<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">from</span>&nbsp;bra&nbsp;<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">where</span>&nbsp;bra_size&nbsp;<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">like</span>&nbsp;<span class="hljs-string" style="font-size:inherit;line-height:inherit;color:rgb(181,189,104);"> %H </span><br><span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">order</span>&nbsp;<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">by</span>&nbsp;销量&nbsp;<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(129,162,190);">desc</span>;</pre>
   <br>
   <img class="rich_pages" src="https://ss.csdn.net/p?https://mmbiz.qpic.cn/mmbiz_png/MJGgTibvywfW2OWlmHXPXxYWGVSdeWFSsVhpRPObowA8OqFa3jJLHGUeaSXrxRdwySV3XT9FmAVY0UddyzOzotg/640?wx_fmt=png" alt="640?wx_fmt=png">　
   <span style="color:rgb(136,136,136);">　</span>
   <span style="color:rgb(136,136,136);font-size:10px;">（想知道是哪6位小姐姐买的 G&nbsp;(～￣▽￣)～ ）</span>
   <br>
   <h4 style="color:inherit;line-height:inherit;font-weight:bold;font-size:1.2em;"><span style="font-size:inherit;line-height:inherit;color:rgb(0,128,255);">数据可视化</span></h4>数据的展示，我用了是 mycharts 模块，如果不了解的可以去学习一下http://pyecharts.org/#/zh-cn/prepare这里我就不细说了，直接贴代码看
   <pre style="font-size:inherit;color:inherit;line-height:inherit;"><span class="hljs-section" style="font-size:inherit;line-height:inherit;color:rgb(222,147,95);">#&nbsp;encoding:&nbsp;utf-8</span><br><span class="hljs-section" style="font-size:inherit;line-height:inherit;color:rgb(222,147,95);">#&nbsp;author&nbsp;zww</span><br><br>from&nbsp;pyecharts&nbsp;import&nbsp;Pie<br>from&nbsp;Include.commons.common&nbsp;import&nbsp;Common<br><br><br>if&nbsp;<span class="hljs-strong" style="font-size:inherit;color:inherit;line-height:inherit;font-weight:bold;">__name__</span>&nbsp;==&nbsp; <span class="hljs-strong" style="font-size:inherit;color:inherit;line-height:inherit;font-weight:bold;">__main__</span> :<br>&nbsp;&nbsp;&nbsp;&nbsp;common&nbsp;=&nbsp;Common()<br>&nbsp;&nbsp;&nbsp;&nbsp;results&nbsp;=&nbsp;common.queryData("""select&nbsp;count(*)&nbsp;from&nbsp;bra&nbsp;where&nbsp;bra_size&nbsp;like&nbsp; %A &nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;union&nbsp;all&nbsp;select&nbsp;count(*)&nbsp;from&nbsp;bra&nbsp;where&nbsp;bra_size&nbsp;like&nbsp; %B &nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;union&nbsp;all&nbsp;select&nbsp;count(*)&nbsp;from&nbsp;bra&nbsp;where&nbsp;bra_size&nbsp;like&nbsp; %C &nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;union&nbsp;all&nbsp;select&nbsp;count(*)&nbsp;from&nbsp;bra&nbsp;where&nbsp;bra_size&nbsp;like&nbsp; %D &nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;union&nbsp;all&nbsp;select&nbsp;count(*)&nbsp;from&nbsp;bra&nbsp;where&nbsp;bra_size&nbsp;like&nbsp; %E &nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;union&nbsp;all&nbsp;select&nbsp;count(*)&nbsp;from&nbsp;bra&nbsp;where&nbsp;bra_size&nbsp;like&nbsp; %F &nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;union&nbsp;all&nbsp;select&nbsp;count(*)&nbsp;from&nbsp;bra&nbsp;where&nbsp;bra_size&nbsp;like&nbsp; %G """)&nbsp;&nbsp;#&nbsp;获取每个罩杯数量<br>&nbsp;&nbsp;&nbsp;&nbsp;attr&nbsp;=&nbsp;["A罩杯",&nbsp; G罩杯 ,&nbsp;"B罩杯",&nbsp;"C罩杯",&nbsp;"D罩杯",&nbsp;"E罩杯",&nbsp;"F罩杯"]<br>&nbsp;&nbsp;&nbsp;&nbsp;v1&nbsp;=&nbsp;[<span class="hljs-string" style="font-size:inherit;line-height:inherit;color:rgb(181,189,104);">results[0</span>][<span class="hljs-symbol" style="font-size:inherit;line-height:inherit;color:rgb(204,102,102);">0</span>],&nbsp;results[<span class="hljs-string" style="font-size:inherit;line-height:inherit;color:rgb(181,189,104);">6</span>][<span class="hljs-symbol" style="font-size:inherit;line-height:inherit;color:rgb(204,102,102);">0</span>],&nbsp;results[<span class="hljs-string" style="font-size:inherit;line-height:inherit;color:rgb(181,189,104);">1</span>][<span class="hljs-symbol" style="font-size:inherit;line-height:inherit;color:rgb(204,102,102);">0</span>],&nbsp;results[<span class="hljs-string" style="font-size:inherit;line-height:inherit;color:rgb(181,189,104);">2</span>][<span class="hljs-symbol" style="font-size:inherit;line-height:inherit;color:rgb(204,102,102);">0</span>],&nbsp;results[<span class="hljs-string" style="font-size:inherit;line-height:inherit;color:rgb(181,189,104);">3</span>][<span class="hljs-symbol" style="font-size:inherit;line-height:inherit;color:rgb(204,102,102);">0</span>],&nbsp;results[<span class="hljs-string" style="font-size:inherit;line-height:inherit;color:rgb(181,189,104);">4</span>][<span class="hljs-symbol" style="font-size:inherit;line-height:inherit;color:rgb(204,102,102);">0</span>],&nbsp;results[<span class="hljs-string" style="font-size:inherit;line-height:inherit;color:rgb(181,189,104);">5</span>][<span class="hljs-symbol" style="font-size:inherit;line-height:inherit;color:rgb(204,102,102);">0</span>]]<br>&nbsp;&nbsp;&nbsp;&nbsp;pie&nbsp;=&nbsp;Pie("内衣罩杯",&nbsp;width=1300,&nbsp;height=620)<br>&nbsp;&nbsp;&nbsp;&nbsp;pie.add("",&nbsp;attr,&nbsp;v1,&nbsp;is<span class="hljs-emphasis" style="font-size:inherit;color:inherit;line-height:inherit;font-style:italic;">_label_</span>show=True)<br>&nbsp;&nbsp;&nbsp;&nbsp;pie.render( size.html )<br>&nbsp;&nbsp;&nbsp;&nbsp;print( success )<br><br>&nbsp;&nbsp;&nbsp;&nbsp;results&nbsp;=&nbsp;common.queryData("""select&nbsp;count(*)&nbsp;from&nbsp;bra&nbsp;where&nbsp;bra_color&nbsp;like&nbsp; %肤% &nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;union&nbsp;all&nbsp;select&nbsp;count(*)&nbsp;from&nbsp;bra&nbsp;where&nbsp;bra_color&nbsp;like&nbsp; %灰% &nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;union&nbsp;all&nbsp;select&nbsp;count(*)&nbsp;from&nbsp;bra&nbsp;where&nbsp;bra_color&nbsp;like&nbsp; %黑% &nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;union&nbsp;all&nbsp;select&nbsp;count(*)&nbsp;from&nbsp;bra&nbsp;where&nbsp;bra_color&nbsp;like&nbsp; %蓝% &nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;union&nbsp;all&nbsp;select&nbsp;count(*)&nbsp;from&nbsp;bra&nbsp;where&nbsp;bra_color&nbsp;like&nbsp; %粉% &nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;union&nbsp;all&nbsp;select&nbsp;count(*)&nbsp;from&nbsp;bra&nbsp;where&nbsp;bra_color&nbsp;like&nbsp; %红% &nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;union&nbsp;all&nbsp;select&nbsp;count(*)&nbsp;from&nbsp;bra&nbsp;where&nbsp;bra_color&nbsp;like&nbsp; %紫% &nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;union&nbsp;all&nbsp;select&nbsp;count(*)&nbsp;from&nbsp;bra&nbsp;where&nbsp;bra_color&nbsp;like&nbsp; %绿% &nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;union&nbsp;all&nbsp;select&nbsp;count(*)&nbsp;from&nbsp;bra&nbsp;where&nbsp;bra_color&nbsp;like&nbsp; %白% &nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;union&nbsp;all&nbsp;select&nbsp;count(*)&nbsp;from&nbsp;bra&nbsp;where&nbsp;bra_color&nbsp;like&nbsp; %褐% &nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;union&nbsp;all&nbsp;select&nbsp;count(*)&nbsp;from&nbsp;bra&nbsp;where&nbsp;bra_color&nbsp;like&nbsp; %黄% &nbsp;""")&nbsp;&nbsp;#&nbsp;获取每个罩杯数量<br>&nbsp;&nbsp;&nbsp;&nbsp;attr&nbsp;=&nbsp;["肤色",&nbsp; 灰色 ,&nbsp;"黑色",&nbsp;"蓝色",&nbsp;"粉色",&nbsp;"红色",&nbsp;"紫色",&nbsp; 绿色 ,&nbsp;"白色",&nbsp;"褐色",&nbsp;"黄色"]<br>&nbsp;&nbsp;&nbsp;&nbsp;v1&nbsp;=&nbsp;[<span class="hljs-string" style="font-size:inherit;line-height:inherit;color:rgb(181,189,104);">results[0</span>][<span class="hljs-symbol" style="font-size:inherit;line-height:inherit;color:rgb(204,102,102);">0</span>],&nbsp;results[<span class="hljs-string" style="font-size:inherit;line-height:inherit;color:rgb(181,189,104);">1</span>][<span class="hljs-symbol" style="font-size:inherit;line-height:inherit;color:rgb(204,102,102);">0</span>],&nbsp;results[<span class="hljs-string" style="font-size:inherit;line-height:inherit;color:rgb(181,189,104);">2</span>][<span class="hljs-symbol" style="font-size:inherit;line-height:inherit;color:rgb(204,102,102);">0</span>],&nbsp;results[<span class="hljs-string" style="font-size:inherit;line-height:inherit;color:rgb(181,189,104);">3</span>][<span class="hljs-symbol" style="font-size:inherit;line-height:inherit;color:rgb(204,102,102);">0</span>],&nbsp;results[<span class="hljs-string" style="font-size:inherit;line-height:inherit;color:rgb(181,189,104);">4</span>][<span class="hljs-symbol" style="font-size:inherit;line-height:inherit;color:rgb(204,102,102);">0</span>],&nbsp;results[<span class="hljs-string" style="font-size:inherit;line-height:inherit;color:rgb(181,189,104);">5</span>][<span class="hljs-symbol" style="font-size:inherit;line-height:inherit;color:rgb(204,102,102);">0</span>],&nbsp;results[<span class="hljs-string" style="font-size:inherit;line-height:inherit;color:rgb(181,189,104);">6</span>][<span class="hljs-symbol" style="font-size:inherit;line-height:inherit;color:rgb(204,102,102);">0</span>],&nbsp;results[<span class="hljs-string" style="font-size:inherit;line-height:inherit;color:rgb(181,189,104);">7</span>][<span class="hljs-symbol" style="font-size:inherit;line-height:inherit;color:rgb(204,102,102);">0</span>],&nbsp;results[<span class="hljs-string" style="font-size:inherit;line-height:inherit;color:rgb(181,189,104);">8</span>][<span class="hljs-symbol" style="font-size:inherit;line-height:inherit;color:rgb(204,102,102);">0</span>],&nbsp;results[<span class="hljs-string" style="font-size:inherit;line-height:inherit;color:rgb(181,189,104);">9</span>][<span class="hljs-symbol" style="font-size:inherit;line-height:inherit;color:rgb(204,102,102);">0</span>],&nbsp;results[<span class="hljs-string" style="font-size:inherit;line-height:inherit;color:rgb(181,189,104);">10</span>][<span class="hljs-symbol" style="font-size:inherit;line-height:inherit;color:rgb(204,102,102);">0</span>]]<br>&nbsp;&nbsp;&nbsp;&nbsp;pieColor&nbsp;=&nbsp;Pie("内衣颜色",&nbsp;width=1300,&nbsp;height=620)<br>&nbsp;&nbsp;&nbsp;&nbsp;pieColor.add("",&nbsp;attr,&nbsp;v1,&nbsp;is<span class="hljs-emphasis" style="font-size:inherit;color:inherit;line-height:inherit;font-style:italic;">_label_</span>show=True)<br>&nbsp;&nbsp;&nbsp;&nbsp;pieColor.render( color.html )<br>&nbsp;&nbsp;&nbsp;&nbsp;print( success )<br></pre>这一章就到这里了，该知道的你也知道了，不该知道的你也知道了。哪些人是G杯，哪些妹子是A杯，以后找对象就不用担心这块的了。
   <strong>代码已放到github, 点击文末阅读原文，获取全部源码。</strong>
   <p style="margin-left:16px;min-height:1em;letter-spacing:.544px;font-size:16px;text-align:center;font-family:'微软雅黑';color:rgb(63,63,63);"><span style="text-decoration:underline;font-size:15px;color:rgb(0,0,0);"><strong>推荐阅读</strong></span><br></p>
   <strong><span style="text-decoration:underline;color:rgb(0,0,0);font-size:12px;"><a href="https://blog.csdn.net/dQCFKyQDXYm3F8rB0/article/details/97703112" rel="nofollow" data-token="d309ef88f0dca245c07ce464e26c6af2">超全！深度学习在计算机视觉领域的应用一览</a><br></span></strong>
   <strong><span style="text-decoration:underline;color:rgb(0,0,0);font-size:12px;"><a href="http://mp.weixin.qq.com/s?__biz=MzIxODM4MjA5MA==&amp;mid=2247490216&amp;idx=3&amp;sn=6c6a28e56d8b12dbfebee7fc00ccfedc&amp;chksm=97ea30cda09db9db87eecd67e41416fa226f07e2fbd4e4a707f0e55a249d389224642689bd33&amp;scene=21#wechat_redirect" rel="nofollow" data-token="0d8491d4f357703d7c18d3fd11e90e63">都All in AI啦，应该自己学会补全 Python 代码了！</a></span></strong>
   <span style="text-decoration:underline;font-size:15px;color:rgb(0,0,0);"><br></span>
   <strong><span style="text-decoration:underline;color:rgb(0,0,0);font-size:12px;"><a href="http://mp.weixin.qq.com/s?__biz=MzIxODM4MjA5MA==&amp;mid=2247490204&amp;idx=1&amp;sn=53de50aacef67746ec67f31525581de9&amp;chksm=97ea30f9a09db9ef9e17dcc18ca83c81e0543c40770740cc2ed24eec3df926737112349177f5&amp;scene=21#wechat_redirect" rel="nofollow" data-token="a02e5f486a02c972fed3bce01fda3e97">收藏！！BAT 程序员们常用的开发工具</a><br></span></strong>
   <strong><span style="text-decoration:underline;color:rgb(0,0,0);font-size:12px;"><a href="http://mp.weixin.qq.com/s?__biz=MzIxODM4MjA5MA==&amp;mid=2247490204&amp;idx=2&amp;sn=7b11248bb31ed9b01e71f4a1a79fc02e&amp;chksm=97ea30f9a09db9ef8f4e051107a6d188cf52ba7284e9fc073c2d0f36a610d9379d102df0008a&amp;scene=21#wechat_redirect" rel="nofollow" data-token="f43094d531289fdca2cc5c29f4dcaadd">8200+ Star！Python学习的必备法宝，随查随用</a></span></strong>
   <strong><span style="text-decoration:underline;color:rgb(0,0,0);font-size:12px;"><a href="http://mp.weixin.qq.com/s?__biz=MzIxODM4MjA5MA==&amp;mid=2247490193&amp;idx=1&amp;sn=c1b91b5c264df0d981220128a0d03745&amp;chksm=97ea30f4a09db9e2935cdb31a7098df91f80a0165773b8d1dcc0f129aa2ac6712a7f52c862e2&amp;scene=21#wechat_redirect" rel="nofollow" data-token="dc476792682b7da8c1dbd18518cf80f7">Google Q2 利润暴增 211%，但业务营收危机依然在</a></span></strong>
   <p style="margin-left:16px;min-height:1em;font-family:'-apple-system-font', BlinkMacSystemFont, 'Helvetica Neue', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei UI', 'Microsoft YaHei', Arial, sans-serif;letter-spacing:.544px;text-align:center;font-size:15px;color:rgb(62,62,62);"><img width="500" style="letter-spacing:.544px;border-width:0px;" src="https://ss.csdn.net/p?https://mmbiz.qpic.cn/mmbiz_png/KdayOo3PqHDIurOfIatYehahcqXDLC7d51EsSdVb7Ulu1bOWmfhtfDYxESJ9uwtcwibicicKicZem0uDo3cFnSRKow/640?wx_fmt=png" alt="640?wx_fmt=png"></p>
   <p style="margin-left:16px;min-height:1em;text-align:right;"><span style="color:rgb(255,0,0);"><strong><span style="font-size:15px;">喜欢就点击“在看”吧！</span></strong></span></p>
  </div> 
 </div> 
</div>

	<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
	<!-- 自定义广告 -->
	<ins class="adsbygoogle"
	     style="display:block"
	     data-ad-client="ca-pub-8889449066804352"
	     data-ad-slot="1494696990"
	     data-ad-format="auto"
	     data-full-width-responsive="true"></ins>
	<script>
		(adsbygoogle = window.adsbygoogle || []).push({});
	</script>


        <br />
        <a href="https://uzshare.com/">更多精彩内容</a>
      </section>
      
      <header style="right: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
        <ul style="display: block;">
          <li><a href="/" style="line-height: 40px;padding-top:0px;">回首页</a></li>
        </ul>
      </header>
      <header class="sm-hidden" style="right: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
          <img src="https://uzzz.org.cn/imgqcode.png" style="width:160px;" />
      </header>
      
      <header class="sm-hidden" style="left: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
          <img src="https://uzzz.org.cn/hou_imgqcode.png" style="width:160px;">
      </header>
    </div>
    
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->

    <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?d293c49e1e4bfe8f276695a5aa953300";
      var s = document.getElementsByTagName("script")[0]; 
      s.parentNode.insertBefore(hm, s);
    })();
    </script>

  </body>
</html>
