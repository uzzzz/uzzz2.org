<!doctype html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

<!-- Begin Jekyll SEO tag v2.5.0 -->
<title>周志华《机器学习》第二章：模型评估与选择（1） | 有组织在！</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="周志华《机器学习》第二章：模型评估与选择（1）" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="    上一章主要介绍何为机器学习、机器学习相关基础概念、发展历程以及应用现状，力求使读者能够一窥机器学习全貌。本章主要研究应该如何评价学得模型，并加以选择。本章共分5个小节，2.1节先介绍了机器学习模型中的一些常见术语，并说明了&quot;学得模型&quot;不可避免的两个问题：欠拟合与过拟合，并引出如何做模型评估的问题；2.2节介绍了常用的评估方法；2.3节介绍了常见的性能度量指标；2.4节阐述了在有了评估方法与性能度量指标的情况下，应该怎么进行比较检验；2.5节介绍“偏差-方差”，用于解释模型的泛化能力。 2.1 经验误差与过拟合   首先定义几个常见的概念： 错误率=分类错误的样本数/样本总数， E = a m . E=\frac{a}{m}. E=ma​. 精度=1-错误率. 误差：学习器的实际预测输出与样本的真是输出之间的误差叫做“误差”     （1）训练误差 ：学习器在训练集上的误差，training errer；     （2）泛化误差 ：学习器在测试集上的误差,generalization errer。     显而易见，泛化误差代表学习器对未知样本的预测能力，我们希望学习到泛化误差小的模型。但是我们并不能事先知道新样本的数据信息（否则不会叫做新样本），能够做的只有不断地优化模型、减小训练误差。但是，训练误差最小的学习器真的是最优解，会在新样本上同样取得最小的泛化误差吗？未必。学习器在训练集上学习到训练误差最小时，通常会把训练集本身的特征当作适用于所有样本的“潜在特征”而加以学习，从而导致学习器的泛化能力反而降低，即“过拟合”。与“过拟合”相对应的是“欠拟合”，即学习器没能充分学习训练集，从而生成能力强的模型     一般来说，“欠拟合”较容易克服，我们通常可以在神经网络中增加训练轮数、在决策树中增加分支来解决。但是“过拟合”更麻烦一些，它也是机器学习需要克服的关键障碍。再好的模型，都会多少有一点过拟合，这是无法避免的。但是我们可以通过种种手段来“缓解”过拟合。     书中在这里提到了“ P = ̸ N P P=\not NP P≠​NP”的问题，这是多项式复杂程度的非确定性问题,在这里提及只是为了证明过拟合无法避免而已。 P P P包含所有那些可以由一个确定型图灵机在多项式表达的时间内解决的问题， N P NP NP由所有其肯定解可以在给定正确信息的多项式时间内验证的决定问题组成。     用人话来说， P P P就是可以在多项式时间内解决的问题， N P NP NP就是可以在多项式时间内能够验证问题正确与否的问题，显然 P = ̸ N P P=\not NP P≠​NP,否则就会出现“验证问题=证明问题”的悖论。因此书中说，只要我们相信“ P = ̸ N P P=\not NP P≠​NP”，就必须相信机器学习学得模型的”过拟合“问题无法避免。     针对同一个现实任务，往往有多种算法可供我们选择，并且即使选择的算法相同，但是模型中参数配置不同，最后也会产生不同的结果。那么我们应该如何针对问题选出“最好”的学得模型呢？这就涉及“模型评估与选择”。（注意这里的最好是打引号的，因为我们在上一章中证明过，不考虑实际问题的话，所有的算法是无论优劣的，NFL定理）     那么该怎么选择模型呢？泛化误差我们说过，是得不到的；而训练误差又不可以直接作为评估模型的标准。我们需要研究评估方法，通过实验测试来选择“最好的“模型。 2.2 评估方法     我们应该怎样用实验的手段来“评估”学习器的泛化误差呢？使用“测试集”（testing set）来测试学习器对新样本的泛化能力，即用测试误差来近似泛化误差。 在第一章中我们做过假设：样本空间中所有样本均服从同一分布 D \mathcal{D} D，在这里我们依然沿用这个假设，假设训练集和测试集的样本都是从样本真实分布中独立采样而来。这就好办了，我们可以将同一个数据集划分成训练集 S S S和测试集 T T T，二者必须互斥。具体划分方法有很多，书中列出以下方法。 2.2.1 留出法(hold-out)     直接将数据集 D D D分成对立的训练集 S S S和测试集 T T T，注意要尽可能保持数据分布的一致性，划分时要做到“分层采样”，按照比例从 D D D中每类数据中划分。     留出法有一弊端：即便S/T比例确定，每次划分也都是人为的，算出的测试误差并不可靠，需要多次随机划分，拿到多个测试误差，取其均值。除了这个弊端，留出法引出了一个矛盾：若令训练集包含大多数样本，虽然训练出的模型更接近用数据集 D D D训练的模型，但是由于测试集数据过少，不能用测试误差去近似泛化误差；相反，如果测试集包含相当数量的样本，又会导致用训练集学到的模型与用数据集 D D D训练的模型相差较大。 2.2.2 交叉验证(cross-validation)     交叉验证法对上述问题做了一些修正：令 D = D 1 ⋃ D 2 ⋃ . . . ⋃ D k D=D_1\bigcup D_2\bigcup ...\bigcup D_k D=D1​⋃D2​⋃...⋃Dk​，每个子集 D i D_i Di​按照分层采样划分。用k-1个子集做训练集，剩下的一个子集做测试集，重复k次，确保每个子集都会充当一次测试集。将这k次实验的平均结果作为测试误差。又叫k-fold cross-validation.     留一法是一种特例，每次充当测试集的只有一个样本，相比于上述方法，这更准确，但是计算量大。另外，留一法的评估效果并不会一定比其他方法更准确，NFL定理同样适用。 2.2.3 自助法(bootstrapping)     我们希望评估的是用数据集 D D D训练的模型，但是上述方法都会从 D D D中抽出一部分样本作为测试集，这并不理想。自助法不仅可以减小训练规模不同而造成的影响，还可以较为高效的进行实验估计。     自助法是在非参数估计中的一种重要的估计统计方差，从而进行区间估计的统计方法。给定包含 m m m个样本的数据集 D D D,每次从中随机取出一个样本放入数据集 D ′ D^{&amp;#x27;} D′，然后仍放回数据集 D D D中，重复 m m m次。显然，我们基于数据集 D D D生成了一个新的同样包含 m m m个样本的数据集 D ′ D^{&amp;#x27;} D′，且在 D D D中有 lim ⁡ m → + ∞ ( 1 − 1 m ) m ≈ 0.368 \lim_{m\rightarrow+\infty} (1-\frac{1}{m})^m\approx0.368 limm→+∞​(1−m1​)m≈0.368的样本不会出现在 D + D^+ D+中。用 D ′ D^{&amp;#x27;} D′做训练集， D / D ′ D/D^{&amp;#x27;} D/D′做测试集得到的测试误差又叫“包外估计”。     自助法的优缺点都很明显，一方面，从 D D D中生成若干数据集 D ′ D^{&amp;#x27;} D′，相当于扩增了原始数据量，比较适合原始数据量较少，难以有效划分S/T的情况；另一方面， D ′ D^{&amp;#x27;} D′的分布规律势必与 D D D不同，会产生额外的估计误差。所以自助法适用于经验分布与原始分布估计一致的情况。 2.2.4 调参与最终模型    本章开头我们讨论了如何评估学习器的“泛化误差”，就是将数据集划分为S+T，用测试误差来近似泛化误差。2.2.1~2.2.3节我们讨论了三种划分S/T的方法：hold-out、k-fold cross-validation、bootstrapping。这里思考调参的问题。    用S训练模型，并没有利用全部的数据，所以应遵循下述步骤： 给定数据集 D D D，划分S/T； 利用S训练模型； 利用T测试模型； 调参； 用D再次训练； 提交模型 2.3 性能度量     对学习器的泛化性能进行评估，除了有效的评估方法，还要有衡量模型泛化能力的评价标准，即性能度量（performance measure）。在预测任务中，给定样例集 D = { ( x 1 ⃗ , y 1 ) , ( x 2 ⃗ , y 2 ) , . . . , ( x m ⃗ , y m ) } D=\{(\vec{x_1},y_1),(\vec{x_2},y_2),...,(\vec{x_m},y_m)\} D={(x1​ ​,y1​),(x2​ ​,y2​),...,(xm​ ​,ym​)}，其中 y i y_i yi​是示例 x i ⃗ \vec{x_i} xi​ ​的真实标记。     在回归任务中，常见的性能度量是“均方误差”： E ( f ; D ) = 1 m ∑ i = 1 m ( f ( x i ) − y i ) 2 E(f;D)=\frac{1}{m}\displaystyle{\sum^{m}_{i=1}}(f(x_i)-y_i)^2 E(f;D)=m1​i=1∑m​(f(xi​)−yi​)2，更一般的： &nbsp; E ( f ; D ) = ∫ x ∈ D ( f ( x ) − y ) 2 ⋅ p ( x ) d x \ E(f;D)=\int_{x\in D} (f(x)-y)^2\cdot p(x){\rm d}x &nbsp;E(f;D)=∫x∈D​(f(x)−y)2⋅p(x)dx     在分类任务中，常见指标如下： 2.3.1 错误率与精度 分类错误率 E ( f ; D ) = 1 m ∑ i = 1 m Ⅱ ( f ( x i ) = ̸ y i ) E(f;D)=\frac{1}{m}\displaystyle{\sum^{m}_{i=1}}Ⅱ(f(x_i)=\not y_i) E(f;D)=m1​i=1∑m​Ⅱ(f(xi​)≠​yi​)，更一般的，设概率密度为 p ( ⋅ ) p(\cdot) p(⋅)： &nbsp; E ( f ; D ) = ∫ x ∈ D Ⅱ ( f ( x ) = ̸ y ) ⋅ p ( x ) d x \begin{aligned} \ E(f;D)=\int_{x\in D} Ⅱ(f(x)=\not y)\cdot p(x){\rm d}x \end{aligned} &nbsp;E(f;D)=∫x∈D​Ⅱ(f(x)≠​y)⋅p(x)dx​ 精度 a c c = 1 − E ( f ; D ) acc=1-E(f;D) acc=1−E(f;D) 2.3.2 查准率、查全率与F1 对于二分类问题，可根据 f ( x i ) f(x_i) f(xi​)与 y i y_i yi​的关系将样例划分为： 表2.1 分类结果混淆矩阵 真实情况 预测结果 正例 反例 正例 TP(真正例) FN(假反例) 反例 FP(假正例) TN(真反例) 查准率 P = T P T P + F P P=\frac{TP}{TP+FP} P=TP+FPTP​ 查全率 R = T P T P + F N R=\frac{TP}{TP+FN} R=TP+FNTP​     查准率与查全率互相矛盾，这很好理解。有时我们需要根据学习器的预测结果对样例排序，根据排序结果来判断哪个样例“最有可能是正例”，以此顺序将样例逐个预测为“正例”，就能够计算出当前的查准率与查全率，从而得到“P-R”曲线。不同学习器的“P-R”曲线如下图所示：     若一个学习器的“P-R”曲线能够将另一个学习器完全包住，则可断言前者性能优于后者，否则不可轻易判断孰优孰劣，需要结合其他信息判断。很容易想到一个指标就是曲线包围面积，可这并不好求；另一个指标就是“平衡点”（Break Even Point，简称BEP）,BEP=P=R。第三个指标是P与R的调和平均数： F 1 = 2 × P × R P + R = 2 × T P 样 例 总 数 + T P − T N \begin{aligned} \\&amp;amp; F1=\frac{2\times P\times R}{P+R}=\frac{2\times TP}{样例总数+TP-TN} \end{aligned} ​F1=P+R2×P×R​=样例总数+TP−TN2×TP​​     相比于几算术平均数和何平均数， F 1 F1 F1更注重小值。此外，在一般应用中，对查准率与查全率的关注程度是不同的，我们用 β \beta β表示查全率对查准率的重要程度，将上式改写成： &nbsp; F β = ( 1 + β 2 ) × P × R ( β 2 × P ) + R \begin{aligned} \ F_\beta=\frac{(1+\beta^2)\times P\times R}{(\beta^2\times P)+R} \end{aligned} &nbsp;Fβ​=(β2×P)+R(1+β2)×P×R​​      β &amp;gt; 1 \beta &amp;gt;1 β&gt;1时，查全率 R R R有更大影响； β &amp;lt; 1 \beta &amp;lt;1 β&lt;1时，查准率 P P P有更大影响。     考虑我们此时拥有多个二分类混淆矩阵，我们该如何考察查全率与查准率呢？一种做法就是在各个混淆矩阵上分别计算查全率与查准率，再计算平均值，得到“宏查全率”、“宏查准率”以及相应的“宏F1”： m a c r o _ R = 1 n ∑ i = 1 n R i m a c r o _ P = 1 n ∑ i = 1 n P i m a c r o _ F 1 = 2 × m a c r o _ P × m a c r o _ R m a c r o _ P + m a c r o _ R \begin{aligned} \\&amp;amp; macro\_R=\frac{1}{n}\displaystyle{\sum^{n}_{i=1}}R_i \\&amp;amp; macro\_P=\frac{1}{n}\displaystyle{\sum^{n}_{i=1}}P_i \\&amp;amp; macro\_F1=\frac{2\times macro\_P\times macro\_R}{macro\_P+macro\_R} \end{aligned} ​macro_R=n1​i=1∑n​Ri​macro_P=n1​i=1∑n​Pi​macro_F1=macro_P+macro_R2×macro_P×macro_R​​     另外一种方法是先在每个二分类混淆矩阵上计算 T P ‾ 、 F P ‾ 、 F N ‾ 、 T N ‾ \overline{TP}、\overline{FP}、\overline{FN}、\overline{TN} TP、FP、FN、TN，再计算得到“微查全率”“微查准率”与“ 微 F 1 微F1 微F1”： m i c r o _ R = T P ‾ T P ‾ + F P ‾ m i c r o _ P = T P ‾ T P ‾ + F N ‾ m i c r o _ F 1 = 2 × m i c r o _ P × m i c r o _ R m i c r o _ P + m i c r o _ R \begin{aligned} \\&amp;amp; micro\_R=\frac{\overline{TP}}{\overline{TP}+\overline{FP}} \\&amp;amp; micro\_P=\frac{\overline{TP}}{\overline{TP}+\overline{FN}} \\&amp;amp; micro\_F1=\frac{2\times micro\_P\times micro\_R}{micro\_P+micro\_R} \end{aligned} ​micro_R=TP+FPTP​micro_P=TP+FNTP​micro_F1=micro_P+micro_R2×micro_P×micro_R​​ 2.3.3 ROC与AUC     通常学习器预测的结果是一个在 [ 0 , 1 ] [0,1] [0,1]区间的数值，我们可将预测数值排序，越接近1，表示当前样本越接近正例。在不同的任务中，我们往往根据需要设置不同的截断点：若要求较高的查全率，则截断点必须后移；若要求较高的查准率，截断点必须前移。因此，预测结果的排序质量，直接体现着学习器在不同任务下的“期望泛化性能”的好坏。换句话说，这体现着学习器在一般情况下的好坏。ROC曲线正是从这个角度对学习器进行评估。     ROC，即“Receiver Operating Characteristic”“受试者工作特征”，源于二战中对雷达信号的分析，后引入机器学习领域。我们将学习器做出的预测结果排序，逐个把样例预测为正例，每次计算出两个数值，并以这两个数值为坐标轴绘制ROC曲线。横轴为“假正例率”（FPR），纵轴为“真正例率”（TPR）： F P R = F P F P + T N T P R = T P T P + F N \begin{aligned} \\&amp;amp; FPR=\frac{FP}{FP+TN} \\&amp;amp; TPR=\frac{TP}{TP+FN} \end{aligned} ​FPR=FP+TNFP​TPR=TP+FNTP​​ 考虑这样几个特例： 1.当预测结果全为反例时， T P = F P = 0 TP=FP=0 TP=FP=0，从而 T P R = F P R = 0 TPR=FPR=0 TPR=FPR=0，对应ROC曲线原 点 ( 0 , 0 ) (0,0) (0,0) 2.当预测结果全为正例时， T N = F N = 0 TN=FN=0 TN=FN=0，从而 T P R = F P R = 1 TPR=FPR=1 TPR=FPR=1 ,对应点 ( 1 , 1 ) (1,1) (1,1)点 3.当预测结果中所有样例均预测正确，换句话说，所有真实标签为“正例”的示例均排在标签为“反例”的示例之前，则 T P = 1 , F P = 0 TP=1,FP=0 TP=1,FP=0，从而 T P R = 1 , F P R = 0 TPR=1,FPR=0 TPR=1,FPR=0，对应点 ( 0 , 1 ) (0,1) (0,1) 4.当所有样例的真实标签与预测结果恰好全部相反时， T N = T P = 0 TN=TP=0 TN=TP=0，对应点 ( 1 , 0 ) (1,0) (1,0).     现实任务中，样例是有限的，只能像上图右侧这样画成分段的曲线。（类似于计算机控制中的第一象限插补）设给定 m + m^+ m+个正例， m + − m^+- m+−个反例，具体做法： 将分类阈值调整到最大，所有样例设为反例，计算 ( F P R , T P R ) (FPR,TPR) (FPR,TPR)作为曲线原点； 样例按照预测结果排序，依次以预测结果为分类阈值进行计算； 若当前为正例，则 ( x , y + 1 m + ) (x,y+\frac{1}{m^+}) (x,y+m+1​)；若当前为反例，则 ( x + 1 m − , y ) (x+\frac{1}{m^-},y) (x+m−1​,y)；     类似“P-R”曲线，若一个学习器的ROC曲线能够“包住”另一个学习器的曲线，可断定前者性能优于后者。否则需另行判断：计算ROC曲线包围的面积AUC（Area Under ROC Curve）: A U C = 1 2 ∑ i = 1 m − 1 ( x i + 1 − x i ) ( y i + y i + 1 ) AUC=\frac{1}{2}\displaystyle{\sum_{i=1}^{m-1}(x_{i+1}-x_i)(y_i+y_{i+1})} AUC=21​i=1∑m−1​(xi+1​−xi​)(yi​+yi+1​)     我们在开始的时候说过，ROC曲线体现的是预测结果的排序质量，所以AUC与排序误差密切相关。从这个角度去理解AUC，可得： A U C = 1 m + m − ∑ x + ∈ D + ∑ x − ∈ D − Ⅱ ( f ( x + ) &amp;gt; f ( x − ) ) AUC=\frac{1}{m_+m_-}\displaystyle{\sum_{x^+\in D^+}}\displaystyle{\sum_{x^-\in D^-}}Ⅱ(f(x^+)&amp;gt;f(x^-)) AUC=m+​m−​1​x+∈D+∑​x−∈D−∑​Ⅱ(f(x+)&gt;f(x−))     从反方向定义排序“损失”： l r a n k = 1 m + m − ∑ x + ∈ D + ∑ x − ∈ D − ( Ⅱ ( f ( x + ) &amp;lt; f ( x − ) ) + 1 2 Ⅱ ( f ( x + ) = f ( x − ) ) ) l_{rank}=\frac{1}{m_+m_-}\displaystyle{\sum_{x^+\in D^+}}\displaystyle{\sum_{x^-\in D^-}}(Ⅱ(f(x^+)&amp;lt;f(x^-))+\frac{1}{2}Ⅱ(f(x^+)=f(x^-))) lrank​=m+​m−​1​x+∈D+∑​x−∈D−∑​(Ⅱ(f(x+)&lt;f(x−))+21​Ⅱ(f(x+)=f(x−)))     显然 A U C = 1 − l r a n k AUC=1-l_{rank} AUC=1−lrank​。 2.3.4 代价敏感错误率与代价曲线      R O C − A U C ROC-AUC ROC−AUC体现的是学习器在一般情况下的好坏，我们在其计算过程中默认各种分类错误造成的后果是一样的，即所有类型的错误“均等代价”，但这有时不合常理，有些错误一定会比其它错误造成的后果更严重。我们可以用“非均等代价”来衡量这种不平等程度。以二分类为例： 表2.2 二分类代价矩阵 真实类别 预测类别 第0类 第1类 第0类 0 cost_01 第1类 cost_10 0     代价“敏感”的错误率： E ( f : D ) = 1 m ( ∑ x + ∈ D + Ⅱ ( f ( x i ) = ̸ y i ) × c o s t 01 + ∑ x − ∈ D − Ⅱ ( f ( x i ) = ̸ y i ) × c o s t 10 ) E(f:D)= \frac{1}{m}(\displaystyle{\sum_{x^+\in D^+}Ⅱ(f(x_i)=\not y_i)\times cost_{01}+\sum_{x^-\in D^-}Ⅱ(f(x_i)=\not y_i)\times cost_{10}}) E(f:D)=m1​(x+∈D+∑​Ⅱ(f(xi​)≠​yi​)×cost01​+x−∈D−∑​Ⅱ(f(xi​)≠​yi​)×cost10​)     在“非均等代价”下，ROC曲线不再能够代表学习器的期望总体代价，我们采用“代价曲线”来实现这一任务。代价曲线的横轴是取值在 [ 0 , 1 ] [0,1] [0,1]之间的正例概率代价，式中 p p p是样例为正的概率。 P ( + ) c o s t = p × c o s t 01 p × c o s t 01 + ( 1 − p ) × c o s t 10 P(+)cost=\frac{p\times cost_{01}}{p\times cost_{01}+(1-p)\times cost_{10}} P(+)cost=p×cost01​+(1−p)×cost10​p×cost01​​     纵轴是归一化代价： c o s t n o r m = F N R × p × c o s t 01 + F P R × ( 1 − p ) × c o s t 10 p × c o s t 01 + ( 1 − p ) × c o s t 10 cost_{norm}=\frac{FNR\times p\times cost_{01}+FPR\times (1-p)\times cost_{10}}{p\times cost_{01}+(1-p)\times cost_{10}} costnorm​=p×cost01​+(1−p)×cost10​FNR×p×cost01​+FPR×(1−p)×cost10​​      p = 0 p=0 p=0对应 ( 0 , F P R ) (0,FPR) (0,FPR)， p = 1 p=1 p=1对应 ( 1 , F N R ) (1,FNR) (1,FNR)，且这条曲线肯定是直的，那么我们就能把它画出来。ROC曲线上一个点对应代价曲线上一条直线。横纵坐标都是概率，一条代价曲线下方的面积就代表“在一种条件下学习器的期望总体代价”。那么我们将对应于ROC曲线上每一个点的代价曲线都画出来，其下方面积的交集就是“在所有条件下学习器的期望总体代价”。如图所示：" />
<meta property="og:description" content="    上一章主要介绍何为机器学习、机器学习相关基础概念、发展历程以及应用现状，力求使读者能够一窥机器学习全貌。本章主要研究应该如何评价学得模型，并加以选择。本章共分5个小节，2.1节先介绍了机器学习模型中的一些常见术语，并说明了&quot;学得模型&quot;不可避免的两个问题：欠拟合与过拟合，并引出如何做模型评估的问题；2.2节介绍了常用的评估方法；2.3节介绍了常见的性能度量指标；2.4节阐述了在有了评估方法与性能度量指标的情况下，应该怎么进行比较检验；2.5节介绍“偏差-方差”，用于解释模型的泛化能力。 2.1 经验误差与过拟合   首先定义几个常见的概念： 错误率=分类错误的样本数/样本总数， E = a m . E=\frac{a}{m}. E=ma​. 精度=1-错误率. 误差：学习器的实际预测输出与样本的真是输出之间的误差叫做“误差”     （1）训练误差 ：学习器在训练集上的误差，training errer；     （2）泛化误差 ：学习器在测试集上的误差,generalization errer。     显而易见，泛化误差代表学习器对未知样本的预测能力，我们希望学习到泛化误差小的模型。但是我们并不能事先知道新样本的数据信息（否则不会叫做新样本），能够做的只有不断地优化模型、减小训练误差。但是，训练误差最小的学习器真的是最优解，会在新样本上同样取得最小的泛化误差吗？未必。学习器在训练集上学习到训练误差最小时，通常会把训练集本身的特征当作适用于所有样本的“潜在特征”而加以学习，从而导致学习器的泛化能力反而降低，即“过拟合”。与“过拟合”相对应的是“欠拟合”，即学习器没能充分学习训练集，从而生成能力强的模型     一般来说，“欠拟合”较容易克服，我们通常可以在神经网络中增加训练轮数、在决策树中增加分支来解决。但是“过拟合”更麻烦一些，它也是机器学习需要克服的关键障碍。再好的模型，都会多少有一点过拟合，这是无法避免的。但是我们可以通过种种手段来“缓解”过拟合。     书中在这里提到了“ P = ̸ N P P=\not NP P≠​NP”的问题，这是多项式复杂程度的非确定性问题,在这里提及只是为了证明过拟合无法避免而已。 P P P包含所有那些可以由一个确定型图灵机在多项式表达的时间内解决的问题， N P NP NP由所有其肯定解可以在给定正确信息的多项式时间内验证的决定问题组成。     用人话来说， P P P就是可以在多项式时间内解决的问题， N P NP NP就是可以在多项式时间内能够验证问题正确与否的问题，显然 P = ̸ N P P=\not NP P≠​NP,否则就会出现“验证问题=证明问题”的悖论。因此书中说，只要我们相信“ P = ̸ N P P=\not NP P≠​NP”，就必须相信机器学习学得模型的”过拟合“问题无法避免。     针对同一个现实任务，往往有多种算法可供我们选择，并且即使选择的算法相同，但是模型中参数配置不同，最后也会产生不同的结果。那么我们应该如何针对问题选出“最好”的学得模型呢？这就涉及“模型评估与选择”。（注意这里的最好是打引号的，因为我们在上一章中证明过，不考虑实际问题的话，所有的算法是无论优劣的，NFL定理）     那么该怎么选择模型呢？泛化误差我们说过，是得不到的；而训练误差又不可以直接作为评估模型的标准。我们需要研究评估方法，通过实验测试来选择“最好的“模型。 2.2 评估方法     我们应该怎样用实验的手段来“评估”学习器的泛化误差呢？使用“测试集”（testing set）来测试学习器对新样本的泛化能力，即用测试误差来近似泛化误差。 在第一章中我们做过假设：样本空间中所有样本均服从同一分布 D \mathcal{D} D，在这里我们依然沿用这个假设，假设训练集和测试集的样本都是从样本真实分布中独立采样而来。这就好办了，我们可以将同一个数据集划分成训练集 S S S和测试集 T T T，二者必须互斥。具体划分方法有很多，书中列出以下方法。 2.2.1 留出法(hold-out)     直接将数据集 D D D分成对立的训练集 S S S和测试集 T T T，注意要尽可能保持数据分布的一致性，划分时要做到“分层采样”，按照比例从 D D D中每类数据中划分。     留出法有一弊端：即便S/T比例确定，每次划分也都是人为的，算出的测试误差并不可靠，需要多次随机划分，拿到多个测试误差，取其均值。除了这个弊端，留出法引出了一个矛盾：若令训练集包含大多数样本，虽然训练出的模型更接近用数据集 D D D训练的模型，但是由于测试集数据过少，不能用测试误差去近似泛化误差；相反，如果测试集包含相当数量的样本，又会导致用训练集学到的模型与用数据集 D D D训练的模型相差较大。 2.2.2 交叉验证(cross-validation)     交叉验证法对上述问题做了一些修正：令 D = D 1 ⋃ D 2 ⋃ . . . ⋃ D k D=D_1\bigcup D_2\bigcup ...\bigcup D_k D=D1​⋃D2​⋃...⋃Dk​，每个子集 D i D_i Di​按照分层采样划分。用k-1个子集做训练集，剩下的一个子集做测试集，重复k次，确保每个子集都会充当一次测试集。将这k次实验的平均结果作为测试误差。又叫k-fold cross-validation.     留一法是一种特例，每次充当测试集的只有一个样本，相比于上述方法，这更准确，但是计算量大。另外，留一法的评估效果并不会一定比其他方法更准确，NFL定理同样适用。 2.2.3 自助法(bootstrapping)     我们希望评估的是用数据集 D D D训练的模型，但是上述方法都会从 D D D中抽出一部分样本作为测试集，这并不理想。自助法不仅可以减小训练规模不同而造成的影响，还可以较为高效的进行实验估计。     自助法是在非参数估计中的一种重要的估计统计方差，从而进行区间估计的统计方法。给定包含 m m m个样本的数据集 D D D,每次从中随机取出一个样本放入数据集 D ′ D^{&amp;#x27;} D′，然后仍放回数据集 D D D中，重复 m m m次。显然，我们基于数据集 D D D生成了一个新的同样包含 m m m个样本的数据集 D ′ D^{&amp;#x27;} D′，且在 D D D中有 lim ⁡ m → + ∞ ( 1 − 1 m ) m ≈ 0.368 \lim_{m\rightarrow+\infty} (1-\frac{1}{m})^m\approx0.368 limm→+∞​(1−m1​)m≈0.368的样本不会出现在 D + D^+ D+中。用 D ′ D^{&amp;#x27;} D′做训练集， D / D ′ D/D^{&amp;#x27;} D/D′做测试集得到的测试误差又叫“包外估计”。     自助法的优缺点都很明显，一方面，从 D D D中生成若干数据集 D ′ D^{&amp;#x27;} D′，相当于扩增了原始数据量，比较适合原始数据量较少，难以有效划分S/T的情况；另一方面， D ′ D^{&amp;#x27;} D′的分布规律势必与 D D D不同，会产生额外的估计误差。所以自助法适用于经验分布与原始分布估计一致的情况。 2.2.4 调参与最终模型    本章开头我们讨论了如何评估学习器的“泛化误差”，就是将数据集划分为S+T，用测试误差来近似泛化误差。2.2.1~2.2.3节我们讨论了三种划分S/T的方法：hold-out、k-fold cross-validation、bootstrapping。这里思考调参的问题。    用S训练模型，并没有利用全部的数据，所以应遵循下述步骤： 给定数据集 D D D，划分S/T； 利用S训练模型； 利用T测试模型； 调参； 用D再次训练； 提交模型 2.3 性能度量     对学习器的泛化性能进行评估，除了有效的评估方法，还要有衡量模型泛化能力的评价标准，即性能度量（performance measure）。在预测任务中，给定样例集 D = { ( x 1 ⃗ , y 1 ) , ( x 2 ⃗ , y 2 ) , . . . , ( x m ⃗ , y m ) } D=\{(\vec{x_1},y_1),(\vec{x_2},y_2),...,(\vec{x_m},y_m)\} D={(x1​ ​,y1​),(x2​ ​,y2​),...,(xm​ ​,ym​)}，其中 y i y_i yi​是示例 x i ⃗ \vec{x_i} xi​ ​的真实标记。     在回归任务中，常见的性能度量是“均方误差”： E ( f ; D ) = 1 m ∑ i = 1 m ( f ( x i ) − y i ) 2 E(f;D)=\frac{1}{m}\displaystyle{\sum^{m}_{i=1}}(f(x_i)-y_i)^2 E(f;D)=m1​i=1∑m​(f(xi​)−yi​)2，更一般的： &nbsp; E ( f ; D ) = ∫ x ∈ D ( f ( x ) − y ) 2 ⋅ p ( x ) d x \ E(f;D)=\int_{x\in D} (f(x)-y)^2\cdot p(x){\rm d}x &nbsp;E(f;D)=∫x∈D​(f(x)−y)2⋅p(x)dx     在分类任务中，常见指标如下： 2.3.1 错误率与精度 分类错误率 E ( f ; D ) = 1 m ∑ i = 1 m Ⅱ ( f ( x i ) = ̸ y i ) E(f;D)=\frac{1}{m}\displaystyle{\sum^{m}_{i=1}}Ⅱ(f(x_i)=\not y_i) E(f;D)=m1​i=1∑m​Ⅱ(f(xi​)≠​yi​)，更一般的，设概率密度为 p ( ⋅ ) p(\cdot) p(⋅)： &nbsp; E ( f ; D ) = ∫ x ∈ D Ⅱ ( f ( x ) = ̸ y ) ⋅ p ( x ) d x \begin{aligned} \ E(f;D)=\int_{x\in D} Ⅱ(f(x)=\not y)\cdot p(x){\rm d}x \end{aligned} &nbsp;E(f;D)=∫x∈D​Ⅱ(f(x)≠​y)⋅p(x)dx​ 精度 a c c = 1 − E ( f ; D ) acc=1-E(f;D) acc=1−E(f;D) 2.3.2 查准率、查全率与F1 对于二分类问题，可根据 f ( x i ) f(x_i) f(xi​)与 y i y_i yi​的关系将样例划分为： 表2.1 分类结果混淆矩阵 真实情况 预测结果 正例 反例 正例 TP(真正例) FN(假反例) 反例 FP(假正例) TN(真反例) 查准率 P = T P T P + F P P=\frac{TP}{TP+FP} P=TP+FPTP​ 查全率 R = T P T P + F N R=\frac{TP}{TP+FN} R=TP+FNTP​     查准率与查全率互相矛盾，这很好理解。有时我们需要根据学习器的预测结果对样例排序，根据排序结果来判断哪个样例“最有可能是正例”，以此顺序将样例逐个预测为“正例”，就能够计算出当前的查准率与查全率，从而得到“P-R”曲线。不同学习器的“P-R”曲线如下图所示：     若一个学习器的“P-R”曲线能够将另一个学习器完全包住，则可断言前者性能优于后者，否则不可轻易判断孰优孰劣，需要结合其他信息判断。很容易想到一个指标就是曲线包围面积，可这并不好求；另一个指标就是“平衡点”（Break Even Point，简称BEP）,BEP=P=R。第三个指标是P与R的调和平均数： F 1 = 2 × P × R P + R = 2 × T P 样 例 总 数 + T P − T N \begin{aligned} \\&amp;amp; F1=\frac{2\times P\times R}{P+R}=\frac{2\times TP}{样例总数+TP-TN} \end{aligned} ​F1=P+R2×P×R​=样例总数+TP−TN2×TP​​     相比于几算术平均数和何平均数， F 1 F1 F1更注重小值。此外，在一般应用中，对查准率与查全率的关注程度是不同的，我们用 β \beta β表示查全率对查准率的重要程度，将上式改写成： &nbsp; F β = ( 1 + β 2 ) × P × R ( β 2 × P ) + R \begin{aligned} \ F_\beta=\frac{(1+\beta^2)\times P\times R}{(\beta^2\times P)+R} \end{aligned} &nbsp;Fβ​=(β2×P)+R(1+β2)×P×R​​      β &amp;gt; 1 \beta &amp;gt;1 β&gt;1时，查全率 R R R有更大影响； β &amp;lt; 1 \beta &amp;lt;1 β&lt;1时，查准率 P P P有更大影响。     考虑我们此时拥有多个二分类混淆矩阵，我们该如何考察查全率与查准率呢？一种做法就是在各个混淆矩阵上分别计算查全率与查准率，再计算平均值，得到“宏查全率”、“宏查准率”以及相应的“宏F1”： m a c r o _ R = 1 n ∑ i = 1 n R i m a c r o _ P = 1 n ∑ i = 1 n P i m a c r o _ F 1 = 2 × m a c r o _ P × m a c r o _ R m a c r o _ P + m a c r o _ R \begin{aligned} \\&amp;amp; macro\_R=\frac{1}{n}\displaystyle{\sum^{n}_{i=1}}R_i \\&amp;amp; macro\_P=\frac{1}{n}\displaystyle{\sum^{n}_{i=1}}P_i \\&amp;amp; macro\_F1=\frac{2\times macro\_P\times macro\_R}{macro\_P+macro\_R} \end{aligned} ​macro_R=n1​i=1∑n​Ri​macro_P=n1​i=1∑n​Pi​macro_F1=macro_P+macro_R2×macro_P×macro_R​​     另外一种方法是先在每个二分类混淆矩阵上计算 T P ‾ 、 F P ‾ 、 F N ‾ 、 T N ‾ \overline{TP}、\overline{FP}、\overline{FN}、\overline{TN} TP、FP、FN、TN，再计算得到“微查全率”“微查准率”与“ 微 F 1 微F1 微F1”： m i c r o _ R = T P ‾ T P ‾ + F P ‾ m i c r o _ P = T P ‾ T P ‾ + F N ‾ m i c r o _ F 1 = 2 × m i c r o _ P × m i c r o _ R m i c r o _ P + m i c r o _ R \begin{aligned} \\&amp;amp; micro\_R=\frac{\overline{TP}}{\overline{TP}+\overline{FP}} \\&amp;amp; micro\_P=\frac{\overline{TP}}{\overline{TP}+\overline{FN}} \\&amp;amp; micro\_F1=\frac{2\times micro\_P\times micro\_R}{micro\_P+micro\_R} \end{aligned} ​micro_R=TP+FPTP​micro_P=TP+FNTP​micro_F1=micro_P+micro_R2×micro_P×micro_R​​ 2.3.3 ROC与AUC     通常学习器预测的结果是一个在 [ 0 , 1 ] [0,1] [0,1]区间的数值，我们可将预测数值排序，越接近1，表示当前样本越接近正例。在不同的任务中，我们往往根据需要设置不同的截断点：若要求较高的查全率，则截断点必须后移；若要求较高的查准率，截断点必须前移。因此，预测结果的排序质量，直接体现着学习器在不同任务下的“期望泛化性能”的好坏。换句话说，这体现着学习器在一般情况下的好坏。ROC曲线正是从这个角度对学习器进行评估。     ROC，即“Receiver Operating Characteristic”“受试者工作特征”，源于二战中对雷达信号的分析，后引入机器学习领域。我们将学习器做出的预测结果排序，逐个把样例预测为正例，每次计算出两个数值，并以这两个数值为坐标轴绘制ROC曲线。横轴为“假正例率”（FPR），纵轴为“真正例率”（TPR）： F P R = F P F P + T N T P R = T P T P + F N \begin{aligned} \\&amp;amp; FPR=\frac{FP}{FP+TN} \\&amp;amp; TPR=\frac{TP}{TP+FN} \end{aligned} ​FPR=FP+TNFP​TPR=TP+FNTP​​ 考虑这样几个特例： 1.当预测结果全为反例时， T P = F P = 0 TP=FP=0 TP=FP=0，从而 T P R = F P R = 0 TPR=FPR=0 TPR=FPR=0，对应ROC曲线原 点 ( 0 , 0 ) (0,0) (0,0) 2.当预测结果全为正例时， T N = F N = 0 TN=FN=0 TN=FN=0，从而 T P R = F P R = 1 TPR=FPR=1 TPR=FPR=1 ,对应点 ( 1 , 1 ) (1,1) (1,1)点 3.当预测结果中所有样例均预测正确，换句话说，所有真实标签为“正例”的示例均排在标签为“反例”的示例之前，则 T P = 1 , F P = 0 TP=1,FP=0 TP=1,FP=0，从而 T P R = 1 , F P R = 0 TPR=1,FPR=0 TPR=1,FPR=0，对应点 ( 0 , 1 ) (0,1) (0,1) 4.当所有样例的真实标签与预测结果恰好全部相反时， T N = T P = 0 TN=TP=0 TN=TP=0，对应点 ( 1 , 0 ) (1,0) (1,0).     现实任务中，样例是有限的，只能像上图右侧这样画成分段的曲线。（类似于计算机控制中的第一象限插补）设给定 m + m^+ m+个正例， m + − m^+- m+−个反例，具体做法： 将分类阈值调整到最大，所有样例设为反例，计算 ( F P R , T P R ) (FPR,TPR) (FPR,TPR)作为曲线原点； 样例按照预测结果排序，依次以预测结果为分类阈值进行计算； 若当前为正例，则 ( x , y + 1 m + ) (x,y+\frac{1}{m^+}) (x,y+m+1​)；若当前为反例，则 ( x + 1 m − , y ) (x+\frac{1}{m^-},y) (x+m−1​,y)；     类似“P-R”曲线，若一个学习器的ROC曲线能够“包住”另一个学习器的曲线，可断定前者性能优于后者。否则需另行判断：计算ROC曲线包围的面积AUC（Area Under ROC Curve）: A U C = 1 2 ∑ i = 1 m − 1 ( x i + 1 − x i ) ( y i + y i + 1 ) AUC=\frac{1}{2}\displaystyle{\sum_{i=1}^{m-1}(x_{i+1}-x_i)(y_i+y_{i+1})} AUC=21​i=1∑m−1​(xi+1​−xi​)(yi​+yi+1​)     我们在开始的时候说过，ROC曲线体现的是预测结果的排序质量，所以AUC与排序误差密切相关。从这个角度去理解AUC，可得： A U C = 1 m + m − ∑ x + ∈ D + ∑ x − ∈ D − Ⅱ ( f ( x + ) &amp;gt; f ( x − ) ) AUC=\frac{1}{m_+m_-}\displaystyle{\sum_{x^+\in D^+}}\displaystyle{\sum_{x^-\in D^-}}Ⅱ(f(x^+)&amp;gt;f(x^-)) AUC=m+​m−​1​x+∈D+∑​x−∈D−∑​Ⅱ(f(x+)&gt;f(x−))     从反方向定义排序“损失”： l r a n k = 1 m + m − ∑ x + ∈ D + ∑ x − ∈ D − ( Ⅱ ( f ( x + ) &amp;lt; f ( x − ) ) + 1 2 Ⅱ ( f ( x + ) = f ( x − ) ) ) l_{rank}=\frac{1}{m_+m_-}\displaystyle{\sum_{x^+\in D^+}}\displaystyle{\sum_{x^-\in D^-}}(Ⅱ(f(x^+)&amp;lt;f(x^-))+\frac{1}{2}Ⅱ(f(x^+)=f(x^-))) lrank​=m+​m−​1​x+∈D+∑​x−∈D−∑​(Ⅱ(f(x+)&lt;f(x−))+21​Ⅱ(f(x+)=f(x−)))     显然 A U C = 1 − l r a n k AUC=1-l_{rank} AUC=1−lrank​。 2.3.4 代价敏感错误率与代价曲线      R O C − A U C ROC-AUC ROC−AUC体现的是学习器在一般情况下的好坏，我们在其计算过程中默认各种分类错误造成的后果是一样的，即所有类型的错误“均等代价”，但这有时不合常理，有些错误一定会比其它错误造成的后果更严重。我们可以用“非均等代价”来衡量这种不平等程度。以二分类为例： 表2.2 二分类代价矩阵 真实类别 预测类别 第0类 第1类 第0类 0 cost_01 第1类 cost_10 0     代价“敏感”的错误率： E ( f : D ) = 1 m ( ∑ x + ∈ D + Ⅱ ( f ( x i ) = ̸ y i ) × c o s t 01 + ∑ x − ∈ D − Ⅱ ( f ( x i ) = ̸ y i ) × c o s t 10 ) E(f:D)= \frac{1}{m}(\displaystyle{\sum_{x^+\in D^+}Ⅱ(f(x_i)=\not y_i)\times cost_{01}+\sum_{x^-\in D^-}Ⅱ(f(x_i)=\not y_i)\times cost_{10}}) E(f:D)=m1​(x+∈D+∑​Ⅱ(f(xi​)≠​yi​)×cost01​+x−∈D−∑​Ⅱ(f(xi​)≠​yi​)×cost10​)     在“非均等代价”下，ROC曲线不再能够代表学习器的期望总体代价，我们采用“代价曲线”来实现这一任务。代价曲线的横轴是取值在 [ 0 , 1 ] [0,1] [0,1]之间的正例概率代价，式中 p p p是样例为正的概率。 P ( + ) c o s t = p × c o s t 01 p × c o s t 01 + ( 1 − p ) × c o s t 10 P(+)cost=\frac{p\times cost_{01}}{p\times cost_{01}+(1-p)\times cost_{10}} P(+)cost=p×cost01​+(1−p)×cost10​p×cost01​​     纵轴是归一化代价： c o s t n o r m = F N R × p × c o s t 01 + F P R × ( 1 − p ) × c o s t 10 p × c o s t 01 + ( 1 − p ) × c o s t 10 cost_{norm}=\frac{FNR\times p\times cost_{01}+FPR\times (1-p)\times cost_{10}}{p\times cost_{01}+(1-p)\times cost_{10}} costnorm​=p×cost01​+(1−p)×cost10​FNR×p×cost01​+FPR×(1−p)×cost10​​      p = 0 p=0 p=0对应 ( 0 , F P R ) (0,FPR) (0,FPR)， p = 1 p=1 p=1对应 ( 1 , F N R ) (1,FNR) (1,FNR)，且这条曲线肯定是直的，那么我们就能把它画出来。ROC曲线上一个点对应代价曲线上一条直线。横纵坐标都是概率，一条代价曲线下方的面积就代表“在一种条件下学习器的期望总体代价”。那么我们将对应于ROC曲线上每一个点的代价曲线都画出来，其下方面积的交集就是“在所有条件下学习器的期望总体代价”。如图所示：" />
<link rel="canonical" href="https://uzzz.org/2019/08/01/792389.html" />
<meta property="og:url" content="https://uzzz.org/2019/08/01/792389.html" />
<meta property="og:site_name" content="有组织在！" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2019-08-01T00:00:00+08:00" />
<script type="application/ld+json">
{"description":"    上一章主要介绍何为机器学习、机器学习相关基础概念、发展历程以及应用现状，力求使读者能够一窥机器学习全貌。本章主要研究应该如何评价学得模型，并加以选择。本章共分5个小节，2.1节先介绍了机器学习模型中的一些常见术语，并说明了&quot;学得模型&quot;不可避免的两个问题：欠拟合与过拟合，并引出如何做模型评估的问题；2.2节介绍了常用的评估方法；2.3节介绍了常见的性能度量指标；2.4节阐述了在有了评估方法与性能度量指标的情况下，应该怎么进行比较检验；2.5节介绍“偏差-方差”，用于解释模型的泛化能力。 2.1 经验误差与过拟合   首先定义几个常见的概念： 错误率=分类错误的样本数/样本总数， E = a m . E=\\frac{a}{m}. E=ma​. 精度=1-错误率. 误差：学习器的实际预测输出与样本的真是输出之间的误差叫做“误差”     （1）训练误差 ：学习器在训练集上的误差，training errer；     （2）泛化误差 ：学习器在测试集上的误差,generalization errer。     显而易见，泛化误差代表学习器对未知样本的预测能力，我们希望学习到泛化误差小的模型。但是我们并不能事先知道新样本的数据信息（否则不会叫做新样本），能够做的只有不断地优化模型、减小训练误差。但是，训练误差最小的学习器真的是最优解，会在新样本上同样取得最小的泛化误差吗？未必。学习器在训练集上学习到训练误差最小时，通常会把训练集本身的特征当作适用于所有样本的“潜在特征”而加以学习，从而导致学习器的泛化能力反而降低，即“过拟合”。与“过拟合”相对应的是“欠拟合”，即学习器没能充分学习训练集，从而生成能力强的模型     一般来说，“欠拟合”较容易克服，我们通常可以在神经网络中增加训练轮数、在决策树中增加分支来解决。但是“过拟合”更麻烦一些，它也是机器学习需要克服的关键障碍。再好的模型，都会多少有一点过拟合，这是无法避免的。但是我们可以通过种种手段来“缓解”过拟合。     书中在这里提到了“ P = ̸ N P P=\\not NP P≠​NP”的问题，这是多项式复杂程度的非确定性问题,在这里提及只是为了证明过拟合无法避免而已。 P P P包含所有那些可以由一个确定型图灵机在多项式表达的时间内解决的问题， N P NP NP由所有其肯定解可以在给定正确信息的多项式时间内验证的决定问题组成。     用人话来说， P P P就是可以在多项式时间内解决的问题， N P NP NP就是可以在多项式时间内能够验证问题正确与否的问题，显然 P = ̸ N P P=\\not NP P≠​NP,否则就会出现“验证问题=证明问题”的悖论。因此书中说，只要我们相信“ P = ̸ N P P=\\not NP P≠​NP”，就必须相信机器学习学得模型的”过拟合“问题无法避免。     针对同一个现实任务，往往有多种算法可供我们选择，并且即使选择的算法相同，但是模型中参数配置不同，最后也会产生不同的结果。那么我们应该如何针对问题选出“最好”的学得模型呢？这就涉及“模型评估与选择”。（注意这里的最好是打引号的，因为我们在上一章中证明过，不考虑实际问题的话，所有的算法是无论优劣的，NFL定理）     那么该怎么选择模型呢？泛化误差我们说过，是得不到的；而训练误差又不可以直接作为评估模型的标准。我们需要研究评估方法，通过实验测试来选择“最好的“模型。 2.2 评估方法     我们应该怎样用实验的手段来“评估”学习器的泛化误差呢？使用“测试集”（testing set）来测试学习器对新样本的泛化能力，即用测试误差来近似泛化误差。 在第一章中我们做过假设：样本空间中所有样本均服从同一分布 D \\mathcal{D} D，在这里我们依然沿用这个假设，假设训练集和测试集的样本都是从样本真实分布中独立采样而来。这就好办了，我们可以将同一个数据集划分成训练集 S S S和测试集 T T T，二者必须互斥。具体划分方法有很多，书中列出以下方法。 2.2.1 留出法(hold-out)     直接将数据集 D D D分成对立的训练集 S S S和测试集 T T T，注意要尽可能保持数据分布的一致性，划分时要做到“分层采样”，按照比例从 D D D中每类数据中划分。     留出法有一弊端：即便S/T比例确定，每次划分也都是人为的，算出的测试误差并不可靠，需要多次随机划分，拿到多个测试误差，取其均值。除了这个弊端，留出法引出了一个矛盾：若令训练集包含大多数样本，虽然训练出的模型更接近用数据集 D D D训练的模型，但是由于测试集数据过少，不能用测试误差去近似泛化误差；相反，如果测试集包含相当数量的样本，又会导致用训练集学到的模型与用数据集 D D D训练的模型相差较大。 2.2.2 交叉验证(cross-validation)     交叉验证法对上述问题做了一些修正：令 D = D 1 ⋃ D 2 ⋃ . . . ⋃ D k D=D_1\\bigcup D_2\\bigcup ...\\bigcup D_k D=D1​⋃D2​⋃...⋃Dk​，每个子集 D i D_i Di​按照分层采样划分。用k-1个子集做训练集，剩下的一个子集做测试集，重复k次，确保每个子集都会充当一次测试集。将这k次实验的平均结果作为测试误差。又叫k-fold cross-validation.     留一法是一种特例，每次充当测试集的只有一个样本，相比于上述方法，这更准确，但是计算量大。另外，留一法的评估效果并不会一定比其他方法更准确，NFL定理同样适用。 2.2.3 自助法(bootstrapping)     我们希望评估的是用数据集 D D D训练的模型，但是上述方法都会从 D D D中抽出一部分样本作为测试集，这并不理想。自助法不仅可以减小训练规模不同而造成的影响，还可以较为高效的进行实验估计。     自助法是在非参数估计中的一种重要的估计统计方差，从而进行区间估计的统计方法。给定包含 m m m个样本的数据集 D D D,每次从中随机取出一个样本放入数据集 D ′ D^{&amp;#x27;} D′，然后仍放回数据集 D D D中，重复 m m m次。显然，我们基于数据集 D D D生成了一个新的同样包含 m m m个样本的数据集 D ′ D^{&amp;#x27;} D′，且在 D D D中有 lim ⁡ m → + ∞ ( 1 − 1 m ) m ≈ 0.368 \\lim_{m\\rightarrow+\\infty} (1-\\frac{1}{m})^m\\approx0.368 limm→+∞​(1−m1​)m≈0.368的样本不会出现在 D + D^+ D+中。用 D ′ D^{&amp;#x27;} D′做训练集， D / D ′ D/D^{&amp;#x27;} D/D′做测试集得到的测试误差又叫“包外估计”。     自助法的优缺点都很明显，一方面，从 D D D中生成若干数据集 D ′ D^{&amp;#x27;} D′，相当于扩增了原始数据量，比较适合原始数据量较少，难以有效划分S/T的情况；另一方面， D ′ D^{&amp;#x27;} D′的分布规律势必与 D D D不同，会产生额外的估计误差。所以自助法适用于经验分布与原始分布估计一致的情况。 2.2.4 调参与最终模型    本章开头我们讨论了如何评估学习器的“泛化误差”，就是将数据集划分为S+T，用测试误差来近似泛化误差。2.2.1~2.2.3节我们讨论了三种划分S/T的方法：hold-out、k-fold cross-validation、bootstrapping。这里思考调参的问题。    用S训练模型，并没有利用全部的数据，所以应遵循下述步骤： 给定数据集 D D D，划分S/T； 利用S训练模型； 利用T测试模型； 调参； 用D再次训练； 提交模型 2.3 性能度量     对学习器的泛化性能进行评估，除了有效的评估方法，还要有衡量模型泛化能力的评价标准，即性能度量（performance measure）。在预测任务中，给定样例集 D = { ( x 1 ⃗ , y 1 ) , ( x 2 ⃗ , y 2 ) , . . . , ( x m ⃗ , y m ) } D=\\{(\\vec{x_1},y_1),(\\vec{x_2},y_2),...,(\\vec{x_m},y_m)\\} D={(x1​ ​,y1​),(x2​ ​,y2​),...,(xm​ ​,ym​)}，其中 y i y_i yi​是示例 x i ⃗ \\vec{x_i} xi​ ​的真实标记。     在回归任务中，常见的性能度量是“均方误差”： E ( f ; D ) = 1 m ∑ i = 1 m ( f ( x i ) − y i ) 2 E(f;D)=\\frac{1}{m}\\displaystyle{\\sum^{m}_{i=1}}(f(x_i)-y_i)^2 E(f;D)=m1​i=1∑m​(f(xi​)−yi​)2，更一般的： &nbsp; E ( f ; D ) = ∫ x ∈ D ( f ( x ) − y ) 2 ⋅ p ( x ) d x \\ E(f;D)=\\int_{x\\in D} (f(x)-y)^2\\cdot p(x){\\rm d}x &nbsp;E(f;D)=∫x∈D​(f(x)−y)2⋅p(x)dx     在分类任务中，常见指标如下： 2.3.1 错误率与精度 分类错误率 E ( f ; D ) = 1 m ∑ i = 1 m Ⅱ ( f ( x i ) = ̸ y i ) E(f;D)=\\frac{1}{m}\\displaystyle{\\sum^{m}_{i=1}}Ⅱ(f(x_i)=\\not y_i) E(f;D)=m1​i=1∑m​Ⅱ(f(xi​)≠​yi​)，更一般的，设概率密度为 p ( ⋅ ) p(\\cdot) p(⋅)： &nbsp; E ( f ; D ) = ∫ x ∈ D Ⅱ ( f ( x ) = ̸ y ) ⋅ p ( x ) d x \\begin{aligned} \\ E(f;D)=\\int_{x\\in D} Ⅱ(f(x)=\\not y)\\cdot p(x){\\rm d}x \\end{aligned} &nbsp;E(f;D)=∫x∈D​Ⅱ(f(x)≠​y)⋅p(x)dx​ 精度 a c c = 1 − E ( f ; D ) acc=1-E(f;D) acc=1−E(f;D) 2.3.2 查准率、查全率与F1 对于二分类问题，可根据 f ( x i ) f(x_i) f(xi​)与 y i y_i yi​的关系将样例划分为： 表2.1 分类结果混淆矩阵 真实情况 预测结果 正例 反例 正例 TP(真正例) FN(假反例) 反例 FP(假正例) TN(真反例) 查准率 P = T P T P + F P P=\\frac{TP}{TP+FP} P=TP+FPTP​ 查全率 R = T P T P + F N R=\\frac{TP}{TP+FN} R=TP+FNTP​     查准率与查全率互相矛盾，这很好理解。有时我们需要根据学习器的预测结果对样例排序，根据排序结果来判断哪个样例“最有可能是正例”，以此顺序将样例逐个预测为“正例”，就能够计算出当前的查准率与查全率，从而得到“P-R”曲线。不同学习器的“P-R”曲线如下图所示：     若一个学习器的“P-R”曲线能够将另一个学习器完全包住，则可断言前者性能优于后者，否则不可轻易判断孰优孰劣，需要结合其他信息判断。很容易想到一个指标就是曲线包围面积，可这并不好求；另一个指标就是“平衡点”（Break Even Point，简称BEP）,BEP=P=R。第三个指标是P与R的调和平均数： F 1 = 2 × P × R P + R = 2 × T P 样 例 总 数 + T P − T N \\begin{aligned} \\\\&amp;amp; F1=\\frac{2\\times P\\times R}{P+R}=\\frac{2\\times TP}{样例总数+TP-TN} \\end{aligned} ​F1=P+R2×P×R​=样例总数+TP−TN2×TP​​     相比于几算术平均数和何平均数， F 1 F1 F1更注重小值。此外，在一般应用中，对查准率与查全率的关注程度是不同的，我们用 β \\beta β表示查全率对查准率的重要程度，将上式改写成： &nbsp; F β = ( 1 + β 2 ) × P × R ( β 2 × P ) + R \\begin{aligned} \\ F_\\beta=\\frac{(1+\\beta^2)\\times P\\times R}{(\\beta^2\\times P)+R} \\end{aligned} &nbsp;Fβ​=(β2×P)+R(1+β2)×P×R​​      β &amp;gt; 1 \\beta &amp;gt;1 β&gt;1时，查全率 R R R有更大影响； β &amp;lt; 1 \\beta &amp;lt;1 β&lt;1时，查准率 P P P有更大影响。     考虑我们此时拥有多个二分类混淆矩阵，我们该如何考察查全率与查准率呢？一种做法就是在各个混淆矩阵上分别计算查全率与查准率，再计算平均值，得到“宏查全率”、“宏查准率”以及相应的“宏F1”： m a c r o _ R = 1 n ∑ i = 1 n R i m a c r o _ P = 1 n ∑ i = 1 n P i m a c r o _ F 1 = 2 × m a c r o _ P × m a c r o _ R m a c r o _ P + m a c r o _ R \\begin{aligned} \\\\&amp;amp; macro\\_R=\\frac{1}{n}\\displaystyle{\\sum^{n}_{i=1}}R_i \\\\&amp;amp; macro\\_P=\\frac{1}{n}\\displaystyle{\\sum^{n}_{i=1}}P_i \\\\&amp;amp; macro\\_F1=\\frac{2\\times macro\\_P\\times macro\\_R}{macro\\_P+macro\\_R} \\end{aligned} ​macro_R=n1​i=1∑n​Ri​macro_P=n1​i=1∑n​Pi​macro_F1=macro_P+macro_R2×macro_P×macro_R​​     另外一种方法是先在每个二分类混淆矩阵上计算 T P ‾ 、 F P ‾ 、 F N ‾ 、 T N ‾ \\overline{TP}、\\overline{FP}、\\overline{FN}、\\overline{TN} TP、FP、FN、TN，再计算得到“微查全率”“微查准率”与“ 微 F 1 微F1 微F1”： m i c r o _ R = T P ‾ T P ‾ + F P ‾ m i c r o _ P = T P ‾ T P ‾ + F N ‾ m i c r o _ F 1 = 2 × m i c r o _ P × m i c r o _ R m i c r o _ P + m i c r o _ R \\begin{aligned} \\\\&amp;amp; micro\\_R=\\frac{\\overline{TP}}{\\overline{TP}+\\overline{FP}} \\\\&amp;amp; micro\\_P=\\frac{\\overline{TP}}{\\overline{TP}+\\overline{FN}} \\\\&amp;amp; micro\\_F1=\\frac{2\\times micro\\_P\\times micro\\_R}{micro\\_P+micro\\_R} \\end{aligned} ​micro_R=TP+FPTP​micro_P=TP+FNTP​micro_F1=micro_P+micro_R2×micro_P×micro_R​​ 2.3.3 ROC与AUC     通常学习器预测的结果是一个在 [ 0 , 1 ] [0,1] [0,1]区间的数值，我们可将预测数值排序，越接近1，表示当前样本越接近正例。在不同的任务中，我们往往根据需要设置不同的截断点：若要求较高的查全率，则截断点必须后移；若要求较高的查准率，截断点必须前移。因此，预测结果的排序质量，直接体现着学习器在不同任务下的“期望泛化性能”的好坏。换句话说，这体现着学习器在一般情况下的好坏。ROC曲线正是从这个角度对学习器进行评估。     ROC，即“Receiver Operating Characteristic”“受试者工作特征”，源于二战中对雷达信号的分析，后引入机器学习领域。我们将学习器做出的预测结果排序，逐个把样例预测为正例，每次计算出两个数值，并以这两个数值为坐标轴绘制ROC曲线。横轴为“假正例率”（FPR），纵轴为“真正例率”（TPR）： F P R = F P F P + T N T P R = T P T P + F N \\begin{aligned} \\\\&amp;amp; FPR=\\frac{FP}{FP+TN} \\\\&amp;amp; TPR=\\frac{TP}{TP+FN} \\end{aligned} ​FPR=FP+TNFP​TPR=TP+FNTP​​ 考虑这样几个特例： 1.当预测结果全为反例时， T P = F P = 0 TP=FP=0 TP=FP=0，从而 T P R = F P R = 0 TPR=FPR=0 TPR=FPR=0，对应ROC曲线原 点 ( 0 , 0 ) (0,0) (0,0) 2.当预测结果全为正例时， T N = F N = 0 TN=FN=0 TN=FN=0，从而 T P R = F P R = 1 TPR=FPR=1 TPR=FPR=1 ,对应点 ( 1 , 1 ) (1,1) (1,1)点 3.当预测结果中所有样例均预测正确，换句话说，所有真实标签为“正例”的示例均排在标签为“反例”的示例之前，则 T P = 1 , F P = 0 TP=1,FP=0 TP=1,FP=0，从而 T P R = 1 , F P R = 0 TPR=1,FPR=0 TPR=1,FPR=0，对应点 ( 0 , 1 ) (0,1) (0,1) 4.当所有样例的真实标签与预测结果恰好全部相反时， T N = T P = 0 TN=TP=0 TN=TP=0，对应点 ( 1 , 0 ) (1,0) (1,0).     现实任务中，样例是有限的，只能像上图右侧这样画成分段的曲线。（类似于计算机控制中的第一象限插补）设给定 m + m^+ m+个正例， m + − m^+- m+−个反例，具体做法： 将分类阈值调整到最大，所有样例设为反例，计算 ( F P R , T P R ) (FPR,TPR) (FPR,TPR)作为曲线原点； 样例按照预测结果排序，依次以预测结果为分类阈值进行计算； 若当前为正例，则 ( x , y + 1 m + ) (x,y+\\frac{1}{m^+}) (x,y+m+1​)；若当前为反例，则 ( x + 1 m − , y ) (x+\\frac{1}{m^-},y) (x+m−1​,y)；     类似“P-R”曲线，若一个学习器的ROC曲线能够“包住”另一个学习器的曲线，可断定前者性能优于后者。否则需另行判断：计算ROC曲线包围的面积AUC（Area Under ROC Curve）: A U C = 1 2 ∑ i = 1 m − 1 ( x i + 1 − x i ) ( y i + y i + 1 ) AUC=\\frac{1}{2}\\displaystyle{\\sum_{i=1}^{m-1}(x_{i+1}-x_i)(y_i+y_{i+1})} AUC=21​i=1∑m−1​(xi+1​−xi​)(yi​+yi+1​)     我们在开始的时候说过，ROC曲线体现的是预测结果的排序质量，所以AUC与排序误差密切相关。从这个角度去理解AUC，可得： A U C = 1 m + m − ∑ x + ∈ D + ∑ x − ∈ D − Ⅱ ( f ( x + ) &amp;gt; f ( x − ) ) AUC=\\frac{1}{m_+m_-}\\displaystyle{\\sum_{x^+\\in D^+}}\\displaystyle{\\sum_{x^-\\in D^-}}Ⅱ(f(x^+)&amp;gt;f(x^-)) AUC=m+​m−​1​x+∈D+∑​x−∈D−∑​Ⅱ(f(x+)&gt;f(x−))     从反方向定义排序“损失”： l r a n k = 1 m + m − ∑ x + ∈ D + ∑ x − ∈ D − ( Ⅱ ( f ( x + ) &amp;lt; f ( x − ) ) + 1 2 Ⅱ ( f ( x + ) = f ( x − ) ) ) l_{rank}=\\frac{1}{m_+m_-}\\displaystyle{\\sum_{x^+\\in D^+}}\\displaystyle{\\sum_{x^-\\in D^-}}(Ⅱ(f(x^+)&amp;lt;f(x^-))+\\frac{1}{2}Ⅱ(f(x^+)=f(x^-))) lrank​=m+​m−​1​x+∈D+∑​x−∈D−∑​(Ⅱ(f(x+)&lt;f(x−))+21​Ⅱ(f(x+)=f(x−)))     显然 A U C = 1 − l r a n k AUC=1-l_{rank} AUC=1−lrank​。 2.3.4 代价敏感错误率与代价曲线      R O C − A U C ROC-AUC ROC−AUC体现的是学习器在一般情况下的好坏，我们在其计算过程中默认各种分类错误造成的后果是一样的，即所有类型的错误“均等代价”，但这有时不合常理，有些错误一定会比其它错误造成的后果更严重。我们可以用“非均等代价”来衡量这种不平等程度。以二分类为例： 表2.2 二分类代价矩阵 真实类别 预测类别 第0类 第1类 第0类 0 cost_01 第1类 cost_10 0     代价“敏感”的错误率： E ( f : D ) = 1 m ( ∑ x + ∈ D + Ⅱ ( f ( x i ) = ̸ y i ) × c o s t 01 + ∑ x − ∈ D − Ⅱ ( f ( x i ) = ̸ y i ) × c o s t 10 ) E(f:D)= \\frac{1}{m}(\\displaystyle{\\sum_{x^+\\in D^+}Ⅱ(f(x_i)=\\not y_i)\\times cost_{01}+\\sum_{x^-\\in D^-}Ⅱ(f(x_i)=\\not y_i)\\times cost_{10}}) E(f:D)=m1​(x+∈D+∑​Ⅱ(f(xi​)≠​yi​)×cost01​+x−∈D−∑​Ⅱ(f(xi​)≠​yi​)×cost10​)     在“非均等代价”下，ROC曲线不再能够代表学习器的期望总体代价，我们采用“代价曲线”来实现这一任务。代价曲线的横轴是取值在 [ 0 , 1 ] [0,1] [0,1]之间的正例概率代价，式中 p p p是样例为正的概率。 P ( + ) c o s t = p × c o s t 01 p × c o s t 01 + ( 1 − p ) × c o s t 10 P(+)cost=\\frac{p\\times cost_{01}}{p\\times cost_{01}+(1-p)\\times cost_{10}} P(+)cost=p×cost01​+(1−p)×cost10​p×cost01​​     纵轴是归一化代价： c o s t n o r m = F N R × p × c o s t 01 + F P R × ( 1 − p ) × c o s t 10 p × c o s t 01 + ( 1 − p ) × c o s t 10 cost_{norm}=\\frac{FNR\\times p\\times cost_{01}+FPR\\times (1-p)\\times cost_{10}}{p\\times cost_{01}+(1-p)\\times cost_{10}} costnorm​=p×cost01​+(1−p)×cost10​FNR×p×cost01​+FPR×(1−p)×cost10​​      p = 0 p=0 p=0对应 ( 0 , F P R ) (0,FPR) (0,FPR)， p = 1 p=1 p=1对应 ( 1 , F N R ) (1,FNR) (1,FNR)，且这条曲线肯定是直的，那么我们就能把它画出来。ROC曲线上一个点对应代价曲线上一条直线。横纵坐标都是概率，一条代价曲线下方的面积就代表“在一种条件下学习器的期望总体代价”。那么我们将对应于ROC曲线上每一个点的代价曲线都画出来，其下方面积的交集就是“在所有条件下学习器的期望总体代价”。如图所示：","@type":"BlogPosting","url":"https://uzzz.org/2019/08/01/792389.html","headline":"周志华《机器学习》第二章：模型评估与选择（1）","dateModified":"2019-08-01T00:00:00+08:00","datePublished":"2019-08-01T00:00:00+08:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://uzzz.org/2019/08/01/792389.html"},"@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->


    <link rel="stylesheet" href="/assets/css/style.css?v=">
    <script src="/assets/js/scale.fix.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-123344652-1"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-123344652-1');
    </script>
    
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <script>
      (adsbygoogle = window.adsbygoogle || []).push({
        google_ad_client: "ca-pub-8889449066804352",
        enable_page_level_ads: true
      });
    </script>
    
    <script async custom-element="amp-auto-ads"
        src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
    </script>
    
    <style>
      @media screen and (max-width:760px){
        .sm-hidden{display:none; }
      }
    </style>

  </head>
  <body>
    
        <amp-auto-ads type="adsense"
              data-ad-client="ca-pub-8889449066804352">
        </amp-auto-ads>
    
    <div class="wrapper">
      <header  class="without-description" >
        <h1>周志华《机器学习》第二章：模型评估与选择（1）</h1>
        
        
        <ul style="display: block;">
            <li><a href="https://uzshare.com/" style="line-height: unset;" target="_blank"><strong>柚子社区</strong></a></li>
 	    <li><a href="/donate/" style="line-height: unset;" target="_blank"><strong>Donate</strong></a></li>
        </ul>
        
      </header>
      <section>

<div style="margin:0 0 8px 0;">
<style>
table.gsc-input {
    margin: 0;
}
.cse .gsc-control-cse, .gsc-control-cse {
    padding: 0;
    width: auto;
}
.gsc-search-box td {
    border-bottom: none;
}
</style>
<script>
  (function() {
    var cx = '004431708863642777669:qan2_6ugotw';
    var gcse = document.createElement('script');
    gcse.type = 'text/javascript';
    gcse.async = true;
    gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(gcse, s);
  })();
</script>
<gcse:search></gcse:search>
</div>
<!-- match content ads -->
	        <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
			<ins class="adsbygoogle"
			     style="display:block"
			     data-ad-format="autorelaxed"
			     data-ad-client="ca-pub-8889449066804352"
			     data-ad-slot="1928667997"></ins>
			<script>
			     (adsbygoogle = window.adsbygoogle || []).push({});
			</script>	



        <div id="article_content" class="article_content clearfix"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-3019150162.css"> 
 <div id="content_views" class="markdown_views prism-atom-one-light"> 
  <!-- flowchart 箭头图标 勿删 --> 
  <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"> 
   <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path> 
  </svg> 
  <p>    上一章主要介绍何为机器学习、机器学习相关基础概念、发展历程以及应用现状，力求使读者能够一窥机器学习全貌。本章主要研究应该如何评价学得模型，并加以选择。本章共分5个小节，2.1节先介绍了机器学习模型中的一些常见术语，并说明了"学得模型"不可避免的两个问题：欠拟合与过拟合，并引出如何做模型评估的问题；2.2节介绍了常用的评估方法；2.3节介绍了常见的性能度量指标；2.4节阐述了在有了评估方法与性能度量指标的情况下，应该怎么进行比较检验；2.5节介绍“偏差-方差”，用于解释模型的泛化能力。</p> 
  <h3><a id="21__1"></a>2.1 经验误差与过拟合</h3> 
  <p>  首先定义几个常见的概念：</p> 
  <ol> 
   <li>错误率=分类错误的样本数/样本总数，<span class="katex--inline"><span class="katex"><span class="katex-mathml">
       <math>
        <semantics>
         <mrow>
          <mi>
           E
          </mi>
          <mo>
           =
          </mo>
          <mfrac>
           <mi>
            a
           </mi>
           <mi>
            m
           </mi>
          </mfrac>
          <mi mathvariant="normal">
           .
          </mi>
         </mrow>
         <annotation encoding="application/x-tex">
          E=\frac{a}{m}.
         </annotation>
        </semantics>
       </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span style="margin-right: 0.05764em;" class="mord mathit">E</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 1.04039em; vertical-align: -0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.695392em;"><span class="" style="top: -2.655em;"><span class="pstrut" style="height: 3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">m</span></span></span></span><span class="" style="top: -3.23em;"><span class="pstrut" style="height: 3em;"></span><span class="frac-line" style="border-bottom-width: 0.04em;"></span></span><span class="" style="top: -3.394em;"><span class="pstrut" style="height: 3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">a</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.345em;"><span class=""></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mord">.</span></span></span></span></span></li> 
   <li>精度=1-错误率.</li> 
   <li>误差：学习器的实际预测输出与样本的真是输出之间的误差叫做“误差”<br>     （1）训练误差 ：学习器在训练集上的误差，training errer；<br>     （2）泛化误差 ：学习器在测试集上的误差,generalization errer。</li> 
  </ol> 
  <p>    显而易见，泛化误差代表学习器对未知样本的预测能力，我们希望学习到泛化误差小的模型。但是我们并不能事先知道新样本的数据信息（否则不会叫做新样本），能够做的只有不断地优化模型、减小训练误差。但是，训练误差最小的学习器真的是最优解，会在新样本上同样取得最小的泛化误差吗？未必。学习器在训练集上学习到训练误差最小时，通常会把训练集本身的特征当作适用于所有样本的“潜在特征”而加以学习，从而导致学习器的泛化能力反而降低，即“过拟合”。与“过拟合”相对应的是“欠拟合”，即学习器没能充分学习训练集，从而生成能力强的模型<br>     一般来说，“欠拟合”较容易克服，我们通常可以在神经网络中增加训练轮数、在决策树中增加分支来解决。但是“过拟合”更麻烦一些，它也是机器学习需要克服的关键障碍。再好的模型，都会多少有一点过拟合，这是无法避免的。但是我们可以通过种种手段来“缓解”过拟合。<br>     书中在这里提到了“<span class="katex--inline"><span class="katex"><span class="katex-mathml">
      <math>
       <semantics>
        <mrow>
         <mi>
          P
         </mi>
         <mo>
          =
         </mo>
         <mpadded width="0px">
          <mo>
           ̸
          </mo>
         </mpadded>
         <mi>
          N
         </mi>
         <mi>
          P
         </mi>
        </mrow>
        <annotation encoding="application/x-tex">
         P=\not NP
        </annotation>
       </semantics>
      </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span style="margin-right: 0.13889em;" class="mord mathit">P</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span></span><span class="base"><span class="strut" style="height: 0.88888em; vertical-align: -0.19444em;"></span><span class="mrel"><span class="mord"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.69444em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="rlap"><span class="strut" style="height: 0.88888em; vertical-align: -0.19444em;"></span><span class="inner"><span class="mrel latin_fallback"≯</span></span><span class="fix"></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.19444em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span style="margin-right: 0.10903em;" class="mord mathit">N</span><span style="margin-right: 0.13889em;" class="mord mathit">P</span></span></span></span></span>”的问题，这是多项式复杂程度的非确定性问题,在这里提及只是为了证明过拟合无法避免而已。</p> 
  <blockquote> 
   <p><span class="katex--inline"><span class="katex"><span class="katex-mathml">
       <math>
        <semantics>
         <mrow>
          <mi>
           P
          </mi>
         </mrow>
         <annotation encoding="application/x-tex">
          P
         </annotation>
        </semantics>
       </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span style="margin-right: 0.13889em;" class="mord mathit">P</span></span></span></span></span>包含所有那些可以由一个确定型图灵机在多项式表达的时间内解决的问题，<span class="katex--inline"><span class="katex"><span class="katex-mathml">
       <math>
        <semantics>
         <mrow>
          <mi>
           N
          </mi>
          <mi>
           P
          </mi>
         </mrow>
         <annotation encoding="application/x-tex">
          NP
         </annotation>
        </semantics>
       </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span style="margin-right: 0.10903em;" class="mord mathit">N</span><span style="margin-right: 0.13889em;" class="mord mathit">P</span></span></span></span></span>由所有其肯定解可以在给定正确信息的多项式时间内验证的决定问题组成。</p> 
  </blockquote> 
  <p>    用人话来说，<span class="katex--inline"><span class="katex"><span class="katex-mathml">
      <math>
       <semantics>
        <mrow>
         <mi>
          P
         </mi>
        </mrow>
        <annotation encoding="application/x-tex">
         P
        </annotation>
       </semantics>
      </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span style="margin-right: 0.13889em;" class="mord mathit">P</span></span></span></span></span>就是可以在多项式时间内解决的问题，<span class="katex--inline"><span class="katex"><span class="katex-mathml">
      <math>
       <semantics>
        <mrow>
         <mi>
          N
         </mi>
         <mi>
          P
         </mi>
        </mrow>
        <annotation encoding="application/x-tex">
         NP
        </annotation>
       </semantics>
      </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span style="margin-right: 0.10903em;" class="mord mathit">N</span><span style="margin-right: 0.13889em;" class="mord mathit">P</span></span></span></span></span>就是可以在多项式时间内能够验证问题正确与否的问题，显然<span class="katex--inline"><span class="katex"><span class="katex-mathml">
      <math>
       <semantics>
        <mrow>
         <mi>
          P
         </mi>
         <mo>
          =
         </mo>
         <mpadded width="0px">
          <mo>
           ̸
          </mo>
         </mpadded>
         <mi>
          N
         </mi>
         <mi>
          P
         </mi>
        </mrow>
        <annotation encoding="application/x-tex">
         P=\not NP
        </annotation>
       </semantics>
      </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span style="margin-right: 0.13889em;" class="mord mathit">P</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span></span><span class="base"><span class="strut" style="height: 0.88888em; vertical-align: -0.19444em;"></span><span class="mrel"><span class="mord"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.69444em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="rlap"><span class="strut" style="height: 0.88888em; vertical-align: -0.19444em;"></span><span class="inner"><span class="mrel latin_fallback"≯</span></span><span class="fix"></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.19444em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span style="margin-right: 0.10903em;" class="mord mathit">N</span><span style="margin-right: 0.13889em;" class="mord mathit">P</span></span></span></span></span>,否则就会出现“验证问题=证明问题”的悖论。因此书中说，只要我们相信“<span class="katex--inline"><span class="katex"><span class="katex-mathml">
      <math>
       <semantics>
        <mrow>
         <mi>
          P
         </mi>
         <mo>
          =
         </mo>
         <mpadded width="0px">
          <mo>
           ̸
          </mo>
         </mpadded>
         <mi>
          N
         </mi>
         <mi>
          P
         </mi>
        </mrow>
        <annotation encoding="application/x-tex">
         P=\not NP
        </annotation>
       </semantics>
      </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span style="margin-right: 0.13889em;" class="mord mathit">P</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span></span><span class="base"><span class="strut" style="height: 0.88888em; vertical-align: -0.19444em;"></span><span class="mrel"><span class="mord"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.69444em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="rlap"><span class="strut" style="height: 0.88888em; vertical-align: -0.19444em;"></span><span class="inner"><span class="mrel latin_fallback"≯</span></span><span class="fix"></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.19444em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span style="margin-right: 0.10903em;" class="mord mathit">N</span><span style="margin-right: 0.13889em;" class="mord mathit">P</span></span></span></span></span>”，就必须相信机器学习学得模型的”过拟合“问题无法避免。<br>     针对同一个现实任务，往往有多种算法可供我们选择，并且即使选择的算法相同，但是模型中参数配置不同，最后也会产生不同的结果。那么我们应该如何针对问题选出“最好”的学得模型呢？这就涉及“模型评估与选择”。（注意这里的最好是打引号的，因为我们在上一章中证明过，不考虑实际问题的话，所有的算法是无论优劣的，NFL定理）<br>     <strong>那么该怎么选择模型呢？泛化误差我们说过，是得不到的；而训练误差又不可以直接作为评估模型的标准。我们需要研究评估方法，通过实验测试来选择“最好的“模型。</strong></p> 
  <h3><a id="22__19"></a>2.2 评估方法</h3> 
  <p>    <strong>我们应该怎样用实验的手段来“评估”学习器的泛化误差呢？使用“测试集”（testing set）来测试学习器对新样本的泛化能力，即用测试误差来近似泛化误差。</strong> 在第一章中我们做过假设：样本空间中所有样本均服从同一分布<span class="katex--inline"><span class="katex"><span class="katex-mathml">
      <math>
       <semantics>
        <mrow>
         <mi mathvariant="script">
          D
         </mi>
        </mrow>
        <annotation encoding="application/x-tex">
         \mathcal{D}
        </annotation>
       </semantics>
      </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord"><span style="margin-right: 0.02778em;" class="mord mathcal">D</span></span></span></span></span></span>，在这里我们依然沿用这个假设，假设训练集和测试集的样本都是从样本真实分布中独立采样而来。这就好办了，我们可以将同一个数据集划分成训练集<span class="katex--inline"><span class="katex"><span class="katex-mathml">
      <math>
       <semantics>
        <mrow>
         <mi>
          S
         </mi>
        </mrow>
        <annotation encoding="application/x-tex">
         S
        </annotation>
       </semantics>
      </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span style="margin-right: 0.05764em;" class="mord mathit">S</span></span></span></span></span>和测试集<span class="katex--inline"><span class="katex"><span class="katex-mathml">
      <math>
       <semantics>
        <mrow>
         <mi>
          T
         </mi>
        </mrow>
        <annotation encoding="application/x-tex">
         T
        </annotation>
       </semantics>
      </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span style="margin-right: 0.13889em;" class="mord mathit">T</span></span></span></span></span>，二者必须互斥。具体划分方法有很多，书中列出以下方法。</p> 
  <h4><a id="221_holdout_21"></a>2.2.1 留出法(hold-out)</h4> 
  <p>    直接将数据集<span class="katex--inline"><span class="katex"><span class="katex-mathml">
      <math>
       <semantics>
        <mrow>
         <mi>
          D
         </mi>
        </mrow>
        <annotation encoding="application/x-tex">
         D
        </annotation>
       </semantics>
      </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span style="margin-right: 0.02778em;" class="mord mathit">D</span></span></span></span></span>分成对立的训练集<span class="katex--inline"><span class="katex"><span class="katex-mathml">
      <math>
       <semantics>
        <mrow>
         <mi>
          S
         </mi>
        </mrow>
        <annotation encoding="application/x-tex">
         S
        </annotation>
       </semantics>
      </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span style="margin-right: 0.05764em;" class="mord mathit">S</span></span></span></span></span>和测试集<span class="katex--inline"><span class="katex"><span class="katex-mathml">
      <math>
       <semantics>
        <mrow>
         <mi>
          T
         </mi>
        </mrow>
        <annotation encoding="application/x-tex">
         T
        </annotation>
       </semantics>
      </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span style="margin-right: 0.13889em;" class="mord mathit">T</span></span></span></span></span>，注意要尽可能保持数据分布的一致性，划分时要做到“分层采样”，按照比例从<span class="katex--inline"><span class="katex"><span class="katex-mathml">
      <math>
       <semantics>
        <mrow>
         <mi>
          D
         </mi>
        </mrow>
        <annotation encoding="application/x-tex">
         D
        </annotation>
       </semantics>
      </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span style="margin-right: 0.02778em;" class="mord mathit">D</span></span></span></span></span>中每类数据中划分。<br>     留出法有一弊端：即便S/T比例确定，每次划分也都是人为的，算出的测试误差并不可靠，需要多次随机划分，拿到多个测试误差，取其均值。除了这个弊端，留出法引出了一个矛盾：若令训练集包含大多数样本，虽然训练出的模型更接近用数据集<span class="katex--inline"><span class="katex"><span class="katex-mathml">
      <math>
       <semantics>
        <mrow>
         <mi>
          D
         </mi>
        </mrow>
        <annotation encoding="application/x-tex">
         D
        </annotation>
       </semantics>
      </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span style="margin-right: 0.02778em;" class="mord mathit">D</span></span></span></span></span>训练的模型，但是由于测试集数据过少，不能用测试误差去近似泛化误差；相反，如果测试集包含相当数量的样本，又会导致用训练集学到的模型与用数据集<span class="katex--inline"><span class="katex"><span class="katex-mathml">
      <math>
       <semantics>
        <mrow>
         <mi>
          D
         </mi>
        </mrow>
        <annotation encoding="application/x-tex">
         D
        </annotation>
       </semantics>
      </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span style="margin-right: 0.02778em;" class="mord mathit">D</span></span></span></span></span>训练的模型相差较大。</p> 
  <h4><a id="222_crossvalidation_24"></a>2.2.2 交叉验证(cross-validation)</h4> 
  <p>    交叉验证法对上述问题做了一些修正：令<span class="katex--inline"><span class="katex"><span class="katex-mathml">
      <math>
       <semantics>
        <mrow>
         <mi>
          D
         </mi>
         <mo>
          =
         </mo>
         <msub>
          <mi>
           D
          </mi>
          <mn>
           1
          </mn>
         </msub>
         <mo>
          ⋃
         </mo>
         <msub>
          <mi>
           D
          </mi>
          <mn>
           2
          </mn>
         </msub>
         <mo>
          ⋃
         </mo>
         <mi mathvariant="normal">
          .
         </mi>
         <mi mathvariant="normal">
          .
         </mi>
         <mi mathvariant="normal">
          .
         </mi>
         <mo>
          ⋃
         </mo>
         <msub>
          <mi>
           D
          </mi>
          <mi>
           k
          </mi>
         </msub>
        </mrow>
        <annotation encoding="application/x-tex">
         D=D_1\bigcup D_2\bigcup ...\bigcup D_k
        </annotation>
       </semantics>
      </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span style="margin-right: 0.02778em;" class="mord mathit">D</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 1.00001em; vertical-align: -0.25001em;"></span><span class="mord"><span style="margin-right: 0.02778em;" class="mord mathit">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: -0.02778em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mop op-symbol small-op" style="position: relative; top: -0.000005em;">⋃</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord"><span style="margin-right: 0.02778em;" class="mord mathit">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: -0.02778em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mop op-symbol small-op" style="position: relative; top: -0.000005em;">⋃</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord">.</span><span class="mord">.</span><span class="mord">.</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mop op-symbol small-op" style="position: relative; top: -0.000005em;">⋃</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord"><span style="margin-right: 0.02778em;" class="mord mathit">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.336108em;"><span class="" style="top: -2.55em; margin-left: -0.02778em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span style="margin-right: 0.03148em;" class="mord mathit mtight">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span>，每个子集<span class="katex--inline"><span class="katex"><span class="katex-mathml">
      <math>
       <semantics>
        <mrow>
         <msub>
          <mi>
           D
          </mi>
          <mi>
           i
          </mi>
         </msub>
        </mrow>
        <annotation encoding="application/x-tex">
         D_i
        </annotation>
       </semantics>
      </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.83333em; vertical-align: -0.15em;"></span><span class="mord"><span style="margin-right: 0.02778em;" class="mord mathit">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.311664em;"><span class="" style="top: -2.55em; margin-left: -0.02778em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span>按照分层采样划分。用k-1个子集做训练集，剩下的一个子集做测试集，重复k次，确保每个子集都会充当一次测试集。将这k次实验的平均结果作为测试误差。又叫k-fold cross-validation.<br>     留一法是一种特例，每次充当测试集的只有一个样本，相比于上述方法，这更准确，但是计算量大。另外，留一法的评估效果并不会一定比其他方法更准确，NFL定理同样适用。</p> 
  <h4><a id="223_bootstrapping_27"></a>2.2.3 自助法(bootstrapping)</h4> 
  <p>    我们希望评估的是用数据集<span class="katex--inline"><span class="katex"><span class="katex-mathml">
      <math>
       <semantics>
        <mrow>
         <mi>
          D
         </mi>
        </mrow>
        <annotation encoding="application/x-tex">
         D
        </annotation>
       </semantics>
      </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span style="margin-right: 0.02778em;" class="mord mathit">D</span></span></span></span></span>训练的模型，但是上述方法都会从<span class="katex--inline"><span class="katex"><span class="katex-mathml">
      <math>
       <semantics>
        <mrow>
         <mi>
          D
         </mi>
        </mrow>
        <annotation encoding="application/x-tex">
         D
        </annotation>
       </semantics>
      </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span style="margin-right: 0.02778em;" class="mord mathit">D</span></span></span></span></span>中抽出一部分样本作为测试集，这并不理想。自助法不仅可以减小训练规模不同而造成的影响，还可以较为高效的进行实验估计。<br>     自助法是在非参数估计中的一种重要的估计统计方差，从而进行区间估计的统计方法。给定包含<span class="katex--inline"><span class="katex"><span class="katex-mathml">
      <math>
       <semantics>
        <mrow>
         <mi>
          m
         </mi>
        </mrow>
        <annotation encoding="application/x-tex">
         m
        </annotation>
       </semantics>
      </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.43056em; vertical-align: 0em;"></span><span class="mord mathit">m</span></span></span></span></span>个样本的数据集<span class="katex--inline"><span class="katex"><span class="katex-mathml">
      <math>
       <semantics>
        <mrow>
         <mi>
          D
         </mi>
        </mrow>
        <annotation encoding="application/x-tex">
         D
        </annotation>
       </semantics>
      </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span style="margin-right: 0.02778em;" class="mord mathit">D</span></span></span></span></span>,每次从中随机取出一个样本放入数据集<span class="katex--inline"><span class="katex"><span class="katex-mathml">
      <math>
       <semantics>
        <mrow>
         <msup>
          <mi>
           D
          </mi>
          <msup>
           <mrow></mrow>
           <mo mathvariant="normal">
            ′
           </mo>
          </msup>
         </msup>
        </mrow>
        <annotation encoding="application/x-tex">
         D^{&amp;#x27;}
        </annotation>
       </semantics>
      </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.94248em; vertical-align: 0em;"></span><span class="mord"><span style="margin-right: 0.02778em;" class="mord mathit">D</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.94248em;"><span class="" style="top: -2.94248em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.57948em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class=""></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.827829em;"><span class="" style="top: -2.931em; margin-right: 0.0714286em;"><span class="pstrut" style="height: 2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span>，然后仍放回数据集<span class="katex--inline"><span class="katex"><span class="katex-mathml">
      <math>
       <semantics>
        <mrow>
         <mi>
          D
         </mi>
        </mrow>
        <annotation encoding="application/x-tex">
         D
        </annotation>
       </semantics>
      </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span style="margin-right: 0.02778em;" class="mord mathit">D</span></span></span></span></span>中，重复<span class="katex--inline"><span class="katex"><span class="katex-mathml">
      <math>
       <semantics>
        <mrow>
         <mi>
          m
         </mi>
        </mrow>
        <annotation encoding="application/x-tex">
         m
        </annotation>
       </semantics>
      </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.43056em; vertical-align: 0em;"></span><span class="mord mathit">m</span></span></span></span></span>次。显然，我们基于数据集<span class="katex--inline"><span class="katex"><span class="katex-mathml">
      <math>
       <semantics>
        <mrow>
         <mi>
          D
         </mi>
        </mrow>
        <annotation encoding="application/x-tex">
         D
        </annotation>
       </semantics>
      </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span style="margin-right: 0.02778em;" class="mord mathit">D</span></span></span></span></span>生成了一个新的同样包含<span class="katex--inline"><span class="katex"><span class="katex-mathml">
      <math>
       <semantics>
        <mrow>
         <mi>
          m
         </mi>
        </mrow>
        <annotation encoding="application/x-tex">
         m
        </annotation>
       </semantics>
      </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.43056em; vertical-align: 0em;"></span><span class="mord mathit">m</span></span></span></span></span>个样本的数据集<span class="katex--inline"><span class="katex"><span class="katex-mathml">
      <math>
       <semantics>
        <mrow>
         <msup>
          <mi>
           D
          </mi>
          <msup>
           <mrow></mrow>
           <mo mathvariant="normal">
            ′
           </mo>
          </msup>
         </msup>
        </mrow>
        <annotation encoding="application/x-tex">
         D^{&amp;#x27;}
        </annotation>
       </semantics>
      </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.94248em; vertical-align: 0em;"></span><span class="mord"><span style="margin-right: 0.02778em;" class="mord mathit">D</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.94248em;"><span class="" style="top: -2.94248em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.57948em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class=""></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.827829em;"><span class="" style="top: -2.931em; margin-right: 0.0714286em;"><span class="pstrut" style="height: 2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span>，且在<span class="katex--inline"><span class="katex"><span class="katex-mathml">
      <math>
       <semantics>
        <mrow>
         <mi>
          D
         </mi>
        </mrow>
        <annotation encoding="application/x-tex">
         D
        </annotation>
       </semantics>
      </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span style="margin-right: 0.02778em;" class="mord mathit">D</span></span></span></span></span>中有<span class="katex--inline"><span class="katex"><span class="katex-mathml">
      <math>
       <semantics>
        <mrow>
         <msub>
          <mi>
           lim
          </mi>
          <mo>
           ⁡
          </mo>
          <mrow>
           <mi>
            m
           </mi>
           <mo>
            →
           </mo>
           <mo>
            +
           </mo>
           <mi mathvariant="normal">
            ∞
           </mi>
          </mrow>
         </msub>
         <mo>
          (
         </mo>
         <mn>
          1
         </mn>
         <mo>
          −
         </mo>
         <mfrac>
          <mn>
           1
          </mn>
          <mi>
           m
          </mi>
         </mfrac>
         <msup>
          <mo>
           )
          </mo>
          <mi>
           m
          </mi>
         </msup>
         <mo>
          ≈
         </mo>
         <mn>
          0.368
         </mn>
        </mrow>
        <annotation encoding="application/x-tex">
         \lim_{m\rightarrow+\infty} (1-\frac{1}{m})^m\approx0.368
        </annotation>
       </semantics>
      </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mop"><span class="mop">lim</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.258331em;"><span class="" style="top: -2.55em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">m</span><span class="mrel mtight">→</span><span class="mord mtight">+</span><span class="mord mtight">∞</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.208331em;"><span class=""></span></span></span></span></span></span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 1.19011em; vertical-align: -0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.845108em;"><span class="" style="top: -2.655em;"><span class="pstrut" style="height: 3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">m</span></span></span></span><span class="" style="top: -3.23em;"><span class="pstrut" style="height: 3em;"></span><span class="frac-line" style="border-bottom-width: 0.04em;"></span></span><span class="" style="top: -3.394em;"><span class="pstrut" style="height: 3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.345em;"><span class=""></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.664392em;"><span class="" style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">m</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">≈</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 0.64444em; vertical-align: 0em;"></span><span class="mord">0</span><span class="mord">.</span><span class="mord">3</span><span class="mord">6</span><span class="mord">8</span></span></span></span></span>的样本不会出现在<span class="katex--inline"><span class="katex"><span class="katex-mathml">
      <math>
       <semantics>
        <mrow>
         <msup>
          <mi>
           D
          </mi>
          <mo>
           +
          </mo>
         </msup>
        </mrow>
        <annotation encoding="application/x-tex">
         D^+
        </annotation>
       </semantics>
      </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.771331em; vertical-align: 0em;"></span><span class="mord"><span style="margin-right: 0.02778em;" class="mord mathit">D</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.771331em;"><span class="" style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">+</span></span></span></span></span></span></span></span></span></span></span></span>中。用<span class="katex--inline"><span class="katex"><span class="katex-mathml">
      <math>
       <semantics>
        <mrow>
         <msup>
          <mi>
           D
          </mi>
          <msup>
           <mrow></mrow>
           <mo mathvariant="normal">
            ′
           </mo>
          </msup>
         </msup>
        </mrow>
        <annotation encoding="application/x-tex">
         D^{&amp;#x27;}
        </annotation>
       </semantics>
      </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.94248em; vertical-align: 0em;"></span><span class="mord"><span style="margin-right: 0.02778em;" class="mord mathit">D</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.94248em;"><span class="" style="top: -2.94248em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.57948em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class=""></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.827829em;"><span class="" style="top: -2.931em; margin-right: 0.0714286em;"><span class="pstrut" style="height: 2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span>做训练集，<span class="katex--inline"><span class="katex"><span class="katex-mathml">
      <math>
       <semantics>
        <mrow>
         <mi>
          D
         </mi>
         <mi mathvariant="normal">
          /
         </mi>
         <msup>
          <mi>
           D
          </mi>
          <msup>
           <mrow></mrow>
           <mo mathvariant="normal">
            ′
           </mo>
          </msup>
         </msup>
        </mrow>
        <annotation encoding="application/x-tex">
         D/D^{&amp;#x27;}
        </annotation>
       </semantics>
      </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1.19248em; vertical-align: -0.25em;"></span><span style="margin-right: 0.02778em;" class="mord mathit">D</span><span class="mord">/</span><span class="mord"><span style="margin-right: 0.02778em;" class="mord mathit">D</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.94248em;"><span class="" style="top: -2.94248em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.57948em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class=""></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.827829em;"><span class="" style="top: -2.931em; margin-right: 0.0714286em;"><span class="pstrut" style="height: 2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span>做测试集得到的测试误差又叫“包外估计”。<br>     自助法的优缺点都很明显，一方面，从<span class="katex--inline"><span class="katex"><span class="katex-mathml">
      <math>
       <semantics>
        <mrow>
         <mi>
          D
         </mi>
        </mrow>
        <annotation encoding="application/x-tex">
         D
        </annotation>
       </semantics>
      </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span style="margin-right: 0.02778em;" class="mord mathit">D</span></span></span></span></span>中生成若干数据集<span class="katex--inline"><span class="katex"><span class="katex-mathml">
      <math>
       <semantics>
        <mrow>
         <msup>
          <mi>
           D
          </mi>
          <msup>
           <mrow></mrow>
           <mo mathvariant="normal">
            ′
           </mo>
          </msup>
         </msup>
        </mrow>
        <annotation encoding="application/x-tex">
         D^{&amp;#x27;}
        </annotation>
       </semantics>
      </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.94248em; vertical-align: 0em;"></span><span class="mord"><span style="margin-right: 0.02778em;" class="mord mathit">D</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.94248em;"><span class="" style="top: -2.94248em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.57948em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class=""></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.827829em;"><span class="" style="top: -2.931em; margin-right: 0.0714286em;"><span class="pstrut" style="height: 2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span>，相当于扩增了原始数据量，比较适合原始数据量较少，难以有效划分S/T的情况；另一方面，<span class="katex--inline"><span class="katex"><span class="katex-mathml">
      <math>
       <semantics>
        <mrow>
         <msup>
          <mi>
           D
          </mi>
          <msup>
           <mrow></mrow>
           <mo mathvariant="normal">
            ′
           </mo>
          </msup>
         </msup>
        </mrow>
        <annotation encoding="application/x-tex">
         D^{&amp;#x27;}
        </annotation>
       </semantics>
      </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.94248em; vertical-align: 0em;"></span><span class="mord"><span style="margin-right: 0.02778em;" class="mord mathit">D</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.94248em;"><span class="" style="top: -2.94248em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.57948em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class=""></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.827829em;"><span class="" style="top: -2.931em; margin-right: 0.0714286em;"><span class="pstrut" style="height: 2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span>的分布规律势必与<span class="katex--inline"><span class="katex"><span class="katex-mathml">
      <math>
       <semantics>
        <mrow>
         <mi>
          D
         </mi>
        </mrow>
        <annotation encoding="application/x-tex">
         D
        </annotation>
       </semantics>
      </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span style="margin-right: 0.02778em;" class="mord mathit">D</span></span></span></span></span>不同，会产生额外的估计误差。所以自助法适用于经验分布与原始分布估计一致的情况。</p> 
  <h4><a id="224__31"></a>2.2.4 调参与最终模型</h4> 
  <p>   本章开头我们讨论了如何评估学习器的“泛化误差”，就是将数据集划分为S+T，用测试误差来近似泛化误差。2.2.1~2.2.3节我们讨论了三种划分S/T的方法：hold-out、k-fold cross-validation、bootstrapping。这里思考调参的问题。<br>    用S训练模型，并没有利用全部的数据，所以应遵循下述步骤：</p> 
  <ol> 
   <li>给定数据集<span class="katex--inline"><span class="katex"><span class="katex-mathml">
       <math>
        <semantics>
         <mrow>
          <mi>
           D
          </mi>
         </mrow>
         <annotation encoding="application/x-tex">
          D
         </annotation>
        </semantics>
       </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span style="margin-right: 0.02778em;" class="mord mathit">D</span></span></span></span></span>，划分S/T；</li> 
   <li>利用S训练模型；</li> 
   <li>利用T测试模型；</li> 
   <li>调参；</li> 
   <li>用D再次训练；</li> 
   <li>提交模型</li> 
  </ol> 
  <h3><a id="23__41"></a>2.3 性能度量</h3> 
  <p>    对学习器的泛化性能进行评估，除了有效的评估方法，还要有衡量模型泛化能力的评价标准，即性能度量（performance measure）。在预测任务中，给定样例集<span class="katex--inline"><span class="katex"><span class="katex-mathml">
      <math>
       <semantics>
        <mrow>
         <mi>
          D
         </mi>
         <mo>
          =
         </mo>
         <mo>
          {
         </mo>
         <mo>
          (
         </mo>
         <mover accent="true">
          <msub>
           <mi>
            x
           </mi>
           <mn>
            1
           </mn>
          </msub>
          <mo>
           ⃗
          </mo>
         </mover>
         <mo separator="true">
          ,
         </mo>
         <msub>
          <mi>
           y
          </mi>
          <mn>
           1
          </mn>
         </msub>
         <mo>
          )
         </mo>
         <mo separator="true">
          ,
         </mo>
         <mo>
          (
         </mo>
         <mover accent="true">
          <msub>
           <mi>
            x
           </mi>
           <mn>
            2
           </mn>
          </msub>
          <mo>
           ⃗
          </mo>
         </mover>
         <mo separator="true">
          ,
         </mo>
         <msub>
          <mi>
           y
          </mi>
          <mn>
           2
          </mn>
         </msub>
         <mo>
          )
         </mo>
         <mo separator="true">
          ,
         </mo>
         <mi mathvariant="normal">
          .
         </mi>
         <mi mathvariant="normal">
          .
         </mi>
         <mi mathvariant="normal">
          .
         </mi>
         <mo separator="true">
          ,
         </mo>
         <mo>
          (
         </mo>
         <mover accent="true">
          <msub>
           <mi>
            x
           </mi>
           <mi>
            m
           </mi>
          </msub>
          <mo>
           ⃗
          </mo>
         </mover>
         <mo separator="true">
          ,
         </mo>
         <msub>
          <mi>
           y
          </mi>
          <mi>
           m
          </mi>
         </msub>
         <mo>
          )
         </mo>
         <mo>
          }
         </mo>
        </mrow>
        <annotation encoding="application/x-tex">
         D=\{(\vec{x_1},y_1),(\vec{x_2},y_2),...,(\vec{x_m},y_m)\}
        </annotation>
       </semantics>
      </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span style="margin-right: 0.02778em;" class="mord mathit">D</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mopen">{</span><span class="mopen">(</span><span class="mord accent"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.714em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord"><span class="mord mathit">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="accent-body" style="left: -0.2355em;"><span class="overlay" style="height: 0.714em; width: 0.471em;">
              <svg width="0.471em" height="0.714em" style="width:0.471em" viewbox="0 0 471 714" preserveaspectratio="xMinYMin">
               <path d="M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5
3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11
10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63
-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1
-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59
H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359
c-16-25.333-24-45-24-59z"></path>
              </svg></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord"><span style="margin-right: 0.03588em;" class="mord mathit">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: -0.03588em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mclose">)</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mopen">(</span><span class="mord accent"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.714em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord"><span class="mord mathit">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="accent-body" style="left: -0.2355em;"><span class="overlay" style="height: 0.714em; width: 0.471em;">
              <svg width="0.471em" height="0.714em" style="width:0.471em" viewbox="0 0 471 714" preserveaspectratio="xMinYMin">
               <path d="M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5
3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11
10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63
-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1
-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59
H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359
c-16-25.333-24-45-24-59z"></path>
              </svg></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord"><span style="margin-right: 0.03588em;" class="mord mathit">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: -0.03588em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mclose">)</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord">.</span><span class="mord">.</span><span class="mord">.</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mopen">(</span><span class="mord accent"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.714em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord"><span class="mord mathit">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.151392em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">m</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="accent-body" style="left: -0.2355em;"><span class="overlay" style="height: 0.714em; width: 0.471em;">
              <svg width="0.471em" height="0.714em" style="width:0.471em" viewbox="0 0 471 714" preserveaspectratio="xMinYMin">
               <path d="M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5
3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11
10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63
-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1
-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59
H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359
c-16-25.333-24-45-24-59z"></path>
              </svg></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord"><span style="margin-right: 0.03588em;" class="mord mathit">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.151392em;"><span class="" style="top: -2.55em; margin-left: -0.03588em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">m</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mclose">)</span><span class="mclose">}</span></span></span></span></span>，其中<span class="katex--inline"><span class="katex"><span class="katex-mathml">
      <math>
       <semantics>
        <mrow>
         <msub>
          <mi>
           y
          </mi>
          <mi>
           i
          </mi>
         </msub>
        </mrow>
        <annotation encoding="application/x-tex">
         y_i
        </annotation>
       </semantics>
      </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.625em; vertical-align: -0.19444em;"></span><span class="mord"><span style="margin-right: 0.03588em;" class="mord mathit">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.311664em;"><span class="" style="top: -2.55em; margin-left: -0.03588em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span>是示例<span class="katex--inline"><span class="katex"><span class="katex-mathml">
      <math>
       <semantics>
        <mrow>
         <mover accent="true">
          <msub>
           <mi>
            x
           </mi>
           <mi>
            i
           </mi>
          </msub>
          <mo>
           ⃗
          </mo>
         </mover>
        </mrow>
        <annotation encoding="application/x-tex">
         \vec{x_i}
        </annotation>
       </semantics>
      </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.864em; vertical-align: -0.15em;"></span><span class="mord accent"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.714em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord"><span class="mord mathit">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.311664em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="accent-body" style="left: -0.2355em;"><span class="overlay" style="height: 0.714em; width: 0.471em;">
              <svg width="0.471em" height="0.714em" style="width:0.471em" viewbox="0 0 471 714" preserveaspectratio="xMinYMin">
               <path d="M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5
3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11
10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63
-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1
-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59
H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359
c-16-25.333-24-45-24-59z"></path>
              </svg></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span>的真实标记。<br>     在回归任务中，常见的性能度量是“均方误差”：<span class="katex--inline"><span class="katex"><span class="katex-mathml">
      <math>
       <semantics>
        <mrow>
         <mi>
          E
         </mi>
         <mo>
          (
         </mo>
         <mi>
          f
         </mi>
         <mo separator="true">
          ;
         </mo>
         <mi>
          D
         </mi>
         <mo>
          )
         </mo>
         <mo>
          =
         </mo>
         <mfrac>
          <mn>
           1
          </mn>
          <mi>
           m
          </mi>
         </mfrac>
         <mstyle displaystyle="true" scriptlevel="0">
          <munderover>
           <mo>
            ∑
           </mo>
           <mrow>
            <mi>
             i
            </mi>
            <mo>
             =
            </mo>
            <mn>
             1
            </mn>
           </mrow>
           <mi>
            m
           </mi>
          </munderover>
          <mo>
           (
          </mo>
          <mi>
           f
          </mi>
          <mo>
           (
          </mo>
          <msub>
           <mi>
            x
           </mi>
           <mi>
            i
           </mi>
          </msub>
          <mo>
           )
          </mo>
          <mo>
           −
          </mo>
          <msub>
           <mi>
            y
           </mi>
           <mi>
            i
           </mi>
          </msub>
          <msup>
           <mo>
            )
           </mo>
           <mn>
            2
           </mn>
          </msup>
         </mstyle>
        </mrow>
        <annotation encoding="application/x-tex">
         E(f;D)=\frac{1}{m}\displaystyle{\sum^{m}_{i=1}}(f(x_i)-y_i)^2
        </annotation>
       </semantics>
      </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span style="margin-right: 0.05764em;" class="mord mathit">E</span><span class="mopen">(</span><span style="margin-right: 0.10764em;" class="mord mathit">f</span><span class="mpunct">;</span><span class="mspace" style="margin-right: 0.166667em;"></span><span style="margin-right: 0.02778em;" class="mord mathit">D</span><span class="mclose">)</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 2.92907em; vertical-align: -1.27767em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.845108em;"><span class="" style="top: -2.655em;"><span class="pstrut" style="height: 3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">m</span></span></span></span><span class="" style="top: -3.23em;"><span class="pstrut" style="height: 3em;"></span><span class="frac-line" style="border-bottom-width: 0.04em;"></span></span><span class="" style="top: -3.394em;"><span class="pstrut" style="height: 3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.345em;"><span class=""></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mord"><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.6514em;"><span class="" style="top: -1.87233em; margin-left: 0em;"><span class="pstrut" style="height: 3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span class="" style="top: -3.05001em;"><span class="pstrut" style="height: 3.05em;"></span><span class=""><span class="mop op-symbol large-op">∑</span></span></span><span class="" style="top: -4.30001em; margin-left: 0em;"><span class="pstrut" style="height: 3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">m</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 1.27767em;"><span class=""></span></span></span></span></span></span><span class="mopen">(</span><span style="margin-right: 0.10764em;" class="mord mathit">f</span><span class="mopen">(</span><span class="mord"><span class="mord mathit">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.311664em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 1.11411em; vertical-align: -0.25em;"></span><span class="mord"><span style="margin-right: 0.03588em;" class="mord mathit">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.311664em;"><span class="" style="top: -2.55em; margin-left: -0.03588em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.864108em;"><span class="" style="top: -3.113em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span></span>，更一般的：<br> <span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml">
       <math>
        <semantics>
         <mrow>
          <mtext>
           &nbsp;
          </mtext>
          <mi>
           E
          </mi>
          <mo>
           (
          </mo>
          <mi>
           f
          </mi>
          <mo separator="true">
           ;
          </mo>
          <mi>
           D
          </mi>
          <mo>
           )
          </mo>
          <mo>
           =
          </mo>
          <msub>
           <mo>
            ∫
           </mo>
           <mrow>
            <mi>
             x
            </mi>
            <mo>
             ∈
            </mo>
            <mi>
             D
            </mi>
           </mrow>
          </msub>
          <mo>
           (
          </mo>
          <mi>
           f
          </mi>
          <mo>
           (
          </mo>
          <mi>
           x
          </mi>
          <mo>
           )
          </mo>
          <mo>
           −
          </mo>
          <mi>
           y
          </mi>
          <msup>
           <mo>
            )
           </mo>
           <mn>
            2
           </mn>
          </msup>
          <mo>
           ⋅
          </mo>
          <mi>
           p
          </mi>
          <mo>
           (
          </mo>
          <mi>
           x
          </mi>
          <mo>
           )
          </mo>
          <mi mathvariant="normal">
           d
          </mi>
          <mi>
           x
          </mi>
         </mrow>
         <annotation encoding="application/x-tex">
           \ E(f;D)=\int_{x\in D} (f(x)-y)^2\cdot p(x){\rm d}x
         </annotation>
        </semantics>
       </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mspace">&nbsp;</span><span style="margin-right: 0.05764em;" class="mord mathit">E</span><span class="mopen">(</span><span style="margin-right: 0.10764em;" class="mord mathit">f</span><span class="mpunct">;</span><span class="mspace" style="margin-right: 0.166667em;"></span><span style="margin-right: 0.02778em;" class="mord mathit">D</span><span class="mclose">)</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 2.29932em; vertical-align: -0.93932em;"></span><span class="mop"><span style="margin-right: 0.44445em; position: relative; top: -0.001125em;" class="mop op-symbol large-op">∫</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist"><span class="" style="top: -1.78805em; margin-left: -0.44445em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">x</span><span class="mrel mtight">∈</span><span style="margin-right: 0.02778em;" class="mord mathit mtight">D</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.93932em;"><span class=""></span></span></span></span></span></span><span class="mopen">(</span><span style="margin-right: 0.10764em;" class="mord mathit">f</span><span class="mopen">(</span><span class="mord mathit">x</span><span class="mclose">)</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 1.11411em; vertical-align: -0.25em;"></span><span style="margin-right: 0.03588em;" class="mord mathit">y</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.864108em;"><span class="" style="top: -3.113em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathit">p</span><span class="mopen">(</span><span class="mord mathit">x</span><span class="mclose">)</span><span class="mord"><span class="mord"><span class="mord mathrm">d</span></span></span><span class="mord mathit">x</span></span></span></span></span></span><br>     在分类任务中，常见指标如下：</p> 
  <h4><a id="231__47"></a>2.3.1 错误率与精度</h4> 
  <ol> 
   <li>分类错误率<span class="katex--inline"><span class="katex"><span class="katex-mathml">
       <math>
        <semantics>
         <mrow>
          <mi>
           E
          </mi>
          <mo>
           (
          </mo>
          <mi>
           f
          </mi>
          <mo separator="true">
           ;
          </mo>
          <mi>
           D
          </mi>
          <mo>
           )
          </mo>
          <mo>
           =
          </mo>
          <mfrac>
           <mn>
            1
           </mn>
           <mi>
            m
           </mi>
          </mfrac>
          <mstyle displaystyle="true" scriptlevel="0">
           <munderover>
            <mo>
             ∑
            </mo>
            <mrow>
             <mi>
              i
             </mi>
             <mo>
              =
             </mo>
             <mn>
              1
             </mn>
            </mrow>
            <mi>
             m
            </mi>
           </munderover>
           <mi mathvariant="normal">
            Ⅱ
           </mi>
           <mo>
            (
           </mo>
           <mi>
            f
           </mi>
           <mo>
            (
           </mo>
           <msub>
            <mi>
             x
            </mi>
            <mi>
             i
            </mi>
           </msub>
           <mo>
            )
           </mo>
           <mo>
            =
           </mo>
           <mpadded width="0px">
            <mo>
             ̸
            </mo>
           </mpadded>
           <msub>
            <mi>
             y
            </mi>
            <mi>
             i
            </mi>
           </msub>
           <mo>
            )
           </mo>
          </mstyle>
         </mrow>
         <annotation encoding="application/x-tex">
          E(f;D)=\frac{1}{m}\displaystyle{\sum^{m}_{i=1}}Ⅱ(f(x_i)=\not y_i)
         </annotation>
        </semantics>
       </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span style="margin-right: 0.05764em;" class="mord mathit">E</span><span class="mopen">(</span><span style="margin-right: 0.10764em;" class="mord mathit">f</span><span class="mpunct">;</span><span class="mspace" style="margin-right: 0.166667em;"></span><span style="margin-right: 0.02778em;" class="mord mathit">D</span><span class="mclose">)</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 2.92907em; vertical-align: -1.27767em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.845108em;"><span class="" style="top: -2.655em;"><span class="pstrut" style="height: 3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">m</span></span></span></span><span class="" style="top: -3.23em;"><span class="pstrut" style="height: 3em;"></span><span class="frac-line" style="border-bottom-width: 0.04em;"></span></span><span class="" style="top: -3.394em;"><span class="pstrut" style="height: 3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.345em;"><span class=""></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mord"><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.6514em;"><span class="" style="top: -1.87233em; margin-left: 0em;"><span class="pstrut" style="height: 3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span class="" style="top: -3.05001em;"><span class="pstrut" style="height: 3.05em;"></span><span class=""><span class="mop op-symbol large-op">∑</span></span></span><span class="" style="top: -4.30001em; margin-left: 0em;"><span class="pstrut" style="height: 3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">m</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 1.27767em;"><span class=""></span></span></span></span></span></span><span class="mord">Ⅱ</span><span class="mopen">(</span><span style="margin-right: 0.10764em;" class="mord mathit">f</span><span class="mopen">(</span><span class="mord"><span class="mord mathit">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.311664em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span></span><span class="base"><span class="strut" style="height: 0.88888em; vertical-align: -0.19444em;"></span><span class="mrel"><span class="mord"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.69444em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="rlap"><span class="strut" style="height: 0.88888em; vertical-align: -0.19444em;"></span><span class="inner"><span class="mrel latin_fallback"≯</span></span><span class="fix"></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.19444em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord"><span style="margin-right: 0.03588em;" class="mord mathit">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.311664em;"><span class="" style="top: -2.55em; margin-left: -0.03588em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></span>，更一般的，设概率密度为<span class="katex--inline"><span class="katex"><span class="katex-mathml">
       <math>
        <semantics>
         <mrow>
          <mi>
           p
          </mi>
          <mo>
           (
          </mo>
          <mo>
           ⋅
          </mo>
          <mo>
           )
          </mo>
         </mrow>
         <annotation encoding="application/x-tex">
          p(\cdot)
         </annotation>
        </semantics>
       </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathit">p</span><span class="mopen">(</span><span class="mord">⋅</span><span class="mclose">)</span></span></span></span></span>：<span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml">
        <math>
         <semantics>
          <mtable>
           <mtr>
            <mtd>
             <mstyle displaystyle="true" scriptlevel="0">
              <mrow>
               <mtext>
                &nbsp;
               </mtext>
               <mi>
                E
               </mi>
               <mo>
                (
               </mo>
               <mi>
                f
               </mi>
               <mo separator="true">
                ;
               </mo>
               <mi>
                D
               </mi>
               <mo>
                )
               </mo>
               <mo>
                =
               </mo>
               <msub>
                <mo>
                 ∫
                </mo>
                <mrow>
                 <mi>
                  x
                 </mi>
                 <mo>
                  ∈
                 </mo>
                 <mi>
                  D
                 </mi>
                </mrow>
               </msub>
               <mi mathvariant="normal">
                Ⅱ
               </mi>
               <mo>
                (
               </mo>
               <mi>
                f
               </mi>
               <mo>
                (
               </mo>
               <mi>
                x
               </mi>
               <mo>
                )
               </mo>
               <mo>
                =
               </mo>
               <mpadded width="0px">
                <mo>
                 ̸
                </mo>
               </mpadded>
               <mi>
                y
               </mi>
               <mo>
                )
               </mo>
               <mo>
                ⋅
               </mo>
               <mi>
                p
               </mi>
               <mo>
                (
               </mo>
               <mi>
                x
               </mi>
               <mo>
                )
               </mo>
               <mi mathvariant="normal">
                d
               </mi>
               <mi>
                x
               </mi>
              </mrow>
             </mstyle>
            </mtd>
           </mtr>
          </mtable>
          <annotation encoding="application/x-tex">
           \begin{aligned} \ E(f;D)=\int_{x\in D} Ⅱ(f(x)=\not y)\cdot p(x){\rm d}x \end{aligned}
          </annotation>
         </semantics>
        </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 2.59932em; vertical-align: -1.04966em;"></span><span class="mord"><span class="mtable"><span class="col-align-r"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.54966em;"><span class="" style="top: -3.54966em;"><span class="pstrut" style="height: 3.36em;"></span><span class="mord"><span class="mspace">&nbsp;</span><span style="margin-right: 0.05764em;" class="mord mathit">E</span><span class="mopen">(</span><span style="margin-right: 0.10764em;" class="mord mathit">f</span><span class="mpunct">;</span><span class="mspace" style="margin-right: 0.166667em;"></span><span style="margin-right: 0.02778em;" class="mord mathit">D</span><span class="mclose">)</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mop"><span style="margin-right: 0.44445em; position: relative; top: -0.001125em;" class="mop op-symbol large-op">∫</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist"><span class="" style="top: -1.78805em; margin-left: -0.44445em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">x</span><span class="mrel mtight">∈</span><span style="margin-right: 0.02778em;" class="mord mathit mtight">D</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.93932em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord">Ⅱ</span><span class="mopen">(</span><span style="margin-right: 0.10764em;" class="mord mathit">f</span><span class="mopen">(</span><span class="mord mathit">x</span><span class="mclose">)</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mrel"><span class="mord"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.69444em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="rlap"><span class="strut" style="height: 0.88888em; vertical-align: -0.19444em;"></span><span class="inner"><span class="mrel latin_fallback"≯</span></span><span class="fix"></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.19444em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.277778em;"></span><span style="margin-right: 0.03588em;" class="mord mathit">y</span><span class="mclose">)</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mord mathit">p</span><span class="mopen">(</span><span class="mord mathit">x</span><span class="mclose">)</span><span class="mord"><span class="mord"><span class="mord mathrm">d</span></span></span><span class="mord mathit">x</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 1.04966em;"><span class=""></span></span></span></span></span></span></span></span></span></span></span></span></li> 
   <li>精度<span class="katex--inline"><span class="katex"><span class="katex-mathml">
       <math>
        <semantics>
         <mrow>
          <mi>
           a
          </mi>
          <mi>
           c
          </mi>
          <mi>
           c
          </mi>
          <mo>
           =
          </mo>
          <mn>
           1
          </mn>
          <mo>
           −
          </mo>
          <mi>
           E
          </mi>
          <mo>
           (
          </mo>
          <mi>
           f
          </mi>
          <mo separator="true">
           ;
          </mo>
          <mi>
           D
          </mi>
          <mo>
           )
          </mo>
         </mrow>
         <annotation encoding="application/x-tex">
          acc=1-E(f;D)
         </annotation>
        </semantics>
       </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.43056em; vertical-align: 0em;"></span><span class="mord mathit">a</span><span class="mord mathit">c</span><span class="mord mathit">c</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 0.72777em; vertical-align: -0.08333em;"></span><span class="mord">1</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span style="margin-right: 0.05764em;" class="mord mathit">E</span><span class="mopen">(</span><span style="margin-right: 0.10764em;" class="mord mathit">f</span><span class="mpunct">;</span><span class="mspace" style="margin-right: 0.166667em;"></span><span style="margin-right: 0.02778em;" class="mord mathit">D</span><span class="mclose">)</span></span></span></span></span></li> 
  </ol> 
  <h4><a id="232_F1_52"></a>2.3.2 查准率、查全率与F1</h4> 
  <p>对于二分类问题，可根据<span class="katex--inline"><span class="katex"><span class="katex-mathml">
      <math>
       <semantics>
        <mrow>
         <mi>
          f
         </mi>
         <mo>
          (
         </mo>
         <msub>
          <mi>
           x
          </mi>
          <mi>
           i
          </mi>
         </msub>
         <mo>
          )
         </mo>
        </mrow>
        <annotation encoding="application/x-tex">
         f(x_i)
        </annotation>
       </semantics>
      </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span style="margin-right: 0.10764em;" class="mord mathit">f</span><span class="mopen">(</span><span class="mord"><span class="mord mathit">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.311664em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></span>与<span class="katex--inline"><span class="katex"><span class="katex-mathml">
      <math>
       <semantics>
        <mrow>
         <msub>
          <mi>
           y
          </mi>
          <mi>
           i
          </mi>
         </msub>
        </mrow>
        <annotation encoding="application/x-tex">
         y_i
        </annotation>
       </semantics>
      </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.625em; vertical-align: -0.19444em;"></span><span class="mord"><span style="margin-right: 0.03588em;" class="mord mathit">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.311664em;"><span class="" style="top: -2.55em; margin-left: -0.03588em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span>的关系将样例划分为：</p> 
  <h5><a id="center21_center_54"></a>
   <center>
    表2.1 分类结果混淆矩阵
   </center></h5> 
  <table> 
   <tbody>
    <tr> 
     <th rowspan="2">真实情况</th> 
     <th colspan="2">预测结果</th> 
    </tr> 
    <tr> 
     <td>正例</td> 
     <td>反例</td> 
    </tr> 
    <tr> 
     <td>正例</td> 
     <td>TP(真正例)</td> 
     <td>FN(假反例)</td> 
    </tr> 
    <tr> 
     <td>反例</td> 
     <td>FP(假正例)</td> 
     <td>TN(真反例)</td> 
    </tr> 
   </tbody>
  </table> 
  <ol> 
   <li>查准率 <span class="katex--inline"><span class="katex"><span class="katex-mathml">
       <math>
        <semantics>
         <mrow>
          <mi>
           P
          </mi>
          <mo>
           =
          </mo>
          <mfrac>
           <mrow>
            <mi>
             T
            </mi>
            <mi>
             P
            </mi>
           </mrow>
           <mrow>
            <mi>
             T
            </mi>
            <mi>
             P
            </mi>
            <mo>
             +
            </mo>
            <mi>
             F
            </mi>
            <mi>
             P
            </mi>
           </mrow>
          </mfrac>
         </mrow>
         <annotation encoding="application/x-tex">
          P=\frac{TP}{TP+FP}
         </annotation>
        </semantics>
       </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span style="margin-right: 0.13889em;" class="mord mathit">P</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 1.27566em; vertical-align: -0.403331em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.872331em;"><span class="" style="top: -2.655em;"><span class="pstrut" style="height: 3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span style="margin-right: 0.13889em;" class="mord mathit mtight">T</span><span style="margin-right: 0.13889em;" class="mord mathit mtight">P</span><span class="mbin mtight">+</span><span style="margin-right: 0.13889em;" class="mord mathit mtight">F</span><span style="margin-right: 0.13889em;" class="mord mathit mtight">P</span></span></span></span><span class="" style="top: -3.23em;"><span class="pstrut" style="height: 3em;"></span><span class="frac-line" style="border-bottom-width: 0.04em;"></span></span><span class="" style="top: -3.394em;"><span class="pstrut" style="height: 3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span style="margin-right: 0.13889em;" class="mord mathit mtight">T</span><span style="margin-right: 0.13889em;" class="mord mathit mtight">P</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.403331em;"><span class=""></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></li> 
   <li>查全率 <span class="katex--inline"><span class="katex"><span class="katex-mathml">
       <math>
        <semantics>
         <mrow>
          <mi>
           R
          </mi>
          <mo>
           =
          </mo>
          <mfrac>
           <mrow>
            <mi>
             T
            </mi>
            <mi>
             P
            </mi>
           </mrow>
           <mrow>
            <mi>
             T
            </mi>
            <mi>
             P
            </mi>
            <mo>
             +
            </mo>
            <mi>
             F
            </mi>
            <mi>
             N
            </mi>
           </mrow>
          </mfrac>
         </mrow>
         <annotation encoding="application/x-tex">
          R=\frac{TP}{TP+FN}
         </annotation>
        </semantics>
       </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span style="margin-right: 0.00773em;" class="mord mathit">R</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 1.27566em; vertical-align: -0.403331em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.872331em;"><span class="" style="top: -2.655em;"><span class="pstrut" style="height: 3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span style="margin-right: 0.13889em;" class="mord mathit mtight">T</span><span style="margin-right: 0.13889em;" class="mord mathit mtight">P</span><span class="mbin mtight">+</span><span style="margin-right: 0.13889em;" class="mord mathit mtight">F</span><span style="margin-right: 0.10903em;" class="mord mathit mtight">N</span></span></span></span><span class="" style="top: -3.23em;"><span class="pstrut" style="height: 3em;"></span><span class="frac-line" style="border-bottom-width: 0.04em;"></span></span><span class="" style="top: -3.394em;"><span class="pstrut" style="height: 3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span style="margin-right: 0.13889em;" class="mord mathit mtight">T</span><span style="margin-right: 0.13889em;" class="mord mathit mtight">P</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.403331em;"><span class=""></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></li> 
  </ol> 
  <p>    查准率与查全率互相矛盾，这很好理解。<strong>有时我们需要根据学习器的预测结果对样例排序，根据排序结果来判断哪个样例“最有可能是正例”，以此顺序将样例逐个预测为“正例”，就能够计算出当前的查准率与查全率，从而得到“P-R”曲线</strong>。不同学习器的“P-R”曲线如下图所示：<br> <img src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190801163244908.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzMzOTk3ODI2,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>     若一个学习器的“P-R”曲线能够将另一个学习器完全包住，则可断言前者性能优于后者，否则不可轻易判断孰优孰劣，需要结合其他信息判断。很容易想到一个指标就是曲线包围面积，可这并不好求；另一个指标就是“平衡点”（Break Even Point，简称BEP）,BEP=P=R。第三个指标是P与R的调和平均数：<br> <span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml">
       <math>
        <semantics>
         <mtable>
          <mtr>
           <mtd>
            <mstyle displaystyle="true" scriptlevel="0">
             <mrow></mrow>
            </mstyle>
           </mtd>
          </mtr>
          <mtr>
           <mtd>
            <mstyle displaystyle="true" scriptlevel="0">
             <mrow></mrow>
            </mstyle>
           </mtd>
           <mtd>
            <mstyle displaystyle="true" scriptlevel="0">
             <mrow>
              <mrow></mrow>
              <mi>
               F
              </mi>
              <mn>
               1
              </mn>
              <mo>
               =
              </mo>
              <mfrac>
               <mrow>
                <mn>
                 2
                </mn>
                <mo>
                 ×
                </mo>
                <mi>
                 P
                </mi>
                <mo>
                 ×
                </mo>
                <mi>
                 R
                </mi>
               </mrow>
               <mrow>
                <mi>
                 P
                </mi>
                <mo>
                 +
                </mo>
                <mi>
                 R
                </mi>
               </mrow>
              </mfrac>
              <mo>
               =
              </mo>
              <mfrac>
               <mrow>
                <mn>
                 2
                </mn>
                <mo>
                 ×
                </mo>
                <mi>
                 T
                </mi>
                <mi>
                 P
                </mi>
               </mrow>
               <mrow>
                <mi mathvariant="normal">
                 样
                </mi>
                <mi mathvariant="normal">
                 例
                </mi>
                <mi mathvariant="normal">
                 总
                </mi>
                <mi mathvariant="normal">
                 数
                </mi>
                <mo>
                 +
                </mo>
                <mi>
                 T
                </mi>
                <mi>
                 P
                </mi>
                <mo>
                 −
                </mo>
                <mi>
                 T
                </mi>
                <mi>
                 N
                </mi>
               </mrow>
              </mfrac>
             </mrow>
            </mstyle>
           </mtd>
          </mtr>
         </mtable>
         <annotation encoding="application/x-tex">
          \begin{aligned} \\&amp;amp; F1=\frac{2\times P\times R}{P+R}=\frac{2\times TP}{样例总数+TP-TN} \end{aligned}
         </annotation>
        </semantics>
       </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 3.92966em; vertical-align: -1.71483em;"></span><span class="mord"><span class="mtable"><span class="col-align-r"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 2.21483em;"><span class="" style="top: -4.73516em;"><span class="pstrut" style="height: 3.36033em;"></span><span class="mord"></span></span><span class="" style="top: -2.71483em;"><span class="pstrut" style="height: 3.36033em;"></span><span class="mord"></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 1.71483em;"><span class=""></span></span></span></span></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.71483em;"><span class="" style="top: -2.71483em;"><span class="pstrut" style="height: 3.36033em;"></span><span class="mord"><span class="mord"></span><span style="margin-right: 0.13889em;" class="mord mathit">F</span><span class="mord">1</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.36033em;"><span class="" style="top: -2.314em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span style="margin-right: 0.13889em;" class="mord mathit">P</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.222222em;"></span><span style="margin-right: 0.00773em;" class="mord mathit">R</span></span></span><span class="" style="top: -3.23em;"><span class="pstrut" style="height: 3em;"></span><span class="frac-line" style="border-bottom-width: 0.04em;"></span></span><span class="" style="top: -3.677em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord">2</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right: 0.222222em;"></span><span style="margin-right: 0.13889em;" class="mord mathit">P</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right: 0.222222em;"></span><span style="margin-right: 0.00773em;" class="mord mathit">R</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.76933em;"><span class=""></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.36033em;"><span class="" style="top: -2.314em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord cjk_fallback">样</span><span class="mord cjk_fallback">例</span><span class="mord cjk_fallback">总</span><span class="mord cjk_fallback">数</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.222222em;"></span><span style="margin-right: 0.13889em;" class="mord mathit">T</span><span style="margin-right: 0.13889em;" class="mord mathit">P</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right: 0.222222em;"></span><span style="margin-right: 0.13889em;" class="mord mathit">T</span><span style="margin-right: 0.10903em;" class="mord mathit">N</span></span></span><span class="" style="top: -3.23em;"><span class="pstrut" style="height: 3em;"></span><span class="frac-line" style="border-bottom-width: 0.04em;"></span></span><span class="" style="top: -3.677em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord">2</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right: 0.222222em;"></span><span style="margin-right: 0.13889em;" class="mord mathit">T</span><span style="margin-right: 0.13889em;" class="mord mathit">P</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.76933em;"><span class=""></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 1.71483em;"><span class=""></span></span></span></span></span></span></span></span></span></span></span></span><br>     相比于几算术平均数和何平均数，<span class="katex--inline"><span class="katex"><span class="katex-mathml">
      <math>
       <semantics>
        <mrow>
         <mi>
          F
         </mi>
         <mn>
          1
         </mn>
        </mrow>
        <annotation encoding="application/x-tex">
         F1
        </annotation>
       </semantics>
      </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span style="margin-right: 0.13889em;" class="mord mathit">F</span><span class="mord">1</span></span></span></span></span>更注重小值。此外，在一般应用中，对查准率与查全率的关注程度是不同的，我们用<span class="katex--inline"><span class="katex"><span class="katex-mathml">
      <math>
       <semantics>
        <mrow>
         <mi>
          β
         </mi>
        </mrow>
        <annotation encoding="application/x-tex">
         \beta
        </annotation>
       </semantics>
      </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.88888em; vertical-align: -0.19444em;"></span><span style="margin-right: 0.05278em;" class="mord mathit">β</span></span></span></span></span>表示查全率对查准率的重要程度，将上式改写成：<br> <span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml">
       <math>
        <semantics>
         <mtable>
          <mtr>
           <mtd>
            <mstyle displaystyle="true" scriptlevel="0">
             <mrow>
              <mtext>
               &nbsp;
              </mtext>
              <msub>
               <mi>
                F
               </mi>
               <mi>
                β
               </mi>
              </msub>
              <mo>
               =
              </mo>
              <mfrac>
               <mrow>
                <mo>
                 (
                </mo>
                <mn>
                 1
                </mn>
                <mo>
                 +
                </mo>
                <msup>
                 <mi>
                  β
                 </mi>
                 <mn>
                  2
                 </mn>
                </msup>
                <mo>
                 )
                </mo>
                <mo>
                 ×
                </mo>
                <mi>
                 P
                </mi>
                <mo>
                 ×
                </mo>
                <mi>
                 R
                </mi>
               </mrow>
               <mrow>
                <mo>
                 (
                </mo>
                <msup>
                 <mi>
                  β
                 </mi>
                 <mn>
                  2
                 </mn>
                </msup>
                <mo>
                 ×
                </mo>
                <mi>
                 P
                </mi>
                <mo>
                 )
                </mo>
                <mo>
                 +
                </mo>
                <mi>
                 R
                </mi>
               </mrow>
              </mfrac>
             </mrow>
            </mstyle>
           </mtd>
          </mtr>
         </mtable>
         <annotation encoding="application/x-tex">
          \begin{aligned} \ F_\beta=\frac{(1+\beta^2)\times P\times R}{(\beta^2\times P)+R} \end{aligned}
         </annotation>
        </semantics>
       </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 2.72711em; vertical-align: -1.11355em;"></span><span class="mord"><span class="mtable"><span class="col-align-r"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.61355em;"><span class="" style="top: -3.61355em;"><span class="pstrut" style="height: 3.49111em;"></span><span class="mord"><span class="mspace">&nbsp;</span><span class="mord"><span style="margin-right: 0.13889em;" class="mord mathit">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.336108em;"><span class="" style="top: -2.55em; margin-left: -0.13889em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span style="margin-right: 0.05278em;" class="mord mathit mtight">β</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.286108em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.49111em;"><span class="" style="top: -2.314em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mopen">(</span><span class="mord"><span style="margin-right: 0.05278em;" class="mord mathit">β</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.740108em;"><span class="" style="top: -2.989em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right: 0.222222em;"></span><span style="margin-right: 0.13889em;" class="mord mathit">P</span><span class="mclose">)</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.222222em;"></span><span style="margin-right: 0.00773em;" class="mord mathit">R</span></span></span><span class="" style="top: -3.23em;"><span class="pstrut" style="height: 3em;"></span><span class="frac-line" style="border-bottom-width: 0.04em;"></span></span><span class="" style="top: -3.677em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mord"><span style="margin-right: 0.05278em;" class="mord mathit">β</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.814108em;"><span class="" style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right: 0.222222em;"></span><span style="margin-right: 0.13889em;" class="mord mathit">P</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right: 0.222222em;"></span><span style="margin-right: 0.00773em;" class="mord mathit">R</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.936em;"><span class=""></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 1.11355em;"><span class=""></span></span></span></span></span></span></span></span></span></span></span></span><br>     <span class="katex--inline"><span class="katex"><span class="katex-mathml">
      <math>
       <semantics>
        <mrow>
         <mi>
          β
         </mi>
         <mo>
          &amp;gt;
         </mo>
         <mn>
          1
         </mn>
        </mrow>
        <annotation encoding="application/x-tex">
         \beta &amp;gt;1
        </annotation>
       </semantics>
      </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.88888em; vertical-align: -0.19444em;"></span><span style="margin-right: 0.05278em;" class="mord mathit">β</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">&gt;</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 0.64444em; vertical-align: 0em;"></span><span class="mord">1</span></span></span></span></span>时，查全率<span class="katex--inline"><span class="katex"><span class="katex-mathml">
      <math>
       <semantics>
        <mrow>
         <mi>
          R
         </mi>
        </mrow>
        <annotation encoding="application/x-tex">
         R
        </annotation>
       </semantics>
      </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span style="margin-right: 0.00773em;" class="mord mathit">R</span></span></span></span></span>有更大影响；<span class="katex--inline"><span class="katex"><span class="katex-mathml">
      <math>
       <semantics>
        <mrow>
         <mi>
          β
         </mi>
         <mo>
          &amp;lt;
         </mo>
         <mn>
          1
         </mn>
        </mrow>
        <annotation encoding="application/x-tex">
         \beta &amp;lt;1
        </annotation>
       </semantics>
      </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.88888em; vertical-align: -0.19444em;"></span><span style="margin-right: 0.05278em;" class="mord mathit">β</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 0.64444em; vertical-align: 0em;"></span><span class="mord">1</span></span></span></span></span>时，查准率<span class="katex--inline"><span class="katex"><span class="katex-mathml">
      <math>
       <semantics>
        <mrow>
         <mi>
          P
         </mi>
        </mrow>
        <annotation encoding="application/x-tex">
         P
        </annotation>
       </semantics>
      </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span style="margin-right: 0.13889em;" class="mord mathit">P</span></span></span></span></span>有更大影响。<br>     考虑我们此时拥有多个二分类混淆矩阵，我们该如何考察查全率与查准率呢？一种做法就是在各个混淆矩阵上分别计算查全率与查准率，再计算平均值，得到“宏查全率”、“宏查准率”以及相应的“宏F1”：<br> <span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml">
       <math>
        <semantics>
         <mtable>
          <mtr>
           <mtd>
            <mstyle displaystyle="true" scriptlevel="0">
             <mrow></mrow>
            </mstyle>
           </mtd>
          </mtr>
          <mtr>
           <mtd>
            <mstyle displaystyle="true" scriptlevel="0">
             <mrow></mrow>
            </mstyle>
           </mtd>
           <mtd>
            <mstyle displaystyle="true" scriptlevel="0">
             <mrow>
              <mrow></mrow>
              <mi>
               m
              </mi>
              <mi>
               a
              </mi>
              <mi>
               c
              </mi>
              <mi>
               r
              </mi>
              <mi>
               o
              </mi>
              <mi mathvariant="normal">
               _
              </mi>
              <mi>
               R
              </mi>
              <mo>
               =
              </mo>
              <mfrac>
               <mn>
                1
               </mn>
               <mi>
                n
               </mi>
              </mfrac>
              <mstyle displaystyle="true" scriptlevel="0">
               <munderover>
                <mo>
                 ∑
                </mo>
                <mrow>
                 <mi>
                  i
                 </mi>
                 <mo>
                  =
                 </mo>
                 <mn>
                  1
                 </mn>
                </mrow>
                <mi>
                 n
                </mi>
               </munderover>
               <msub>
                <mi>
                 R
                </mi>
                <mi>
                 i
                </mi>
               </msub>
              </mstyle>
             </mrow>
            </mstyle>
           </mtd>
          </mtr>
          <mtr>
           <mtd>
            <mstyle displaystyle="true" scriptlevel="0">
             <mrow></mrow>
            </mstyle>
           </mtd>
           <mtd>
            <mstyle displaystyle="true" scriptlevel="0">
             <mrow>
              <mrow></mrow>
              <mi>
               m
              </mi>
              <mi>
               a
              </mi>
              <mi>
               c
              </mi>
              <mi>
               r
              </mi>
              <mi>
               o
              </mi>
              <mi mathvariant="normal">
               _
              </mi>
              <mi>
               P
              </mi>
              <mo>
               =
              </mo>
              <mfrac>
               <mn>
                1
               </mn>
               <mi>
                n
               </mi>
              </mfrac>
              <mstyle displaystyle="true" scriptlevel="0">
               <munderover>
                <mo>
                 ∑
                </mo>
                <mrow>
                 <mi>
                  i
                 </mi>
                 <mo>
                  =
                 </mo>
                 <mn>
                  1
                 </mn>
                </mrow>
                <mi>
                 n
                </mi>
               </munderover>
               <msub>
                <mi>
                 P
                </mi>
                <mi>
                 i
                </mi>
               </msub>
              </mstyle>
             </mrow>
            </mstyle>
           </mtd>
          </mtr>
          <mtr>
           <mtd>
            <mstyle displaystyle="true" scriptlevel="0">
             <mrow></mrow>
            </mstyle>
           </mtd>
           <mtd>
            <mstyle displaystyle="true" scriptlevel="0">
             <mrow>
              <mrow></mrow>
              <mi>
               m
              </mi>
              <mi>
               a
              </mi>
              <mi>
               c
              </mi>
              <mi>
               r
              </mi>
              <mi>
               o
              </mi>
              <mi mathvariant="normal">
               _
              </mi>
              <mi>
               F
              </mi>
              <mn>
               1
              </mn>
              <mo>
               =
              </mo>
              <mfrac>
               <mrow>
                <mn>
                 2
                </mn>
                <mo>
                 ×
                </mo>
                <mi>
                 m
                </mi>
                <mi>
                 a
                </mi>
                <mi>
                 c
                </mi>
                <mi>
                 r
                </mi>
                <mi>
                 o
                </mi>
                <mi mathvariant="normal">
                 _
                </mi>
                <mi>
                 P
                </mi>
                <mo>
                 ×
                </mo>
                <mi>
                 m
                </mi>
                <mi>
                 a
                </mi>
                <mi>
                 c
                </mi>
                <mi>
                 r
                </mi>
                <mi>
                 o
                </mi>
                <mi mathvariant="normal">
                 _
                </mi>
                <mi>
                 R
                </mi>
               </mrow>
               <mrow>
                <mi>
                 m
                </mi>
                <mi>
                 a
                </mi>
                <mi>
                 c
                </mi>
                <mi>
                 r
                </mi>
                <mi>
                 o
                </mi>
                <mi mathvariant="normal">
                 _
                </mi>
                <mi>
                 P
                </mi>
                <mo>
                 +
                </mo>
                <mi>
                 m
                </mi>
                <mi>
                 a
                </mi>
                <mi>
                 c
                </mi>
                <mi>
                 r
                </mi>
                <mi>
                 o
                </mi>
                <mi mathvariant="normal">
                 _
                </mi>
                <mi>
                 R
                </mi>
               </mrow>
              </mfrac>
             </mrow>
            </mstyle>
           </mtd>
          </mtr>
         </mtable>
         <annotation encoding="application/x-tex">
          \begin{aligned} \\&amp;amp; macro\_R=\frac{1}{n}\displaystyle{\sum^{n}_{i=1}}R_i \\&amp;amp; macro\_P=\frac{1}{n}\displaystyle{\sum^{n}_{i=1}}P_i \\&amp;amp; macro\_F1=\frac{2\times macro\_P\times macro\_R}{macro\_P+macro\_R} \end{aligned}
         </annotation>
        </semantics>
       </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 10.6375em; vertical-align: -5.06873em;"></span><span class="mord"><span class="mtable"><span class="col-align-r"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 5.56873em;"><span class="" style="top: -8.38013em;"><span class="pstrut" style="height: 3.6514em;"></span><span class="mord"></span></span><span class="" style="top: -6.06873em;"><span class="pstrut" style="height: 3.6514em;"></span><span class="mord"></span></span><span class="" style="top: -2.83967em;"><span class="pstrut" style="height: 3.6514em;"></span><span class="mord"></span></span><span class="" style="top: 0.121334em;"><span class="pstrut" style="height: 3.6514em;"></span><span class="mord"></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 5.06873em;"><span class=""></span></span></span></span></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 4.06873em;"><span class="" style="top: -6.06873em;"><span class="pstrut" style="height: 3.6514em;"></span><span class="mord"><span class="mord"></span><span class="mord mathit">m</span><span class="mord mathit">a</span><span class="mord mathit">c</span><span style="margin-right: 0.02778em;" class="mord mathit">r</span><span class="mord mathit">o</span><span style="margin-right: 0.02778em;" class="mord">_</span><span style="margin-right: 0.00773em;" class="mord mathit">R</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.32144em;"><span class="" style="top: -2.314em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord mathit">n</span></span></span><span class="" style="top: -3.23em;"><span class="pstrut" style="height: 3em;"></span><span class="frac-line" style="border-bottom-width: 0.04em;"></span></span><span class="" style="top: -3.677em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.686em;"><span class=""></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mord"><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.6514em;"><span class="" style="top: -1.87233em; margin-left: 0em;"><span class="pstrut" style="height: 3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span class="" style="top: -3.05001em;"><span class="pstrut" style="height: 3.05em;"></span><span class=""><span class="mop op-symbol large-op">∑</span></span></span><span class="" style="top: -4.30001em; margin-left: 0em;"><span class="pstrut" style="height: 3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">n</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 1.27767em;"><span class=""></span></span></span></span></span></span><span class="mord"><span style="margin-right: 0.00773em;" class="mord mathit">R</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.311664em;"><span class="" style="top: -2.55em; margin-left: -0.00773em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span><span class="" style="top: -2.83967em;"><span class="pstrut" style="height: 3.6514em;"></span><span class="mord"><span class="mord"></span><span class="mord mathit">m</span><span class="mord mathit">a</span><span class="mord mathit">c</span><span style="margin-right: 0.02778em;" class="mord mathit">r</span><span class="mord mathit">o</span><span style="margin-right: 0.02778em;" class="mord">_</span><span style="margin-right: 0.13889em;" class="mord mathit">P</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.32144em;"><span class="" style="top: -2.314em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord mathit">n</span></span></span><span class="" style="top: -3.23em;"><span class="pstrut" style="height: 3em;"></span><span class="frac-line" style="border-bottom-width: 0.04em;"></span></span><span class="" style="top: -3.677em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.686em;"><span class=""></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mord"><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.6514em;"><span class="" style="top: -1.87233em; margin-left: 0em;"><span class="pstrut" style="height: 3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span class="" style="top: -3.05001em;"><span class="pstrut" style="height: 3.05em;"></span><span class=""><span class="mop op-symbol large-op">∑</span></span></span><span class="" style="top: -4.30001em; margin-left: 0em;"><span class="pstrut" style="height: 3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">n</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 1.27767em;"><span class=""></span></span></span></span></span></span><span class="mord"><span style="margin-right: 0.13889em;" class="mord mathit">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.311664em;"><span class="" style="top: -2.55em; margin-left: -0.13889em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span><span class="" style="top: 0.121334em;"><span class="pstrut" style="height: 3.6514em;"></span><span class="mord"><span class="mord"></span><span class="mord mathit">m</span><span class="mord mathit">a</span><span class="mord mathit">c</span><span style="margin-right: 0.02778em;" class="mord mathit">r</span><span class="mord mathit">o</span><span style="margin-right: 0.02778em;" class="mord">_</span><span style="margin-right: 0.13889em;" class="mord mathit">F</span><span class="mord">1</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.38333em;"><span class="" style="top: -2.314em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord mathit">m</span><span class="mord mathit">a</span><span class="mord mathit">c</span><span style="margin-right: 0.02778em;" class="mord mathit">r</span><span class="mord mathit">o</span><span style="margin-right: 0.02778em;" class="mord">_</span><span style="margin-right: 0.13889em;" class="mord mathit">P</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mord mathit">m</span><span class="mord mathit">a</span><span class="mord mathit">c</span><span style="margin-right: 0.02778em;" class="mord mathit">r</span><span class="mord mathit">o</span><span style="margin-right: 0.02778em;" class="mord">_</span><span style="margin-right: 0.00773em;" class="mord mathit">R</span></span></span><span class="" style="top: -3.23em;"><span class="pstrut" style="height: 3em;"></span><span class="frac-line" style="border-bottom-width: 0.04em;"></span></span><span class="" style="top: -3.7em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord">2</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mord mathit">m</span><span class="mord mathit">a</span><span class="mord mathit">c</span><span style="margin-right: 0.02778em;" class="mord mathit">r</span><span class="mord mathit">o</span><span style="margin-right: 0.02778em;" class="mord">_</span><span style="margin-right: 0.13889em;" class="mord mathit">P</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mord mathit">m</span><span class="mord mathit">a</span><span class="mord mathit">c</span><span style="margin-right: 0.02778em;" class="mord mathit">r</span><span class="mord mathit">o</span><span style="margin-right: 0.02778em;" class="mord">_</span><span style="margin-right: 0.00773em;" class="mord mathit">R</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.996em;"><span class=""></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 5.06873em;"><span class=""></span></span></span></span></span></span></span></span></span></span></span></span><br>     另外一种方法是先在每个二分类混淆矩阵上计算<span class="katex--inline"><span class="katex"><span class="katex-mathml">
      <math>
       <semantics>
        <mrow>
         <mover accent="true">
          <mrow>
           <mi>
            T
           </mi>
           <mi>
            P
           </mi>
          </mrow>
          <mo stretchy="true">
           ‾
          </mo>
         </mover>
         <mi mathvariant="normal">
          、
         </mi>
         <mover accent="true">
          <mrow>
           <mi>
            F
           </mi>
           <mi>
            P
           </mi>
          </mrow>
          <mo stretchy="true">
           ‾
          </mo>
         </mover>
         <mi mathvariant="normal">
          、
         </mi>
         <mover accent="true">
          <mrow>
           <mi>
            F
           </mi>
           <mi>
            N
           </mi>
          </mrow>
          <mo stretchy="true">
           ‾
          </mo>
         </mover>
         <mi mathvariant="normal">
          、
         </mi>
         <mover accent="true">
          <mrow>
           <mi>
            T
           </mi>
           <mi>
            N
           </mi>
          </mrow>
          <mo stretchy="true">
           ‾
          </mo>
         </mover>
        </mrow>
        <annotation encoding="application/x-tex">
         \overline{TP}、\overline{FP}、\overline{FN}、\overline{TN}
        </annotation>
       </semantics>
      </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.88333em; vertical-align: 0em;"></span><span class="mord overline"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.88333em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span style="margin-right: 0.13889em;" class="mord mathit">T</span><span style="margin-right: 0.13889em;" class="mord mathit">P</span></span></span><span class="" style="top: -3.80333em;"><span class="pstrut" style="height: 3em;"></span><span class="overline-line" style="border-bottom-width: 0.04em;"></span></span></span></span></span></span><span class="mord cjk_fallback">、</span><span class="mord overline"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.88333em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span style="margin-right: 0.13889em;" class="mord mathit">F</span><span style="margin-right: 0.13889em;" class="mord mathit">P</span></span></span><span class="" style="top: -3.80333em;"><span class="pstrut" style="height: 3em;"></span><span class="overline-line" style="border-bottom-width: 0.04em;"></span></span></span></span></span></span><span class="mord cjk_fallback">、</span><span class="mord overline"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.88333em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span style="margin-right: 0.13889em;" class="mord mathit">F</span><span style="margin-right: 0.10903em;" class="mord mathit">N</span></span></span><span class="" style="top: -3.80333em;"><span class="pstrut" style="height: 3em;"></span><span class="overline-line" style="border-bottom-width: 0.04em;"></span></span></span></span></span></span><span class="mord cjk_fallback">、</span><span class="mord overline"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.88333em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span style="margin-right: 0.13889em;" class="mord mathit">T</span><span style="margin-right: 0.10903em;" class="mord mathit">N</span></span></span><span class="" style="top: -3.80333em;"><span class="pstrut" style="height: 3em;"></span><span class="overline-line" style="border-bottom-width: 0.04em;"></span></span></span></span></span></span></span></span></span></span>，再计算得到“微查全率”“微查准率”与“<span class="katex--inline"><span class="katex"><span class="katex-mathml">
      <math>
       <semantics>
        <mrow>
         <mi mathvariant="normal">
          微
         </mi>
         <mi>
          F
         </mi>
         <mn>
          1
         </mn>
        </mrow>
        <annotation encoding="application/x-tex">
         微F1
        </annotation>
       </semantics>
      </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord cjk_fallback">微</span><span style="margin-right: 0.13889em;" class="mord mathit">F</span><span class="mord">1</span></span></span></span></span>”：<br> <span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml">
       <math>
        <semantics>
         <mtable>
          <mtr>
           <mtd>
            <mstyle displaystyle="true" scriptlevel="0">
             <mrow></mrow>
            </mstyle>
           </mtd>
          </mtr>
          <mtr>
           <mtd>
            <mstyle displaystyle="true" scriptlevel="0">
             <mrow></mrow>
            </mstyle>
           </mtd>
           <mtd>
            <mstyle displaystyle="true" scriptlevel="0">
             <mrow>
              <mrow></mrow>
              <mi>
               m
              </mi>
              <mi>
               i
              </mi>
              <mi>
               c
              </mi>
              <mi>
               r
              </mi>
              <mi>
               o
              </mi>
              <mi mathvariant="normal">
               _
              </mi>
              <mi>
               R
              </mi>
              <mo>
               =
              </mo>
              <mfrac>
               <mover accent="true">
                <mrow>
                 <mi>
                  T
                 </mi>
                 <mi>
                  P
                 </mi>
                </mrow>
                <mo stretchy="true">
                 ‾
                </mo>
               </mover>
               <mrow>
                <mover accent="true">
                 <mrow>
                  <mi>
                   T
                  </mi>
                  <mi>
                   P
                  </mi>
                 </mrow>
                 <mo stretchy="true">
                  ‾
                 </mo>
                </mover>
                <mo>
                 +
                </mo>
                <mover accent="true">
                 <mrow>
                  <mi>
                   F
                  </mi>
                  <mi>
                   P
                  </mi>
                 </mrow>
                 <mo stretchy="true">
                  ‾
                 </mo>
                </mover>
               </mrow>
              </mfrac>
             </mrow>
            </mstyle>
           </mtd>
          </mtr>
          <mtr>
           <mtd>
            <mstyle displaystyle="true" scriptlevel="0">
             <mrow></mrow>
            </mstyle>
           </mtd>
           <mtd>
            <mstyle displaystyle="true" scriptlevel="0">
             <mrow>
              <mrow></mrow>
              <mi>
               m
              </mi>
              <mi>
               i
              </mi>
              <mi>
               c
              </mi>
              <mi>
               r
              </mi>
              <mi>
               o
              </mi>
              <mi mathvariant="normal">
               _
              </mi>
              <mi>
               P
              </mi>
              <mo>
               =
              </mo>
              <mfrac>
               <mover accent="true">
                <mrow>
                 <mi>
                  T
                 </mi>
                 <mi>
                  P
                 </mi>
                </mrow>
                <mo stretchy="true">
                 ‾
                </mo>
               </mover>
               <mrow>
                <mover accent="true">
                 <mrow>
                  <mi>
                   T
                  </mi>
                  <mi>
                   P
                  </mi>
                 </mrow>
                 <mo stretchy="true">
                  ‾
                 </mo>
                </mover>
                <mo>
                 +
                </mo>
                <mover accent="true">
                 <mrow>
                  <mi>
                   F
                  </mi>
                  <mi>
                   N
                  </mi>
                 </mrow>
                 <mo stretchy="true">
                  ‾
                 </mo>
                </mover>
               </mrow>
              </mfrac>
             </mrow>
            </mstyle>
           </mtd>
          </mtr>
          <mtr>
           <mtd>
            <mstyle displaystyle="true" scriptlevel="0">
             <mrow></mrow>
            </mstyle>
           </mtd>
           <mtd>
            <mstyle displaystyle="true" scriptlevel="0">
             <mrow>
              <mrow></mrow>
              <mi>
               m
              </mi>
              <mi>
               i
              </mi>
              <mi>
               c
              </mi>
              <mi>
               r
              </mi>
              <mi>
               o
              </mi>
              <mi mathvariant="normal">
               _
              </mi>
              <mi>
               F
              </mi>
              <mn>
               1
              </mn>
              <mo>
               =
              </mo>
              <mfrac>
               <mrow>
                <mn>
                 2
                </mn>
                <mo>
                 ×
                </mo>
                <mi>
                 m
                </mi>
                <mi>
                 i
                </mi>
                <mi>
                 c
                </mi>
                <mi>
                 r
                </mi>
                <mi>
                 o
                </mi>
                <mi mathvariant="normal">
                 _
                </mi>
                <mi>
                 P
                </mi>
                <mo>
                 ×
                </mo>
                <mi>
                 m
                </mi>
                <mi>
                 i
                </mi>
                <mi>
                 c
                </mi>
                <mi>
                 r
                </mi>
                <mi>
                 o
                </mi>
                <mi mathvariant="normal">
                 _
                </mi>
                <mi>
                 R
                </mi>
               </mrow>
               <mrow>
                <mi>
                 m
                </mi>
                <mi>
                 i
                </mi>
                <mi>
                 c
                </mi>
                <mi>
                 r
                </mi>
                <mi>
                 o
                </mi>
                <mi mathvariant="normal">
                 _
                </mi>
                <mi>
                 P
                </mi>
                <mo>
                 +
                </mo>
                <mi>
                 m
                </mi>
                <mi>
                 i
                </mi>
                <mi>
                 c
                </mi>
                <mi>
                 r
                </mi>
                <mi>
                 o
                </mi>
                <mi mathvariant="normal">
                 _
                </mi>
                <mi>
                 R
                </mi>
               </mrow>
              </mfrac>
             </mrow>
            </mstyle>
           </mtd>
          </mtr>
         </mtable>
         <annotation encoding="application/x-tex">
          \begin{aligned} \\&amp;amp; micro\_R=\frac{\overline{TP}}{\overline{TP}+\overline{FP}} \\&amp;amp; micro\_P=\frac{\overline{TP}}{\overline{TP}+\overline{FN}} \\&amp;amp; micro\_F1=\frac{2\times micro\_P\times micro\_R}{micro\_P+micro\_R} \end{aligned}
         </annotation>
        </semantics>
       </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 9.61331em; vertical-align: -4.55666em;"></span><span class="mord"><span class="mtable"><span class="col-align-r"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 5.05666em;"><span class="" style="top: -7.77699em;"><span class="pstrut" style="height: 3.56033em;"></span><span class="mord"></span></span><span class="" style="top: -5.55666em;"><span class="pstrut" style="height: 3.56033em;"></span><span class="mord"></span></span><span class="" style="top: -2.83967em;"><span class="pstrut" style="height: 3.56033em;"></span><span class="mord"></span></span><span class="" style="top: -0.299675em;"><span class="pstrut" style="height: 3.56033em;"></span><span class="mord"></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 4.55666em;"><span class=""></span></span></span></span></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 3.55666em;"><span class="" style="top: -5.55666em;"><span class="pstrut" style="height: 3.56033em;"></span><span class="mord"><span class="mord"></span><span class="mord mathit">m</span><span class="mord mathit">i</span><span class="mord mathit">c</span><span style="margin-right: 0.02778em;" class="mord mathit">r</span><span class="mord mathit">o</span><span style="margin-right: 0.02778em;" class="mord">_</span><span style="margin-right: 0.00773em;" class="mord mathit">R</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.56033em;"><span class="" style="top: -2.22667em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord overline"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.88333em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span style="margin-right: 0.13889em;" class="mord mathit">T</span><span style="margin-right: 0.13889em;" class="mord mathit">P</span></span></span><span class="" style="top: -3.80333em;"><span class="pstrut" style="height: 3em;"></span><span class="overline-line" style="border-bottom-width: 0.04em;"></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mord overline"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.88333em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span style="margin-right: 0.13889em;" class="mord mathit">F</span><span style="margin-right: 0.13889em;" class="mord mathit">P</span></span></span><span class="" style="top: -3.80333em;"><span class="pstrut" style="height: 3em;"></span><span class="overline-line" style="border-bottom-width: 0.04em;"></span></span></span></span></span></span></span></span><span class="" style="top: -3.23em;"><span class="pstrut" style="height: 3em;"></span><span class="frac-line" style="border-bottom-width: 0.04em;"></span></span><span class="" style="top: -3.677em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord overline"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.88333em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span style="margin-right: 0.13889em;" class="mord mathit">T</span><span style="margin-right: 0.13889em;" class="mord mathit">P</span></span></span><span class="" style="top: -3.80333em;"><span class="pstrut" style="height: 3em;"></span><span class="overline-line" style="border-bottom-width: 0.04em;"></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.85666em;"><span class=""></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span><span class="" style="top: -2.83967em;"><span class="pstrut" style="height: 3.56033em;"></span><span class="mord"><span class="mord"></span><span class="mord mathit">m</span><span class="mord mathit">i</span><span class="mord mathit">c</span><span style="margin-right: 0.02778em;" class="mord mathit">r</span><span class="mord mathit">o</span><span style="margin-right: 0.02778em;" class="mord">_</span><span style="margin-right: 0.13889em;" class="mord mathit">P</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.56033em;"><span class="" style="top: -2.22667em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord overline"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.88333em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span style="margin-right: 0.13889em;" class="mord mathit">T</span><span style="margin-right: 0.13889em;" class="mord mathit">P</span></span></span><span class="" style="top: -3.80333em;"><span class="pstrut" style="height: 3em;"></span><span class="overline-line" style="border-bottom-width: 0.04em;"></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mord overline"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.88333em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span style="margin-right: 0.13889em;" class="mord mathit">F</span><span style="margin-right: 0.10903em;" class="mord mathit">N</span></span></span><span class="" style="top: -3.80333em;"><span class="pstrut" style="height: 3em;"></span><span class="overline-line" style="border-bottom-width: 0.04em;"></span></span></span></span></span></span></span></span><span class="" style="top: -3.23em;"><span class="pstrut" style="height: 3em;"></span><span class="frac-line" style="border-bottom-width: 0.04em;"></span></span><span class="" style="top: -3.677em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord overline"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.88333em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span style="margin-right: 0.13889em;" class="mord mathit">T</span><span style="margin-right: 0.13889em;" class="mord mathit">P</span></span></span><span class="" style="top: -3.80333em;"><span class="pstrut" style="height: 3em;"></span><span class="overline-line" style="border-bottom-width: 0.04em;"></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.85666em;"><span class=""></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span><span class="" style="top: -0.299675em;"><span class="pstrut" style="height: 3.56033em;"></span><span class="mord"><span class="mord"></span><span class="mord mathit">m</span><span class="mord mathit">i</span><span class="mord mathit">c</span><span style="margin-right: 0.02778em;" class="mord mathit">r</span><span class="mord mathit">o</span><span style="margin-right: 0.02778em;" class="mord">_</span><span style="margin-right: 0.13889em;" class="mord mathit">F</span><span class="mord">1</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.38333em;"><span class="" style="top: -2.314em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord mathit">m</span><span class="mord mathit">i</span><span class="mord mathit">c</span><span style="margin-right: 0.02778em;" class="mord mathit">r</span><span class="mord mathit">o</span><span style="margin-right: 0.02778em;" class="mord">_</span><span style="margin-right: 0.13889em;" class="mord mathit">P</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mord mathit">m</span><span class="mord mathit">i</span><span class="mord mathit">c</span><span style="margin-right: 0.02778em;" class="mord mathit">r</span><span class="mord mathit">o</span><span style="margin-right: 0.02778em;" class="mord">_</span><span style="margin-right: 0.00773em;" class="mord mathit">R</span></span></span><span class="" style="top: -3.23em;"><span class="pstrut" style="height: 3em;"></span><span class="frac-line" style="border-bottom-width: 0.04em;"></span></span><span class="" style="top: -3.7em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord">2</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mord mathit">m</span><span class="mord mathit">i</span><span class="mord mathit">c</span><span style="margin-right: 0.02778em;" class="mord mathit">r</span><span class="mord mathit">o</span><span style="margin-right: 0.02778em;" class="mord">_</span><span style="margin-right: 0.13889em;" class="mord mathit">P</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mord mathit">m</span><span class="mord mathit">i</span><span class="mord mathit">c</span><span style="margin-right: 0.02778em;" class="mord mathit">r</span><span class="mord mathit">o</span><span style="margin-right: 0.02778em;" class="mord">_</span><span style="margin-right: 0.00773em;" class="mord mathit">R</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.996em;"><span class=""></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 4.55666em;"><span class=""></span></span></span></span></span></span></span></span></span></span></span></span></p> 
  <h4><a id="233_ROCAUC_102"></a>2.3.3 ROC与AUC</h4> 
  <p>    通常学习器预测的结果是一个在<span class="katex--inline"><span class="katex"><span class="katex-mathml">
      <math>
       <semantics>
        <mrow>
         <mo>
          [
         </mo>
         <mn>
          0
         </mn>
         <mo separator="true">
          ,
         </mo>
         <mn>
          1
         </mn>
         <mo>
          ]
         </mo>
        </mrow>
        <annotation encoding="application/x-tex">
         [0,1]
        </annotation>
       </semantics>
      </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mopen">[</span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord">1</span><span class="mclose">]</span></span></span></span></span>区间的数值，我们可将预测数值排序，越接近1，表示当前样本越接近正例。<strong>在不同的任务中，我们往往根据需要设置不同的截断点</strong>：若要求较高的查全率，则截断点必须后移；若要求较高的查准率，截断点必须前移。因此，预测结果的排序质量，直接体现着学习器<strong>在不同任务下</strong>的“期望泛化性能”的好坏。换句话说，这体现着学习器<strong>在一般情况下的好坏</strong>。ROC曲线正是从这个角度对学习器进行评估。<br>     ROC，即“Receiver Operating Characteristic”“受试者工作特征”，源于二战中对雷达信号的分析，后引入机器学习领域。我们将学习器做出的预测结果排序，逐个把样例预测为正例，每次计算出两个数值，并以这两个数值为坐标轴绘制ROC曲线。横轴为“假正例率”（FPR），纵轴为“真正例率”（TPR）：<br> <span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml">
       <math>
        <semantics>
         <mtable>
          <mtr>
           <mtd>
            <mstyle displaystyle="true" scriptlevel="0">
             <mrow></mrow>
            </mstyle>
           </mtd>
          </mtr>
          <mtr>
           <mtd>
            <mstyle displaystyle="true" scriptlevel="0">
             <mrow></mrow>
            </mstyle>
           </mtd>
           <mtd>
            <mstyle displaystyle="true" scriptlevel="0">
             <mrow>
              <mrow></mrow>
              <mi>
               F
              </mi>
              <mi>
               P
              </mi>
              <mi>
               R
              </mi>
              <mo>
               =
              </mo>
              <mfrac>
               <mrow>
                <mi>
                 F
                </mi>
                <mi>
                 P
                </mi>
               </mrow>
               <mrow>
                <mi>
                 F
                </mi>
                <mi>
                 P
                </mi>
                <mo>
                 +
                </mo>
                <mi>
                 T
                </mi>
                <mi>
                 N
                </mi>
               </mrow>
              </mfrac>
             </mrow>
            </mstyle>
           </mtd>
          </mtr>
          <mtr>
           <mtd>
            <mstyle displaystyle="true" scriptlevel="0">
             <mrow></mrow>
            </mstyle>
           </mtd>
           <mtd>
            <mstyle displaystyle="true" scriptlevel="0">
             <mrow>
              <mrow></mrow>
              <mi>
               T
              </mi>
              <mi>
               P
              </mi>
              <mi>
               R
              </mi>
              <mo>
               =
              </mo>
              <mfrac>
               <mrow>
                <mi>
                 T
                </mi>
                <mi>
                 P
                </mi>
               </mrow>
               <mrow>
                <mi>
                 T
                </mi>
                <mi>
                 P
                </mi>
                <mo>
                 +
                </mo>
                <mi>
                 F
                </mi>
                <mi>
                 N
                </mi>
               </mrow>
              </mfrac>
             </mrow>
            </mstyle>
           </mtd>
          </mtr>
         </mtable>
         <annotation encoding="application/x-tex">
          \begin{aligned} \\&amp;amp; FPR=\frac{FP}{FP+TN} \\&amp;amp; TPR=\frac{TP}{TP+FN} \end{aligned}
         </annotation>
        </semantics>
       </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 6.35932em; vertical-align: -2.92966em;"></span><span class="mord"><span class="mtable"><span class="col-align-r"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 3.42966em;"><span class="" style="top: -5.94999em;"><span class="pstrut" style="height: 3.36033em;"></span><span class="mord"></span></span><span class="" style="top: -3.92966em;"><span class="pstrut" style="height: 3.36033em;"></span><span class="mord"></span></span><span class="" style="top: -1.5em;"><span class="pstrut" style="height: 3.36033em;"></span><span class="mord"></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 2.92966em;"><span class=""></span></span></span></span></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.92966em;"><span class="" style="top: -3.92966em;"><span class="pstrut" style="height: 3.36033em;"></span><span class="mord"><span class="mord"></span><span style="margin-right: 0.13889em;" class="mord mathit">F</span><span style="margin-right: 0.13889em;" class="mord mathit">P</span><span style="margin-right: 0.00773em;" class="mord mathit">R</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.36033em;"><span class="" style="top: -2.314em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span style="margin-right: 0.13889em;" class="mord mathit">F</span><span style="margin-right: 0.13889em;" class="mord mathit">P</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.222222em;"></span><span style="margin-right: 0.13889em;" class="mord mathit">T</span><span style="margin-right: 0.10903em;" class="mord mathit">N</span></span></span><span class="" style="top: -3.23em;"><span class="pstrut" style="height: 3em;"></span><span class="frac-line" style="border-bottom-width: 0.04em;"></span></span><span class="" style="top: -3.677em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span style="margin-right: 0.13889em;" class="mord mathit">F</span><span style="margin-right: 0.13889em;" class="mord mathit">P</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.76933em;"><span class=""></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span><span class="" style="top: -1.5em;"><span class="pstrut" style="height: 3.36033em;"></span><span class="mord"><span class="mord"></span><span style="margin-right: 0.13889em;" class="mord mathit">T</span><span style="margin-right: 0.13889em;" class="mord mathit">P</span><span style="margin-right: 0.00773em;" class="mord mathit">R</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.36033em;"><span class="" style="top: -2.314em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span style="margin-right: 0.13889em;" class="mord mathit">T</span><span style="margin-right: 0.13889em;" class="mord mathit">P</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.222222em;"></span><span style="margin-right: 0.13889em;" class="mord mathit">F</span><span style="margin-right: 0.10903em;" class="mord mathit">N</span></span></span><span class="" style="top: -3.23em;"><span class="pstrut" style="height: 3em;"></span><span class="frac-line" style="border-bottom-width: 0.04em;"></span></span><span class="" style="top: -3.677em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span style="margin-right: 0.13889em;" class="mord mathit">T</span><span style="margin-right: 0.13889em;" class="mord mathit">P</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.76933em;"><span class=""></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 2.92966em;"><span class=""></span></span></span></span></span></span></span></span></span></span></span></span><br> 考虑这样几个特例：<br> 1.当预测结果全为反例时，<span class="katex--inline"><span class="katex"><span class="katex-mathml">
      <math>
       <semantics>
        <mrow>
         <mi>
          T
         </mi>
         <mi>
          P
         </mi>
         <mo>
          =
         </mo>
         <mi>
          F
         </mi>
         <mi>
          P
         </mi>
         <mo>
          =
         </mo>
         <mn>
          0
         </mn>
        </mrow>
        <annotation encoding="application/x-tex">
         TP=FP=0
        </annotation>
       </semantics>
      </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span style="margin-right: 0.13889em;" class="mord mathit">T</span><span style="margin-right: 0.13889em;" class="mord mathit">P</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span style="margin-right: 0.13889em;" class="mord mathit">F</span><span style="margin-right: 0.13889em;" class="mord mathit">P</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 0.64444em; vertical-align: 0em;"></span><span class="mord">0</span></span></span></span></span>，从而 <span class="katex--inline"><span class="katex"><span class="katex-mathml">
      <math>
       <semantics>
        <mrow>
         <mi>
          T
         </mi>
         <mi>
          P
         </mi>
         <mi>
          R
         </mi>
         <mo>
          =
         </mo>
         <mi>
          F
         </mi>
         <mi>
          P
         </mi>
         <mi>
          R
         </mi>
         <mo>
          =
         </mo>
         <mn>
          0
         </mn>
        </mrow>
        <annotation encoding="application/x-tex">
         TPR=FPR=0
        </annotation>
       </semantics>
      </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span style="margin-right: 0.13889em;" class="mord mathit">T</span><span style="margin-right: 0.13889em;" class="mord mathit">P</span><span style="margin-right: 0.00773em;" class="mord mathit">R</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span style="margin-right: 0.13889em;" class="mord mathit">F</span><span style="margin-right: 0.13889em;" class="mord mathit">P</span><span style="margin-right: 0.00773em;" class="mord mathit">R</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 0.64444em; vertical-align: 0em;"></span><span class="mord">0</span></span></span></span></span>，对应ROC曲线原 点<span class="katex--inline"><span class="katex"><span class="katex-mathml">
      <math>
       <semantics>
        <mrow>
         <mo>
          (
         </mo>
         <mn>
          0
         </mn>
         <mo separator="true">
          ,
         </mo>
         <mn>
          0
         </mn>
         <mo>
          )
         </mo>
        </mrow>
        <annotation encoding="application/x-tex">
         (0,0)
        </annotation>
       </semantics>
      </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mopen">(</span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord">0</span><span class="mclose">)</span></span></span></span></span><br> 2.当预测结果全为正例时，<span class="katex--inline"><span class="katex"><span class="katex-mathml">
      <math>
       <semantics>
        <mrow>
         <mi>
          T
         </mi>
         <mi>
          N
         </mi>
         <mo>
          =
         </mo>
         <mi>
          F
         </mi>
         <mi>
          N
         </mi>
         <mo>
          =
         </mo>
         <mn>
          0
         </mn>
        </mrow>
        <annotation encoding="application/x-tex">
         TN=FN=0
        </annotation>
       </semantics>
      </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span style="margin-right: 0.13889em;" class="mord mathit">T</span><span style="margin-right: 0.10903em;" class="mord mathit">N</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span style="margin-right: 0.13889em;" class="mord mathit">F</span><span style="margin-right: 0.10903em;" class="mord mathit">N</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 0.64444em; vertical-align: 0em;"></span><span class="mord">0</span></span></span></span></span>，从而<span class="katex--inline"><span class="katex"><span class="katex-mathml">
      <math>
       <semantics>
        <mrow>
         <mi>
          T
         </mi>
         <mi>
          P
         </mi>
         <mi>
          R
         </mi>
         <mo>
          =
         </mo>
         <mi>
          F
         </mi>
         <mi>
          P
         </mi>
         <mi>
          R
         </mi>
         <mo>
          =
         </mo>
         <mn>
          1
         </mn>
        </mrow>
        <annotation encoding="application/x-tex">
         TPR=FPR=1
        </annotation>
       </semantics>
      </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span style="margin-right: 0.13889em;" class="mord mathit">T</span><span style="margin-right: 0.13889em;" class="mord mathit">P</span><span style="margin-right: 0.00773em;" class="mord mathit">R</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span style="margin-right: 0.13889em;" class="mord mathit">F</span><span style="margin-right: 0.13889em;" class="mord mathit">P</span><span style="margin-right: 0.00773em;" class="mord mathit">R</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 0.64444em; vertical-align: 0em;"></span><span class="mord">1</span></span></span></span></span> ,对应点<span class="katex--inline"><span class="katex"><span class="katex-mathml">
      <math>
       <semantics>
        <mrow>
         <mo>
          (
         </mo>
         <mn>
          1
         </mn>
         <mo separator="true">
          ,
         </mo>
         <mn>
          1
         </mn>
         <mo>
          )
         </mo>
        </mrow>
        <annotation encoding="application/x-tex">
         (1,1)
        </annotation>
       </semantics>
      </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mopen">(</span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord">1</span><span class="mclose">)</span></span></span></span></span>点<br> 3.当预测结果中所有样例均预测正确，换句话说，所有真实标签为“正例”的示例均排在标签为“反例”的示例之前，则<span class="katex--inline"><span class="katex"><span class="katex-mathml">
      <math>
       <semantics>
        <mrow>
         <mi>
          T
         </mi>
         <mi>
          P
         </mi>
         <mo>
          =
         </mo>
         <mn>
          1
         </mn>
         <mo separator="true">
          ,
         </mo>
         <mi>
          F
         </mi>
         <mi>
          P
         </mi>
         <mo>
          =
         </mo>
         <mn>
          0
         </mn>
        </mrow>
        <annotation encoding="application/x-tex">
         TP=1,FP=0
        </annotation>
       </semantics>
      </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span style="margin-right: 0.13889em;" class="mord mathit">T</span><span style="margin-right: 0.13889em;" class="mord mathit">P</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 0.87777em; vertical-align: -0.19444em;"></span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.166667em;"></span><span style="margin-right: 0.13889em;" class="mord mathit">F</span><span style="margin-right: 0.13889em;" class="mord mathit">P</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 0.64444em; vertical-align: 0em;"></span><span class="mord">0</span></span></span></span></span>，从而<span class="katex--inline"><span class="katex"><span class="katex-mathml">
      <math>
       <semantics>
        <mrow>
         <mi>
          T
         </mi>
         <mi>
          P
         </mi>
         <mi>
          R
         </mi>
         <mo>
          =
         </mo>
         <mn>
          1
         </mn>
         <mo separator="true">
          ,
         </mo>
         <mi>
          F
         </mi>
         <mi>
          P
         </mi>
         <mi>
          R
         </mi>
         <mo>
          =
         </mo>
         <mn>
          0
         </mn>
        </mrow>
        <annotation encoding="application/x-tex">
         TPR=1,FPR=0
        </annotation>
       </semantics>
      </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span style="margin-right: 0.13889em;" class="mord mathit">T</span><span style="margin-right: 0.13889em;" class="mord mathit">P</span><span style="margin-right: 0.00773em;" class="mord mathit">R</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 0.87777em; vertical-align: -0.19444em;"></span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.166667em;"></span><span style="margin-right: 0.13889em;" class="mord mathit">F</span><span style="margin-right: 0.13889em;" class="mord mathit">P</span><span style="margin-right: 0.00773em;" class="mord mathit">R</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 0.64444em; vertical-align: 0em;"></span><span class="mord">0</span></span></span></span></span>，对应点<span class="katex--inline"><span class="katex"><span class="katex-mathml">
      <math>
       <semantics>
        <mrow>
         <mo>
          (
         </mo>
         <mn>
          0
         </mn>
         <mo separator="true">
          ,
         </mo>
         <mn>
          1
         </mn>
         <mo>
          )
         </mo>
        </mrow>
        <annotation encoding="application/x-tex">
         (0,1)
        </annotation>
       </semantics>
      </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mopen">(</span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord">1</span><span class="mclose">)</span></span></span></span></span><br> 4.当所有样例的真实标签与预测结果恰好全部相反时，<span class="katex--inline"><span class="katex"><span class="katex-mathml">
      <math>
       <semantics>
        <mrow>
         <mi>
          T
         </mi>
         <mi>
          N
         </mi>
         <mo>
          =
         </mo>
         <mi>
          T
         </mi>
         <mi>
          P
         </mi>
         <mo>
          =
         </mo>
         <mn>
          0
         </mn>
        </mrow>
        <annotation encoding="application/x-tex">
         TN=TP=0
        </annotation>
       </semantics>
      </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span style="margin-right: 0.13889em;" class="mord mathit">T</span><span style="margin-right: 0.10903em;" class="mord mathit">N</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span style="margin-right: 0.13889em;" class="mord mathit">T</span><span style="margin-right: 0.13889em;" class="mord mathit">P</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 0.64444em; vertical-align: 0em;"></span><span class="mord">0</span></span></span></span></span>，对应点<span class="katex--inline"><span class="katex"><span class="katex-mathml">
      <math>
       <semantics>
        <mrow>
         <mo>
          (
         </mo>
         <mn>
          1
         </mn>
         <mo separator="true">
          ,
         </mo>
         <mn>
          0
         </mn>
         <mo>
          )
         </mo>
        </mrow>
        <annotation encoding="application/x-tex">
         (1,0)
        </annotation>
       </semantics>
      </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mopen">(</span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord">0</span><span class="mclose">)</span></span></span></span></span>.</p> 
  <p><img src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190801203448947.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzMzOTk3ODI2,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述">    现实任务中，样例是有限的，只能像上图右侧这样画成分段的曲线。（类似于计算机控制中的第一象限插补）设给定<span class="katex--inline"><span class="katex"><span class="katex-mathml">
      <math>
       <semantics>
        <mrow>
         <msup>
          <mi>
           m
          </mi>
          <mo>
           +
          </mo>
         </msup>
        </mrow>
        <annotation encoding="application/x-tex">
         m^+
        </annotation>
       </semantics>
      </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.771331em; vertical-align: 0em;"></span><span class="mord"><span class="mord mathit">m</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.771331em;"><span class="" style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">+</span></span></span></span></span></span></span></span></span></span></span></span>个正例，<span class="katex--inline"><span class="katex"><span class="katex-mathml">
      <math>
       <semantics>
        <mrow>
         <msup>
          <mi>
           m
          </mi>
          <mo>
           +
          </mo>
         </msup>
         <mo>
          −
         </mo>
        </mrow>
        <annotation encoding="application/x-tex">
         m^+-
        </annotation>
       </semantics>
      </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.854661em; vertical-align: -0.08333em;"></span><span class="mord"><span class="mord mathit">m</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.771331em;"><span class="" style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">+</span></span></span></span></span></span></span></span><span class="mord">−</span></span></span></span></span>个反例，具体做法：</p> 
  <ol> 
   <li>将分类阈值调整到最大，所有样例设为反例，计算<span class="katex--inline"><span class="katex"><span class="katex-mathml">
       <math>
        <semantics>
         <mrow>
          <mo>
           (
          </mo>
          <mi>
           F
          </mi>
          <mi>
           P
          </mi>
          <mi>
           R
          </mi>
          <mo separator="true">
           ,
          </mo>
          <mi>
           T
          </mi>
          <mi>
           P
          </mi>
          <mi>
           R
          </mi>
          <mo>
           )
          </mo>
         </mrow>
         <annotation encoding="application/x-tex">
          (FPR,TPR)
         </annotation>
        </semantics>
       </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mopen">(</span><span style="margin-right: 0.13889em;" class="mord mathit">F</span><span style="margin-right: 0.13889em;" class="mord mathit">P</span><span style="margin-right: 0.00773em;" class="mord mathit">R</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.166667em;"></span><span style="margin-right: 0.13889em;" class="mord mathit">T</span><span style="margin-right: 0.13889em;" class="mord mathit">P</span><span style="margin-right: 0.00773em;" class="mord mathit">R</span><span class="mclose">)</span></span></span></span></span>作为曲线原点；</li> 
   <li>样例按照预测结果排序，依次以预测结果为分类阈值进行计算；</li> 
   <li>若当前为正例，则<span class="katex--inline"><span class="katex"><span class="katex-mathml">
       <math>
        <semantics>
         <mrow>
          <mo>
           (
          </mo>
          <mi>
           x
          </mi>
          <mo separator="true">
           ,
          </mo>
          <mi>
           y
          </mi>
          <mo>
           +
          </mo>
          <mfrac>
           <mn>
            1
           </mn>
           <msup>
            <mi>
             m
            </mi>
            <mo>
             +
            </mo>
           </msup>
          </mfrac>
          <mo>
           )
          </mo>
         </mrow>
         <annotation encoding="application/x-tex">
          (x,y+\frac{1}{m^+})
         </annotation>
        </semantics>
       </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mopen">(</span><span class="mord mathit">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.166667em;"></span><span style="margin-right: 0.03588em;" class="mord mathit">y</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 1.19011em; vertical-align: -0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.845108em;"><span class="" style="top: -2.655em;"><span class="pstrut" style="height: 3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathit mtight">m</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.702664em;"><span class="" style="top: -2.786em; margin-right: 0.0714286em;"><span class="pstrut" style="height: 2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mbin mtight">+</span></span></span></span></span></span></span></span></span></span></span><span class="" style="top: -3.23em;"><span class="pstrut" style="height: 3em;"></span><span class="frac-line" style="border-bottom-width: 0.04em;"></span></span><span class="" style="top: -3.394em;"><span class="pstrut" style="height: 3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.345em;"><span class=""></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mclose">)</span></span></span></span></span>；若当前为反例，则<span class="katex--inline"><span class="katex"><span class="katex-mathml">
       <math>
        <semantics>
         <mrow>
          <mo>
           (
          </mo>
          <mi>
           x
          </mi>
          <mo>
           +
          </mo>
          <mfrac>
           <mn>
            1
           </mn>
           <msup>
            <mi>
             m
            </mi>
            <mo>
             −
            </mo>
           </msup>
          </mfrac>
          <mo separator="true">
           ,
          </mo>
          <mi>
           y
          </mi>
          <mo>
           )
          </mo>
         </mrow>
         <annotation encoding="application/x-tex">
          (x+\frac{1}{m^-},y)
         </annotation>
        </semantics>
       </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mopen">(</span><span class="mord mathit">x</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 1.19011em; vertical-align: -0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.845108em;"><span class="" style="top: -2.655em;"><span class="pstrut" style="height: 3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathit mtight">m</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.702664em;"><span class="" style="top: -2.786em; margin-right: 0.0714286em;"><span class="pstrut" style="height: 2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mbin mtight">−</span></span></span></span></span></span></span></span></span></span></span><span class="" style="top: -3.23em;"><span class="pstrut" style="height: 3em;"></span><span class="frac-line" style="border-bottom-width: 0.04em;"></span></span><span class="" style="top: -3.394em;"><span class="pstrut" style="height: 3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.345em;"><span class=""></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.166667em;"></span><span style="margin-right: 0.03588em;" class="mord mathit">y</span><span class="mclose">)</span></span></span></span></span>；</li> 
  </ol> 
  <p>    类似“P-R”曲线，若一个学习器的ROC曲线能够“包住”另一个学习器的曲线，可断定前者性能优于后者。否则需另行判断：计算ROC曲线包围的面积AUC（Area Under ROC Curve）:<br> <span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml">
       <math>
        <semantics>
         <mrow>
          <mi>
           A
          </mi>
          <mi>
           U
          </mi>
          <mi>
           C
          </mi>
          <mo>
           =
          </mo>
          <mfrac>
           <mn>
            1
           </mn>
           <mn>
            2
           </mn>
          </mfrac>
          <mstyle displaystyle="true" scriptlevel="0">
           <mrow>
            <munderover>
             <mo>
              ∑
             </mo>
             <mrow>
              <mi>
               i
              </mi>
              <mo>
               =
              </mo>
              <mn>
               1
              </mn>
             </mrow>
             <mrow>
              <mi>
               m
              </mi>
              <mo>
               −
              </mo>
              <mn>
               1
              </mn>
             </mrow>
            </munderover>
            <mo>
             (
            </mo>
            <msub>
             <mi>
              x
             </mi>
             <mrow>
              <mi>
               i
              </mi>
              <mo>
               +
              </mo>
              <mn>
               1
              </mn>
             </mrow>
            </msub>
            <mo>
             −
            </mo>
            <msub>
             <mi>
              x
             </mi>
             <mi>
              i
             </mi>
            </msub>
            <mo>
             )
            </mo>
            <mo>
             (
            </mo>
            <msub>
             <mi>
              y
             </mi>
             <mi>
              i
             </mi>
            </msub>
            <mo>
             +
            </mo>
            <msub>
             <mi>
              y
             </mi>
             <mrow>
              <mi>
               i
              </mi>
              <mo>
               +
              </mo>
              <mn>
               1
              </mn>
             </mrow>
            </msub>
            <mo>
             )
            </mo>
           </mrow>
          </mstyle>
         </mrow>
         <annotation encoding="application/x-tex">
          AUC=\frac{1}{2}\displaystyle{\sum_{i=1}^{m-1}(x_{i+1}-x_i)(y_i+y_{i+1})}
         </annotation>
        </semantics>
       </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord mathit">A</span><span style="margin-right: 0.10903em;" class="mord mathit">U</span><span style="margin-right: 0.07153em;" class="mord mathit">C</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 3.07878em; vertical-align: -1.27767em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.32144em;"><span class="" style="top: -2.314em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord">2</span></span></span><span class="" style="top: -3.23em;"><span class="pstrut" style="height: 3em;"></span><span class="frac-line" style="border-bottom-width: 0.04em;"></span></span><span class="" style="top: -3.677em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.686em;"><span class=""></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mord"><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.80111em;"><span class="" style="top: -1.87233em; margin-left: 0em;"><span class="pstrut" style="height: 3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span class="" style="top: -3.05001em;"><span class="pstrut" style="height: 3.05em;"></span><span class=""><span class="mop op-symbol large-op">∑</span></span></span><span class="" style="top: -4.30001em; margin-left: 0em;"><span class="pstrut" style="height: 3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">m</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 1.27767em;"><span class=""></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathit">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.311664em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">i</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.208331em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mord"><span class="mord mathit">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.311664em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mclose">)</span><span class="mopen">(</span><span class="mord"><span style="margin-right: 0.03588em;" class="mord mathit">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.311664em;"><span class="" style="top: -2.55em; margin-left: -0.03588em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mord"><span style="margin-right: 0.03588em;" class="mord mathit">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.311664em;"><span class="" style="top: -2.55em; margin-left: -0.03588em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">i</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.208331em;"><span class=""></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></span></span></span></p> 
  <p>    我们在开始的时候说过，ROC曲线体现的是预测结果的排序质量，所以AUC与排序误差密切相关。从这个角度去理解AUC，可得：<br> <span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml">
       <math>
        <semantics>
         <mrow>
          <mi>
           A
          </mi>
          <mi>
           U
          </mi>
          <mi>
           C
          </mi>
          <mo>
           =
          </mo>
          <mfrac>
           <mn>
            1
           </mn>
           <mrow>
            <msub>
             <mi>
              m
             </mi>
             <mo>
              +
             </mo>
            </msub>
            <msub>
             <mi>
              m
             </mi>
             <mo>
              −
             </mo>
            </msub>
           </mrow>
          </mfrac>
          <mstyle displaystyle="true" scriptlevel="0">
           <munder>
            <mo>
             ∑
            </mo>
            <mrow>
             <msup>
              <mi>
               x
              </mi>
              <mo>
               +
              </mo>
             </msup>
             <mo>
              ∈
             </mo>
             <msup>
              <mi>
               D
              </mi>
              <mo>
               +
              </mo>
             </msup>
            </mrow>
           </munder>
           <mstyle displaystyle="true" scriptlevel="0">
            <munder>
             <mo>
              ∑
             </mo>
             <mrow>
              <msup>
               <mi>
                x
               </mi>
               <mo>
                −
               </mo>
              </msup>
              <mo>
               ∈
              </mo>
              <msup>
               <mi>
                D
               </mi>
               <mo>
                −
               </mo>
              </msup>
             </mrow>
            </munder>
            <mi mathvariant="normal">
             Ⅱ
            </mi>
            <mo>
             (
            </mo>
            <mi>
             f
            </mi>
            <mo>
             (
            </mo>
            <msup>
             <mi>
              x
             </mi>
             <mo>
              +
             </mo>
            </msup>
            <mo>
             )
            </mo>
            <mo>
             &amp;gt;
            </mo>
            <mi>
             f
            </mi>
            <mo>
             (
            </mo>
            <msup>
             <mi>
              x
             </mi>
             <mo>
              −
             </mo>
            </msup>
            <mo>
             )
            </mo>
            <mo>
             )
            </mo>
           </mstyle>
          </mstyle>
         </mrow>
         <annotation encoding="application/x-tex">
          AUC=\frac{1}{m_+m_-}\displaystyle{\sum_{x^+\in D^+}}\displaystyle{\sum_{x^-\in D^-}}Ⅱ(f(x^+)&amp;gt;f(x^-))
         </annotation>
        </semantics>
       </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord mathit">A</span><span style="margin-right: 0.10903em;" class="mord mathit">U</span><span style="margin-right: 0.07153em;" class="mord mathit">C</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 2.65668em; vertical-align: -1.33524em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.32144em;"><span class="" style="top: -2.314em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord"><span class="mord mathit">m</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.258331em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">+</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.208331em;"><span class=""></span></span></span></span></span></span><span class="mord"><span class="mord mathit">m</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.258331em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">−</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.208331em;"><span class=""></span></span></span></span></span></span></span></span><span class="" style="top: -3.23em;"><span class="pstrut" style="height: 3em;"></span><span class="frac-line" style="border-bottom-width: 0.04em;"></span></span><span class="" style="top: -3.677em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.894331em;"><span class=""></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mord"><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.05001em;"><span class="" style="top: -1.84213em; margin-left: 0em;"><span class="pstrut" style="height: 3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathit mtight">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.702664em;"><span class="" style="top: -2.786em; margin-right: 0.0714286em;"><span class="pstrut" style="height: 2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mbin mtight">+</span></span></span></span></span></span></span></span><span class="mrel mtight">∈</span><span class="mord mtight"><span style="margin-right: 0.02778em;" class="mord mathit mtight">D</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.702664em;"><span class="" style="top: -2.786em; margin-right: 0.0714286em;"><span class="pstrut" style="height: 2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mbin mtight">+</span></span></span></span></span></span></span></span></span></span></span><span class="" style="top: -3.05001em;"><span class="pstrut" style="height: 3.05em;"></span><span class=""><span class="mop op-symbol large-op">∑</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 1.33524em;"><span class=""></span></span></span></span></span></span><span class="mord"><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.05001em;"><span class="" style="top: -1.84213em; margin-left: 0em;"><span class="pstrut" style="height: 3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathit mtight">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.702664em;"><span class="" style="top: -2.786em; margin-right: 0.0714286em;"><span class="pstrut" style="height: 2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mbin mtight">−</span></span></span></span></span></span></span></span><span class="mrel mtight">∈</span><span class="mord mtight"><span style="margin-right: 0.02778em;" class="mord mathit mtight">D</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.702664em;"><span class="" style="top: -2.786em; margin-right: 0.0714286em;"><span class="pstrut" style="height: 2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mbin mtight">−</span></span></span></span></span></span></span></span></span></span></span><span class="" style="top: -3.05001em;"><span class="pstrut" style="height: 3.05em;"></span><span class=""><span class="mop op-symbol large-op">∑</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 1.33524em;"><span class=""></span></span></span></span></span></span><span class="mord">Ⅱ</span><span class="mopen">(</span><span style="margin-right: 0.10764em;" class="mord mathit">f</span><span class="mopen">(</span><span class="mord"><span class="mord mathit">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.821331em;"><span class="" style="top: -3.113em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">+</span></span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">&gt;</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 1.07133em; vertical-align: -0.25em;"></span><span style="margin-right: 0.10764em;" class="mord mathit">f</span><span class="mopen">(</span><span class="mord"><span class="mord mathit">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.821331em;"><span class="" style="top: -3.113em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">−</span></span></span></span></span></span></span></span><span class="mclose">)</span><span class="mclose">)</span></span></span></span></span></span></p> 
  <p>    从反方向定义排序“损失”：<br> <span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml">
       <math>
        <semantics>
         <mrow>
          <msub>
           <mi>
            l
           </mi>
           <mrow>
            <mi>
             r
            </mi>
            <mi>
             a
            </mi>
            <mi>
             n
            </mi>
            <mi>
             k
            </mi>
           </mrow>
          </msub>
          <mo>
           =
          </mo>
          <mfrac>
           <mn>
            1
           </mn>
           <mrow>
            <msub>
             <mi>
              m
             </mi>
             <mo>
              +
             </mo>
            </msub>
            <msub>
             <mi>
              m
             </mi>
             <mo>
              −
             </mo>
            </msub>
           </mrow>
          </mfrac>
          <mstyle displaystyle="true" scriptlevel="0">
           <munder>
            <mo>
             ∑
            </mo>
            <mrow>
             <msup>
              <mi>
               x
              </mi>
              <mo>
               +
              </mo>
             </msup>
             <mo>
              ∈
             </mo>
             <msup>
              <mi>
               D
              </mi>
              <mo>
               +
              </mo>
             </msup>
            </mrow>
           </munder>
           <mstyle displaystyle="true" scriptlevel="0">
            <munder>
             <mo>
              ∑
             </mo>
             <mrow>
              <msup>
               <mi>
                x
               </mi>
               <mo>
                −
               </mo>
              </msup>
              <mo>
               ∈
              </mo>
              <msup>
               <mi>
                D
               </mi>
               <mo>
                −
               </mo>
              </msup>
             </mrow>
            </munder>
            <mo>
             (
            </mo>
            <mi mathvariant="normal">
             Ⅱ
            </mi>
            <mo>
             (
            </mo>
            <mi>
             f
            </mi>
            <mo>
             (
            </mo>
            <msup>
             <mi>
              x
             </mi>
             <mo>
              +
             </mo>
            </msup>
            <mo>
             )
            </mo>
            <mo>
             &amp;lt;
            </mo>
            <mi>
             f
            </mi>
            <mo>
             (
            </mo>
            <msup>
             <mi>
              x
             </mi>
             <mo>
              −
             </mo>
            </msup>
            <mo>
             )
            </mo>
            <mo>
             )
            </mo>
            <mo>
             +
            </mo>
            <mfrac>
             <mn>
              1
             </mn>
             <mn>
              2
             </mn>
            </mfrac>
            <mi mathvariant="normal">
             Ⅱ
            </mi>
            <mo>
             (
            </mo>
            <mi>
             f
            </mi>
            <mo>
             (
            </mo>
            <msup>
             <mi>
              x
             </mi>
             <mo>
              +
             </mo>
            </msup>
            <mo>
             )
            </mo>
            <mo>
             =
            </mo>
            <mi>
             f
            </mi>
            <mo>
             (
            </mo>
            <msup>
             <mi>
              x
             </mi>
             <mo>
              −
             </mo>
            </msup>
            <mo>
             )
            </mo>
            <mo>
             )
            </mo>
            <mo>
             )
            </mo>
           </mstyle>
          </mstyle>
         </mrow>
         <annotation encoding="application/x-tex">
          l_{rank}=\frac{1}{m_+m_-}\displaystyle{\sum_{x^+\in D^+}}\displaystyle{\sum_{x^-\in D^-}}(Ⅱ(f(x^+)&amp;lt;f(x^-))+\frac{1}{2}Ⅱ(f(x^+)=f(x^-)))
         </annotation>
        </semantics>
       </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.84444em; vertical-align: -0.15em;"></span><span class="mord"><span style="margin-right: 0.01968em;" class="mord mathit">l</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.336108em;"><span class="" style="top: -2.55em; margin-left: -0.01968em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span style="margin-right: 0.02778em;" class="mord mathit mtight">r</span><span class="mord mathit mtight">a</span><span class="mord mathit mtight">n</span><span style="margin-right: 0.03148em;" class="mord mathit mtight">k</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 2.65668em; vertical-align: -1.33524em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.32144em;"><span class="" style="top: -2.314em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord"><span class="mord mathit">m</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.258331em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">+</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.208331em;"><span class=""></span></span></span></span></span></span><span class="mord"><span class="mord mathit">m</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.258331em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">−</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.208331em;"><span class=""></span></span></span></span></span></span></span></span><span class="" style="top: -3.23em;"><span class="pstrut" style="height: 3em;"></span><span class="frac-line" style="border-bottom-width: 0.04em;"></span></span><span class="" style="top: -3.677em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.894331em;"><span class=""></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mord"><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.05001em;"><span class="" style="top: -1.84213em; margin-left: 0em;"><span class="pstrut" style="height: 3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathit mtight">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.702664em;"><span class="" style="top: -2.786em; margin-right: 0.0714286em;"><span class="pstrut" style="height: 2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mbin mtight">+</span></span></span></span></span></span></span></span><span class="mrel mtight">∈</span><span class="mord mtight"><span style="margin-right: 0.02778em;" class="mord mathit mtight">D</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.702664em;"><span class="" style="top: -2.786em; margin-right: 0.0714286em;"><span class="pstrut" style="height: 2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mbin mtight">+</span></span></span></span></span></span></span></span></span></span></span><span class="" style="top: -3.05001em;"><span class="pstrut" style="height: 3.05em;"></span><span class=""><span class="mop op-symbol large-op">∑</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 1.33524em;"><span class=""></span></span></span></span></span></span><span class="mord"><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.05001em;"><span class="" style="top: -1.84213em; margin-left: 0em;"><span class="pstrut" style="height: 3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathit mtight">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.702664em;"><span class="" style="top: -2.786em; margin-right: 0.0714286em;"><span class="pstrut" style="height: 2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mbin mtight">−</span></span></span></span></span></span></span></span><span class="mrel mtight">∈</span><span class="mord mtight"><span style="margin-right: 0.02778em;" class="mord mathit mtight">D</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.702664em;"><span class="" style="top: -2.786em; margin-right: 0.0714286em;"><span class="pstrut" style="height: 2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mbin mtight">−</span></span></span></span></span></span></span></span></span></span></span><span class="" style="top: -3.05001em;"><span class="pstrut" style="height: 3.05em;"></span><span class=""><span class="mop op-symbol large-op">∑</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 1.33524em;"><span class=""></span></span></span></span></span></span><span class="mopen">(</span><span class="mord">Ⅱ</span><span class="mopen">(</span><span style="margin-right: 0.10764em;" class="mord mathit">f</span><span class="mopen">(</span><span class="mord"><span class="mord mathit">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.821331em;"><span class="" style="top: -3.113em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">+</span></span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 1.07133em; vertical-align: -0.25em;"></span><span style="margin-right: 0.10764em;" class="mord mathit">f</span><span class="mopen">(</span><span class="mord"><span class="mord mathit">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.821331em;"><span class="" style="top: -3.113em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">−</span></span></span></span></span></span></span></span><span class="mclose">)</span><span class="mclose">)</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 2.00744em; vertical-align: -0.686em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.32144em;"><span class="" style="top: -2.314em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord">2</span></span></span><span class="" style="top: -3.23em;"><span class="pstrut" style="height: 3em;"></span><span class="frac-line" style="border-bottom-width: 0.04em;"></span></span><span class="" style="top: -3.677em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.686em;"><span class=""></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mord">Ⅱ</span><span class="mopen">(</span><span style="margin-right: 0.10764em;" class="mord mathit">f</span><span class="mopen">(</span><span class="mord"><span class="mord mathit">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.821331em;"><span class="" style="top: -3.113em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">+</span></span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 1.07133em; vertical-align: -0.25em;"></span><span style="margin-right: 0.10764em;" class="mord mathit">f</span><span class="mopen">(</span><span class="mord"><span class="mord mathit">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.821331em;"><span class="" style="top: -3.113em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">−</span></span></span></span></span></span></span></span><span class="mclose">)</span><span class="mclose">)</span><span class="mclose">)</span></span></span></span></span></span></p> 
  <p>    显然<span class="katex--inline"><span class="katex"><span class="katex-mathml">
      <math>
       <semantics>
        <mrow>
         <mi>
          A
         </mi>
         <mi>
          U
         </mi>
         <mi>
          C
         </mi>
         <mo>
          =
         </mo>
         <mn>
          1
         </mn>
         <mo>
          −
         </mo>
         <msub>
          <mi>
           l
          </mi>
          <mrow>
           <mi>
            r
           </mi>
           <mi>
            a
           </mi>
           <mi>
            n
           </mi>
           <mi>
            k
           </mi>
          </mrow>
         </msub>
        </mrow>
        <annotation encoding="application/x-tex">
         AUC=1-l_{rank}
        </annotation>
       </semantics>
      </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord mathit">A</span><span style="margin-right: 0.10903em;" class="mord mathit">U</span><span style="margin-right: 0.07153em;" class="mord mathit">C</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 0.72777em; vertical-align: -0.08333em;"></span><span class="mord">1</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 0.84444em; vertical-align: -0.15em;"></span><span class="mord"><span style="margin-right: 0.01968em;" class="mord mathit">l</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.336108em;"><span class="" style="top: -2.55em; margin-left: -0.01968em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span style="margin-right: 0.02778em;" class="mord mathit mtight">r</span><span class="mord mathit mtight">a</span><span class="mord mathit mtight">n</span><span style="margin-right: 0.03148em;" class="mord mathit mtight">k</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span>。</p> 
  <h4><a id="234__131"></a>2.3.4 代价敏感错误率与代价曲线</h4> 
  <p>    <span class="katex--inline"><span class="katex"><span class="katex-mathml">
      <math>
       <semantics>
        <mrow>
         <mi>
          R
         </mi>
         <mi>
          O
         </mi>
         <mi>
          C
         </mi>
         <mo>
          −
         </mo>
         <mi>
          A
         </mi>
         <mi>
          U
         </mi>
         <mi>
          C
         </mi>
        </mrow>
        <annotation encoding="application/x-tex">
         ROC-AUC
        </annotation>
       </semantics>
      </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.76666em; vertical-align: -0.08333em;"></span><span style="margin-right: 0.00773em;" class="mord mathit">R</span><span style="margin-right: 0.02778em;" class="mord mathit">O</span><span style="margin-right: 0.07153em;" class="mord mathit">C</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord mathit">A</span><span style="margin-right: 0.10903em;" class="mord mathit">U</span><span style="margin-right: 0.07153em;" class="mord mathit">C</span></span></span></span></span>体现的是学习器在一般情况下的好坏，我们在其计算过程中默认各种分类错误造成的后果是一样的，即所有类型的错误“均等代价”，但这有时不合常理，有些错误一定会比其它错误造成的后果更严重。我们可以用“非均等代价”来衡量这种不平等程度。以二分类为例：</p> 
  <h5><a id="center22_center_133"></a>
   <center>
    表2.2 二分类代价矩阵
   </center></h5> 
  <table> 
   <tbody>
    <tr> 
     <th rowspan="2">真实类别</th> 
     <th colspan="2">预测类别</th> 
    </tr> 
    <tr> 
     <td>第0类</td> 
     <td>第1类</td> 
    </tr> 
    <tr> 
     <td>第0类</td> 
     <td>0</td> 
     <td>cost_01</td> 
    </tr> 
    <tr> 
     <td>第1类</td> 
     <td>cost_10</td> 
     <td>0</td> 
    </tr> 
   </tbody>
  </table> 
  <p>    代价“敏感”的错误率：<br> <span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml">
       <math>
        <semantics>
         <mrow>
          <mi>
           E
          </mi>
          <mo>
           (
          </mo>
          <mi>
           f
          </mi>
          <mo>
           :
          </mo>
          <mi>
           D
          </mi>
          <mo>
           )
          </mo>
          <mo>
           =
          </mo>
          <mfrac>
           <mn>
            1
           </mn>
           <mi>
            m
           </mi>
          </mfrac>
          <mo>
           (
          </mo>
          <mstyle displaystyle="true" scriptlevel="0">
           <mrow>
            <munder>
             <mo>
              ∑
             </mo>
             <mrow>
              <msup>
               <mi>
                x
               </mi>
               <mo>
                +
               </mo>
              </msup>
              <mo>
               ∈
              </mo>
              <msup>
               <mi>
                D
               </mi>
               <mo>
                +
               </mo>
              </msup>
             </mrow>
            </munder>
            <mi mathvariant="normal">
             Ⅱ
            </mi>
            <mo>
             (
            </mo>
            <mi>
             f
            </mi>
            <mo>
             (
            </mo>
            <msub>
             <mi>
              x
             </mi>
             <mi>
              i
             </mi>
            </msub>
            <mo>
             )
            </mo>
            <mo>
             =
            </mo>
            <mpadded width="0px">
             <mo>
              ̸
             </mo>
            </mpadded>
            <msub>
             <mi>
              y
             </mi>
             <mi>
              i
             </mi>
            </msub>
            <mo>
             )
            </mo>
            <mo>
             ×
            </mo>
            <mi>
             c
            </mi>
            <mi>
             o
            </mi>
            <mi>
             s
            </mi>
            <msub>
             <mi>
              t
             </mi>
             <mn>
              01
             </mn>
            </msub>
            <mo>
             +
            </mo>
            <munder>
             <mo>
              ∑
             </mo>
             <mrow>
              <msup>
               <mi>
                x
               </mi>
               <mo>
                −
               </mo>
              </msup>
              <mo>
               ∈
              </mo>
              <msup>
               <mi>
                D
               </mi>
               <mo>
                −
               </mo>
              </msup>
             </mrow>
            </munder>
            <mi mathvariant="normal">
             Ⅱ
            </mi>
            <mo>
             (
            </mo>
            <mi>
             f
            </mi>
            <mo>
             (
            </mo>
            <msub>
             <mi>
              x
             </mi>
             <mi>
              i
             </mi>
            </msub>
            <mo>
             )
            </mo>
            <mo>
             =
            </mo>
            <mpadded width="0px">
             <mo>
              ̸
             </mo>
            </mpadded>
            <msub>
             <mi>
              y
             </mi>
             <mi>
              i
             </mi>
            </msub>
            <mo>
             )
            </mo>
            <mo>
             ×
            </mo>
            <mi>
             c
            </mi>
            <mi>
             o
            </mi>
            <mi>
             s
            </mi>
            <msub>
             <mi>
              t
             </mi>
             <mn>
              10
             </mn>
            </msub>
           </mrow>
           <mo>
            )
           </mo>
          </mstyle>
         </mrow>
         <annotation encoding="application/x-tex">
          E(f:D)= \frac{1}{m}(\displaystyle{\sum_{x^+\in D^+}Ⅱ(f(x_i)=\not y_i)\times cost_{01}+\sum_{x^-\in D^-}Ⅱ(f(x_i)=\not y_i)\times cost_{10}})
         </annotation>
        </semantics>
       </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span style="margin-right: 0.05764em;" class="mord mathit">E</span><span class="mopen">(</span><span style="margin-right: 0.10764em;" class="mord mathit">f</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span style="margin-right: 0.02778em;" class="mord mathit">D</span><span class="mclose">)</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 2.65668em; vertical-align: -1.33524em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.32144em;"><span class="" style="top: -2.314em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord mathit">m</span></span></span><span class="" style="top: -3.23em;"><span class="pstrut" style="height: 3em;"></span><span class="frac-line" style="border-bottom-width: 0.04em;"></span></span><span class="" style="top: -3.677em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.686em;"><span class=""></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mopen">(</span><span class="mord"><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.05001em;"><span class="" style="top: -1.84213em; margin-left: 0em;"><span class="pstrut" style="height: 3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathit mtight">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.702664em;"><span class="" style="top: -2.786em; margin-right: 0.0714286em;"><span class="pstrut" style="height: 2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mbin mtight">+</span></span></span></span></span></span></span></span><span class="mrel mtight">∈</span><span class="mord mtight"><span style="margin-right: 0.02778em;" class="mord mathit mtight">D</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.702664em;"><span class="" style="top: -2.786em; margin-right: 0.0714286em;"><span class="pstrut" style="height: 2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mbin mtight">+</span></span></span></span></span></span></span></span></span></span></span><span class="" style="top: -3.05001em;"><span class="pstrut" style="height: 3.05em;"></span><span class=""><span class="mop op-symbol large-op">∑</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 1.33524em;"><span class=""></span></span></span></span></span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord">Ⅱ</span><span class="mopen">(</span><span style="margin-right: 0.10764em;" class="mord mathit">f</span><span class="mopen">(</span><span class="mord"><span class="mord mathit">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.311664em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mrel"><span class="mord"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.69444em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="rlap"><span class="strut" style="height: 0.88888em; vertical-align: -0.19444em;"></span><span class="inner"><span class="mrel latin_fallback"≯</span></span><span class="fix"></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.19444em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mord"><span style="margin-right: 0.03588em;" class="mord mathit">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.311664em;"><span class="" style="top: -2.55em; margin-left: -0.03588em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mord mathit">c</span><span class="mord mathit">o</span><span class="mord mathit">s</span><span class="mord"><span class="mord mathit">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">0</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.05001em;"><span class="" style="top: -1.84213em; margin-left: 0em;"><span class="pstrut" style="height: 3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathit mtight">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.702664em;"><span class="" style="top: -2.786em; margin-right: 0.0714286em;"><span class="pstrut" style="height: 2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mbin mtight">−</span></span></span></span></span></span></span></span><span class="mrel mtight">∈</span><span class="mord mtight"><span style="margin-right: 0.02778em;" class="mord mathit mtight">D</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.702664em;"><span class="" style="top: -2.786em; margin-right: 0.0714286em;"><span class="pstrut" style="height: 2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mbin mtight">−</span></span></span></span></span></span></span></span></span></span></span><span class="" style="top: -3.05001em;"><span class="pstrut" style="height: 3.05em;"></span><span class=""><span class="mop op-symbol large-op">∑</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 1.33524em;"><span class=""></span></span></span></span></span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord">Ⅱ</span><span class="mopen">(</span><span style="margin-right: 0.10764em;" class="mord mathit">f</span><span class="mopen">(</span><span class="mord"><span class="mord mathit">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.311664em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mrel"><span class="mord"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.69444em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="rlap"><span class="strut" style="height: 0.88888em; vertical-align: -0.19444em;"></span><span class="inner"><span class="mrel latin_fallback"≯</span></span><span class="fix"></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.19444em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mord"><span style="margin-right: 0.03588em;" class="mord mathit">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.311664em;"><span class="" style="top: -2.55em; margin-left: -0.03588em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mord mathit">c</span><span class="mord mathit">o</span><span class="mord mathit">s</span><span class="mord"><span class="mord mathit">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mord mtight">0</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></span></span><br>     在“非均等代价”下，ROC曲线不再能够代表学习器的期望总体代价，我们采用“代价曲线”来实现这一任务。代价曲线的横轴是取值在<span class="katex--inline"><span class="katex"><span class="katex-mathml">
      <math>
       <semantics>
        <mrow>
         <mo>
          [
         </mo>
         <mn>
          0
         </mn>
         <mo separator="true">
          ,
         </mo>
         <mn>
          1
         </mn>
         <mo>
          ]
         </mo>
        </mrow>
        <annotation encoding="application/x-tex">
         [0,1]
        </annotation>
       </semantics>
      </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mopen">[</span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord">1</span><span class="mclose">]</span></span></span></span></span>之间的正例概率代价，式中<span class="katex--inline"><span class="katex"><span class="katex-mathml">
      <math>
       <semantics>
        <mrow>
         <mi>
          p
         </mi>
        </mrow>
        <annotation encoding="application/x-tex">
         p
        </annotation>
       </semantics>
      </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.625em; vertical-align: -0.19444em;"></span><span class="mord mathit">p</span></span></span></span></span>是样例为正的概率。<br> <span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml">
       <math>
        <semantics>
         <mrow>
          <mi>
           P
          </mi>
          <mo>
           (
          </mo>
          <mo>
           +
          </mo>
          <mo>
           )
          </mo>
          <mi>
           c
          </mi>
          <mi>
           o
          </mi>
          <mi>
           s
          </mi>
          <mi>
           t
          </mi>
          <mo>
           =
          </mo>
          <mfrac>
           <mrow>
            <mi>
             p
            </mi>
            <mo>
             ×
            </mo>
            <mi>
             c
            </mi>
            <mi>
             o
            </mi>
            <mi>
             s
            </mi>
            <msub>
             <mi>
              t
             </mi>
             <mn>
              01
             </mn>
            </msub>
           </mrow>
           <mrow>
            <mi>
             p
            </mi>
            <mo>
             ×
            </mo>
            <mi>
             c
            </mi>
            <mi>
             o
            </mi>
            <mi>
             s
            </mi>
            <msub>
             <mi>
              t
             </mi>
             <mn>
              01
             </mn>
            </msub>
            <mo>
             +
            </mo>
            <mo>
             (
            </mo>
            <mn>
             1
            </mn>
            <mo>
             −
            </mo>
            <mi>
             p
            </mi>
            <mo>
             )
            </mo>
            <mo>
             ×
            </mo>
            <mi>
             c
            </mi>
            <mi>
             o
            </mi>
            <mi>
             s
            </mi>
            <msub>
             <mi>
              t
             </mi>
             <mn>
              10
             </mn>
            </msub>
           </mrow>
          </mfrac>
         </mrow>
         <annotation encoding="application/x-tex">
          P(+)cost=\frac{p\times cost_{01}}{p\times cost_{01}+(1-p)\times cost_{10}}
         </annotation>
        </semantics>
       </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span style="margin-right: 0.13889em;" class="mord mathit">P</span><span class="mopen">(</span><span class="mord">+</span><span class="mclose">)</span><span class="mord mathit">c</span><span class="mord mathit">o</span><span class="mord mathit">s</span><span class="mord mathit">t</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 2.22808em; vertical-align: -0.936em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.29208em;"><span class="" style="top: -2.314em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord mathit">p</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mord mathit">c</span><span class="mord mathit">o</span><span class="mord mathit">s</span><span class="mord"><span class="mord mathit">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">0</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mord mathit">p</span><span class="mclose">)</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mord mathit">c</span><span class="mord mathit">o</span><span class="mord mathit">s</span><span class="mord"><span class="mord mathit">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mord mtight">0</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span><span class="" style="top: -3.23em;"><span class="pstrut" style="height: 3em;"></span><span class="frac-line" style="border-bottom-width: 0.04em;"></span></span><span class="" style="top: -3.677em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord mathit">p</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mord mathit">c</span><span class="mord mathit">o</span><span class="mord mathit">s</span><span class="mord"><span class="mord mathit">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">0</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.936em;"><span class=""></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></span><br>     纵轴是归一化代价：<br> <span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml">
       <math>
        <semantics>
         <mrow>
          <mi>
           c
          </mi>
          <mi>
           o
          </mi>
          <mi>
           s
          </mi>
          <msub>
           <mi>
            t
           </mi>
           <mrow>
            <mi>
             n
            </mi>
            <mi>
             o
            </mi>
            <mi>
             r
            </mi>
            <mi>
             m
            </mi>
           </mrow>
          </msub>
          <mo>
           =
          </mo>
          <mfrac>
           <mrow>
            <mi>
             F
            </mi>
            <mi>
             N
            </mi>
            <mi>
             R
            </mi>
            <mo>
             ×
            </mo>
            <mi>
             p
            </mi>
            <mo>
             ×
            </mo>
            <mi>
             c
            </mi>
            <mi>
             o
            </mi>
            <mi>
             s
            </mi>
            <msub>
             <mi>
              t
             </mi>
             <mn>
              01
             </mn>
            </msub>
            <mo>
             +
            </mo>
            <mi>
             F
            </mi>
            <mi>
             P
            </mi>
            <mi>
             R
            </mi>
            <mo>
             ×
            </mo>
            <mo>
             (
            </mo>
            <mn>
             1
            </mn>
            <mo>
             −
            </mo>
            <mi>
             p
            </mi>
            <mo>
             )
            </mo>
            <mo>
             ×
            </mo>
            <mi>
             c
            </mi>
            <mi>
             o
            </mi>
            <mi>
             s
            </mi>
            <msub>
             <mi>
              t
             </mi>
             <mn>
              10
             </mn>
            </msub>
           </mrow>
           <mrow>
            <mi>
             p
            </mi>
            <mo>
             ×
            </mo>
            <mi>
             c
            </mi>
            <mi>
             o
            </mi>
            <mi>
             s
            </mi>
            <msub>
             <mi>
              t
             </mi>
             <mn>
              01
             </mn>
            </msub>
            <mo>
             +
            </mo>
            <mo>
             (
            </mo>
            <mn>
             1
            </mn>
            <mo>
             −
            </mo>
            <mi>
             p
            </mi>
            <mo>
             )
            </mo>
            <mo>
             ×
            </mo>
            <mi>
             c
            </mi>
            <mi>
             o
            </mi>
            <mi>
             s
            </mi>
            <msub>
             <mi>
              t
             </mi>
             <mn>
              10
             </mn>
            </msub>
           </mrow>
          </mfrac>
         </mrow>
         <annotation encoding="application/x-tex">
          cost_{norm}=\frac{FNR\times p\times cost_{01}+FPR\times (1-p)\times cost_{10}}{p\times cost_{01}+(1-p)\times cost_{10}}
         </annotation>
        </semantics>
       </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.76508em; vertical-align: -0.15em;"></span><span class="mord mathit">c</span><span class="mord mathit">o</span><span class="mord mathit">s</span><span class="mord"><span class="mord mathit">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.151392em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">n</span><span class="mord mathit mtight">o</span><span style="margin-right: 0.02778em;" class="mord mathit mtight">r</span><span class="mord mathit mtight">m</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 2.363em; vertical-align: -0.936em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.427em;"><span class="" style="top: -2.314em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord mathit">p</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mord mathit">c</span><span class="mord mathit">o</span><span class="mord mathit">s</span><span class="mord"><span class="mord mathit">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">0</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mord mathit">p</span><span class="mclose">)</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mord mathit">c</span><span class="mord mathit">o</span><span class="mord mathit">s</span><span class="mord"><span class="mord mathit">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mord mtight">0</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span><span class="" style="top: -3.23em;"><span class="pstrut" style="height: 3em;"></span><span class="frac-line" style="border-bottom-width: 0.04em;"></span></span><span class="" style="top: -3.677em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span style="margin-right: 0.13889em;" class="mord mathit">F</span><span style="margin-right: 0.10903em;" class="mord mathit">N</span><span style="margin-right: 0.00773em;" class="mord mathit">R</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mord mathit">p</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mord mathit">c</span><span class="mord mathit">o</span><span class="mord mathit">s</span><span class="mord"><span class="mord mathit">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">0</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.222222em;"></span><span style="margin-right: 0.13889em;" class="mord mathit">F</span><span style="margin-right: 0.13889em;" class="mord mathit">P</span><span style="margin-right: 0.00773em;" class="mord mathit">R</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mord mathit">p</span><span class="mclose">)</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mord mathit">c</span><span class="mord mathit">o</span><span class="mord mathit">s</span><span class="mord"><span class="mord mathit">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mord mtight">0</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.936em;"><span class=""></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></span><br>     <span class="katex--inline"><span class="katex"><span class="katex-mathml">
      <math>
       <semantics>
        <mrow>
         <mi>
          p
         </mi>
         <mo>
          =
         </mo>
         <mn>
          0
         </mn>
        </mrow>
        <annotation encoding="application/x-tex">
         p=0
        </annotation>
       </semantics>
      </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.625em; vertical-align: -0.19444em;"></span><span class="mord mathit">p</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 0.64444em; vertical-align: 0em;"></span><span class="mord">0</span></span></span></span></span>对应<span class="katex--inline"><span class="katex"><span class="katex-mathml">
      <math>
       <semantics>
        <mrow>
         <mo>
          (
         </mo>
         <mn>
          0
         </mn>
         <mo separator="true">
          ,
         </mo>
         <mi>
          F
         </mi>
         <mi>
          P
         </mi>
         <mi>
          R
         </mi>
         <mo>
          )
         </mo>
        </mrow>
        <annotation encoding="application/x-tex">
         (0,FPR)
        </annotation>
       </semantics>
      </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mopen">(</span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.166667em;"></span><span style="margin-right: 0.13889em;" class="mord mathit">F</span><span style="margin-right: 0.13889em;" class="mord mathit">P</span><span style="margin-right: 0.00773em;" class="mord mathit">R</span><span class="mclose">)</span></span></span></span></span>，<span class="katex--inline"><span class="katex"><span class="katex-mathml">
      <math>
       <semantics>
        <mrow>
         <mi>
          p
         </mi>
         <mo>
          =
         </mo>
         <mn>
          1
         </mn>
        </mrow>
        <annotation encoding="application/x-tex">
         p=1
        </annotation>
       </semantics>
      </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.625em; vertical-align: -0.19444em;"></span><span class="mord mathit">p</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 0.64444em; vertical-align: 0em;"></span><span class="mord">1</span></span></span></span></span>对应<span class="katex--inline"><span class="katex"><span class="katex-mathml">
      <math>
       <semantics>
        <mrow>
         <mo>
          (
         </mo>
         <mn>
          1
         </mn>
         <mo separator="true">
          ,
         </mo>
         <mi>
          F
         </mi>
         <mi>
          N
         </mi>
         <mi>
          R
         </mi>
         <mo>
          )
         </mo>
        </mrow>
        <annotation encoding="application/x-tex">
         (1,FNR)
        </annotation>
       </semantics>
      </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mopen">(</span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.166667em;"></span><span style="margin-right: 0.13889em;" class="mord mathit">F</span><span style="margin-right: 0.10903em;" class="mord mathit">N</span><span style="margin-right: 0.00773em;" class="mord mathit">R</span><span class="mclose">)</span></span></span></span></span>，且这条曲线肯定是直的，那么我们就能把它画出来。ROC曲线上一个点对应代价曲线上一条直线。<strong>横纵坐标都是概率，一条代价曲线下方的面积就代表“在一种条件下学习器的期望总体代价”。那么我们将对应于ROC曲线上每一个点的代价曲线都画出来，其下方面积的交集就是“在所有条件下学习器的期望总体代价”</strong>。如图所示：<br> <img src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190801224816298.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzMzOTk3ODI2,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p> 
 </div> 
 <link href="https://csdnimg.cn/release/phoenix/mdeditor/markdown_views-e44c3c0e64.css" rel="stylesheet"> 
</div>

	<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
	<!-- 自定义广告 -->
	<ins class="adsbygoogle"
	     style="display:block"
	     data-ad-client="ca-pub-8889449066804352"
	     data-ad-slot="1494696990"
	     data-ad-format="auto"
	     data-full-width-responsive="true"></ins>
	<script>
		(adsbygoogle = window.adsbygoogle || []).push({});
	</script>


        <br />
        <a href="https://uzshare.com/">更多精彩内容</a>
      </section>
      
      <header style="right: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
        <ul style="display: block;">
          <li><a href="/" style="line-height: 40px;padding-top:0px;">回首页</a></li>
        </ul>
      </header>
      <header class="sm-hidden" style="right: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
          <img src="https://uzzz.org.cn/imgqcode.png" style="width:160px;" />
      </header>
      
      <header class="sm-hidden" style="left: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
          <img src="https://uzzz.org.cn/hou_imgqcode.png" style="width:160px;">
      </header>
    </div>
    
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->

    <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?d293c49e1e4bfe8f276695a5aa953300";
      var s = document.getElementsByTagName("script")[0]; 
      s.parentNode.insertBefore(hm, s);
    })();
    </script>

  </body>
</html>
