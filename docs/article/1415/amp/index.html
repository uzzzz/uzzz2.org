<!DOCTYPE html>
<html amp lang="en-US" i-amphtml-layout="" i-amphtml-no-boilerplate="" transformed="self;v=1">
<head><meta charset="utf-8"><style amp-runtime="" i-amphtml-version="012111242025001">html{overflow-x:hidden!important}html.i-amphtml-fie{height:100%!important;width:100%!important}html:not([amp4ads]),html:not([amp4ads]) body{height:auto!important}html:not([amp4ads]) body{margin:0!important}body{-webkit-text-size-adjust:100%;-moz-text-size-adjust:100%;-ms-text-size-adjust:100%;text-size-adjust:100%}html.i-amphtml-singledoc.i-amphtml-embedded{-ms-touch-action:pan-y pinch-zoom;touch-action:pan-y pinch-zoom}html.i-amphtml-fie>body,html.i-amphtml-singledoc>body{overflow:visible!important}html.i-amphtml-fie:not(.i-amphtml-inabox)>body,html.i-amphtml-singledoc:not(.i-amphtml-inabox)>body{position:relative!important}html.i-amphtml-ios-embed-legacy>body{overflow-x:hidden!important;overflow-y:auto!important;position:absolute!important}html.i-amphtml-ios-embed{overflow-y:auto!important;position:static}#i-amphtml-wrapper{overflow-x:hidden!important;overflow-y:auto!important;position:absolute!important;top:0!important;left:0!important;right:0!important;bottom:0!important;margin:0!important;display:block!important}html.i-amphtml-ios-embed.i-amphtml-ios-overscroll,html.i-amphtml-ios-embed.i-amphtml-ios-overscroll>#i-amphtml-wrapper{-webkit-overflow-scrolling:touch!important}#i-amphtml-wrapper>body{position:relative!important;border-top:1px solid transparent!important}#i-amphtml-wrapper+body{visibility:visible}#i-amphtml-wrapper+body .i-amphtml-lightbox-element,#i-amphtml-wrapper+body[i-amphtml-lightbox]{visibility:hidden}#i-amphtml-wrapper+body[i-amphtml-lightbox] .i-amphtml-lightbox-element{visibility:visible}#i-amphtml-wrapper.i-amphtml-scroll-disabled,.i-amphtml-scroll-disabled{overflow-x:hidden!important;overflow-y:hidden!important}amp-instagram{padding:54px 0px 0px!important;background-color:#fff}amp-iframe iframe{box-sizing:border-box!important}[amp-access][amp-access-hide]{display:none}[subscriptions-dialog],body:not(.i-amphtml-subs-ready) [subscriptions-action],body:not(.i-amphtml-subs-ready) [subscriptions-section]{display:none!important}amp-experiment,amp-live-list>[update]{display:none}amp-list[resizable-children]>.i-amphtml-loading-container.amp-hidden{display:none!important}amp-list [fetch-error],amp-list[load-more] [load-more-button],amp-list[load-more] [load-more-end],amp-list[load-more] [load-more-failed],amp-list[load-more] [load-more-loading]{display:none}amp-list[diffable] div[role=list]{display:block}amp-story-page,amp-story[standalone]{min-height:1px!important;display:block!important;height:100%!important;margin:0!important;padding:0!important;overflow:hidden!important;width:100%!important}amp-story[standalone]{background-color:#000!important;position:relative!important}amp-story-page{background-color:#757575}amp-story .amp-active>div,amp-story .i-amphtml-loader-background{display:none!important}amp-story-page:not(:first-of-type):not([distance]):not([active]){transform:translateY(1000vh)!important}amp-autocomplete{position:relative!important;display:inline-block!important}amp-autocomplete>input,amp-autocomplete>textarea{padding:0.5rem;border:1px solid rgba(0,0,0,0.33)}.i-amphtml-autocomplete-results,amp-autocomplete>input,amp-autocomplete>textarea{font-size:1rem;line-height:1.5rem}[amp-fx^=fly-in]{visibility:hidden}amp-script[nodom],amp-script[sandboxed]{position:fixed!important;top:0!important;width:1px!important;height:1px!important;overflow:hidden!important;visibility:hidden}
/*# sourceURL=/css/ampdoc.css*/[hidden]{display:none!important}.i-amphtml-element{display:inline-block}.i-amphtml-blurry-placeholder{transition:opacity 0.3s cubic-bezier(0.0,0.0,0.2,1)!important;pointer-events:none}[layout=nodisplay]:not(.i-amphtml-element){display:none!important}.i-amphtml-layout-fixed,[layout=fixed][width][height]:not(.i-amphtml-layout-fixed){display:inline-block;position:relative}.i-amphtml-layout-responsive,[layout=responsive][width][height]:not(.i-amphtml-layout-responsive),[width][height][heights]:not([layout]):not(.i-amphtml-layout-responsive),[width][height][sizes]:not(img):not([layout]):not(.i-amphtml-layout-responsive){display:block;position:relative}.i-amphtml-layout-intrinsic,[layout=intrinsic][width][height]:not(.i-amphtml-layout-intrinsic){display:inline-block;position:relative;max-width:100%}.i-amphtml-layout-intrinsic .i-amphtml-sizer{max-width:100%}.i-amphtml-intrinsic-sizer{max-width:100%;display:block!important}.i-amphtml-layout-container,.i-amphtml-layout-fixed-height,[layout=container],[layout=fixed-height][height]:not(.i-amphtml-layout-fixed-height){display:block;position:relative}.i-amphtml-layout-fill,.i-amphtml-layout-fill.i-amphtml-notbuilt,[layout=fill]:not(.i-amphtml-layout-fill),body noscript>*{display:block;overflow:hidden!important;position:absolute;top:0;left:0;bottom:0;right:0}body noscript>*{position:absolute!important;width:100%;height:100%;z-index:2}body noscript{display:inline!important}.i-amphtml-layout-flex-item,[layout=flex-item]:not(.i-amphtml-layout-flex-item){display:block;position:relative;-ms-flex:1 1 auto;flex:1 1 auto}.i-amphtml-layout-fluid{position:relative}.i-amphtml-layout-size-defined{overflow:hidden!important}.i-amphtml-layout-awaiting-size{position:absolute!important;top:auto!important;bottom:auto!important}i-amphtml-sizer{display:block!important}@supports (aspect-ratio:1/1){i-amphtml-sizer.i-amphtml-disable-ar{display:none!important}}.i-amphtml-blurry-placeholder,.i-amphtml-fill-content{display:block;height:0;max-height:100%;max-width:100%;min-height:100%;min-width:100%;width:0;margin:auto}.i-amphtml-layout-size-defined .i-amphtml-fill-content{position:absolute;top:0;left:0;bottom:0;right:0}.i-amphtml-replaced-content,.i-amphtml-screen-reader{padding:0!important;border:none!important}.i-amphtml-screen-reader{position:fixed!important;top:0px!important;left:0px!important;width:4px!important;height:4px!important;opacity:0!important;overflow:hidden!important;margin:0!important;display:block!important;visibility:visible!important}.i-amphtml-screen-reader~.i-amphtml-screen-reader{left:8px!important}.i-amphtml-screen-reader~.i-amphtml-screen-reader~.i-amphtml-screen-reader{left:12px!important}.i-amphtml-screen-reader~.i-amphtml-screen-reader~.i-amphtml-screen-reader~.i-amphtml-screen-reader{left:16px!important}.i-amphtml-unresolved{position:relative;overflow:hidden!important}.i-amphtml-select-disabled{-webkit-user-select:none!important;-ms-user-select:none!important;user-select:none!important}.i-amphtml-notbuilt,[layout]:not(.i-amphtml-element),[width][height][heights]:not([layout]):not(.i-amphtml-element),[width][height][sizes]:not(img):not([layout]):not(.i-amphtml-element){position:relative;overflow:hidden!important;color:transparent!important}.i-amphtml-notbuilt:not(.i-amphtml-layout-container)>*,[layout]:not([layout=container]):not(.i-amphtml-element)>*,[width][height][heights]:not([layout]):not(.i-amphtml-element)>*,[width][height][sizes]:not([layout]):not(.i-amphtml-element)>*{display:none}amp-img:not(.i-amphtml-element)[i-amphtml-ssr]>img.i-amphtml-fill-content{display:block}.i-amphtml-notbuilt:not(.i-amphtml-layout-container),[layout]:not([layout=container]):not(.i-amphtml-element),[width][height][heights]:not([layout]):not(.i-amphtml-element),[width][height][sizes]:not(img):not([layout]):not(.i-amphtml-element){color:transparent!important;line-height:0!important}.i-amphtml-ghost{visibility:hidden!important}.i-amphtml-element>[placeholder],[layout]:not(.i-amphtml-element)>[placeholder],[width][height][heights]:not([layout]):not(.i-amphtml-element)>[placeholder],[width][height][sizes]:not([layout]):not(.i-amphtml-element)>[placeholder]{display:block;line-height:normal}.i-amphtml-element>[placeholder].amp-hidden,.i-amphtml-element>[placeholder].hidden{visibility:hidden}.i-amphtml-element:not(.amp-notsupported)>[fallback],.i-amphtml-layout-container>[placeholder].amp-hidden,.i-amphtml-layout-container>[placeholder].hidden{display:none}.i-amphtml-layout-size-defined>[fallback],.i-amphtml-layout-size-defined>[placeholder]{position:absolute!important;top:0!important;left:0!important;right:0!important;bottom:0!important;z-index:1}amp-img[i-amphtml-ssr]:not(.i-amphtml-element)>[placeholder]{z-index:auto}.i-amphtml-notbuilt>[placeholder]{display:block!important}.i-amphtml-hidden-by-media-query{display:none!important}.i-amphtml-element-error{background:red!important;color:#fff!important;position:relative!important}.i-amphtml-element-error:before{content:attr(error-message)}i-amp-scroll-container,i-amphtml-scroll-container{position:absolute;top:0;left:0;right:0;bottom:0;display:block}i-amp-scroll-container.amp-active,i-amphtml-scroll-container.amp-active{overflow:auto;-webkit-overflow-scrolling:touch}.i-amphtml-loading-container{display:block!important;pointer-events:none;z-index:1}.i-amphtml-notbuilt>.i-amphtml-loading-container{display:block!important}.i-amphtml-loading-container.amp-hidden{visibility:hidden}.i-amphtml-element>[overflow]{cursor:pointer;position:relative;z-index:2;visibility:hidden;display:initial;line-height:normal}.i-amphtml-layout-size-defined>[overflow]{position:absolute}.i-amphtml-element>[overflow].amp-visible{visibility:visible}template{display:none!important}.amp-border-box,.amp-border-box *,.amp-border-box :after,.amp-border-box :before{box-sizing:border-box}amp-pixel{display:none!important}amp-analytics,amp-auto-ads,amp-story-auto-ads{position:fixed!important;top:0!important;width:1px!important;height:1px!important;overflow:hidden!important;visibility:hidden}html.i-amphtml-fie>amp-analytics{position:initial!important}[visible-when-invalid]:not(.visible),form [submit-error],form [submit-success],form [submitting]{display:none}amp-accordion{display:block!important}@media (min-width:1px){:where(amp-accordion>section)>:first-child{margin:0;background-color:#efefef;padding-right:20px;border:1px solid #dfdfdf}:where(amp-accordion>section)>:last-child{margin:0}}amp-accordion>section{float:none!important}amp-accordion>section>*{float:none!important;display:block!important;overflow:hidden!important;position:relative!important}amp-accordion,amp-accordion>section{margin:0}amp-accordion:not(.i-amphtml-built)>section>:last-child{display:none!important}amp-accordion:not(.i-amphtml-built)>section[expanded]>:last-child{display:block!important}
/*# sourceURL=/css/ampshared.css*/</style><meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1"><title>实现夜间模式的方法 - 有组织在!</title><link rel="preconnect" href="https://cdn.ampproject.org"><link rel="preload" as="script" href="https://cdn.ampproject.org/v0.js"><script async="" src="https://cdn.ampproject.org/v0.js"></script><style amp-custom="">.amp-wp-enforced-sizes{max-width:100%;margin:0 auto}amp-img.amp-wp-enforced-sizes[layout="intrinsic"] > img{object-fit:contain}html{background:#0a89c0}body{background:#fff;color:#353535;font-family:Georgia,"Times New Roman",Times,Serif;font-weight:300;line-height:1.75em}p,ol,ul{margin:0 0 1em;padding:0}a,a:visited{color:#0a89c0}a:hover,a:active,a:focus{color:#353535}.amp-wp-meta,.amp-wp-header div,.amp-wp-title,.amp-wp-tax-category,.amp-wp-footer p,.back-to-top{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI","Roboto","Oxygen-Sans","Ubuntu","Cantarell","Helvetica Neue",sans-serif}.amp-wp-header{background-color:#0a89c0}.amp-wp-header div{color:#fff;font-size:1em;font-weight:400;margin:0 auto;max-width:calc(840px - 32px);padding:.875em 16px;position:relative}.amp-wp-header a{color:#fff;text-decoration:none}.amp-wp-header .amp-wp-site-icon{background-color:#fff;border:1px solid #fff;border-radius:50%;position:absolute;right:18px;top:10px}.amp-wp-article{color:#353535;font-weight:400;margin:1.5em auto;max-width:840px;overflow-wrap:break-word;word-wrap:break-word}.amp-wp-article-header{align-items:center;align-content:stretch;display:flex;flex-wrap:wrap;justify-content:space-between;margin:1.5em 16px 0}.amp-wp-title{color:#353535;display:block;flex:1 0 100%;font-weight:900;margin:0 0 .625em;width:100%}.amp-wp-meta{color:#696969;display:inline-block;flex:2 1 50%;font-size:.875em;line-height:1.5em;margin:0 0 1.5em;padding:0}.amp-wp-article-header .amp-wp-meta:last-of-type{text-align:right}.amp-wp-article-header .amp-wp-meta:first-of-type{text-align:left}.amp-wp-byline amp-img,.amp-wp-byline .amp-wp-author{display:inline-block;vertical-align:middle}.amp-wp-byline amp-img{border:1px solid #0a89c0;border-radius:50%;position:relative;margin-right:6px}.amp-wp-posted-on{text-align:right}.amp-wp-article-content{margin:0 16px}.amp-wp-article-content ul,.amp-wp-article-content ol{margin-left:1em}.amp-wp-article-content amp-img{margin:0 auto}.amp-wp-article-footer .amp-wp-meta{display:block}.amp-wp-tax-category{color:#696969;font-size:.875em;line-height:1.5em;margin:1.5em 16px}.amp-wp-footer{border-top:1px solid #c2c2c2;margin:calc(1.5em - 1px) 0 0}.amp-wp-footer div{margin:0 auto;max-width:calc(840px - 32px);padding:1.25em 16px 1.25em;position:relative}.amp-wp-footer h2{font-size:1em;line-height:1.375em;margin:0 0 .5em}.amp-wp-footer p{color:#696969;font-size:.8em;line-height:1.5em;margin:0 85px 0 0}.amp-wp-footer a{text-decoration:none}.back-to-top{bottom:1.275em;font-size:.8em;font-weight:600;line-height:2em;position:absolute;right:16px}.htmledit_views em,.htmledit_views span[lang]{font-style:italic}.htmledit_views{font-family:-apple-system,SF UI Text,Arial,PingFang SC,Hiragino Sans GB,Microsoft YaHei,WenQuanYi Micro Hei,sans-serif,SimHei,SimSun}.htmledit_views a>amp-img{padding:1px;margin:1px;border:none;outline:#0782c1 solid 1px}.htmledit_views p{font-size:16px;color:#4d4d4d;font-weight:400;line-height:26px;margin:0 0 16px;overflow-x:auto}.htmledit_views amp-img{max-width:100%}.htmledit_views strong,.htmledit_views strong span{font-weight:700}.htmledit_views *{box-sizing:border-box}.htmledit_views h1,.htmledit_views h2{color:#4f4f4f;margin:8px 0 16px;font-weight:700}.htmledit_views ol,.htmledit_views ul{margin:0 0 24px;padding:0;font-size:16px}.htmledit_views ul ol{margin:0 0 24px 32px}.htmledit_views ul li{list-style-type:disc;margin:8px 0 0 32px}.htmledit_views ol li{list-style-type:decimal;margin-left:40px;margin-top:8px}.htmledit_views h1{font-size:28px;line-height:36px}.htmledit_views h2{font-size:24px;line-height:32px}.htmledit_views table tr{border:0;border-top:1px solid #ddd;background-color:#fff}.htmledit_views table{border-collapse:collapse;display:table;width:100%;text-align:left;margin-bottom:24px;margin-left:auto;margin-right:auto}.htmledit_views tbody{border:0}.htmledit_views table tr:nth-child(2n){background-color:#f7f7f7}.htmledit_views table tr td{border:1px solid #ddd;font-size:14px;color:#4f4f4f;line-height:22px;padding:8px;text-align:left}.htmledit_views table tr td p{font-size:14px;color:#4f4f4f;margin:0;padding:0;text-align:left;line-height:22px}.htmledit_views pre{white-space:pre-wrap;word-wrap:break-word;margin:0 0 24px;overflow-x:auto;padding:8px}.htmledit_views pre{font-family:Consolas,Inconsolata,Courier,monospace;font-size:14px;line-height:22px;color:#000}.htmledit_views a{color:#4ea1db;text-decoration:none}.htmledit_views a:focus,.htmledit_views a:hover{color:#ca0c16}.htmledit_views a:visited{color:#6795b5}:root:not(#_):not(#_):not(#_):not(#_):not(#_) .amp-wp-8a8db82{line-height:35px;font-family:"宋体";font-size:9pt}:root:not(#_):not(#_):not(#_):not(#_):not(#_) .amp-wp-030ff4f{color:#808080}:root:not(#_):not(#_):not(#_):not(#_):not(#_) .amp-wp-847d7f6{color:#00f}:root:not(#_):not(#_):not(#_):not(#_):not(#_) .amp-wp-0f55e8e{color:#008000}:root:not(#_):not(#_):not(#_):not(#_):not(#_) .amp-wp-688c1cb{color:#000080}:root:not(#_):not(#_):not(#_):not(#_):not(#_) .amp-wp-1a73ddb{table-layout:fixed;border-collapse:collapse;border:1px solid #ccc;width:692px}:root:not(#_):not(#_):not(#_):not(#_):not(#_) .amp-wp-f446150{width:692px;vertical-align:middle}:root:not(#_):not(#_):not(#_):not(#_):not(#_) .amp-wp-4cfa8da{table-layout:fixed;border-collapse:collapse;border:1px solid #ccc;width:699px}:root:not(#_):not(#_):not(#_):not(#_):not(#_) .amp-wp-2ac52af{width:699px;vertical-align:middle}:root:not(#_):not(#_):not(#_):not(#_):not(#_) .amp-wp-74af756{font-size:24px}:root:not(#_):not(#_):not(#_):not(#_):not(#_) .amp-wp-ef87bd9{list-style-type:disc;list-style-position:inside;line-height:1.5;font-size:14px}:root:not(#_):not(#_):not(#_):not(#_):not(#_) .amp-wp-802ca82{overflow:auto;font-family:"Microsoft YaHei","微软雅黑","华文黑体",STHeiti,"Microsoft JhengHei",sans-serif}:root:not(#_):not(#_):not(#_):not(#_):not(#_) .amp-wp-36a667c{table-layout:fixed;border-collapse:collapse;border:1px solid #ccc}:root:not(#_):not(#_):not(#_):not(#_):not(#_) .amp-wp-2138fa8{vertical-align:middle}:root:not(#_):not(#_):not(#_):not(#_):not(#_) .amp-wp-c66b41e{font-family:monospace}:root:not(#_):not(#_):not(#_):not(#_):not(#_) .amp-wp-5dbe981{line-height:1.5;font-size:14px}:root:not(#_):not(#_):not(#_):not(#_):not(#_) .amp-wp-c788c78{list-style-type:decimal;list-style-position:inside;line-height:1.5;font-size:14px}:root:not(#_):not(#_):not(#_):not(#_):not(#_) .amp-wp-b48c452{color:#555;font-family:"microsoft yahei";font-size:15px;line-height:35px}

/*# sourceURL=amp-custom.css */</style><script type="application/ld+json" class="yoast-schema-graph yoast-schema-graph--main">{"@context":"https://schema.org","@graph":[{"@type":"WebSite","@id":"https://uzzz.org/#website","url":"https://uzzz.org/","name":"\u6709\u7ec4\u7ec7\u5728!","potentialAction":{"@type":"SearchAction","target":"https://uzzz.org/?s={search_term_string}","query-input":"required name=search_term_string"}},{"@type":"ImageObject","@id":"https://uzzz.org/article/1415/#primaryimage","url":"https://uzshare.com/_p?https://img-blog.csdn.net/20170418110543173?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvbmF5aW5nXw==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center"},{"@type":"WebPage","@id":"https://uzzz.org/article/1415/#webpage","url":"https://uzzz.org/article/1415/","inLanguage":"en-US","name":"\u5b9e\u73b0\u591c\u95f4\u6a21\u5f0f\u7684\u65b9\u6cd5 - \u6709\u7ec4\u7ec7\u5728!","isPartOf":{"@id":"https://uzzz.org/#website"},"primaryImageOfPage":{"@id":"https://uzzz.org/article/1415/#primaryimage"},"datePublished":"2017-04-18T03:02:33+00:00","dateModified":"2017-04-18T03:02:33+00:00","author":{"@id":"https://uzzz.org/#/schema/person/29673f1347b0abda5882803c72ee5a3f"}},{"@type":["Person"],"@id":"https://uzzz.org/#/schema/person/29673f1347b0abda5882803c72ee5a3f","name":"fandyvon","sameAs":[]}]}</script><link rel="canonical" href="https://uzzz.org/article/1415/"></head>

<body class="">

<header id="top" class="amp-wp-header">
	<div>
		<a href="https://uzzz.org/">
										<amp-img src="https://uzzz.org/wp-content/uploads/2019/10/cropped-icon-32x32.png" width="32" height="32" class="amp-wp-site-icon i-amphtml-layout-fixed i-amphtml-layout-size-defined" style="width:32px;height:32px;" i-amphtml-layout="fixed"></amp-img>
						<span class="amp-site-title">
				有组织在!			</span>
		</a>

					</div>
</header>

<article class="amp-wp-article">
	<header class="amp-wp-article-header">
		<h1 class="amp-wp-title">实现夜间模式的方法</h1>
			<div class="amp-wp-meta amp-wp-byline">
					<amp-img src="https://secure.gravatar.com/avatar/e786821a74ef0467825a7d60183307bc?s=24&d=mm&r=g" alt="fandyvon" width="24" height="24" layout="fixed" class="i-amphtml-layout-fixed i-amphtml-layout-size-defined" style="width:24px;height:24px;" i-amphtml-layout="fixed"></amp-img>
				<span class="amp-wp-author author vcard">fandyvon</span>
	</div>
<div class="amp-wp-meta amp-wp-posted-on">
	<time datetime="2017-04-18T11:02:33+00:00">
		5 years ago	</time>
</div>
	</header>

	
	<div class="amp-wp-article-content">
		<div id="article_content" class="article_content clearfix">
 
 
<div class="htmledit_views" id="content_views">
<p data-amp-original-style="color:rgb(85,85,85);font-family:'microsoft yahei';font-size:15px;line-height:35px;" class="amp-wp-b48c452"> rea 文件下values 里面 colors.xml</p>
<p data-amp-original-style="color:rgb(85,85,85);font-family:'microsoft yahei';font-size:15px;line-height:35px;" class="amp-wp-b48c452"></p>
<p data-amp-original-style="color:rgb(85,85,85);font-family:'microsoft yahei';font-size:15px;line-height:35px;" class="amp-wp-b48c452"> setTheme方式</p>
<p data-amp-original-style="color:rgb(85,85,85);font-family:'microsoft yahei';font-size:15px;line-height:35px;" class="amp-wp-b48c452">
</p><pre data-amp-original-style="line-height:35px;font-family:'宋体';font-size:9pt;" class="amp-wp-8a8db82"><<span data-amp-original-style="color:rgb(0,0,128);" class="amp-wp-688c1cb"><strong>resources</strong></span>>
    <<span data-amp-original-style="color:rgb(0,0,128);" class="amp-wp-688c1cb"><strong>color </strong></span><span data-amp-original-style="color:rgb(0,0,255);" class="amp-wp-847d7f6"><strong>name=</strong></span><span data-amp-original-style="color:rgb(0,128,0);" class="amp-wp-0f55e8e"><strong>"colorPrimary"</strong></span>>#3F51B5</<span data-amp-original-style="color:rgb(0,0,128);" class="amp-wp-688c1cb"><strong>color</strong></span>>
    <<span data-amp-original-style="color:rgb(0,0,128);" class="amp-wp-688c1cb"><strong>color </strong></span><span data-amp-original-style="color:rgb(0,0,255);" class="amp-wp-847d7f6"><strong>name=</strong></span><span data-amp-original-style="color:rgb(0,128,0);" class="amp-wp-0f55e8e"><strong>"colorPrimaryDark"</strong></span>>#303F9F</<span data-amp-original-style="color:rgb(0,0,128);" class="amp-wp-688c1cb"><strong>color</strong></span>>
    <<span data-amp-original-style="color:rgb(0,0,128);" class="amp-wp-688c1cb"><strong>color </strong></span><span data-amp-original-style="color:rgb(0,0,255);" class="amp-wp-847d7f6"><strong>name=</strong></span><span data-amp-original-style="color:rgb(0,128,0);" class="amp-wp-0f55e8e"><strong>"colorAccent"</strong></span>>#FF4081</<span data-amp-original-style="color:rgb(0,0,128);" class="amp-wp-688c1cb"><strong>color</strong></span>>

    <<span data-amp-original-style="color:rgb(0,0,128);" class="amp-wp-688c1cb"><strong>color </strong></span><span data-amp-original-style="color:rgb(0,0,255);" class="amp-wp-847d7f6"><strong>name=</strong></span><span data-amp-original-style="color:rgb(0,128,0);" class="amp-wp-0f55e8e"><strong>"nightColorPrimary"</strong></span>>#3b3b3b</<span data-amp-original-style="color:rgb(0,0,128);" class="amp-wp-688c1cb"><strong>color</strong></span>>
    <<span data-amp-original-style="color:rgb(0,0,128);" class="amp-wp-688c1cb"><strong>color </strong></span><span data-amp-original-style="color:rgb(0,0,255);" class="amp-wp-847d7f6"><strong>name=</strong></span><span data-amp-original-style="color:rgb(0,128,0);" class="amp-wp-0f55e8e"><strong>"nightColorPrimaryDark"</strong></span>>#383838</<span data-amp-original-style="color:rgb(0,0,128);" class="amp-wp-688c1cb"><strong>color</strong></span>>
    <<span data-amp-original-style="color:rgb(0,0,128);" class="amp-wp-688c1cb"><strong>color </strong></span><span data-amp-original-style="color:rgb(0,0,255);" class="amp-wp-847d7f6"><strong>name=</strong></span><span data-amp-original-style="color:rgb(0,128,0);" class="amp-wp-0f55e8e"><strong>"nightColorAccent"</strong></span>>#a72b55</<span data-amp-original-style="color:rgb(0,0,128);" class="amp-wp-688c1cb"><strong>color</strong></span>>
</<span data-amp-original-style="color:rgb(0,0,128);" class="amp-wp-688c1cb"><strong>resources</strong></span>></pre>
<p data-amp-original-style="color:rgb(85,85,85);font-family:'microsoft yahei';font-size:15px;line-height:35px;" class="amp-wp-b48c452">
</p><p data-amp-original-style="color:rgb(85,85,85);font-family:'microsoft yahei';font-size:15px;line-height:35px;" class="amp-wp-b48c452"> styles.xml</p>
<p data-amp-original-style="color:rgb(85,85,85);font-family:'microsoft yahei';font-size:15px;line-height:35px;" class="amp-wp-b48c452">
</p><pre data-amp-original-style="line-height:35px;font-family:'宋体';font-size:9pt;" class="amp-wp-8a8db82"><<span data-amp-original-style="color:rgb(0,0,128);" class="amp-wp-688c1cb"><strong>resources</strong></span>>
    <span data-amp-original-style="color:rgb(128,128,128);" class="amp-wp-030ff4f"><em><!-- Base application theme. 日间模式--> </em></span><span data-amp-original-style="color:rgb(128,128,128);" class="amp-wp-030ff4f"><em> </em></span><<span data-amp-original-style="color:rgb(0,0,128);" class="amp-wp-688c1cb"><strong>style </strong></span><span data-amp-original-style="color:rgb(0,0,255);" class="amp-wp-847d7f6"><strong>name=</strong></span><span data-amp-original-style="color:rgb(0,128,0);" class="amp-wp-0f55e8e"><strong>"AppTheme" </strong></span><span data-amp-original-style="color:rgb(0,0,255);" class="amp-wp-847d7f6"><strong>parent=</strong></span><span data-amp-original-style="color:rgb(0,128,0);" class="amp-wp-0f55e8e"><strong>"Theme.AppCompat.Light.DarkActionBar"</strong></span>>
        <span data-amp-original-style="color:rgb(128,128,128);" class="amp-wp-030ff4f"><em><!-- Customize your theme here. --> </em></span><span data-amp-original-style="color:rgb(128,128,128);" class="amp-wp-030ff4f"><em> </em></span><<span data-amp-original-style="color:rgb(0,0,128);" class="amp-wp-688c1cb"><strong>item </strong></span><span data-amp-original-style="color:rgb(0,0,255);" class="amp-wp-847d7f6"><strong>name=</strong></span><span data-amp-original-style="color:rgb(0,128,0);" class="amp-wp-0f55e8e"><strong>"colorPrimary"</strong></span>>@color/colorPrimary</<span data-amp-original-style="color:rgb(0,0,128);" class="amp-wp-688c1cb"><strong>item</strong></span>>
        <<span data-amp-original-style="color:rgb(0,0,128);" class="amp-wp-688c1cb"><strong>item </strong></span><span data-amp-original-style="color:rgb(0,0,255);" class="amp-wp-847d7f6"><strong>name=</strong></span><span data-amp-original-style="color:rgb(0,128,0);" class="amp-wp-0f55e8e"><strong>"colorPrimaryDark"</strong></span>>@color/colorPrimaryDark</<span data-amp-original-style="color:rgb(0,0,128);" class="amp-wp-688c1cb"><strong>item</strong></span>>
        <<span data-amp-original-style="color:rgb(0,0,128);" class="amp-wp-688c1cb"><strong>item </strong></span><span data-amp-original-style="color:rgb(0,0,255);" class="amp-wp-847d7f6"><strong>name=</strong></span><span data-amp-original-style="color:rgb(0,128,0);" class="amp-wp-0f55e8e"><strong>"colorAccent"</strong></span>>@color/colorAccent</<span data-amp-original-style="color:rgb(0,0,128);" class="amp-wp-688c1cb"><strong>item</strong></span>>
        <<span data-amp-original-style="color:rgb(0,0,128);" class="amp-wp-688c1cb"><strong>item </strong></span><span data-amp-original-style="color:rgb(0,0,255);" class="amp-wp-847d7f6"><strong>name=</strong></span><span data-amp-original-style="color:rgb(0,128,0);" class="amp-wp-0f55e8e"><strong>"android:textColor"</strong></span>>@android:color/black</<span data-amp-original-style="color:rgb(0,0,128);" class="amp-wp-688c1cb"><strong>item</strong></span>>
        <<span data-amp-original-style="color:rgb(0,0,128);" class="amp-wp-688c1cb"><strong>item </strong></span><span data-amp-original-style="color:rgb(0,0,255);" class="amp-wp-847d7f6"><strong>name=</strong></span><span data-amp-original-style="color:rgb(0,128,0);" class="amp-wp-0f55e8e"><strong>"mainBackground"</strong></span>>@android:color/white</<span data-amp-original-style="color:rgb(0,0,128);" class="amp-wp-688c1cb"><strong>item</strong></span>>

    </<span data-amp-original-style="color:rgb(0,0,128);" class="amp-wp-688c1cb"><strong>style</strong></span>>
    <span data-amp-original-style="color:rgb(128,128,128);" class="amp-wp-030ff4f"><em><!-- Base application theme. 夜间模式--> </em></span><span data-amp-original-style="color:rgb(128,128,128);" class="amp-wp-030ff4f"><em> </em></span><<span data-amp-original-style="color:rgb(0,0,128);" class="amp-wp-688c1cb"><strong>style </strong></span><span data-amp-original-style="color:rgb(0,0,255);" class="amp-wp-847d7f6"><strong>name=</strong></span><span data-amp-original-style="color:rgb(0,128,0);" class="amp-wp-0f55e8e"><strong>"NightAppTheme" </strong></span><span data-amp-original-style="color:rgb(0,0,255);" class="amp-wp-847d7f6"><strong>parent=</strong></span><span data-amp-original-style="color:rgb(0,128,0);" class="amp-wp-0f55e8e"><strong>"Theme.AppCompat.Light.DarkActionBar"</strong></span>>
        <span data-amp-original-style="color:rgb(128,128,128);" class="amp-wp-030ff4f"><em><!-- Customize your theme here. --> </em></span><span data-amp-original-style="color:rgb(128,128,128);" class="amp-wp-030ff4f"><em> </em></span><<span data-amp-original-style="color:rgb(0,0,128);" class="amp-wp-688c1cb"><strong>item </strong></span><span data-amp-original-style="color:rgb(0,0,255);" class="amp-wp-847d7f6"><strong>name=</strong></span><span data-amp-original-style="color:rgb(0,128,0);" class="amp-wp-0f55e8e"><strong>"colorPrimary"</strong></span>>@color/nightColorPrimary</<span data-amp-original-style="color:rgb(0,0,128);" class="amp-wp-688c1cb"><strong>item</strong></span>>
        <<span data-amp-original-style="color:rgb(0,0,128);" class="amp-wp-688c1cb"><strong>item </strong></span><span data-amp-original-style="color:rgb(0,0,255);" class="amp-wp-847d7f6"><strong>name=</strong></span><span data-amp-original-style="color:rgb(0,128,0);" class="amp-wp-0f55e8e"><strong>"colorPrimaryDark"</strong></span>>@color/nightColorPrimaryDark</<span data-amp-original-style="color:rgb(0,0,128);" class="amp-wp-688c1cb"><strong>item</strong></span>>
        <<span data-amp-original-style="color:rgb(0,0,128);" class="amp-wp-688c1cb"><strong>item </strong></span><span data-amp-original-style="color:rgb(0,0,255);" class="amp-wp-847d7f6"><strong>name=</strong></span><span data-amp-original-style="color:rgb(0,128,0);" class="amp-wp-0f55e8e"><strong>"colorAccent"</strong></span>>@color/nightColorAccent</<span data-amp-original-style="color:rgb(0,0,128);" class="amp-wp-688c1cb"><strong>item</strong></span>>
        <<span data-amp-original-style="color:rgb(0,0,128);" class="amp-wp-688c1cb"><strong>item </strong></span><span data-amp-original-style="color:rgb(0,0,255);" class="amp-wp-847d7f6"><strong>name=</strong></span><span data-amp-original-style="color:rgb(0,128,0);" class="amp-wp-0f55e8e"><strong>"android:textColor"</strong></span>>@android:color/white</<span data-amp-original-style="color:rgb(0,0,128);" class="amp-wp-688c1cb"><strong>item</strong></span>>
        <<span data-amp-original-style="color:rgb(0,0,128);" class="amp-wp-688c1cb"><strong>item </strong></span><span data-amp-original-style="color:rgb(0,0,255);" class="amp-wp-847d7f6"><strong>name=</strong></span><span data-amp-original-style="color:rgb(0,128,0);" class="amp-wp-0f55e8e"><strong>"mainBackground"</strong></span>>@color/nightColorPrimaryDark</<span data-amp-original-style="color:rgb(0,0,128);" class="amp-wp-688c1cb"><strong>item</strong></span>>
    </<span data-amp-original-style="color:rgb(0,0,128);" class="amp-wp-688c1cb"><strong>style</strong></span>>

</<span data-amp-original-style="color:rgb(0,0,128);" class="amp-wp-688c1cb"><strong>resources</strong></span>></pre>
<p data-amp-original-style="color:rgb(85,85,85);font-family:'microsoft yahei';font-size:15px;line-height:35px;" class="amp-wp-b48c452">
</p><p data-amp-original-style="color:rgb(85,85,85);font-family:'microsoft yahei';font-size:15px;line-height:35px;" class="amp-wp-b48c452"> values里建一个attrs.xml</p>
<p data-amp-original-style="color:rgb(85,85,85);font-family:'microsoft yahei';font-size:15px;line-height:35px;" class="amp-wp-b48c452">
</p><pre data-amp-original-style="line-height:35px;font-family:'宋体';font-size:9pt;" class="amp-wp-8a8db82"><<span data-amp-original-style="color:rgb(0,0,128);" class="amp-wp-688c1cb"><strong>resources</strong></span>>
    <span data-amp-original-style="color:rgb(128,128,128);" class="amp-wp-030ff4f"><em><!--reference 引用--> </em></span><span data-amp-original-style="color:rgb(128,128,128);" class="amp-wp-030ff4f"><em> </em></span><<span data-amp-original-style="color:rgb(0,0,128);" class="amp-wp-688c1cb"><strong>attr </strong></span><span data-amp-original-style="color:rgb(0,0,255);" class="amp-wp-847d7f6"><strong>name=</strong></span><span data-amp-original-style="color:rgb(0,128,0);" class="amp-wp-0f55e8e"><strong>"mainBackground" </strong></span><span data-amp-original-style="color:rgb(0,0,255);" class="amp-wp-847d7f6"><strong>format=</strong></span><span data-amp-original-style="color:rgb(0,128,0);" class="amp-wp-0f55e8e"><strong>"color|reference"</strong></span>></<span data-amp-original-style="color:rgb(0,0,128);" class="amp-wp-688c1cb"><strong>attr</strong></span>>
</<span data-amp-original-style="color:rgb(0,0,128);" class="amp-wp-688c1cb"><strong>resources</strong></span>>

布局

<Button
        android:id="@+id/bt_change"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:background="?attr/mainBackground"
        android:text="日夜间模式切换"/>
</pre>
<p data-amp-original-style="color:rgb(85,85,85);font-family:'microsoft yahei';font-size:15px;line-height:35px;" class="amp-wp-b48c452">
</p><p data-amp-original-style="color:rgb(85,85,85);font-family:'microsoft yahei';font-size:15px;line-height:35px;" class="amp-wp-b48c452"> 代码</p>
<p data-amp-original-style="color:rgb(85,85,85);font-family:'microsoft yahei';font-size:15px;line-height:35px;" class="amp-wp-b48c452"> public class MainActivity extends AppCompatActivity {<br>     //默认的日间模式<br>     private int theme = R.style.AppTheme;</p>
<p>     @Override<br>     protected void onCreate(Bundle savedInstanceState) {<br>         super.onCreate(savedInstanceState);<br>         //恢复数据 做判空<br>         if (savedInstanceState != null) {<br>             theme = savedInstanceState.getInt(“theme”);<br>             //设置主题 此方法必须在setContentView()之前调用<br>             setTheme(theme);</p>
<p>         }</p>
<p>         setContentView(R.layout.activity_main);<br>         //找控件<br>         Button bt_change = (Button) findViewById(R.id.bt_change);</p>
<p>         bt_change.setOnClickListener(new View.OnClickListener() {<br>             @Override<br>             public void onClick(View v) {<br>                 //切换日夜间模式<br>                 theme = (theme == R.style.AppTheme) ? R.style.NightAppTheme : R.style.AppTheme;<br>                 //重新创建<br>                 recreate();</p>
<p>             }<br>         });</p>
<p>     }</p>
<p>     //保存数据<br>     @Override<br>     protected void onSaveInstanceState(Bundle outState) {<br>         super.onSaveInstanceState(outState);<br>         outState.putInt(“theme”, theme);<br>     }</p>
<p>     //恢复数据<br>     @Override<br>     protected void onRestoreInstanceState(Bundle savedInstanceState) {<br>         super.onRestoreInstanceState(savedInstanceState);<br>         theme = savedInstanceState.getInt(“theme”);<br>     }<br> }</p>
<p data-amp-original-style="color:rgb(85,85,85);font-family:'microsoft yahei';font-size:15px;line-height:35px;" class="amp-wp-b48c452"></p>
<p data-amp-original-style="color:rgb(85,85,85);font-family:'microsoft yahei';font-size:15px;line-height:35px;" class="amp-wp-b48c452"> 第二种：</p>
<p data-amp-original-style="color:rgb(85,85,85);font-family:'microsoft yahei';font-size:15px;line-height:35px;" class="amp-wp-b48c452">
</p><div data-amp-original-style="line-height:1.5;font-size:14px;" class="amp-wp-5dbe981">
   <span data-amp-original-style="font-size:24px;" class="amp-wp-74af756"><strong>使用 Android Support Library 中的 UiMode 方法</strong></span>
  </div>
<div data-amp-original-style="line-height:1.5;font-size:14px;" class="amp-wp-5dbe981">
   使用 UiMode 的方法也很简单，我们需要把 colors.xml 定义为日间/夜间两种。之后根据不同的模式会去选择不同的 colors.xml 。在 Activity 调用 recreate() 之后，就实现了切换日/夜间模式的功能。
  </div>
<div data-amp-original-style="line-height:1.5;font-size:14px;" class="amp-wp-5dbe981">
   说了这么多，直接上代码。下面是 values/colors.xml ：
  </div>
<div data-amp-original-style="overflow:auto;font-family:'Microsoft YaHei', '微软雅黑', '华文黑体', STHeiti, 'Microsoft JhengHei', sans-serif;" class="amp-wp-802ca82">
<table cellspacing="0" cellpadding="0" border="1" data-amp-original-style="table-layout:fixed;border-collapse:collapse;border:1px solid #ccc;" class="amp-wp-36a667c">
<tbody>
<tr>
<td data-amp-original-style="vertical-align:middle;" class="amp-wp-2138fa8"><?xml version=”1.0″ encoding=”utf-8″?><br> <resources><br> <color name=”colorPrimary”>#3F51B5</color><br> <color name=”colorPrimaryDark”>#303F9F</color><br> <color name=”colorAccent”>#FF4081</color><br> <color name=”textColor”>#FF000000</color><br> <color name=”backgroundColor”>#FFFFFF</color><br> </resources></td>
</tr>
</tbody>
</table></div>
<div data-amp-original-style="line-height:1.5;font-size:14px;" class="amp-wp-5dbe981">
   除了 values/colors.xml 之外，我们还要创建一个 values-night/colors.xml 文件，用来设置夜间模式的颜色，其中<br>
   <span data-amp-original-style="font-family:monospace;" class="amp-wp-c66b41e"><color></span> 的 name 必须要和 values/colors.xml 中的相对应：
  </div>
<div data-amp-original-style="overflow:auto;font-family:'Microsoft YaHei', '微软雅黑', '华文黑体', STHeiti, 'Microsoft JhengHei', sans-serif;" class="amp-wp-802ca82">
<table cellspacing="0" cellpadding="0" border="1" data-amp-original-style="table-layout:fixed;border-collapse:collapse;border:1px solid #ccc;width:692px;" class="amp-wp-1a73ddb">
<tbody>
<tr>
<td data-amp-original-style="width:692px;vertical-align:middle;" class="amp-wp-f446150"><?xml version=”1.0″ encoding=”utf-8″?><br> <resources><br> <color name=”colorPrimary”>#3b3b3b</color><br> <color name=”colorPrimaryDark”>#383838</color><br> <color name=”colorAccent”>#a72b55</color><br> <color name=”textColor”>#FFFFFF</color><br> <color name=”backgroundColor”>#3b3b3b</color><br> </resources></td>
</tr>
</tbody>
</table></div>
<div data-amp-original-style="line-height:1.5;font-size:14px;" class="amp-wp-5dbe981">
   在 styles.xml 中去引用我们在 colors.xml 中定义好的颜色：
  </div>
<div data-amp-original-style="overflow:auto;font-family:'Microsoft YaHei', '微软雅黑', '华文黑体', STHeiti, 'Microsoft JhengHei', sans-serif;" class="amp-wp-802ca82">
<table cellspacing="0" cellpadding="0" border="1" data-amp-original-style="table-layout:fixed;border-collapse:collapse;border:1px solid #ccc;" class="amp-wp-36a667c">
<tbody>
<tr>
<td data-amp-original-style="vertical-align:middle;" class="amp-wp-2138fa8"><resources><br> <!– Base application theme. –><br> <style name=”AppTheme” parent=”Theme.AppCompat.Light.DarkActionBar”><br> <!– Customize your theme here. –><br> <item name=”colorPrimary”>@color/colorPrimary</item><br> <item name=”colorPrimaryDark”>@color/colorPrimaryDark</item><br> <item name=”colorAccent”>@color/colorAccent</item><br> <item name=”android:textColor”>@color/textColor</item><br> <item name=”mainBackground”>@color/backgroundColor</item><br> </style><br> </resources></td>
</tr>
</tbody>
</table></div>
<div data-amp-original-style="line-height:1.5;font-size:14px;" class="amp-wp-5dbe981">
   activity_main.xml 布局的内容和上面 setTheme() 方法中的相差无几，这里就不贴出来了。之后的事情就变得很简单了，在 MyApplication 中先选择一个默认的 Mode ：
  </div>
<div data-amp-original-style="overflow:auto;font-family:'Microsoft YaHei', '微软雅黑', '华文黑体', STHeiti, 'Microsoft JhengHei', sans-serif;" class="amp-wp-802ca82">
<table cellspacing="0" cellpadding="0" border="1" data-amp-original-style="table-layout:fixed;border-collapse:collapse;border:1px solid #ccc;" class="amp-wp-36a667c">
<tbody>
<tr>
<td data-amp-original-style="vertical-align:middle;" class="amp-wp-2138fa8">public class MyApplication extends Application {<br> @Override<br> public void onCreate() {<br> super.onCreate();<br> // 默认设置为日间模式<br> AppCompatDelegate.setDefaultNightMode(<br> AppCompatDelegate.MODE_NIGHT_NO);<br> }<br> }</td>
</tr>
</tbody>
</table></div>
<div data-amp-original-style="line-height:1.5;font-size:14px;" class="amp-wp-5dbe981">
   要注意的是，这里的 Mode 有四种类型可以选择：
  </div>
<ul>
<li data-amp-original-style="list-style-type:disc;list-style-position:inside;line-height:1.5;font-size:14px;" class="amp-wp-ef87bd9"> MODE_NIGHT_NO： 使用亮色(light)主题，不使用夜间模式；</li>
<li data-amp-original-style="list-style-type:disc;list-style-position:inside;line-height:1.5;font-size:14px;" class="amp-wp-ef87bd9"> MODE_NIGHT_YES：使用暗色(dark)主题，使用夜间模式；</li>
<li data-amp-original-style="list-style-type:disc;list-style-position:inside;line-height:1.5;font-size:14px;" class="amp-wp-ef87bd9"> MODE_NIGHT_AUTO：根据当前时间自动切换 亮色(light)/暗色(dark)主题；</li>
<li data-amp-original-style="list-style-type:disc;list-style-position:inside;line-height:1.5;font-size:14px;" class="amp-wp-ef87bd9"> MODE_NIGHT_FOLLOW_SYSTEM(默认选项)：设置为跟随系统，通常为 MODE_NIGHT_NO</li>
</ul>
<div data-amp-original-style="line-height:1.5;font-size:14px;" class="amp-wp-5dbe981">
   当用户点击按钮切换日/夜间时，重新去设置相应的 Mode ：
  </div>
<div data-amp-original-style="overflow:auto;font-family:'Microsoft YaHei', '微软雅黑', '华文黑体', STHeiti, 'Microsoft JhengHei', sans-serif;" class="amp-wp-802ca82">
<table cellspacing="0" cellpadding="0" border="1" data-amp-original-style="table-layout:fixed;border-collapse:collapse;border:1px solid #ccc;width:699px;" class="amp-wp-4cfa8da">
<tbody>
<tr>
<td data-amp-original-style="width:699px;vertical-align:middle;" class="amp-wp-2ac52af">public class MainActivity extends AppCompatActivity {<br> @Override<br> protected void onCreate(Bundle savedInstanceState) {<br> super.onCreate(savedInstanceState);<br> setContentView(R.layout.activity_main);<br> Button btn_theme = (Button) findViewById(R.id.btn_theme);<br> btn_theme.setOnClickListener(new View.OnClickListener() {<br> @Override<br> public void onClick(View v) {<br> int currentNightMode = getResources().getConfiguration().uiMode & Configuration.UI_MODE_NIGHT_MASK;<br> getDelegate().setLocalNightMode(currentNightMode == Configuration.UI_MODE_NIGHT_NO<br> ? AppCompatDelegate.MODE_NIGHT_YES : AppCompatDelegate.MODE_NIGHT_NO);<br> // 同样需要调用recreate方法使之生效<br> recreate();<br> }<br> });<br> }<br> }</td>
</tr>
</tbody>
</table></div>
<div data-amp-original-style="line-height:1.5;font-size:14px;" class="amp-wp-5dbe981">
   我们来看一下 UiMode 方案实现的效果图：
  </div>
<p>  <amp-img src="https://uzshare.com/_p?https://img-blog.csdn.net/20170418110543173?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvbmF5aW5nXw==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt="" width="392" height="689" class="amp-wp-enforced-sizes i-amphtml-layout-intrinsic i-amphtml-layout-size-defined" layout="intrinsic" i-amphtml-layout="intrinsic"><i-amphtml-sizer class="i-amphtml-sizer"><img alt="" aria-hidden="true" class="i-amphtml-intrinsic-sizer" role="presentation" src="data:image/svg+xml;charset=utf-8,<svg%20height=%22689%22%20width=%22392%22%20xmlns=%22http://www.w3.org/2000/svg%22%20version=%221.1%22/>"></i-amphtml-sizer><noscript><img src="https://uzshare.com/_p?https://img-blog.csdn.net/20170418110543173?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvbmF5aW5nXw==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt="" width="392" height="689" class=""></noscript></amp-img><br>
  </p>
<p data-amp-original-style="color:rgb(85,85,85);font-family:'microsoft yahei';font-size:15px;line-height:35px;" class="amp-wp-b48c452"></p>
<p data-amp-original-style="color:rgb(85,85,85);font-family:'microsoft yahei';font-size:15px;line-height:35px;" class="amp-wp-b48c452">
</p><div data-amp-original-style="line-height:1.5;font-size:14px;" class="amp-wp-5dbe981">
<div data-amp-original-style="line-height:1.5;font-size:14px;" class="amp-wp-5dbe981">
    就前两种方法而言，配置比较简单，最后的实现效果也都基本上是一样的。但是缺点就是需要调用<br>
    <span data-amp-original-style="font-family:monospace;" class="amp-wp-c66b41e">recreate()</span> 使之生效。而让 Activity 重新创建就必须涉及到一些状态的保存。这就增加了一些难度。所以，我们一起来看看第三种解决方法。
   </div>
<p>
  </p></div>
<div data-amp-original-style="line-height:1.5;font-size:14px;" class="amp-wp-5dbe981">
   第三种方式
  </div>
<div data-amp-original-style="line-height:1.5;font-size:14px;" class="amp-wp-5dbe981">
<div data-amp-original-style="line-height:1.5;font-size:14px;" class="amp-wp-5dbe981">
    <span data-amp-original-style="font-size:24px;" class="amp-wp-74af756"><strong>通过资源 id 映射，回调接口</strong></span>
   </div>
<div data-amp-original-style="line-height:1.5;font-size:14px;" class="amp-wp-5dbe981">
    第 三种方法的思路就是根据设置的主题去动态地获取资源 id 的映射，然后使用回调接口的方式让 UI 去设置相关的属性值。我们在这里先规定一下：夜间模式的资源在命名上都要加上后缀 “_night” ，比如日间模式的背景色命名为 color_background ，那么相对应的夜间模式的背景资源就要命名为 color_background_night 。好了，下面就是我们的 Demo 所需要用到的 colors.xml ：
   </div>
<div data-amp-original-style="overflow:auto;font-family:'Microsoft YaHei', '微软雅黑', '华文黑体', STHeiti, 'Microsoft JhengHei', sans-serif;" class="amp-wp-802ca82">
<table cellspacing="0" cellpadding="0" border="1" data-amp-original-style="table-layout:fixed;border-collapse:collapse;border:1px solid #ccc;" class="amp-wp-36a667c">
<tbody>
<tr>
<td data-amp-original-style="vertical-align:middle;" class="amp-wp-2138fa8"><?xml version=”1.0″ encoding=”utf-8″?><br> <resources>
<p> <color name=”colorPrimary”>#3F51B5</color><br> <color name=”colorPrimary_night”>#3b3b3b</color><br> <color name=”colorPrimaryDark”>#303F9F</color><br> <color name=”colorPrimaryDark_night”>#383838</color><br> <color name=”colorAccent”>#FF4081</color><br> <color name=”colorAccent_night”>#a72b55</color><br> <color name=”textColor”>#FF000000</color><br> <color name=”textColor_night”>#FFFFFF</color><br> <color name=”backgroundColor”>#FFFFFF</color><br> <color name=”backgroundColor_night”>#3b3b3b</color></p>
<p> </resources></p></td>
</tr>
</tbody>
</table></div>
<div data-amp-original-style="line-height:1.5;font-size:14px;" class="amp-wp-5dbe981">
    可以看到每一项 color 都会有对应的 “_night” 与之匹配。
   </div>
<div data-amp-original-style="line-height:1.5;font-size:14px;" class="amp-wp-5dbe981">
    看到这里，肯定有人会问，为什么要设置对应的 “_night” ？到底是通过什么方式来设置日/夜间模式的呢？下面就由 ThemeManager 来为你解答：
   </div>
<div data-amp-original-style="overflow:auto;font-family:'Microsoft YaHei', '微软雅黑', '华文黑体', STHeiti, 'Microsoft JhengHei', sans-serif;" class="amp-wp-802ca82">
<table cellspacing="0" cellpadding="0" border="1" data-amp-original-style="table-layout:fixed;border-collapse:collapse;border:1px solid #ccc;" class="amp-wp-36a667c">
<tbody>
<tr>
<td data-amp-original-style="vertical-align:middle;" class="amp-wp-2138fa8">public class ThemeManager {<br> // 默认是日间模式<br> private static ThemeMode mThemeMode = ThemeMode.DAY;<br> // 主题模式监听器<br> private static List<OnThemeChangeListener> mThemeChangeListenerList = new LinkedList<>();<br> // 夜间资源的缓存，key : 资源类型, 值<key:资源名称, value:int值><br> private static HashMap<String, HashMap<String, Integer>> sCachedNightResrouces = new HashMap<>();<br> // 夜间模式资源的后缀，比如日件模式资源名为：R.color.activity_bg, 那么夜间模式就为 ：R.color.activity_bg_night<br> private static final String RESOURCE_SUFFIX = “_night”;<br> /**<br> * 主题模式，分为日间模式和夜间模式<br> */<br> public enum ThemeMode {<br> DAY, NIGHT<br> }<br> /**<br> * 设置主题模式<br> *<br> * @param themeMode<br> */<br> public static void setThemeMode(ThemeMode themeMode) {<br> if (mThemeMode != themeMode) {<br> mThemeMode = themeMode;<br> if (mThemeChangeListenerList.size() > 0) {<br> for (OnThemeChangeListener listener : mThemeChangeListenerList) {<br> listener.onThemeChanged();<br> }<br> }<br> }<br> }<br> /**<br> * 根据传入的日间模式的resId得到相应主题的resId，注意：必须是日间模式的resId<br> *<br> * @param dayResId 日间模式的resId<br> * @return 相应主题的resId，若为日间模式，则得到dayResId；反之夜间模式得到nightResId<br> */<br> public static int getCurrentThemeRes(Context context, int dayResId) {<br> if (getThemeMode() == ThemeMode.DAY) {<br> return dayResId;<br> }<br> // 资源名<br> String entryName = context.getResources().getResourceEntryName(dayResId);<br> // 资源类型<br> String typeName = context.getResources().getResourceTypeName(dayResId);<br> HashMap<String, Integer> cachedRes = sCachedNightResrouces.get(typeName);<br> // 先从缓存中去取，如果有直接返回该id<br> if (cachedRes == null) {<br> cachedRes = new HashMap<>();<br> }<br> Integer resId = cachedRes.get(entryName + RESOURCE_SUFFIX);<br> if (resId != null && resId != 0) {<br> return resId;<br> } else {<br> //如果缓存中没有再根据资源id去动态获取<br> try {<br> // 通过资源名，资源类型，包名得到资源int值<br> int nightResId = context.getResources().getIdentifier(entryName + RESOURCE_SUFFIX, typeName, context.getPackageName());<br> // 放入缓存中<br> cachedRes.put(entryName + RESOURCE_SUFFIX, nightResId);<br> sCachedNightResrouces.put(typeName, cachedRes);<br> return nightResId;<br> } catch (Resources.NotFoundException e) {<br> e.printStackTrace();<br> }<br> }<br> return 0;<br> }<br> /**<br> * 注册ThemeChangeListener<br> *<br> * @param listener<br> */<br> public static void registerThemeChangeListener(OnThemeChangeListener listener) {<br> if (!mThemeChangeListenerList.contains(listener)) {<br> mThemeChangeListenerList.add(listener);<br> }<br> }<br> /**<br> * 反注册ThemeChangeListener<br> *<br> * @param listener<br> */<br> public static void unregisterThemeChangeListener(OnThemeChangeListener listener) {<br> if (mThemeChangeListenerList.contains(listener)) {<br> mThemeChangeListenerList.remove(listener);<br> }<br> }<br> /**<br> * 得到主题模式<br> *<br> * @return<br> */<br> public static ThemeMode getThemeMode() {<br> return mThemeMode;<br> }<br> /**<br> * 主题模式切换监听器<br> */<br> public interface OnThemeChangeListener {<br> /**<br> * 主题切换时回调<br> */<br> void onThemeChanged();<br> }<br> }</td>
</tr>
</tbody>
</table></div>
<div data-amp-original-style="line-height:1.5;font-size:14px;" class="amp-wp-5dbe981">
    上面 ThemeManager 的代码基本上都有注释，想要看懂并不困难。其中最核心的就是<br>
    <span data-amp-original-style="font-family:monospace;" class="amp-wp-c66b41e">getCurrentThemeRes</span> 方法了。在这里解释一下<br>
    <span data-amp-original-style="font-family:monospace;" class="amp-wp-c66b41e">getCurrentThemeRes</span> 的逻辑。参数中的 dayResId 是日间模式的资源id，如果当前主题是日间模式的话，就直接返回 dayResId 。反之当前主题为夜间模式的话，先根据 dayResId 得到资源名称和资源类型。比如现在有一个资源为 R.color.colorPrimary ，那么资源名称就是 colorPrimary ，资源类型就是 color 。然后根据资源类型和资源名称去获取缓存。如果没有缓存，那么就要动态获取资源了。这里使用方法的是
   </div>
<div data-amp-original-style="line-height:1.5;font-size:14px;" class="amp-wp-5dbe981">
    <span data-amp-original-style="font-family:monospace;" class="amp-wp-c66b41e">context.getResources().getIdentifier(String name, String defType, String defPackage)</span>
   </div>
<ul>
<li data-amp-original-style="list-style-type:disc;list-style-position:inside;line-height:1.5;font-size:14px;" class="amp-wp-ef87bd9"> <span data-amp-original-style="font-family:monospace;" class="amp-wp-c66b41e">name</span> 参数就是资源名称，不过要注意的是这里的资源名称还要加上后缀 “_night” ，也就是上面在 colors.xml 中定义的名称；</li>
<li data-amp-original-style="list-style-type:disc;list-style-position:inside;line-height:1.5;font-size:14px;" class="amp-wp-ef87bd9"> <span data-amp-original-style="font-family:monospace;" class="amp-wp-c66b41e">defType</span> 参数就是资源的类型了。比如 color，drawable等；</li>
<li data-amp-original-style="list-style-type:disc;list-style-position:inside;line-height:1.5;font-size:14px;" class="amp-wp-ef87bd9"> <span data-amp-original-style="font-family:monospace;" class="amp-wp-c66b41e">defPackage</span> 就是资源文件的包名，也就是当前 APP 的包名。</li>
</ul>
<div data-amp-original-style="line-height:1.5;font-size:14px;" class="amp-wp-5dbe981">
    有了上面的这个方法，就可以通过 R.color.colorPrimary 资源找到对应的 R.color.colorPrimary_night 资源了。最后还要把找到的夜间模式资源加入到缓存中。这样的话以后就直接去缓存中读取，而不用再次去动态查找资源 id 了。
   </div>
<div data-amp-original-style="line-height:1.5;font-size:14px;" class="amp-wp-5dbe981">
    ThemeManager 中剩下的代码应该都是比较简单的，相信大家都可以看得懂了。
   </div>
<div data-amp-original-style="line-height:1.5;font-size:14px;" class="amp-wp-5dbe981">
    现在我们来看看 MainActivity 的代码：
   </div>
<div data-amp-original-style="overflow:auto;font-family:'Microsoft YaHei', '微软雅黑', '华文黑体', STHeiti, 'Microsoft JhengHei', sans-serif;" class="amp-wp-802ca82">
<table cellspacing="0" cellpadding="0" border="1" data-amp-original-style="table-layout:fixed;border-collapse:collapse;border:1px solid #ccc;" class="amp-wp-36a667c">
<tbody>
<tr>
<td data-amp-original-style="vertical-align:middle;" class="amp-wp-2138fa8">public class MainActivity extends AppCompatActivity implements ThemeManager.OnThemeChangeListener {<br> private TextView tv;<br> private Button btn_theme;<br> private RelativeLayout relativeLayout;<br> private ActionBar supportActionBar;<br> @Override<br> protected void onCreate(Bundle savedInstanceState) {<br> super.onCreate(savedInstanceState);<br> setContentView(R.layout.activity_main);<br> ThemeManager.registerThemeChangeListener(this);<br> supportActionBar = getSupportActionBar();<br> btn_theme = (Button) findViewById(R.id.btn_theme);<br> relativeLayout = (RelativeLayout) findViewById(R.id.relativeLayout);<br> tv = (TextView) findViewById(R.id.tv);<br> btn_theme.setOnClickListener(new View.OnClickListener() {<br> @Override<br> public void onClick(View v) {<br> ThemeManager.setThemeMode(ThemeManager.getThemeMode() == ThemeManager.ThemeMode.DAY<br> ? ThemeManager.ThemeMode.NIGHT : ThemeManager.ThemeMode.DAY);<br> }<br> });<br> }<br> public void initTheme() {<br> tv.setTextColor(getResources().getColor(ThemeManager.getCurrentThemeRes(MainActivity.this, R.color.textColor)));<br> btn_theme.setTextColor(getResources().getColor(ThemeManager.getCurrentThemeRes(MainActivity.this, R.color.textColor)));<br> relativeLayout.setBackgroundColor(getResources().getColor(ThemeManager.getCurrentThemeRes(MainActivity.this, R.color.backgroundColor)));<br> // 设置标题栏颜色<br> if(supportActionBar != null){<br> supportActionBar.setBackgroundDrawable(new ColorDrawable(getResources().getColor(ThemeManager.getCurrentThemeRes(MainActivity.this, R.color.colorPrimary))));<br> }<br> // 设置状态栏颜色<br> if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.LOLLIPOP) {<br> Window window = getWindow();<br> window.setStatusBarColor(getResources().getColor(ThemeManager.getCurrentThemeRes(MainActivity.this, R.color.colorPrimary)));<br> }<br> }<br> @Override<br> public void onThemeChanged() {<br> initTheme();<br> }<br> @Override<br> protected void onDestroy() {<br> super.onDestroy();<br> ThemeManager.unregisterThemeChangeListener(this);<br> }<br> }</td>
</tr>
</tbody>
</table></div>
<div data-amp-original-style="line-height:1.5;font-size:14px;" class="amp-wp-5dbe981">
    在 MainActivity 中实现了 OnThemeChangeListener 接口，这样就可以在主题改变的时候执行回调方法。然后在<br>
    <span data-amp-original-style="font-family:monospace;" class="amp-wp-c66b41e">initTheme()</span> 中去重新设置 UI 的相关颜色属性值。还有别忘了要在<br>
    <span data-amp-original-style="font-family:monospace;" class="amp-wp-c66b41e">onDestroy()</span> 中移除 ThemeChangeListener 。
   </div>
<div data-amp-original-style="line-height:1.5;font-size:14px;" class="amp-wp-5dbe981">
    最后就来看看第三种方法的效果吧：
   </div>
<p>
  </p></div>
<p></p>
<p><amp-img src="https://uzshare.com/_p?https://img-blog.csdn.net/20170418110954363?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvbmF5aW5nXw==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt="" width="393" height="689" class="amp-wp-enforced-sizes i-amphtml-layout-intrinsic i-amphtml-layout-size-defined" layout="intrinsic" i-amphtml-layout="intrinsic"><i-amphtml-sizer class="i-amphtml-sizer"><img alt="" aria-hidden="true" class="i-amphtml-intrinsic-sizer" role="presentation" src="data:image/svg+xml;charset=utf-8,<svg%20height=%22689%22%20width=%22393%22%20xmlns=%22http://www.w3.org/2000/svg%22%20version=%221.1%22/>"></i-amphtml-sizer><noscript><img src="https://uzshare.com/_p?https://img-blog.csdn.net/20170418110954363?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvbmF5aW5nXw==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt="" width="393" height="689" class=""></noscript></amp-img></p>
<p data-amp-original-style="color:rgb(85,85,85);font-family:'microsoft yahei';font-size:15px;line-height:35px;" class="amp-wp-b48c452"></p>
<p data-amp-original-style="color:rgb(85,85,85);font-family:'microsoft yahei';font-size:15px;line-height:35px;" class="amp-wp-b48c452"> 总结：</p>
<p data-amp-original-style="color:rgb(85,85,85);font-family:'microsoft yahei';font-size:15px;line-height:35px;" class="amp-wp-b48c452">
</p><div data-amp-original-style="line-height:1.5;font-size:14px;" class="amp-wp-5dbe981">
   到了这里，按照套路应该是要总结的时候了。那么就根据上面给的三种方法来一个简单的对比吧：
  </div>
<ol>
<li data-amp-original-style="list-style-type:decimal;list-style-position:inside;line-height:1.5;font-size:14px;" class="amp-wp-c788c78"> setTheme 方法：可以配置多套主题，比较容易上手。除了日/夜间模式之外，还可以有其他五颜六色的主题。但是需要调用 recreate() ，切换瞬间会有黑屏闪现的现象；</li>
<li data-amp-original-style="list-style-type:decimal;list-style-position:inside;line-height:1.5;font-size:14px;" class="amp-wp-c788c78"> UiMode 方法：优点就是 Android Support Library 中已经支持，简单规范。但是也需要调用 recreate() ，存在黑屏闪现的现象；</li>
<li data-amp-original-style="list-style-type:decimal;list-style-position:inside;line-height:1.5;font-size:14px;" class="amp-wp-c788c78"> 动态获取资源 id ，回调接口：该方法使用起来比前两个方法复杂，另外在回调的方法中需要设置每一项 UI 相关的属性值。但是不需要调用 recreate() ，没有黑屏闪现的现象。</li>
</ol>
<p></p>
<p data-amp-original-style="color:rgb(85,85,85);font-family:'microsoft yahei';font-size:15px;line-height:35px;" class="amp-wp-b48c452"></p>
</div>
</div>
	</div>

	<footer class="amp-wp-article-footer">
			<div class="amp-wp-meta amp-wp-tax-category">
		Categories: Uncategorized	</div>

	</footer>
</article>

<footer class="amp-wp-footer">
	<div>
		<h2>有组织在!</h2>
		<a href="#top" class="back-to-top">Back to top</a>
	</div>
</footer>




</body></html>
