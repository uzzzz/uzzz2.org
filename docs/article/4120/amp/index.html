<!DOCTYPE html>
<html amp lang="en-US" i-amphtml-layout="" i-amphtml-no-boilerplate="" transformed="self;v=1">
<head><meta charset="utf-8"><style amp-runtime="" i-amphtml-version="012111242025001">html{overflow-x:hidden!important}html.i-amphtml-fie{height:100%!important;width:100%!important}html:not([amp4ads]),html:not([amp4ads]) body{height:auto!important}html:not([amp4ads]) body{margin:0!important}body{-webkit-text-size-adjust:100%;-moz-text-size-adjust:100%;-ms-text-size-adjust:100%;text-size-adjust:100%}html.i-amphtml-singledoc.i-amphtml-embedded{-ms-touch-action:pan-y pinch-zoom;touch-action:pan-y pinch-zoom}html.i-amphtml-fie>body,html.i-amphtml-singledoc>body{overflow:visible!important}html.i-amphtml-fie:not(.i-amphtml-inabox)>body,html.i-amphtml-singledoc:not(.i-amphtml-inabox)>body{position:relative!important}html.i-amphtml-ios-embed-legacy>body{overflow-x:hidden!important;overflow-y:auto!important;position:absolute!important}html.i-amphtml-ios-embed{overflow-y:auto!important;position:static}#i-amphtml-wrapper{overflow-x:hidden!important;overflow-y:auto!important;position:absolute!important;top:0!important;left:0!important;right:0!important;bottom:0!important;margin:0!important;display:block!important}html.i-amphtml-ios-embed.i-amphtml-ios-overscroll,html.i-amphtml-ios-embed.i-amphtml-ios-overscroll>#i-amphtml-wrapper{-webkit-overflow-scrolling:touch!important}#i-amphtml-wrapper>body{position:relative!important;border-top:1px solid transparent!important}#i-amphtml-wrapper+body{visibility:visible}#i-amphtml-wrapper+body .i-amphtml-lightbox-element,#i-amphtml-wrapper+body[i-amphtml-lightbox]{visibility:hidden}#i-amphtml-wrapper+body[i-amphtml-lightbox] .i-amphtml-lightbox-element{visibility:visible}#i-amphtml-wrapper.i-amphtml-scroll-disabled,.i-amphtml-scroll-disabled{overflow-x:hidden!important;overflow-y:hidden!important}amp-instagram{padding:54px 0px 0px!important;background-color:#fff}amp-iframe iframe{box-sizing:border-box!important}[amp-access][amp-access-hide]{display:none}[subscriptions-dialog],body:not(.i-amphtml-subs-ready) [subscriptions-action],body:not(.i-amphtml-subs-ready) [subscriptions-section]{display:none!important}amp-experiment,amp-live-list>[update]{display:none}amp-list[resizable-children]>.i-amphtml-loading-container.amp-hidden{display:none!important}amp-list [fetch-error],amp-list[load-more] [load-more-button],amp-list[load-more] [load-more-end],amp-list[load-more] [load-more-failed],amp-list[load-more] [load-more-loading]{display:none}amp-list[diffable] div[role=list]{display:block}amp-story-page,amp-story[standalone]{min-height:1px!important;display:block!important;height:100%!important;margin:0!important;padding:0!important;overflow:hidden!important;width:100%!important}amp-story[standalone]{background-color:#000!important;position:relative!important}amp-story-page{background-color:#757575}amp-story .amp-active>div,amp-story .i-amphtml-loader-background{display:none!important}amp-story-page:not(:first-of-type):not([distance]):not([active]){transform:translateY(1000vh)!important}amp-autocomplete{position:relative!important;display:inline-block!important}amp-autocomplete>input,amp-autocomplete>textarea{padding:0.5rem;border:1px solid rgba(0,0,0,0.33)}.i-amphtml-autocomplete-results,amp-autocomplete>input,amp-autocomplete>textarea{font-size:1rem;line-height:1.5rem}[amp-fx^=fly-in]{visibility:hidden}amp-script[nodom],amp-script[sandboxed]{position:fixed!important;top:0!important;width:1px!important;height:1px!important;overflow:hidden!important;visibility:hidden}
/*# sourceURL=/css/ampdoc.css*/[hidden]{display:none!important}.i-amphtml-element{display:inline-block}.i-amphtml-blurry-placeholder{transition:opacity 0.3s cubic-bezier(0.0,0.0,0.2,1)!important;pointer-events:none}[layout=nodisplay]:not(.i-amphtml-element){display:none!important}.i-amphtml-layout-fixed,[layout=fixed][width][height]:not(.i-amphtml-layout-fixed){display:inline-block;position:relative}.i-amphtml-layout-responsive,[layout=responsive][width][height]:not(.i-amphtml-layout-responsive),[width][height][heights]:not([layout]):not(.i-amphtml-layout-responsive),[width][height][sizes]:not(img):not([layout]):not(.i-amphtml-layout-responsive){display:block;position:relative}.i-amphtml-layout-intrinsic,[layout=intrinsic][width][height]:not(.i-amphtml-layout-intrinsic){display:inline-block;position:relative;max-width:100%}.i-amphtml-layout-intrinsic .i-amphtml-sizer{max-width:100%}.i-amphtml-intrinsic-sizer{max-width:100%;display:block!important}.i-amphtml-layout-container,.i-amphtml-layout-fixed-height,[layout=container],[layout=fixed-height][height]:not(.i-amphtml-layout-fixed-height){display:block;position:relative}.i-amphtml-layout-fill,.i-amphtml-layout-fill.i-amphtml-notbuilt,[layout=fill]:not(.i-amphtml-layout-fill),body noscript>*{display:block;overflow:hidden!important;position:absolute;top:0;left:0;bottom:0;right:0}body noscript>*{position:absolute!important;width:100%;height:100%;z-index:2}body noscript{display:inline!important}.i-amphtml-layout-flex-item,[layout=flex-item]:not(.i-amphtml-layout-flex-item){display:block;position:relative;-ms-flex:1 1 auto;flex:1 1 auto}.i-amphtml-layout-fluid{position:relative}.i-amphtml-layout-size-defined{overflow:hidden!important}.i-amphtml-layout-awaiting-size{position:absolute!important;top:auto!important;bottom:auto!important}i-amphtml-sizer{display:block!important}@supports (aspect-ratio:1/1){i-amphtml-sizer.i-amphtml-disable-ar{display:none!important}}.i-amphtml-blurry-placeholder,.i-amphtml-fill-content{display:block;height:0;max-height:100%;max-width:100%;min-height:100%;min-width:100%;width:0;margin:auto}.i-amphtml-layout-size-defined .i-amphtml-fill-content{position:absolute;top:0;left:0;bottom:0;right:0}.i-amphtml-replaced-content,.i-amphtml-screen-reader{padding:0!important;border:none!important}.i-amphtml-screen-reader{position:fixed!important;top:0px!important;left:0px!important;width:4px!important;height:4px!important;opacity:0!important;overflow:hidden!important;margin:0!important;display:block!important;visibility:visible!important}.i-amphtml-screen-reader~.i-amphtml-screen-reader{left:8px!important}.i-amphtml-screen-reader~.i-amphtml-screen-reader~.i-amphtml-screen-reader{left:12px!important}.i-amphtml-screen-reader~.i-amphtml-screen-reader~.i-amphtml-screen-reader~.i-amphtml-screen-reader{left:16px!important}.i-amphtml-unresolved{position:relative;overflow:hidden!important}.i-amphtml-select-disabled{-webkit-user-select:none!important;-ms-user-select:none!important;user-select:none!important}.i-amphtml-notbuilt,[layout]:not(.i-amphtml-element),[width][height][heights]:not([layout]):not(.i-amphtml-element),[width][height][sizes]:not(img):not([layout]):not(.i-amphtml-element){position:relative;overflow:hidden!important;color:transparent!important}.i-amphtml-notbuilt:not(.i-amphtml-layout-container)>*,[layout]:not([layout=container]):not(.i-amphtml-element)>*,[width][height][heights]:not([layout]):not(.i-amphtml-element)>*,[width][height][sizes]:not([layout]):not(.i-amphtml-element)>*{display:none}amp-img:not(.i-amphtml-element)[i-amphtml-ssr]>img.i-amphtml-fill-content{display:block}.i-amphtml-notbuilt:not(.i-amphtml-layout-container),[layout]:not([layout=container]):not(.i-amphtml-element),[width][height][heights]:not([layout]):not(.i-amphtml-element),[width][height][sizes]:not(img):not([layout]):not(.i-amphtml-element){color:transparent!important;line-height:0!important}.i-amphtml-ghost{visibility:hidden!important}.i-amphtml-element>[placeholder],[layout]:not(.i-amphtml-element)>[placeholder],[width][height][heights]:not([layout]):not(.i-amphtml-element)>[placeholder],[width][height][sizes]:not([layout]):not(.i-amphtml-element)>[placeholder]{display:block;line-height:normal}.i-amphtml-element>[placeholder].amp-hidden,.i-amphtml-element>[placeholder].hidden{visibility:hidden}.i-amphtml-element:not(.amp-notsupported)>[fallback],.i-amphtml-layout-container>[placeholder].amp-hidden,.i-amphtml-layout-container>[placeholder].hidden{display:none}.i-amphtml-layout-size-defined>[fallback],.i-amphtml-layout-size-defined>[placeholder]{position:absolute!important;top:0!important;left:0!important;right:0!important;bottom:0!important;z-index:1}amp-img[i-amphtml-ssr]:not(.i-amphtml-element)>[placeholder]{z-index:auto}.i-amphtml-notbuilt>[placeholder]{display:block!important}.i-amphtml-hidden-by-media-query{display:none!important}.i-amphtml-element-error{background:red!important;color:#fff!important;position:relative!important}.i-amphtml-element-error:before{content:attr(error-message)}i-amp-scroll-container,i-amphtml-scroll-container{position:absolute;top:0;left:0;right:0;bottom:0;display:block}i-amp-scroll-container.amp-active,i-amphtml-scroll-container.amp-active{overflow:auto;-webkit-overflow-scrolling:touch}.i-amphtml-loading-container{display:block!important;pointer-events:none;z-index:1}.i-amphtml-notbuilt>.i-amphtml-loading-container{display:block!important}.i-amphtml-loading-container.amp-hidden{visibility:hidden}.i-amphtml-element>[overflow]{cursor:pointer;position:relative;z-index:2;visibility:hidden;display:initial;line-height:normal}.i-amphtml-layout-size-defined>[overflow]{position:absolute}.i-amphtml-element>[overflow].amp-visible{visibility:visible}template{display:none!important}.amp-border-box,.amp-border-box *,.amp-border-box :after,.amp-border-box :before{box-sizing:border-box}amp-pixel{display:none!important}amp-analytics,amp-auto-ads,amp-story-auto-ads{position:fixed!important;top:0!important;width:1px!important;height:1px!important;overflow:hidden!important;visibility:hidden}html.i-amphtml-fie>amp-analytics{position:initial!important}[visible-when-invalid]:not(.visible),form [submit-error],form [submit-success],form [submitting]{display:none}amp-accordion{display:block!important}@media (min-width:1px){:where(amp-accordion>section)>:first-child{margin:0;background-color:#efefef;padding-right:20px;border:1px solid #dfdfdf}:where(amp-accordion>section)>:last-child{margin:0}}amp-accordion>section{float:none!important}amp-accordion>section>*{float:none!important;display:block!important;overflow:hidden!important;position:relative!important}amp-accordion,amp-accordion>section{margin:0}amp-accordion:not(.i-amphtml-built)>section>:last-child{display:none!important}amp-accordion:not(.i-amphtml-built)>section[expanded]>:last-child{display:block!important}
/*# sourceURL=/css/ampshared.css*/</style><meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1"><title>每个软件开发者必须绝对至少需要了解的Unicode和Character Sets的知识（没有借口！） - 有组织在!</title><link rel="preconnect" href="https://cdn.ampproject.org"><link rel="preload" as="script" href="https://cdn.ampproject.org/v0.js"><script async="" src="https://cdn.ampproject.org/v0.js"></script><style amp-custom="">.amp-wp-enforced-sizes{max-width:100%;margin:0 auto}amp-img.amp-wp-enforced-sizes[layout="intrinsic"] > img{object-fit:contain}html{background:#0a89c0}body{background:#fff;color:#353535;font-family:Georgia,"Times New Roman",Times,Serif;font-weight:300;line-height:1.75em}p,ul{margin:0 0 1em;padding:0}a,a:visited{color:#0a89c0}a:hover,a:active,a:focus{color:#353535}.amp-wp-meta,.amp-wp-header div,.amp-wp-title,.amp-wp-tax-category,.amp-wp-footer p,.back-to-top{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI","Roboto","Oxygen-Sans","Ubuntu","Cantarell","Helvetica Neue",sans-serif}.amp-wp-header{background-color:#0a89c0}.amp-wp-header div{color:#fff;font-size:1em;font-weight:400;margin:0 auto;max-width:calc(840px - 32px);padding:.875em 16px;position:relative}.amp-wp-header a{color:#fff;text-decoration:none}.amp-wp-header .amp-wp-site-icon{background-color:#fff;border:1px solid #fff;border-radius:50%;position:absolute;right:18px;top:10px}.amp-wp-article{color:#353535;font-weight:400;margin:1.5em auto;max-width:840px;overflow-wrap:break-word;word-wrap:break-word}.amp-wp-article-header{align-items:center;align-content:stretch;display:flex;flex-wrap:wrap;justify-content:space-between;margin:1.5em 16px 0}.amp-wp-title{color:#353535;display:block;flex:1 0 100%;font-weight:900;margin:0 0 .625em;width:100%}.amp-wp-meta{color:#696969;display:inline-block;flex:2 1 50%;font-size:.875em;line-height:1.5em;margin:0 0 1.5em;padding:0}.amp-wp-article-header .amp-wp-meta:last-of-type{text-align:right}.amp-wp-article-header .amp-wp-meta:first-of-type{text-align:left}.amp-wp-byline amp-img,.amp-wp-byline .amp-wp-author{display:inline-block;vertical-align:middle}.amp-wp-byline amp-img{border:1px solid #0a89c0;border-radius:50%;position:relative;margin-right:6px}.amp-wp-posted-on{text-align:right}.amp-wp-article-content{margin:0 16px}.amp-wp-article-content ul{margin-left:1em}.amp-wp-article-content amp-img{margin:0 auto}.amp-wp-article-footer .amp-wp-meta{display:block}.amp-wp-tax-category{color:#696969;font-size:.875em;line-height:1.5em;margin:1.5em 16px}.amp-wp-footer{border-top:1px solid #c2c2c2;margin:calc(1.5em - 1px) 0 0}.amp-wp-footer div{margin:0 auto;max-width:calc(840px - 32px);padding:1.25em 16px 1.25em;position:relative}.amp-wp-footer h2{font-size:1em;line-height:1.375em;margin:0 0 .5em}.amp-wp-footer p{color:#696969;font-size:.8em;line-height:1.5em;margin:0 85px 0 0}.amp-wp-footer a{text-decoration:none}.back-to-top{bottom:1.275em;font-size:.8em;font-weight:600;line-height:2em;position:absolute;right:16px}.htmledit_views em,.htmledit_views span[lang]{font-style:italic}.htmledit_views{font-family:-apple-system,SF UI Text,Arial,PingFang SC,Hiragino Sans GB,Microsoft YaHei,WenQuanYi Micro Hei,sans-serif,SimHei,SimSun}.htmledit_views a>amp-img{padding:1px;margin:1px;border:none;outline:#0782c1 solid 1px}.htmledit_views p{font-size:16px;color:#4d4d4d;font-weight:400;line-height:26px;margin:0 0 16px;overflow-x:auto}p[align=center]{text-align:center}.htmledit_views amp-img{max-width:100%;height:auto}.htmledit_views strong,.htmledit_views strong span{font-weight:700}.htmledit_views *{box-sizing:border-box}.htmledit_views h1,.htmledit_views h2{color:#4f4f4f;margin:8px 0 16px;font-weight:700}.htmledit_views ul{margin:0 0 24px;padding:0;font-size:16px}.htmledit_views ul li{list-style-type:disc;margin:8px 0 0 32px}.htmledit_views h1{font-size:28px;line-height:36px}.htmledit_views h2{font-size:24px;line-height:32px}.htmledit_views a{color:#4ea1db;text-decoration:none}.htmledit_views a:focus,.htmledit_views a:hover{color:#ca0c16}.htmledit_views a:visited{color:#6795b5}:root:not(#_):not(#_):not(#_):not(#_):not(#_) .amp-wp-93316a4{color:#00f}:root:not(#_):not(#_):not(#_):not(#_):not(#_) .amp-wp-9456def{color:#000}

/*# sourceURL=amp-custom.css */</style><script type="application/ld+json" class="yoast-schema-graph yoast-schema-graph--main">{"@context":"https://schema.org","@graph":[{"@type":"WebSite","@id":"https://uzzz.org/#website","url":"https://uzzz.org/","name":"\u6709\u7ec4\u7ec7\u5728!","potentialAction":{"@type":"SearchAction","target":"https://uzzz.org/?s={search_term_string}","query-input":"required name=search_term_string"}},{"@type":"ImageObject","@id":"https://uzzz.org/article/4120/#primaryimage","url":"http://www.windameister.org/blog/wp-content/uploads/2012/05/clip_image00433_thumb.jpg"},{"@type":"WebPage","@id":"https://uzzz.org/article/4120/#webpage","url":"https://uzzz.org/article/4120/","inLanguage":"en-US","name":"\u6bcf\u4e2a\u8f6f\u4ef6\u5f00\u53d1\u8005\u5fc5\u987b\u7edd\u5bf9\u81f3\u5c11\u9700\u8981\u4e86\u89e3\u7684Unicode\u548cCharacter Sets\u7684\u77e5\u8bc6\uff08\u6ca1\u6709\u501f\u53e3\uff01\uff09 - \u6709\u7ec4\u7ec7\u5728!","isPartOf":{"@id":"https://uzzz.org/#website"},"primaryImageOfPage":{"@id":"https://uzzz.org/article/4120/#primaryimage"},"datePublished":"2014-12-03T06:28:56+00:00","dateModified":"2014-12-03T06:28:56+00:00","author":{"@id":"https://uzzz.org/#/schema/person/29673f1347b0abda5882803c72ee5a3f"}},{"@type":["Person"],"@id":"https://uzzz.org/#/schema/person/29673f1347b0abda5882803c72ee5a3f","name":"fandyvon","sameAs":[]}]}</script><link rel="canonical" href="https://uzzz.org/article/4120/"></head>

<body class="">

<header id="top" class="amp-wp-header">
	<div>
		<a href="https://uzzz.org/">
										<amp-img src="https://uzzz.org/wp-content/uploads/2019/10/cropped-icon-32x32.png" width="32" height="32" class="amp-wp-site-icon i-amphtml-layout-fixed i-amphtml-layout-size-defined" style="width:32px;height:32px;" i-amphtml-layout="fixed"></amp-img>
						<span class="amp-site-title">
				有组织在!			</span>
		</a>

					</div>
</header>

<article class="amp-wp-article">
	<header class="amp-wp-article-header">
		<h1 class="amp-wp-title">每个软件开发者必须绝对至少需要了解的Unicode和Character Sets的知识（没有借口！）</h1>
			<div class="amp-wp-meta amp-wp-byline">
					<amp-img src="https://secure.gravatar.com/avatar/e786821a74ef0467825a7d60183307bc?s=24&d=mm&r=g" alt="fandyvon" width="24" height="24" layout="fixed" class="i-amphtml-layout-fixed i-amphtml-layout-size-defined" style="width:24px;height:24px;" i-amphtml-layout="fixed"></amp-img>
				<span class="amp-wp-author author vcard">fandyvon</span>
	</div>
<div class="amp-wp-meta amp-wp-posted-on">
	<time datetime="2014-12-03T14:28:56+00:00">
		7 years ago	</time>
</div>
	</header>

	
	<div class="amp-wp-article-content">
		<p><br>
<br>
<br>
 </p>
<div id="article_content" class="article_content clearfix">
 
 
<div class="htmledit_views" id="content_views">
<h2><a id="viewpost1_TitleUrl" href="http://www.cppblog.com/colorful/archive/2013/06/22/201225.html" rel="nofollow"></a></h2>
<div>
   http://blog.csdn.net/natsu1211/article/details/8518398
  </div>
<p></p>
<div>
<div id="article_content">
<p align="justify"><span data-amp-original-style="color:#000000;" class="amp-wp-9456def">每个软件开发者<strong>必须绝对至少</strong>需要了解的</span>Unicode和Character Sets的知识（没有借口！）</p>
<p align="justify"> </p>
<p align="justify"><span data-amp-original-style="color:#000000;" class="amp-wp-9456def">原文：</span><a href="http://www.joelonsoftware.com/articles/Unicode.html" rel="nofollow"><span data-amp-original-style="color:#0000ff;" class="amp-wp-93316a4">http://www.joelonsoftware.com/articles/Unicode.html</span></a></p>
<p align="justify"> </p>
<p align="justify"><span data-amp-original-style="color:#000000;" class="amp-wp-9456def">by Joel Spolsky </span></p>
<p align="justify"><span data-amp-original-style="color:#000000;" class="amp-wp-9456def">译</span>windam</p>
<p align="justify"> </p>
<p align="justify"><span data-amp-original-style="color:#000000;" class="amp-wp-9456def">2003.10.8 </span>星期三</p>
<p align="justify"><span data-amp-original-style="color:#000000;" class="amp-wp-9456def">你是否曾经对那个神秘的</span>Content-Type标记感到不解？</p>
<p align="justify"><span data-amp-original-style="color:#000000;" class="amp-wp-9456def"><em>译注：每个</em></span>HTML<em>页面的head块中都可能包含一个Content-Type标记，例如：</em></p>
<p align="justify"><em><span data-amp-original-style="color:#000000;" class="amp-wp-9456def"><meta http-equiv=”Content-Type” content=”text/html; charset=UTF-8″ /></span></em></p>
<p align="justify"><span data-amp-original-style="color:#000000;" class="amp-wp-9456def">你知道这东西应该被放到</span>HTML里，但是你从来都没有确切得弄清楚它到底应该是什么？</p>
<p align="justify"> </p>
<p align="justify"><span data-amp-original-style="color:#000000;" class="amp-wp-9456def">你是否曾经收到过你朋友从</span>Bulgaria发来的Email，它的主题行是“???? ?????? ??? ????”？</p>
<p align="justify"> </p>
<p align="justify"><span data-amp-original-style="color:#000000;" class="amp-wp-9456def">当我发现还有那么多的软件开发者并没有真正领会关于字符集</span>(Character sets)，编码(encoding)，Unicode以及相关知识的时候，我非常失望。几年前，<a href="http://www.fogcreek.com/FogBUGZ/" rel="nofollow"><span data-amp-original-style="color:#0000ff;" class="amp-wp-93316a4">FogBUGZ</span></a><span data-amp-original-style="color:#000000;" class="amp-wp-9456def">的一个</span>beta测试者对于它是否能处理收到的日语邮件感到疑惑。日语？他们有日文的Email？我不知道。但当我仔细研究我们用来解析MIME email的商业ActiveX<span data-amp-original-style="color:#000000;" class="amp-wp-9456def">控件时，我们发现它恰恰正好对字符集做了完全错误的处理，于 是，为了撤销控件中所做的错误转换，并正确的重新处理，我们不得不编写修正它的补救代码。而当我研究另一个商业库的时候，发现它有一样的完全错误的字符代 码实现。我和那个代码库的开发者通信，发现他的想法是，他们“不能（对字符集）做任何事（正确的处理）”。就像很多程序员一样，他只是祈祷着，这一切麻烦 事都可以被吹走。</span></p>
<p align="justify"> </p>
<p align="justify"><span data-amp-original-style="color:#000000;" class="amp-wp-9456def">但事实上不会！当我发现流行的</span>web开发语言PHP几乎<a href="http://ca3.php.net/manual/en/language.types.string.php" rel="nofollow"><span data-amp-original-style="color:#0000ff;" class="amp-wp-93316a4">完全的忽略了字符编码的问题</span></a><span data-amp-original-style="color:#000000;" class="amp-wp-9456def">，没心没肺的用了</span>8bit字符，这种傻逼的行为让开发好的国际化web<span data-amp-original-style="color:#000000;" class="amp-wp-9456def">应用变得几乎不可能的时候，我想，我受够了。</span></p>
<p align="justify"> </p>
<p align="justify"><span data-amp-original-style="color:#000000;" class="amp-wp-9456def">我在此声明：如果你是一个工作在</span>2003年或之后的程序员（此文写于2003年10月），并且你还没有对字符，字符集，编码和Unicode有所了解，而且你被我我抓住了，我会罚你在潜艇里剥6个月的洋葱皮！我发誓我会这样做的！</p>
<p align="justify"> </p>
<p align="justify"><span data-amp-original-style="color:#000000;" class="amp-wp-9456def">此外还有一事：</span></p>
<p align="justify"> </p>
<p align="center"><strong><span data-amp-original-style="color:#000000;" class="amp-wp-9456def">这真的没那么难</span></strong></p>
<p align="justify"> </p>
<p align="justify"><span data-amp-original-style="color:#000000;" class="amp-wp-9456def">在本文中，我将会告诉你每个在工作中的程序员所应知道的。所有关于</span>“plain text = ascii = character就是8bit”的知识不仅仅是错误的，而且是错得令人绝望。如果你依然像这样编程，那么你真不比一个不信基因的医生好到哪里去。在读完本文之前，请不要再编写任何一行代码！</p>
<p align="justify"> </p>
<p align="justify"><span data-amp-original-style="color:#000000;" class="amp-wp-9456def">在我开始之前，我应该提醒你，如果你是那些少数懂得国 际化的知识的程序员，那么你会发现我讨论的整个话题有那么一点过于简化。我仅仅只是希望在此设立一个门槛，使得每个人都理解关于字符编码究竟都发生了些什 么事情，并有希望使写出的代码可以在任意语言下正常工作，而非仅仅只能工作在在不带方言词汇的英语环境中。我还要再提醒你，想创建可以在国际化语言环境下 工作的软件，字符处理仅仅只是很小的一部分工作，但是我一次只能写一个主题，所以本文就是关于字符集的。</span></p>
<p align="justify"> </p>
<p align="justify"><strong><span data-amp-original-style="color:#000000;" class="amp-wp-9456def">从历史的角度</span></strong></p>
<p align="justify"> </p>
<p align="justify"><span data-amp-original-style="color:#000000;" class="amp-wp-9456def">理解一件事情的最简单的方法，就是回到它发生的时候去。</span></p>
<p align="justify"> </p>
<p align="justify"><span data-amp-original-style="color:#000000;" class="amp-wp-9456def">你可能以为我要在此谈论那些非常老旧的字符集如</span>EBCDIC。嘛，我们不讨论那些。EBCDIC和你的生活没有关联。我们不需要走到那么远古的时期。</p>
<p align="justify"> </p>
<p align="justify"><span data-amp-original-style="color:#000000;" class="amp-wp-9456def">回到再近一点的时间，当</span>Unix被发明，K&R正在写那本著名的<a href="http://cm.bell-labs.com/cm/cs/cbook/" rel="nofollow"><span data-amp-original-style="color:#0000ff;" class="amp-wp-93316a4">The C Programming Language</span></a><span data-amp-original-style="color:#000000;" class="amp-wp-9456def">的时候，一切都还很简单。</span>EBCDIC正逐渐消亡。那时唯一有意义的就是那些美好的，不包含方言字符的英文字母。于是我们将这套将每一个字符通过32到127之间的数进行表示的编码，记做<a href="http://www.robelle.com/library/smugbook/ascii.html" rel="nofollow"><span data-amp-original-style="color:#0000ff;" class="amp-wp-93316a4">ASCII</span></a><span data-amp-original-style="color:#000000;" class="amp-wp-9456def">。例如，空格是</span>32， 字母“A”是65。这些字符用7个bit就可以存储。那个年代的电脑多数采用8bit为一字节，因此你不光可以用7个bit保存每个可能的ASCII字 符，你还有一个bit的空余，如果你够邪恶，你也可以将之用于自己的狡猾目的：WordStar用了一个很2B的做法——用最高位来标识一个单词的最后一 个字母，这宣告了WordStar仅能用于英文文本。比32小的编码被称为不可打印字符，并且被用来释放诅咒——只是开个玩笑，实际上它们是控制字符，比 如7可以让你的电脑发出蜂鸣声，12<span data-amp-original-style="color:#000000;" class="amp-wp-9456def">可以让当前页纸被送出打印机并传入新纸。</span></p>
<p align="justify"> </p>
<p align="justify"><span data-amp-original-style="color:#000000;" class="amp-wp-9456def">如果你只是一个英语使用者的话，这一切都很美好。</span></p>
<p align="justify"> </p>
<p align="justify"><span data-amp-original-style="color:#000000;" class="amp-wp-9456def">因为一个字节有</span>8个比特，于是很多人就想，“哎，我们可以使用128-255作为自己的用途”。不过麻烦在于，很多人同时有了这个想法，并且他们关于如何使用128～255的想法又各不相同。IBM-PC弄出来一个被称为OEM字符集的玩意，为欧洲的语言提供了一些方言字母，以及<a href="http://www.jimprice.com/ascii-dos.gif" rel="nofollow"><span data-amp-original-style="color:#0000ff;" class="amp-wp-93316a4">一串用来绘制线条的字符</span></a><span data-amp-original-style="color:#000000;" class="amp-wp-9456def">… </span><span data-amp-original-style="color:#000000;" class="amp-wp-9456def">如水平条，竖直条，右侧带有小的拐角的水平条等。这样，你就可以使用这些画线字符，在屏幕上绘制整洁漂亮的方框与线条了。你至今依然可以在那些那些运行于</span>8088计算机的干洗机上看到这些字符。事实上，当除美国之外的人们开始购买PC时，人们凭空捏造出各种各样的OEM字符集，都将高128位用于自己的用途。举例来说，在一些PC上，字符码130被显示为é，而在以色列销售的计算机，这个字符码则显示为希伯来字母() ，于是，如果美国人将他们的résumés（简历）发送到以色列，这简历在到达后就变成了r<a href="http://www.windameister.org/blog/wp-content/uploads/2012/05/clip_image00433.jpg" rel="nofollow"><amp-img title="clip_image004[33]" src="http://www.windameister.org/blog/wp-content/uploads/2012/05/clip_image00433_thumb.jpg" alt="clip_image004[33]" height="9" width="4" class="amp-wp-enforced-sizes i-amphtml-layout-intrinsic i-amphtml-layout-size-defined" layout="intrinsic" i-amphtml-layout="intrinsic"><i-amphtml-sizer class="i-amphtml-sizer"><img alt="" aria-hidden="true" class="i-amphtml-intrinsic-sizer" role="presentation" src="data:image/svg+xml;charset=utf-8,<svg%20height=%229%22%20width=%224%22%20xmlns=%22http://www.w3.org/2000/svg%22%20version=%221.1%22/>"></i-amphtml-sizer><noscript><img title="clip_image004[33]" src="http://www.windameister.org/blog/wp-content/uploads/2012/05/clip_image00433_thumb.jpg" alt="clip_image004[33]" border="0" height="9" width="4"></noscript></amp-img></a>sum<a href="http://www.windameister.org/blog/wp-content/uploads/2012/05/clip_image00434.jpg" rel="nofollow"><amp-img title="clip_image004[34]" src="http://www.windameister.org/blog/wp-content/uploads/2012/05/clip_image00434_thumb.jpg" alt="clip_image004[34]" height="9" width="4" class="amp-wp-enforced-sizes i-amphtml-layout-intrinsic i-amphtml-layout-size-defined" layout="intrinsic" i-amphtml-layout="intrinsic"><i-amphtml-sizer class="i-amphtml-sizer"><img alt="" aria-hidden="true" class="i-amphtml-intrinsic-sizer" role="presentation" src="data:image/svg+xml;charset=utf-8,<svg%20height=%229%22%20width=%224%22%20xmlns=%22http://www.w3.org/2000/svg%22%20version=%221.1%22/>"></i-amphtml-sizer><noscript><img title="clip_image004[34]" src="http://www.windameister.org/blog/wp-content/uploads/2012/05/clip_image00434_thumb.jpg" alt="clip_image004[34]" border="0" height="9" width="4"></noscript></amp-img></a>s。在很多场合，比如俄语中，关于如何使用高128<span data-amp-original-style="color:#000000;" class="amp-wp-9456def">位字符有各种各样的办法，因此你甚至无法可靠的交换俄语文档。</span></p>
<p align="justify"> </p>
<p align="justify"><span data-amp-original-style="color:#000000;" class="amp-wp-9456def">最终，这种混乱无序的</span>OEM编码被ANSI标准统一了。在ANSI标准中，所有人都同意对低128的定义，与ASCII码保持一致，高128位编码的处理方式，则取决于你生活在什么地方。这些对高128位编码做不同处理的体系被称为<a href="http://www.i18nguy.com/unicode/codepages.html#msftdos" rel="nofollow"><span data-amp-original-style="color:#0000ff;" class="amp-wp-93316a4">code pages</span>（代码页）</a><span data-amp-original-style="color:#000000;" class="amp-wp-9456def">。所以，例如以色列的</span>DOS使用 的代码页被称为862，而希腊的用户使用的代码页是737。这些不同代码页在128以下的部分都是相同的，而对于128以上的编码则有不同的处理方案（那 些搞笑的字母皆被含在其中）。MS-DOS的国家版本中包含了很多上述这种代码页，可以处理从英语到冰岛语的一切，他们甚至还包括了少数“多语言”代码 页，可以在一台电脑上同时支持世界语和加利西亚语！WOW！但是话说回来，由于希伯来语和希腊语分属不同的代码页，对大于128<span data-amp-original-style="color:#000000;" class="amp-wp-9456def">的字符有完全不同的解释，因此除非使用位图，否则想在一台电脑上同时支持这两种语言则是一件完全不可能的任务。</span></p>
<p align="justify"> </p>
<p align="justify"><span data-amp-original-style="color:#000000;" class="amp-wp-9456def">另一方面，在亚洲，事情则更加令人抓狂了，因为亚洲的许多语言拥有数以千记的字符，这是无论如何不可能用</span>8 个bit进行编码的。这种情况通常是用“DBCS”的方式进行解决，也即双字节字符集，在双字节字符集中，有的字符使用一个字节进行表示，而有的则需要存 储在2个字节中。这种字符集的问题在于，通常想要在字符串中顺序遍历比较容易，但是要想反向遍历，则几乎不可能。对于这类字符串，程序员们最好不要使用 s++或者s–对其进行遍历，而是最好使用预定义的函数，例如Windows平台上的AnsiNext和AnsiPrev函数，它们知道如何处理这一切乱 七八糟的麻烦事。</p>
<p align="justify"> </p>
<p align="justify"><span data-amp-original-style="color:#000000;" class="amp-wp-9456def">但是，绝大多数人依然以为一个字节就恰好对应着一个字 母，或是一个字母就是一个字节。只要你永远不把一个字符串从一台电脑上拷贝到另一台电脑上，或者从来不使用超过一种语言，这种做法就可以在某种意义上正常 的工作。但是，理所当然的，由于因特网的普及，现在将字符串从一台电脑拷贝到另一台电脑变得越来越常见，那么这一切做法的基础就垮台了。幸运的是，</span>Unicode被发明了。</p>
<p align="justify"> </p>
<p align="justify"><strong><span data-amp-original-style="color:#000000;" class="amp-wp-9456def">Unicode</span></strong></p>
<p align="justify"> </p>
<p align="justify"><span data-amp-original-style="color:#000000;" class="amp-wp-9456def">针对人们想要创建一个可以囊括这颗星球上一切可能的书写系统的字符集的目标，</span>Unicode 是一次勇敢的尝试。一些人以为Unicode只是一个简单的16bit编码，其中的每个字符都可以拥有16个bit，因而可以支持最多65536种可能的字符，<strong>这种对Unicode的认识，事实上，是错误的</strong>。这是针对Unicode流传得最广的一种误解，所以，如果你也是这样认为的，不用觉得过于沮丧。</p>
<p align="justify"> </p>
<p align="justify"><span data-amp-original-style="color:#000000;" class="amp-wp-9456def">事实上，</span>Unicode针对字符有一套完全不同的思路，因此你必须遵循Unicode看待事物的思维模式，否则你什么都理解不了。</p>
<p align="justify"> </p>
<p align="justify"><span data-amp-original-style="color:#000000;" class="amp-wp-9456def">直到现在，我们都认为一个字母可以被映射为若干比特，你可以将之存储于内存中或者磁盘上。</span></p>
<p align="justify"> </p>
<p align="justify"><span data-amp-original-style="color:#000000;" class="amp-wp-9456def">例如</span> A -> 0100 0001</p>
<p align="justify"> </p>
<p align="justify"><span data-amp-original-style="color:#000000;" class="amp-wp-9456def">在</span>Unicode中，一个字母被映射到一个称为code point的东西，这只是一个理论上的抽象概念。至于这个code point如何在内存中表示，或是在磁盘中存储，则又是另一回事了。</p>
<p align="justify"> </p>
<p align="justify"><span data-amp-original-style="color:#000000;" class="amp-wp-9456def">在</span>Unicode中，字母A是抽象的形象。它在天堂中漂浮着：</p>
<p align="justify"> </p>
<p align="center"><span data-amp-original-style="color:#000000;" class="amp-wp-9456def">A</span></p>
<p align="justify"><span data-amp-original-style="color:#000000;" class="amp-wp-9456def">这个抽象的</span>Unicode中的A不同于B，且不同于a。但是与A或者<strong><em>A</em></strong>以 及A都是等同的。关键的地方在于，Times New Roman字体中的A与Helvetica字体中的A是相同的字符，而与小写的“a”是不同的字符。这看起来并没有什么有所疑议的，但是在某些语言中，仅 仅指出一个字母是什么就可能引发疑议。德文字母ß究竟是一个真实的字母，还是仅仅只是s的另一种花式写法？如果一个单词末尾的字母的形状改变了，那么这个 字母是否意味着一个不同的字母——请作答？在希伯来文中，上面这个问题的回答为真，而在阿拉伯语中，则为假。无论如何，Unicode协会的那些聪明人们 已经在上一个十年间把这些东西都搞定了，尽管那其中依然包含了一大堆政治上的讨价还价，但是最终的结果是，你不用再为这些麻烦事而烦神了——他们把这些玩 意都搞定了。</p>
<p align="justify"> </p>
<p align="justify"><span data-amp-original-style="color:#000000;" class="amp-wp-9456def">Unicode</span>协会为每一个字母表中的每一个抽象字母都赋予了一个Magic number，写起来就像是这样：<strong>U+0639</strong>。这个Magic number（魔数）就被称为code point。其中的U+意味着“Unicode”，而数字的部分则是16进制的（译注：4位16进制数也就意味着需要16个bit的存储空间）。那么<strong>U+0639</strong>实际上就是阿拉伯字母Ain。英文字母A则是<strong>U+0041</strong>。你可以在Windows 2000/XP(译注：在Vista or Win7上也可)使用<strong>charmap</strong>实用工具来查询这些code point(译注：点击开始菜单，运行，输入charmap回车启动该工具)，也可以通过访问<a href="http://www.unicode.org/" rel="nofollow"><span data-amp-original-style="color:#0000ff;" class="amp-wp-93316a4">Unicode</span>的网站</a><span data-amp-original-style="color:#000000;" class="amp-wp-9456def">查询。</span></p>
<p align="justify"> </p>
<p align="justify"></p>
<p align="justify"><span data-amp-original-style="color:#000000;" class="amp-wp-9456def">(</span>译补图：这是charmap实用工具的运行界面，其中英文字母A如图所示恰为U+0041)</p>
<p align="justify"> </p>
<p align="justify"><span data-amp-original-style="color:#000000;" class="amp-wp-9456def">并没有人真正对</span>Unicode所能表示字母数目上限进行限制，事实上，Unicode所能表示的字母数目可以超过65536，所以并不是每一个Unicode字母都可以被塞进2字节的空间中，不过这只是个传闻。</p>
<p align="justify"> </p>
<p align="justify"><span data-amp-original-style="color:#000000;" class="amp-wp-9456def">OK</span>，假设我们有这样一个字符串</p>
<p align="justify"> </p>
<p align="center"><strong><span data-amp-original-style="color:#000000;" class="amp-wp-9456def">Hello</span></strong></p>
<p align="justify"><span data-amp-original-style="color:#000000;" class="amp-wp-9456def">在</span>Unicode中，这被表示为以下五个code point：</p>
<p align="justify"> </p>
<p align="center"><span data-amp-original-style="color:#000000;" class="amp-wp-9456def">U+0047  </span>U+0065  U+006C  U+006C  U+006F.</p>
<p align="justify"> </p>
<p align="justify"><span data-amp-original-style="color:#000000;" class="amp-wp-9456def">只是一组</span>code point。事实上，也就是数字。到目前为止，我们还没有提到过如何在内存中存储它们，或是在email中如何表示它们。</p>
<p align="justify"> </p>
<p align="justify"><strong><span data-amp-original-style="color:#000000;" class="amp-wp-9456def">Encodings</span></strong></p>
<p align="justify"> </p>
<p align="justify"><span data-amp-original-style="color:#000000;" class="amp-wp-9456def">这就是</span>encodings （编码）发挥作用的地方了。</p>
<p align="justify"> </p>
<p align="justify"><span data-amp-original-style="color:#000000;" class="amp-wp-9456def">关于</span>Unicode编码的最早的主意是这样的，嘿伙计，咱们把这些数字每个存成2字节吧。（这个主意也正是2字节神话的渊源）于是，我们的Helllo就变成了下面这样：</p>
<p align="justify"> </p>
<p align="center"><span data-amp-original-style="color:#000000;" class="amp-wp-9456def">00 48 00 65 00 6C 00 6C 00 6F</span></p>
<p align="justify"> </p>
<p align="justify"><span data-amp-original-style="color:#000000;" class="amp-wp-9456def">对吗？别着急！为什么不能是下面这样呢：</span></p>
<p align="justify"> </p>
<p align="center"><span data-amp-original-style="color:#000000;" class="amp-wp-9456def">48 00 65 00 6C 00 6C 00 6F 00</span></p>
<p align="justify"> </p>
<p align="justify"><span data-amp-original-style="color:#000000;" class="amp-wp-9456def">好吧，从技术上说，这样也可以，我确实这么认为，而事实上，由于早期的实现者们在他们要存储</span>Unicode code point的时候，希望依据特定的CPU架构选择是使用大端(high-endian)还是小端(low-endian)模式，这样使得CPU处理速度得 以最佳化。于是，看哪，很快的，就出现了两种不同的存储Unicode的方式。于是人们不得不创造一个离奇的约定，在Unicode的字符串的最前面加上 一个FE FF标识符。这个标识符被称为<a href="http://msdn.microsoft.com/en-us/library/ms776429" rel="nofollow"><span data-amp-original-style="color:#0000ff;" class="amp-wp-93316a4">Unicode Byte Order Mark(Unicode</span>字节序标识符)</a><span data-amp-original-style="color:#000000;" class="amp-wp-9456def">，并且，如果你反转了你的高低字节，那么这个标识符就会变成</span>FF FE，于是读取你的字符串的人就可以知道他们必须要翻转你的每一对高低字节。但是，喔，并不是每一个Unicode<span data-amp-original-style="color:#000000;" class="amp-wp-9456def">字符串都在开头有这个字节序标识符。</span></p>
<p align="justify"> </p>
<p align="justify"><span data-amp-original-style="color:#000000;" class="amp-wp-9456def">一开始，这一切看起来似乎还是挺好的，但是逐渐的，程序员们开始抱怨，“看那一堆没用的</span>0！” ——由于这些美国程序员多数情况下只使用英文文本，也就意味着他们几乎不会用到那些高于U+00FF的code point。尤其是他们多数还是加州的新自由主义嬉皮士，假若他们是德州人，那么他们多半不会在意这些多出来的字节。但是最终，这帮加州的苦孩子们终于无 法容忍字符串存储空间被无端的增长一倍，并且，由于有那么多的文档已经用各种ANSI和DBCS字符集存在了，谁会把这些文档都转换到Unicode下来 呢？难道是我（法语）来？仅仅因为这样的想法，于是在好几年的时间里，大多数人都决定无视Unicode，这使得事情变得更糟。</p>
<p align="justify"> </p>
<p align="justify"><span data-amp-original-style="color:#000000;" class="amp-wp-9456def">终于，一个天才的概念</span><a href="http://www.cl.cam.ac.uk/~mgk25/ucs/utf-8-history.txt" rel="nofollow"><span data-amp-original-style="color:#0000ff;" class="amp-wp-93316a4">被发明出来</span></a><span data-amp-original-style="color:#000000;" class="amp-wp-9456def">了——</span><a href="http://www.utf-8.com/" rel="nofollow"><span data-amp-original-style="color:#0000ff;" class="amp-wp-93316a4">UTF-8</span></a><span data-amp-original-style="color:#000000;" class="amp-wp-9456def">。</span>UTF-8在内存中通过8bit的字节来保存U + magic number，定义了保存Unicode字符串的一整套系统。在UTF-8中，0-127之间的code point被保存在一个单字节中。只有那些大于等于128的code point，需要用到2，3以及多至6<span data-amp-original-style="color:#000000;" class="amp-wp-9456def">个字节来保存。</span></p>
<p align="justify"> </p>
<p align="justify"><a href="http://www.windameister.org/blog/wp-content/uploads/2012/05/clip_image00814.jpg" rel="nofollow"><amp-img title="clip_image008[14]" src="http://www.windameister.org/blog/wp-content/uploads/2012/05/clip_image00814_thumb.jpg" alt="clip_image008[14]" height="87" width="547" class="amp-wp-enforced-sizes i-amphtml-layout-intrinsic i-amphtml-layout-size-defined" layout="intrinsic" i-amphtml-layout="intrinsic"><i-amphtml-sizer class="i-amphtml-sizer"><img alt="" aria-hidden="true" class="i-amphtml-intrinsic-sizer" role="presentation" src="data:image/svg+xml;charset=utf-8,<svg%20height=%2287%22%20width=%22547%22%20xmlns=%22http://www.w3.org/2000/svg%22%20version=%221.1%22/>"></i-amphtml-sizer><noscript><img title="clip_image008[14]" src="http://www.windameister.org/blog/wp-content/uploads/2012/05/clip_image00814_thumb.jpg" alt="clip_image008[14]" border="0" height="87" width="547"></noscript></amp-img></a></p>
<p align="justify"> </p>
<p align="justify"><span data-amp-original-style="color:#000000;" class="amp-wp-9456def">这种做法获得了一个非常不错的副作用——那就是</span>UTF-8中的英文文本与ASCII中的英文文本可以完全的保持一致，于是美国人们都不会发现有什么事情变得不一样了。只有这世界上其他地方的人们不得不跳过这个坑。举例来说，<strong>Hello</strong>， 这个字符串由code point：U+0048 U+0065 U+006C U+006C U+006F组成，在存储的时候，被保存为48 65 6C 6C 6F，这，恰恰正好与ASCII，ANSI，以及这颗星球上所有的OEM字符集中的表示都完全一样。现在，如果你需要去使用方言字母，或者是希腊字母，或 者是克林贡语字母的话，那么你就不得不为每个code point使用多个字节去存储了，不过美国人永远都不用在意这些了。（UTF-8还有一个非常漂亮的特性，以往的Unicode字符串想使用老式的以单个 byte的0作为字符串的结尾并不至于切断字符串的话需要一些处理代码，而UTF-8则可以忽略之。）</p>
<p align="justify"> </p>
<p align="justify"><span data-amp-original-style="color:#000000;" class="amp-wp-9456def">到目前为止，我已经告诉了你</span>Unicode 编码的三种方法。最传统的两字节存储方式被称为UCS-2（因为有2个字节）或者UTF-16（因为有16个Bit），并且你还得自己弄清楚究竟这是一个 大端(High-endian)UCS-2还是一个小端(low-endian)UCS-2。你还可以采用全新的UTF-8标准，如果你只使用英文文本， 它会让你在碰到一个无脑程序时，即便它完全无视了除ACSII之外的一切，你依然会过得很幸福！</p>
<p align="justify"> </p>
<p align="justify"><span data-amp-original-style="color:#000000;" class="amp-wp-9456def">事实上还有其他一系列方法来编码</span>Unicode。 有一种编码叫做UTF-7，它与UTF-8有很多相似之处，但是它假定所有字节的最高比特都是0。因为这个原因，如果你要把Unicode字符串传递给一 个严格认为7bit就足够用的警方邮件系统，那么感谢UTF-7吧，它能使你免于痛苦。还有种UCS-4编码，它使用4个字节存储一个code point，它有个不错的特性，每个code point都是等长的，但是麻烦在于，它是在浪费了太多的内存，以至于即便是得克萨斯人也不敢使用它。</p>
<p align="justify"> </p>
<p align="justify"><span data-amp-original-style="color:#000000;" class="amp-wp-9456def">事实上你正在使用</span>Unicode code point所表示的柏拉图式的理想的字母来考虑这些问题，这些Unicode code point同样也可以使用任何一种旧的学院派的编码方案来表示。举例而言，你同样可以用ASCII或古希腊OEM编码或希伯来ANSI编码，乃至迄今为止 已被发明的数百种编码，来表示一个Unicode编码的字符串Hello（U+0048 U+0065 U+006C U+006C U+006F）。但是这些做法有一个陷阱，那就是某些字母可能不能正常显示！如果你想要将某个Unicode code point在某种编码中表示，而该编码中又没有能对应上该code point的，你常常会得到一些小的问号：？或者，如果你的人品不错，你会得到一个�</p>
<p align="justify"> </p>
<p align="justify"><span data-amp-original-style="color:#000000;" class="amp-wp-9456def">存在数以百计的传统编码，它们都只能正确表示</span>Unicode code point的某些子集，而对那些处理不了的code point，则用问号来处理。有一些流行的英文编码，诸如Windows-1252（这是Windows 9x中的西欧语言标准），以及<a href="http://www.htmlhelp.com/reference/charset/" rel="nofollow"><span data-amp-original-style="color:#0000ff;" class="amp-wp-93316a4">ISO-8859-1</span></a><span data-amp-original-style="color:#000000;" class="amp-wp-9456def">，</span>aka Latin-1（同样在任何一个西欧语言中都会有用的），如果你想要用上面这些编码来处理俄文或者是希伯来字母，那么你会得到大量的问号。与之对应的，UTF7,8,16以及32等编码则有非常棒的特性，它们可以正确表示任何Unicode code point<span data-amp-original-style="color:#000000;" class="amp-wp-9456def">。</span></p>
<p align="justify"> </p>
<p align="center"><strong><span data-amp-original-style="color:#000000;" class="amp-wp-9456def">关于编码的最重要的事实</span></strong></p>
<p align="justify"> </p>
<p align="justify"><span data-amp-original-style="color:#000000;" class="amp-wp-9456def">如果你把我之前所解释的所有一切都忘光了，请你至少记住一个最最最重要的事实。<strong>如果你有一个字符串，而不知道它的编码，那么这个字符串是毫无意义的。</strong>你再也不能把脑袋埋到沙子里，然后假装“普通”文本就是</span>ASCII。</p>
<p align="justify"> </p>
<p align="center"><strong><span data-amp-original-style="color:#000000;" class="amp-wp-9456def">这世界上就没有普通文本这回事。</span></strong></p>
<p align="justify"> </p>
<p align="justify"><span data-amp-original-style="color:#000000;" class="amp-wp-9456def">如果你有一个字符串，不管是在内存里，还是在文件里，还是在一封</span>email中，你必须知道它的确切的编码，否则你不可能做到正确的解释它，或是向用户显示。</p>
<p align="justify"> </p>
<p align="justify"><span data-amp-original-style="color:#000000;" class="amp-wp-9456def">几乎所有的像是“我的网站看起来像是在胡言乱语”，或者是“如果我在邮件里用了方言字母，那么她就无法阅读”的傻逼问题，几乎都是由于某些天真犯二的程序员没能理解下面这个事实：如果你不告诉我一个特定的字符串用的是哪一种编码，</span>UTF-8或是ASCII或是ISO 8859-1（Latin 1）或是Windows 1252（西欧），那么我就不可能正确的显示这个字符串，甚至不可能知道哪里是它的结尾。有上百种编码格式的存在，并且一旦出现大于127的code point，那么一切就全完了。</p>
<p align="justify"> </p>
<p align="justify"><span data-amp-original-style="color:#000000;" class="amp-wp-9456def">一个字符串是如何编码的，我们要如何维护这样一个信息呢？好吧，关于这件事情，有一些标准做法。对于</span>email消息，你最好在正文的头部，加入这样一行字符串：</p>
<p align="justify"> </p>
<p align="center"><strong><span data-amp-original-style="color:#000000;" class="amp-wp-9456def">Content-Type: text/plain; charset=”UTF-8″</span></strong></p>
<p align="justify"> </p>
<p align="justify"><span data-amp-original-style="color:#000000;" class="amp-wp-9456def">对于网页页面，最早的想法是由</span>web服务器返回一个类似的Content-Type，把这个信息放在与网页内容一同传输的HTTP报头中，不是放在HTML页面里，而是放在响应报头里，在HTML内容之前被发送。</p>
<p align="justify"> </p>
<p align="justify"><span data-amp-original-style="color:#000000;" class="amp-wp-9456def">但这种做法会导致问题。想象一下你有一个巨大的</span>web 服务器，上面跑着很多网站，并且有着由不同的人贡献的数以百计的网页。这些人创建网页的时候，他们所使用的Microsoft FrontPage可能以任何它觉得合适的方式来选择编码进行存储。web服务器本身对此一无所知，它不可能知道每一个文件是以什么编码格式写的，所以它 也就无法为之发送Content-Type头。</p>
<p align="justify"> </p>
<p align="justify"><span data-amp-original-style="color:#000000;" class="amp-wp-9456def">如果你使用某种特殊的</span>tag，把 HTML文件所使用的Content-Type直接写到HTML文件里，就会让后续的事情变得更加方便。当然这种做法会让某些纯化论者感到抓狂…如果你不 知道这个HTML文件的编码，你要如何去读取它？！幸运的是，几乎所有的编码对32到127之间的字符都是同样对待的，于是，在需要使用任何诡异的字母之 前，你总是可以在HTML页面中读取到至少像下面这样多的内容：</p>
<p align="justify"> </p>
<p align="left"><strong><span data-amp-original-style="color:#000000;" class="amp-wp-9456def"><html></span></strong></p>
<p align="left"><strong><span data-amp-original-style="color:#000000;" class="amp-wp-9456def"><head></span></strong></p>
<p align="left"><strong><span data-amp-original-style="color:#000000;" class="amp-wp-9456def"><meta http-equiv=”Content-Type” content=”text/html; charset=utf-8″></span></strong></p>
<p align="justify"> </p>
<p align="justify"><span data-amp-original-style="color:#000000;" class="amp-wp-9456def">但是需要注意的是，这个</span>meta tag必须是<head>节中最先出现的东西。因为只要网页浏览器见到这个tag，它就会停止解析这个页面，并且使用你所指定的编码开始重新解释整个页面。</p>
<p align="justify"> </p>
<p align="justify"><span data-amp-original-style="color:#000000;" class="amp-wp-9456def">如果网页浏览器即无法从</span>http报头也 无法从HTML的meta标记中找到任何Content-Type信息，那么它们会如何对待这个网页呢？事实上，Internet Explorer做了一些有趣的事情，它基于一种启发式的方法去猜（依照典型编码的典型文本中，各种不同的语言使其字节呈现不同的分布频率的规律）。因为 各种旧的8bit代码页会尝试把他们国家的字母放在128～255中不同的区间段里，同时又由于每一种人类语言对字母的使用都呈现不同的统计特征，所以上 述方案，有一定的概率是可以工作的。这做法是很怪异的，这使得那些天真无邪的网页作者，在从来不知道每个HTML页面都需要一个Content-Type 头的情况下继续写网页，并且当他们在浏览器中查看时，发现一切都是正常的。直到有一天，他们写了点东西，与他们母语中的字母频率分布不相符合，于是 Internet Explorer便认为这是一段韩语，然后，就这么继续显示出来……我相信，这证明了<a href="http://en.wikipedia.org/wiki/Robustness_principle" rel="nofollow"><span data-amp-original-style="color:#0000ff;" class="amp-wp-93316a4">Postel</span>法则</a><span data-amp-original-style="color:#000000;" class="amp-wp-9456def">中所说的，“宽容的对待输入，而保守的输出”，坦白说并不是一个好的工程原则。无论如何，当这个网站的可怜的读者，在面对这个被显示成韩语（并且事实上是根本无法理解的韩语）而事实上是保加利亚语的网页时，要怎么做呢？他使用</span>View|Encoding<span data-amp-original-style="color:#000000;" class="amp-wp-9456def">菜单，并且依次尝试每一个编码的选项（至少有十数个东欧语言选项），直到一切变得正常。但是，事实上，多数人都不知道要这么做。</span></p>
<p align="justify"> </p>
<p align="center"><a href="http://www.windameister.org/blog/wp-content/uploads/2012/05/clip_image00913.jpg" rel="nofollow"><amp-img title="clip_image009[13]" src="http://www.windameister.org/blog/wp-content/uploads/2012/05/clip_image00913_thumb.jpg" alt="clip_image009[13]" height="225" width="300" class="amp-wp-enforced-sizes i-amphtml-layout-intrinsic i-amphtml-layout-size-defined" layout="intrinsic" i-amphtml-layout="intrinsic"><i-amphtml-sizer class="i-amphtml-sizer"><img alt="" aria-hidden="true" class="i-amphtml-intrinsic-sizer" role="presentation" src="data:image/svg+xml;charset=utf-8,<svg%20height=%22225%22%20width=%22300%22%20xmlns=%22http://www.w3.org/2000/svg%22%20version=%221.1%22/>"></i-amphtml-sizer><noscript><img title="clip_image009[13]" src="http://www.windameister.org/blog/wp-content/uploads/2012/05/clip_image00913_thumb.jpg" alt="clip_image009[13]" border="0" height="225" width="300"></noscript></amp-img></a></p>
<p align="justify"> </p>
<p align="justify"><span data-amp-original-style="color:#000000;" class="amp-wp-9456def">在</span><a href="http://www.fogcreek.com/FogBUGZ/" rel="nofollow"><span data-amp-original-style="color:#0000ff;" class="amp-wp-93316a4">我公司</span></a><span data-amp-original-style="color:#000000;" class="amp-wp-9456def">所发布的网站管理软件</span><a href="http://www.fogcreek.com/CityDesk/" rel="nofollow"><span data-amp-original-style="color:#0000ff;" class="amp-wp-93316a4">CityDesk</span></a><span data-amp-original-style="color:#000000;" class="amp-wp-9456def">的最新版本中，我们决定内部的一切都用</span>UCS-2(2字节）Unicode表示，这也是Visual Basic，COM以及Windows NT/2000/XP<span data-amp-original-style="color:#000000;" class="amp-wp-9456def">所使用的原生的字符串类型。</span></p>
<p align="justify"> </p>
<p align="justify"><span data-amp-original-style="color:#000000;" class="amp-wp-9456def">在</span>C++代码中，这意味着当定义字符串时，我们使用<strong>wchar_t</strong>（宽字符）来替代<strong>char</strong>，并且使用<strong>wcs</strong>系函数来替代<strong>str</strong>系函数（例如，使用<strong>wcscat</strong>和<strong>wcslen</strong>而不是<strong>strcat</strong>和<strong>strlen</strong>）。要在C代码中创建一个UCS-2的字符串，你只需要在字符串定义前增加一个<strong>L</strong>，如：<strong>L”Hello”</strong>。</p>
<p align="justify"> </p>
<p align="justify"><span data-amp-original-style="color:#000000;" class="amp-wp-9456def">当</span>CityDesk发布网页时，它将之转换为已经为网页浏览器所支持多年的UTF-8编码格式。这也是<em>Joel on Software</em>的<a href="http://www.joelonsoftware.com/navLinks/OtherLanguages.html" rel="nofollow"><span data-amp-original-style="color:#0000ff;" class="amp-wp-93316a4">全部</span>29种语言版本</a><span data-amp-original-style="color:#000000;" class="amp-wp-9456def">所使用的编码，并且我从来没有听到过任何一个人抱怨说在阅读它的时候遇到麻烦。</span></p>
<p align="justify"> </p>
<p align="justify"><span data-amp-original-style="color:#000000;" class="amp-wp-9456def">本文的篇幅有点长，并且我也不可能覆盖关于</span>Unicode和字符编码的所有话题，我希望的是，如果你已经阅读到这里，你已经知道了足够多的知识，我留给你的任务，就是回去编写程序，并且记得在对付疾病的时候使用抗生素，而不是水蛭和魔咒。</p>
<p align="justify"> </p>
<p align="justify"><span data-amp-original-style="color:#000000;" class="amp-wp-9456def"><strong>还想知道更多？</strong></span>你现在阅读的是<a href="http://www.joelonsoftware.com/" rel="nofollow"><span data-amp-original-style="color:#0000ff;" class="amp-wp-93316a4">Joel on Software</span></a><span data-amp-original-style="color:#000000;" class="amp-wp-9456def">，这里填满了各种经年累月积累下来的关于软件开发，管理软件团队，设计用户界面，成功运营一家软件公司，以及橡皮鸭的各种胡言乱语的文章。</span></p>
<p align="justify"> </p>
<p align="justify"><span data-amp-original-style="color:#000000;" class="amp-wp-9456def"><strong>关于作者：</strong></span>我 是Joel Spolsky，Fog Creek Software的共同创始人，Fog Creek Software是一家纽约的公司，它证明了你可以在对待程序员们很好的同时创造出很高的利润。这里的程序员拥有私人的办公室，免费的午餐，以及每周40 个小时的工作时间。公司的客户只为他们满意的软件付费。我们创造了一个更先进的<a href="http://www.fogcreek.com/fogbugz/" rel="nofollow"><span data-amp-original-style="color:#0000ff;" class="amp-wp-93316a4">bug</span>跟踪</a><span data-amp-original-style="color:#000000;" class="amp-wp-9456def">软件</span>FogBugz，以及软件开发工具。<a href="http://www.fogcreek.com/kiln/" rel="nofollow"><span data-amp-original-style="color:#0000ff;" class="amp-wp-93316a4">Kiln</span></a><span data-amp-original-style="color:#000000;" class="amp-wp-9456def">，一个分布式的源代码管理系统，如果你迷恋</span>svn，它会让你非常惊喜，以及Fog Creek Copilot，可以让<a href="https://www.copilot.com/" rel="nofollow"><span data-amp-original-style="color:#0000ff;" class="amp-wp-93316a4">访问远程桌面</span></a><span data-amp-original-style="color:#000000;" class="amp-wp-9456def">变得更加容易。我同时也是</span><a href="http://stackoverflow.com/" rel="nofollow"><span data-amp-original-style="color:#0000ff;" class="amp-wp-93316a4">Stack Overflow</span></a><span data-amp-original-style="color:#000000;" class="amp-wp-9456def">的共同创始人。</span></p>
<p align="justify"> </p>
<p align="justify"> </p>
<p align="justify"><span data-amp-original-style="color:#000000;" class="amp-wp-9456def"><strong>译注</strong></span>：本文对Unicode和编码的解释非常棒，将编码和字符集的来龙去脉解释得深入浅出，是每个合格的程序员所必知必会的基础知识，本人在阅读<a href="http://book.douban.com/subject/3745143/" rel="nofollow">《Game Engine Architecture》</a>一书时，了解到此文，遂生出翻译的兴趣，翻译的过程中确又发现再次理清了若干此前未曾真正理解的概念，只因英文水平和精力有限，难免有所错漏，如有指正，不吝感激。</p>
</div>
</div>
</div>
<div class="more-toolbox">
<div class="left-toolbox">
<ul class="toolbox-list">
<li class="tool-item tool-active is-like "><a><br>
      <svg class="icon" aria-hidden="true"><br>
       <use xlink:href="#csdnc-thumbsup"></use><br>
      </svg><span class="name">点赞</span> <span class="count"></span> </a></li>
<li class="tool-item tool-active is-collection "><a data-report-click='{"mod":"popu_824"}'><br>
      <svg class="icon" aria-hidden="true"><br>
       <use xlink:href="#icon-csdnc-Collection-G"></use><br>
      </svg><span class="name">收藏</span></a></li>
<li class="tool-item tool-active is-share"><a data-report-click='{"mod":"1582594662_002"}'><br>
      <svg class="icon" aria-hidden="true"><br>
       <use xlink:href="#icon-csdnc-fenxiang"></use><br>
      </svg>分享</a></li>
<p>    <br>
     </p>
<li class="tool-item tool-more"> <a><br>
      <svg class="icon" viewbox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200"><br>
       <defs>

<p>       </p></defs>
       <path d="M179.176 499.222m-113.245 0a113.245 113.245 0 1 0 226.49 0 113.245 113.245 0 1 0-226.49 0Z"></path>
       <path d="M509.684 499.222m-113.245 0a113.245 113.245 0 1 0 226.49 0 113.245 113.245 0 1 0-226.49 0Z"></path>
       <path d="M846.175 499.222m-113.245 0a113.245 113.245 0 1 0 226.49 0 113.245 113.245 0 1 0-226.49 0Z"></path>
      </svg> </a> 
<ul class="more-box">
<li class="item"><a class="article-report">文章举报</a></li>
</ul>
</li>
</ul></div>
</div>
<div class="person-messagebox">
<div class="left-message">
   <a href="https://blog.csdn.net/wolf96"> <amp-img src="https://profile.csdnimg.cn/6/4/5/3_wolf96" class="avatar_pic amp-wp-enforced-sizes i-amphtml-layout-intrinsic i-amphtml-layout-size-defined" width="75" height="75" layout="intrinsic" i-amphtml-layout="intrinsic"><i-amphtml-sizer class="i-amphtml-sizer"><img alt="" aria-hidden="true" class="i-amphtml-intrinsic-sizer" role="presentation" src="data:image/svg+xml;charset=utf-8,<svg%20height=%2275%22%20width=%2275%22%20xmlns=%22http://www.w3.org/2000/svg%22%20version=%221.1%22/>"></i-amphtml-sizer><noscript><img src="https://profile.csdnimg.cn/6/4/5/3_wolf96" class="avatar_pic" width="75" height="75"></noscript></amp-img> <amp-img src="https://g.csdnimg.cn/static/user-reg-year/1x/6.png" class="user-years amp-wp-enforced-sizes i-amphtml-layout-intrinsic i-amphtml-layout-size-defined" width="22" height="23" layout="intrinsic" i-amphtml-layout="intrinsic"><i-amphtml-sizer class="i-amphtml-sizer"><img alt="" aria-hidden="true" class="i-amphtml-intrinsic-sizer" role="presentation" src="data:image/svg+xml;charset=utf-8,<svg%20height=%2223%22%20width=%2222%22%20xmlns=%22http://www.w3.org/2000/svg%22%20version=%221.1%22/>"></i-amphtml-sizer><noscript><img src="https://g.csdnimg.cn/static/user-reg-year/1x/6.png" class="user-years" width="22" height="23"></noscript></amp-img> </a>
  </div>
<div class="middle-message">
<div class="title">
    <span class="tit"><a href="https://blog.csdn.net/wolf96" data-report-click='{"mod":"popu_379"}' target="_blank" rel="noopener noreferrer">wolf96</a></span><br>
    <span class="flag expert"> <a href="https://blog.csdn.net/home/help.html#classicfication" target="_blank" rel="noopener noreferrer"><br>
      <svg class="icon" aria-hidden="true"><br>
       <use xlink:href="#csdnc-blogexpert"></use><br>
      </svg> 博客专家 </a> </span>
   </div>
<div class="text">
    <span>发布了230 篇原创文章</span> ·<br>
    <span>获赞 514</span> ·<br>
    <span>访问量 115万+</span>
   </div>
</div>
<div class="right-message">
   <a href="https://bbs.csdn.net/topics/395525739" target="_blank" class="btn btn-sm btn-red-hollow bt-button personal-messageboard" rel="noopener noreferrer">他的留言板 </a><br>
   <a class="btn btn-sm  bt-button personal-watch" data-report-click='{"mod":"popu_379"}'>关注</a>
  </div>
</div>
</div>
	</div>

	<footer class="amp-wp-article-footer">
			<div class="amp-wp-meta amp-wp-tax-category">
		Categories: Uncategorized	</div>

	</footer>
</article>

<footer class="amp-wp-footer">
	<div>
		<h2>有组织在!</h2>
		<a href="#top" class="back-to-top">Back to top</a>
	</div>
</footer>




</body></html>
