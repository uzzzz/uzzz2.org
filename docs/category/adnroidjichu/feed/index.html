<?xml version="1.0" encoding="UTF-8"?><rss version="2.0"
	xmlns:content="http://purl.org/rss/1.0/modules/content/"
	xmlns:wfw="http://wellformedweb.org/CommentAPI/"
	xmlns:dc="http://purl.org/dc/elements/1.1/"
	xmlns:atom="http://www.w3.org/2005/Atom"
	xmlns:sy="http://purl.org/rss/1.0/modules/syndication/"
	xmlns:slash="http://purl.org/rss/1.0/modules/slash/"
	>

<channel>
	<title>Adnroid基础 &#8211; 有组织在!</title>
	<atom:link href="https://uzzz.org/category/adnroidjichu/feed" rel="self" type="application/rss+xml" />
	<link>http://uzzz.org/</link>
	<description></description>
	<lastBuildDate>Wed, 07 Sep 2016 08:54:37 +0000</lastBuildDate>
	<language>en-US</language>
	<sy:updatePeriod>
	hourly	</sy:updatePeriod>
	<sy:updateFrequency>
	1	</sy:updateFrequency>
	<generator>https://wordpress.org/?v=5.2.4</generator>

<image>
	<url>https://uzzz.org/wp-content/uploads/2019/10/cropped-icon-32x32.png</url>
	<title>Adnroid基础 &#8211; 有组织在!</title>
	<link>http://uzzz.org/</link>
	<width>32</width>
	<height>32</height>
</image> 
	<item>
		<title>夜间模式的简单实现</title>
		<link>https://uzzz.org/article/1427.html</link>
				<pubDate>Wed, 07 Sep 2016 08:54:37 +0000</pubDate>
		<dc:creator><![CDATA[fandyvon]]></dc:creator>
				<category><![CDATA[Adnroid基础]]></category>

		<guid isPermaLink="false">https://uzzz.org/article/1427.html</guid>
				<description><![CDATA[看到很多APP应用上都有一个夜间模式，后来就想自己实现一个写写玩玩。下面是简单实现的一种夜间模式，不喜勿怪。 首先看下最终效果图（因为本人不会做gif图，所以&#8230;.）： 由于文笔能力有限就不说别的了，直接上代码了。 先增加两个style &#60;!--白天主题--&#62; &#60;style name="DayTheme" parent="Theme.AppCompat.Light.NoActionBar"&#62; &#60;item name="colorPrimary"&#62;@color/colorPrimary&#60;/item&#62; &#60;item name="colorPrimaryDark"&#62;@color/colorPrimaryDark&#60;/item&#62; &#60;item name="colorAccent"&#62;@color/colorAccent&#60;/item&#62; &#60;item name="myBackground"&#62;@android:color/white&#60;/item&#62; &#60;item name="myTextColor"&#62;@android:color/black&#60;/item&#62; &#60;/style&#62; &#60;!--夜间主题--&#62; &#60;style name="NightTheme" parent="Theme.AppCompat.Light.NoActionBar"&#62; &#60;item name="colorPrimary"&#62;@color/color3F3F3F&#60;/item&#62; &#60;item name="colorPrimaryDark"&#62;@color/color3A3A3A&#60;/item&#62; &#60;item name="colorAccent"&#62;@color/color868686&#60;/item&#62; &#60;item name="myBackground"&#62;@color/color3F3F3F&#60;/item&#62; &#60;item name="myTextColor"&#62;@color/color8A9599&#60;/item&#62; &#60;/style&#62; 布局xml &#60;?xml version="1.0" encoding="utf-8"?&#62; &#60;LinearLayout xmlns:android="http://schemas.android.com/apk/res/android" xmlns:tools="http://schemas.android.com/tools" android:id="@+id/ll_layout" android:layout_width="match_parent" android:layout_height="match_parent" android:orientation="vertical" android:background="?attr/myBackground" tools:context="com.sunshine.rxjavademo.ui.NightModeActivity"&#62; &#60;CheckBox android:id="@+id/cb_mode" android:layout_width="match_parent" android:layout_height="wrap_content" android:text="夜间模式"/&#62; &#60;TextView android:id="@+id/tv_view" android:layout_width="match_parent" android:layout_height="wrap_content" android:text="我是TextView" android:textColor="@android:color/black" android:gravity="center"/&#62; &#60;ListView android:id="@+id/list_view" android:layout_width="match_parent" android:layout_height="match_parent" android:divider="@color/colorPrimary" android:dividerHeight="1dp"/&#62; &#60;/LinearLayout&#62; Activity实现 @Override protected void onCreate(Bundle savedInstanceState) { super.onCreate(savedInstanceState); setTheme(R.style.DayTheme); setContentView(R.layout.activity_night_mode); initView(); } private void initView() { linearLayoutList = new ArrayList&#60;&#62;(); llLayout = (LinearLayout) findViewById(R.id.ll_layout); linearLayoutList.add(llLayout); checkBoxList = new ArrayList&#60;&#62;(); cbMode = (CheckBox) findViewById(R.id.cb_mode); cbMode.setOnCheckedChangeListener(this); checkBoxList.add(cbMode); tvView = (TextView) findViewById(R.id.tv_view); textViewList = new ArrayList&#60;&#62;(); textViewList.add(tvView); } @Override public void onCheckedChanged(CompoundButton compoundButton, boolean b) { if (b){ setTheme(R.style.NightTheme); refreshUI(); }else { setTheme(R.style.DayTheme); refreshUI(); } } private void refreshUI() { TypedValue background = new TypedValue();//背景色 TypedValue textColor = new TypedValue();//字体颜色 Resources.Theme theme = getTheme(); theme.resolveAttribute(R.attr.myBackground, background, true); theme.resolveAttribute(R.attr.myTextColor, textColor, true); for (LinearLayout layout : linearLayoutList) { layout.setBackgroundResource(background.resourceId); } for (CheckBox checkBox : checkBoxList) { checkBox.setBackgroundResource(background.resourceId); } for (TextView textView : textViewList){ textView.setBackgroundResource(background.resourceId); } Resources resources = getResources();]]></description>
								<content:encoded><![CDATA[<div id="article_content" class="article_content clearfix">
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-3019150162.css">
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-3019150162.css">
<div class="htmledit_views" id="content_views">
<p>看到很多APP应用上都有一个夜间模式，后来就想自己实现一个写写玩玩。下面是简单实现的一种夜间模式，不喜勿怪。</p>
<p>首先看下最终效果图（因为本人不会做gif图，所以&#8230;.）：</p>
<p><img src="" alt=""><img src="" alt=""><img src="https://uzshare.com/_p?https://img-blog.csdn.net/20160907165536623?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQv/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt=""><img src="https://uzshare.com/_p?https://img-blog.csdn.net/20160907165553661?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQv/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt=""></p>
<p></p>
<p>由于文笔能力有限就不说别的了，直接上代码了。</p>
<p>先增加两个style</p>
</p>
<pre><code class="language-html">&lt;!--白天主题--&gt;
    &lt;style name="DayTheme" parent="Theme.AppCompat.Light.NoActionBar"&gt;
        &lt;item name="colorPrimary"&gt;@color/colorPrimary&lt;/item&gt;
        &lt;item name="colorPrimaryDark"&gt;@color/colorPrimaryDark&lt;/item&gt;
        &lt;item name="colorAccent"&gt;@color/colorAccent&lt;/item&gt;
        &lt;item name="myBackground"&gt;@android:color/white&lt;/item&gt;
        &lt;item name="myTextColor"&gt;@android:color/black&lt;/item&gt;
    &lt;/style&gt;

    &lt;!--夜间主题--&gt;
    &lt;style name="NightTheme" parent="Theme.AppCompat.Light.NoActionBar"&gt;
        &lt;item name="colorPrimary"&gt;@color/color3F3F3F&lt;/item&gt;
        &lt;item name="colorPrimaryDark"&gt;@color/color3A3A3A&lt;/item&gt;
        &lt;item name="colorAccent"&gt;@color/color868686&lt;/item&gt;
        &lt;item name="myBackground"&gt;@color/color3F3F3F&lt;/item&gt;
        &lt;item name="myTextColor"&gt;@color/color8A9599&lt;/item&gt;
    &lt;/style&gt;</code></pre>
</p>
<p></p>
<p>布局xml</p>
</p>
<pre><code class="language-html">&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/ll_layout"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    android:background="?attr/myBackground"
    tools:context="com.sunshine.rxjavademo.ui.NightModeActivity"&gt;
    &lt;CheckBox
        android:id="@+id/cb_mode"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="夜间模式"/&gt;
    &lt;TextView
        android:id="@+id/tv_view"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="我是TextView"
        android:textColor="@android:color/black"
        android:gravity="center"/&gt;
    &lt;ListView
        android:id="@+id/list_view"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:divider="@color/colorPrimary"
        android:dividerHeight="1dp"/&gt;
&lt;/LinearLayout&gt;</code></pre>
<p> Activity实现 </p>
</p>
<pre><code class="language-java">  @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setTheme(R.style.DayTheme);
        setContentView(R.layout.activity_night_mode);
        initView();
    }

    private void initView() {
        linearLayoutList = new ArrayList&lt;&gt;();
        llLayout = (LinearLayout) findViewById(R.id.ll_layout);
        linearLayoutList.add(llLayout);
        checkBoxList = new ArrayList&lt;&gt;();
        cbMode = (CheckBox) findViewById(R.id.cb_mode);
        cbMode.setOnCheckedChangeListener(this);
        checkBoxList.add(cbMode);
        tvView = (TextView) findViewById(R.id.tv_view);
        textViewList = new ArrayList&lt;&gt;();
        textViewList.add(tvView);
    }

    @Override
    public void onCheckedChanged(CompoundButton compoundButton, boolean b) {
        if (b){
            setTheme(R.style.NightTheme);
            refreshUI();
        }else {
            setTheme(R.style.DayTheme);
            refreshUI();
        }
    }

    private void refreshUI() {
        TypedValue background = new TypedValue();//背景色
        TypedValue textColor = new TypedValue();//字体颜色
        Resources.Theme theme = getTheme();
        theme.resolveAttribute(R.attr.myBackground, background, true);
        theme.resolveAttribute(R.attr.myTextColor, textColor, true);


        for (LinearLayout layout : linearLayoutList) {
            layout.setBackgroundResource(background.resourceId);
        }
        for (CheckBox checkBox : checkBoxList) {
            checkBox.setBackgroundResource(background.resourceId);
        }

        for (TextView textView : textViewList){
            textView.setBackgroundResource(background.resourceId);
        }

        Resources resources = getResources();
        for (CheckBox checkBox : checkBoxList) {
            checkBox.setTextColor(resources.getColor(textColor.resourceId));
        }

        for (TextView textView : textViewList) {
            textView.setTextColor(resources.getColor(textColor.resourceId));
        }
        refreshStatusBar();
    }

    private void refreshStatusBar() {
        if (Build.VERSION.SDK_INT &gt;= 21) {
            TypedValue typedValue = new TypedValue();
            Resources.Theme theme = getTheme();
            theme.resolveAttribute(R.attr.colorPrimary, typedValue, true);
            getWindow().setStatusBarColor(getResources().getColor(typedValue.resourceId));
        }
    }
}</code></pre>
<p> 以上就是夜间模式的简单实现，有不当之处请多多指教。互相学习。 </p>
<p> 
 </div>
</div>
]]></content:encoded>
										</item>
	</channel>
</rss>
