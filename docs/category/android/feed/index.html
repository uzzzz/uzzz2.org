<?xml version="1.0" encoding="UTF-8"?><rss version="2.0"
	xmlns:content="http://purl.org/rss/1.0/modules/content/"
	xmlns:wfw="http://wellformedweb.org/CommentAPI/"
	xmlns:dc="http://purl.org/dc/elements/1.1/"
	xmlns:atom="http://www.w3.org/2005/Atom"
	xmlns:sy="http://purl.org/rss/1.0/modules/syndication/"
	xmlns:slash="http://purl.org/rss/1.0/modules/slash/"
	>

<channel>
	<title>android &#8211; 有组织在!</title>
	<atom:link href="https://uzzz.org/category/android/feed" rel="self" type="application/rss+xml" />
	<link>http://uzzz.org/</link>
	<description></description>
	<lastBuildDate>Thu, 16 May 2019 11:41:22 +0000</lastBuildDate>
	<language>en-US</language>
	<sy:updatePeriod>
	hourly	</sy:updatePeriod>
	<sy:updateFrequency>
	1	</sy:updateFrequency>
	<generator>https://wordpress.org/?v=5.2.4</generator>

<image>
	<url>https://uzzz.org/wp-content/uploads/2019/10/cropped-icon-32x32.png</url>
	<title>android &#8211; 有组织在!</title>
	<link>http://uzzz.org/</link>
	<width>32</width>
	<height>32</height>
</image> 
	<item>
		<title>Flutter资源管理</title>
		<link>https://uzzz.org/article/1507.html</link>
				<pubDate>Thu, 16 May 2019 11:41:22 +0000</pubDate>
		<dc:creator><![CDATA[fandyvon]]></dc:creator>
				<category><![CDATA[android]]></category>
		<category><![CDATA[flutter]]></category>

		<guid isPermaLink="false">https://uzzz.org/article/1507.html</guid>
				<description><![CDATA[资源管理 Flutter应用程序可以包含代码和 assets（有时称为资源）。assets是会打包到程序安装包中的，可在运行时访问。常见类型的assets包括静态数据（例如JSON文件）、配置文件、图标和图片（JPEG，WebP，GIF，动画WebP / GIF，PNG，BMP和WBMP）等。 指定 assets 和包管理一样，Flutter也使用pubspec.yaml文件来管理应用程序所需的资源。举一个例子: flutter: assets: - assets/my_icon.png - assets/background.png assets指定应包含在应用程序中的文件。 每个asset都通过相对于pubspec.yaml文件所在位置的显式路径进行标识。asset的声明顺序是无关紧要的。asset的实际目录可以是任意文件夹（在本示例中是assets）。 在构建期间，Flutter将asset放置到称为&#160;asset bundle&#160;的特殊存档中，应用程序可以在运行时读取它们（但不能修改）。 Asset 变体（variant） 构建过程支持asset变体的概念：不同版本的asset可能会显示在不同的上下文中。 在pubspec.yaml的assets部分中指定asset路径时，构建过程中，会在相邻子目录中查找具有相同名称的任何文件。这些文件随后会与指定的asset一起被包含在asset bundle中。 例如，如果应用程序目录中有以下文件: …/pubspec.yaml …/graphics/my_icon.png …/graphics/background.png …/graphics/dark/background.png …etc. 然后pubspec.yaml文件中只需包含: flutter: assets: - graphics/background.png 那么这两个graphics/background.png和graphics/dark/background.png&#160;都将包含在您的asset bundle中。前者被认为是main asset&#160;（主资源），后者被认为是一种变体（variant）。 在选择匹配当前设备分辨率的图片时，Flutter会使用到asset变体（见下文），将来，Flutter可能会将这种机制扩展到本地化、阅读提示等方面。 加载 assets 您的应用可以通过AssetBundle对象访问其asset 。有两种主要方法允许从Asset bundle中加载字符串或图片(二进制)文件。 加载文本assets 通过rootBundle&#160;对象加载：每个Flutter应用程序都有一个rootBundle对象， 通过它可以轻松访问主资源包，直接使用package:flutter/services.dart中全局静态的rootBundle对象来加载asset即可。 通过&#160;DefaultAssetBundle&#160;加载：建议使用&#160;DefaultAssetBundle&#160;来获取当前BuildContext的AssetBundle。 这种方法不是使用应用程序构建的默认asset bundle，而是使父级widget在运行时动态替换的不同的AssetBundle，这对于本地化或测试场景很有用。 通常，可以使用DefaultAssetBundle.of()在应用运行时来间接加载asset（例如JSON文件），而在widget上下文之外，或其它AssetBundle句柄不可用时，可以使用rootBundle直接加载这些asset，例如： import 'dart:async' show Future; import 'package:flutter/services.dart' show rootBundle; Future&#60;String&#62; loadAsset() async { return await rootBundle.loadString('assets/config.json'); } 加载图片 类似于原生开发，Flutter也可以为当前设备加载适合其分辨率的图像。 声明分辨率相关的图片 assets AssetImage&#160;可以将asset的请求逻辑映射到最接近当前设备像素比例(dpi)的asset。为了使这种映射起作用，必须根据特定的目录结构来保存asset： …/image.png …/Mx/image.png …/Nx/image.png …etc. 其中M和N是数字标识符，对应于其中包含的图像的分辨率，也就是说，它们指定不同设备像素比例的图片。 主资源默认对应于1.0倍的分辨率图片。看一个例子： …/my_icon.png …/2.0x/my_icon.png …/3.0x/my_icon.png 在设备像素比率为1.8的设备上，.../2.0x/my_icon.png&#160;将被选择。对于2.7的设备像素比率，.../3.0x/my_icon.png将被选择。 如果未在Image&#160;widget上指定渲染图像的宽度和高度，那么Image&#160;widget将占用与主资源相同的屏幕空间大小。 也就是说，如果.../my_icon.png是72px乘72px，那么.../3.0x/my_icon.png应该是216px乘216px; 但如果未指定宽度和高度，它们都将渲染为72像素×72像素（以逻辑像素为单位）。 pubspec.yaml中asset部分中的每一项都应与实际文件相对应，但主资源项除外。当主资源缺少某个资源时，会按分辨率从低到高的顺序去选择 ，也就是说1x中没有的话会在2x中找，2x中还没有的话就在3x中找。 加载图片 要加载图片，可以使用&#160;AssetImage类。例如，我们可以从上面的asset声明中加载背景图片： Widget build(BuildContext context) { return new DecoratedBox( decoration: new BoxDecoration( image: new DecorationImage( image: new AssetImage('graphics/background.png'), ), ), ); } 注意，AssetImage&#160;并非是一个widget， 它实际上是一个ImageProvider，有些时候你可能期望直接得到一个显示图片的widget，那么你可以使用Image.asset()方法，如： Widget build(BuildContext context) { return Image.asset('graphics/background.png'); } 使用默认的 asset bundle 加载资源时，内部会自动处理分辨率等，这些处理对开发者来说是无感知的。 (如果使用一些更低级别的类，如&#160;ImageStream或&#160;ImageCache&#160;时你会注意到有与缩放相关的参数) 依赖包中的资源图片 要加载依赖包中的图像，必须给AssetImage提供package参数。 例如，假设您的应用程序依赖于一个名为“my_icons”的包，它具有如下目录结构： …/pubspec.yaml …/icons/heart.png …/icons/1.5x/heart.png …/icons/2.0x/heart.png …etc. 然后加载图像，使用: new AssetImage('icons/heart.png', package: 'my_icons') 或 new Image.asset('icons/heart.png', package: 'my_icons') 注意：包在使用本身的资源时也应该加上package参数来获取。 打包包中的 assets 如果在pubspec.yaml文件中声明了期望的资源，它将会打包到相应的package中。特别是，包本身使用的资源必须在pubspec.yaml中指定。 包也可以选择在其lib/文件夹中包含未在其pubspec.yaml文件中声明的资源。在这种情况下，对于要打包的图片，应用程序必须在pubspec.yaml中指定包含哪些图像。 例如，一个名为“fancy_backgrounds”的包，可能包含以下文件： …/lib/backgrounds/background1.png …/lib/backgrounds/background2.png …/lib/backgrounds/background3.png 要包含第一张图像，必须在pubspec.yaml的assets部分中声明它： flutter: assets: - packages/fancy_backgrounds/backgrounds/background1.png lib/是隐含的，所以它不应该包含在资产路径中。 特定平台 assets 上面的资源都是flutter应用中的，这些资源只有在Flutter框架运行之后才能使用，如果要给我们的应用设置APP图标或者添加启动图，那我们必须使用特定平台的assets。 设置APP图标 更新Flutter应用程序启动图标的方式与在本机Android或iOS应用程序中更新启动图标的方式相同。 Android 在Flutter项目的根目录中，导航到.../android/app/src/main/res目录，里面包含了各种资源文件夹（如mipmap-hdpi已包含占位符图像”ic_launcher.png”）。 只需按照Android开发人员指南中的说明， 将其替换为所需的资源，并遵守每种屏幕密度（dpi）的建议图标大小标准。 注意:&#160;如果您重命名.png文件，则还必须在您AndroidManifest.xml的&#60;application&#62;标签的android:icon属性中更新名称。 iOS 在Flutter项目的根目录中，导航到.../ios/Runner。该目录中Assets.xcassets/AppIcon.appiconset已经包含占位符图片。 只需将它们替换为适当大小的图片。保留原始文件名称。 更新启动页 在Flutter框架加载时，Flutter会使用本地平台机制绘制启动页。此启动页将持续到Flutter渲染应用程序的第一帧时。 注意:&#160;这意味着如果您不在应用程序的main()方法中调用runApp&#160;函数 （或者更具体地说，如果您不调用window.render去响应window.onDrawFrame）的话， 启动屏幕将永远持续显示。 Android 要将启动屏幕（splash screen）添加到您的Flutter应用程序， 请导航至.../android/app/src/main。在res/drawable/launch_background.xml，通过自定义drawable来实现自定义启动界面（你也可以直接换一张图片）。 iOS 要将图片添加到启动屏幕（splash screen）的中心，请导航至.../ios/Runner。在Assets.xcassets/LaunchImage.imageset，]]></description>
								<content:encoded><![CDATA[<div id="article_content" class="article_content clearfix">
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-3019150162.css">
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-3019150162.css">
<div class="htmledit_views" id="content_views">
<h1 id="资源管理">资源管理</h1>
<p>Flutter应用程序可以包含代码和 assets（有时称为资源）。assets是会打包到程序安装包中的，可在运行时访问。常见类型的assets包括静态数据（例如JSON文件）、配置文件、图标和图片（JPEG，WebP，GIF，动画WebP / GIF，PNG，BMP和WBMP）等。</p>
<h2 id="指定-assets">指定 assets</h2>
<p>和包管理一样，Flutter也使用<a href="https://www.dartlang.org/tools/pub/pubspec" rel="nofollow" data-token="bccfdb318f058c1c47375f5bbba695a7"><code>pubspec.yaml</code></a>文件来管理应用程序所需的资源。举一个例子:</p>
<pre class="has">
<code>flutter:
  assets:
    - assets/my_icon.png
    - assets/background.png
</code></pre>
<p><code>assets</code>指定应包含在应用程序中的文件。 每个asset都通过相对于<code>pubspec.yaml</code>文件所在位置的显式路径进行标识。asset的声明顺序是无关紧要的。asset的实际目录可以是任意文件夹（在本示例中是assets）。</p>
<p>在构建期间，Flutter将asset放置到称为&nbsp;<em>asset bundle</em>&nbsp;的特殊存档中，应用程序可以在运行时读取它们（但不能修改）。</p>
<h2 id="asset-变体（variant）">Asset 变体（variant）</h2>
<p>构建过程支持asset变体的概念：不同版本的asset可能会显示在不同的上下文中。 在<code>pubspec.yaml</code>的assets部分中指定asset路径时，构建过程中，会在相邻子目录中查找具有相同名称的任何文件。这些文件随后会与指定的asset一起被包含在asset bundle中。</p>
<p>例如，如果应用程序目录中有以下文件:</p>
<ul>
<li>…/pubspec.yaml</li>
<li>…/graphics/my_icon.png</li>
<li>…/graphics/background.png</li>
<li>…/graphics/dark/background.png</li>
<li>…etc.</li>
</ul>
<p>然后<code>pubspec.yaml</code>文件中只需包含:</p>
<pre class="has">
<code>flutter:
  assets:
    - graphics/background.png
</code></pre>
<p>那么这两个<code>graphics/background.png</code>和<code>graphics/dark/background.png</code>&nbsp;都将包含在您的asset bundle中。前者被认为是<em>main asset</em>&nbsp;（主资源），后者被认为是一种变体（variant）。</p>
<p>在选择匹配当前设备分辨率的图片时，Flutter会使用到asset变体（见下文），将来，Flutter可能会将这种机制扩展到本地化、阅读提示等方面。</p>
<h2 id="加载-assets">加载 assets</h2>
<p>您的应用可以通过<a href="https://docs.flutter.io/flutter/services/AssetBundle-class.html" rel="nofollow" data-token="7f3725a47b86a66f1ca07c2b4c151540"><code>AssetBundle</code></a>对象访问其asset 。有两种主要方法允许从Asset bundle中加载字符串或图片(二进制)文件。</p>
<h3 id="加载文本assets">加载文本assets</h3>
<ul>
<li>通过<a href="https://docs.flutter.io/flutter/services/rootBundle.html" rel="nofollow" data-token="1cf0d9d4630245bea0dc925cbeff037a"><code>rootBundle</code></a>&nbsp;对象加载：每个Flutter应用程序都有一个<a href="https://docs.flutter.io/flutter/services/rootBundle.html" rel="nofollow" data-token="1cf0d9d4630245bea0dc925cbeff037a"><code>rootBundle</code></a>对象， 通过它可以轻松访问主资源包，直接使用<code>package:flutter/services.dart</code>中全局静态的<code>rootBundle</code>对象来加载asset即可。</li>
<li>通过&nbsp;<a href="https://docs.flutter.io/flutter/widgets/DefaultAssetBundle-class.html" rel="nofollow" data-token="011e1ccf48027e1851d805dc257b0d64"><code>DefaultAssetBundle</code></a>&nbsp;加载：建议使用&nbsp;<a href="https://docs.flutter.io/flutter/widgets/DefaultAssetBundle-class.html" rel="nofollow" data-token="011e1ccf48027e1851d805dc257b0d64"><code>DefaultAssetBundle</code></a>&nbsp;来获取当前BuildContext的AssetBundle。 这种方法不是使用应用程序构建的默认asset bundle，而是使父级widget在运行时动态替换的不同的AssetBundle，这对于本地化或测试场景很有用。</li>
</ul>
<p>通常，可以使用<code>DefaultAssetBundle.of()</code>在应用运行时来间接加载asset（例如JSON文件），而在widget上下文之外，或其它<code>AssetBundle</code>句柄不可用时，可以使用<code>rootBundle</code>直接加载这些asset，例如：</p>
<pre class="has">
<code>import 'dart:async' show Future;
import 'package:flutter/services.dart' show rootBundle;

Future&lt;String&gt; loadAsset() async {
  return await rootBundle.loadString('assets/config.json');
}
</code></pre>
<h3 id="加载图片">加载图片</h3>
<p>类似于原生开发，Flutter也可以为当前设备加载适合其分辨率的图像。</p>
<p>声明分辨率相关的图片 assets</p>
<p><a href="https://docs.flutter.io/flutter/painting/AssetImage-class.html" rel="nofollow" data-token="f55c31f4385082daf84f7a4b91cc8094"><code>AssetImage</code></a>&nbsp;可以将asset的请求逻辑映射到最接近当前设备像素比例(dpi)的asset。为了使这种映射起作用，必须根据特定的目录结构来保存asset：</p>
<ul>
<li>…/image.png</li>
<li>…/<strong>M</strong>x/image.png</li>
<li>…/<strong>N</strong>x/image.png</li>
<li>…etc.</li>
</ul>
<p>其中M和N是数字标识符，对应于其中包含的图像的分辨率，也就是说，它们指定不同设备像素比例的图片。</p>
<p>主资源默认对应于1.0倍的分辨率图片。看一个例子：</p>
<ul>
<li>…/my_icon.png</li>
<li>…/2.0x/my_icon.png</li>
<li>…/3.0x/my_icon.png</li>
</ul>
<p>在设备像素比率为1.8的设备上，<code>.../2.0x/my_icon.png</code>&nbsp;将被选择。对于2.7的设备像素比率，<code>.../3.0x/my_icon.png</code>将被选择。</p>
<p>如果未在<code>Image</code>&nbsp;widget上指定渲染图像的宽度和高度，那么<code>Image</code>&nbsp;widget将占用与主资源相同的屏幕空间大小。 也就是说，如果<code>.../my_icon.png</code>是72px乘72px，那么<code>.../3.0x/my_icon.png</code>应该是216px乘216px; 但如果未指定宽度和高度，它们都将渲染为72像素×72像素（以逻辑像素为单位）。</p>
<p><code>pubspec.yaml</code>中asset部分中的每一项都应与实际文件相对应，但主资源项除外。当主资源缺少某个资源时，会按分辨率从低到高的顺序去选择 ，也就是说1x中没有的话会在2x中找，2x中还没有的话就在3x中找。</p>
<p>加载图片</p>
<p>要加载图片，可以使用&nbsp;<a href="https://docs.flutter.io/flutter/painting/AssetImage-class.html" rel="nofollow" data-token="f55c31f4385082daf84f7a4b91cc8094"><code>AssetImage</code></a>类。例如，我们可以从上面的asset声明中加载背景图片：</p>
<pre class="has">
<code>Widget build(BuildContext context) {
  return new DecoratedBox(
    decoration: new BoxDecoration(
      image: new DecorationImage(
        image: new AssetImage('graphics/background.png'),
      ),
    ),
  );
}
</code></pre>
<p>注意，<code>AssetImage</code>&nbsp;并非是一个widget， 它实际上是一个<code>ImageProvider</code>，有些时候你可能期望直接得到一个显示图片的widget，那么你可以使用<code>Image.asset()</code>方法，如：</p>
<pre class="has">
<code>Widget build(BuildContext context) {
  return Image.asset('graphics/background.png');
}
</code></pre>
<p>使用默认的 asset bundle 加载资源时，内部会自动处理分辨率等，这些处理对开发者来说是无感知的。 (如果使用一些更低级别的类，如&nbsp;<a href="https://docs.flutter.io/flutter/painting/ImageStream-class.html" rel="nofollow" data-token="a1646f087a00269aafc1693814a4a9e3"><code>ImageStream</code></a>或&nbsp;<a href="https://docs.flutter.io/flutter/painting/ImageCache-class.html" rel="nofollow" data-token="f53a0ed69d58cf3aeee6c54ec8917cd9"><code>ImageCache</code></a>&nbsp;时你会注意到有与缩放相关的参数)</p>
<p>依赖包中的资源图片</p>
<p>要加载依赖包中的图像，必须给<code>AssetImage</code>提供<code>package</code>参数。</p>
<p>例如，假设您的应用程序依赖于一个名为“my_icons”的包，它具有如下目录结构：</p>
<ul>
<li>…/pubspec.yaml</li>
<li>…/icons/heart.png</li>
<li>…/icons/1.5x/heart.png</li>
<li>…/icons/2.0x/heart.png</li>
<li>…etc.</li>
</ul>
<p>然后加载图像，使用:</p>
<pre class="has">
<code> new AssetImage('icons/heart.png', package: 'my_icons')
</code></pre>
<p>或</p>
<pre class="has">
<code>new Image.asset('icons/heart.png', package: 'my_icons')
</code></pre>
<p><strong>注意：包在使用本身的资源时也应该加上<code>package</code>参数来获取</strong>。</p>
<p>打包包中的 assets</p>
<p>如果在<code>pubspec.yaml</code>文件中声明了期望的资源，它将会打包到相应的package中。特别是，包本身使用的资源必须在<code>pubspec.yaml</code>中指定。</p>
<p>包也可以选择在其<code>lib/</code>文件夹中包含未在其<code>pubspec.yaml</code>文件中声明的资源。在这种情况下，对于要打包的图片，应用程序必须在<code>pubspec.yaml</code>中指定包含哪些图像。 例如，一个名为“fancy_backgrounds”的包，可能包含以下文件：</p>
<ul>
<li>…/lib/backgrounds/background1.png</li>
<li>…/lib/backgrounds/background2.png</li>
<li>…/lib/backgrounds/background3.png</li>
</ul>
<p>要包含第一张图像，必须在<code>pubspec.yaml</code>的assets部分中声明它：</p>
<pre class="has">
<code>flutter:
  assets:
    - packages/fancy_backgrounds/backgrounds/background1.png
</code></pre>
<p><code>lib/</code>是隐含的，所以它不应该包含在资产路径中。</p>
<h3 id="特定平台-assets">特定平台 assets</h3>
<p>上面的资源都是flutter应用中的，这些资源只有在Flutter框架运行之后才能使用，如果要给我们的应用设置APP图标或者添加启动图，那我们必须使用特定平台的assets。</p>
<p>设置APP图标</p>
<p>更新Flutter应用程序启动图标的方式与在本机Android或iOS应用程序中更新启动图标的方式相同。</p>
<ul>
<li>
<p>Android</p>
<p>在Flutter项目的根目录中，导航到<code>.../android/app/src/main/res</code>目录，里面包含了各种资源文件夹（如<code>mipmap-hdpi</code>已包含占位符图像”ic_launcher.png”）。 只需按照<a href="https://developer.android.com/guide/practices/ui_guidelines/icon_design_launcher.html#size" rel="nofollow" data-token="8d75fea0312e94b3570e000d496411ee">Android开发人员指南</a>中的说明， 将其替换为所需的资源，并遵守每种屏幕密度（dpi）的建议图标大小标准。</p>
<p><img alt="Android icon location" class="has" src="https://flutterchina.club/images/assets-and-images/android-icon-path.png"></p>
<blockquote>
<p><strong>注意:</strong>&nbsp;如果您重命名.png文件，则还必须在您<code>AndroidManifest.xml</code>的<code>&lt;application&gt;</code>标签的<code>android:icon</code>属性中更新名称。</p>
</blockquote>
</li>
<li>
<p>iOS</p>
<p>在Flutter项目的根目录中，导航到<code>.../ios/Runner</code>。该目录中<code>Assets.xcassets/AppIcon.appiconset</code>已经包含占位符图片。 只需将它们替换为适当大小的图片。保留原始文件名称。</p>
<p><img alt="iOS icon location" class="has" src="https://flutterchina.club/images/assets-and-images/ios-icon-path.png"></p>
</li>
</ul>
<p>更新启动页</p>
<p><img alt="Launch screen" class="has" src="https://flutterchina.club/images/assets-and-images/launch-screen.png"></p>
<p>在Flutter框架加载时，Flutter会使用本地平台机制绘制启动页。此启动页将持续到Flutter渲染应用程序的第一帧时。</p>
<blockquote>
<p><strong>注意:</strong>&nbsp;这意味着如果您不在应用程序的<code>main()</code>方法中调用<a href="https://docs.flutter.io/flutter/widgets/runApp.html" rel="nofollow" data-token="05c81e56468227aee5a5026b2bddbb44">runApp</a>&nbsp;函数 （或者更具体地说，如果您不调用<a href="https://docs.flutter.io/flutter/dart-ui/Window/render.html" rel="nofollow" data-token="5120b5441a4b77401dcf27d415ad6367"><code>window.render</code></a>去响应<a href="https://docs.flutter.io/flutter/dart-ui/Window/onDrawFrame.html" rel="nofollow" data-token="25780fdacfb07a475adb0baf6f572017"><code>window.onDrawFrame</code></a>）的话， 启动屏幕将永远持续显示。</p>
</blockquote>
<p>Android</p>
<p>要将启动屏幕（splash screen）添加到您的Flutter应用程序， 请导航至<code>.../android/app/src/main</code>。在<code>res/drawable/launch_background.xml</code>，通过自定义drawable来实现自定义启动界面（你也可以直接换一张图片）。</p>
<p>iOS</p>
<p>要将图片添加到启动屏幕（splash screen）的中心，请导航至<code>.../ios/Runner</code>。在<code>Assets.xcassets/LaunchImage.imageset</code>， 拖入图片，并命名为<code>LaunchImage.png</code>、<code>LaunchImage@2x.png</code>、<code>LaunchImage@3x.png</code>。 如果你使用不同的文件名，那您还必须更新同一目录中的<code>Contents.json</code>文件，图片的具体尺寸可以查看苹果官方的标准。</p>
<p>您也可以通过打开Xcode完全自定义storyboard。在Project Navigator中导航到<code>Runner/Runner</code>然后通过打开<code>Assets.xcassets</code>拖入图片，或者通过在LaunchScreen.storyboard中使用Interface Builder进行自定义。</p>
<p><img alt="Adding launch icons in Xcode" class="has" src="https://flutterchina.club/images/assets-and-images/ios-launchscreen-xcode.png"></p>
</p></div>
</div>
]]></content:encoded>
										</item>
		<item>
		<title>Activity页面变暗并且不可点击只能返回的问题</title>
		<link>https://uzzz.org/article/987.html</link>
				<pubDate>Fri, 12 Apr 2019 02:28:58 +0000</pubDate>
		<dc:creator><![CDATA[fandyvon]]></dc:creator>
				<category><![CDATA[android]]></category>

		<guid isPermaLink="false">https://uzzz.org/article/987.html</guid>
				<description><![CDATA[场景：一个Activity请求网络，当出现网络问题请求出错时，会弹出一个Dialog提示。但是，在结果返回之前就跳到了另一个Activity，使得之前那个Activity处于后台，此时如果回到之前的Activity会出现页面变暗，而且任何地方不能点击的现象。这是由于Activity处于后台，弹Dialog遇到问题没有弹出来，但是页面已经变暗了，并抢占了焦点，使得底部的控件看得见但不可点击。给人的感觉就是App死机了，只有点返回键才能激活页面。查了半天，只遇到一个知己遇到和我一样的问题，并提出来了。有人给了一些方案。如下：https://www.iteye.com/problems/77129 我的场景不太一样，Dialog弹出没有那么重要，极端情况下Dialog可以不弹出，只要页面不变暗并且不可点击。所以我的思路是：只要Activity不是可见的，就不在当前Activity上调用弹出Dialog的操作。具体操作如下： 在我的网络请求框架MyGernericCallback上作如下判断： //只有当Activity处于前台时，才在当前Activity上弹Dialog if (IsActivityForegroundUtil.isForeground((Activity) mContext)) { try { dialog.show(); } catch (Exception e) { e.printStackTrace(); } } IsActvityForegroundUtil.java import android.app.Activity; import android.app.ActivityManager; import android.content.ComponentName; import android.content.Context; import android.text.TextUtils; import java.util.List; public class IsActivityForegroundUtil { /** * 判断某个界面是否在前台 * * @param activity 要判断的Activity * @return 是否在前台显示 */ public static boolean isForeground(Activity activity) { return isForeground(activity, activity.getClass().getName()); } /** * 判断某个界面是否在前台 * * @param context Context * @param className 界面的类名 * @return 是否在前台显示 */ public static boolean isForeground(Context context, String className) { if (context == null &#124;&#124; TextUtils.isEmpty(className)) return false; ActivityManager am = (ActivityManager) context.getSystemService(Context.ACTIVITY_SERVICE); List&#60;ActivityManager.RunningTaskInfo&#62; list = am.getRunningTasks(1); if (list != null &#38;&#38; list.size() &#62; 0) { ComponentName cpn = list.get(0).topActivity; if (className.equals(cpn.getClassName())) return true; } return false; } } &#160;]]></description>
								<content:encoded><![CDATA[<div id="article_content" class="article_content clearfix">
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-3019150162.css">
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-3019150162.css">
<div class="htmledit_views" id="content_views">
<p>场景：一个Activity请求网络，当出现网络问题请求出错时，会弹出一个Dialog提示。但是，在结果返回之前就跳到了另一个Activity，使得之前那个Activity处于后台，此时如果回到之前的Activity会出现页面变暗，而且任何地方不能点击的现象。这是由于Activity处于后台，弹Dialog遇到问题没有弹出来，但是页面已经变暗了，并抢占了焦点，使得底部的控件看得见但不可点击。给人的感觉就是App死机了，只有点返回键才能激活页面。查了半天，只遇到一个知己遇到和我一样的问题，并提出来了。有人给了一些方案。如下：<a href="https://www.iteye.com/problems/77129" rel="nofollow" data-token="582c54994dec9d7e00e845d3139d625d">https://www.iteye.com/problems/77129</a></p>
<p>我的场景不太一样，Dialog弹出没有那么重要，极端情况下Dialog可以不弹出，只要页面不变暗并且不可点击。所以我的思路是：只要Activity不是可见的，就不在当前Activity上调用弹出Dialog的操作。具体操作如下：</p>
<p>在我的网络请求框架MyGernericCallback上作如下判断：</p>
<pre class="has">
<code>       //只有当Activity处于前台时，才在当前Activity上弹Dialog
        if (IsActivityForegroundUtil.isForeground((Activity) mContext)) {
            try {
                dialog.show();
            } catch (Exception e) {
                e.printStackTrace();
            }
        }</code></pre>
<p>IsActvityForegroundUtil.java</p>
<pre class="has">
<code>import android.app.Activity;
import android.app.ActivityManager;
import android.content.ComponentName;
import android.content.Context;
import android.text.TextUtils;

import java.util.List;

public class IsActivityForegroundUtil {

    /**
     * 判断某个界面是否在前台
     *
     * @param activity 要判断的Activity
     * @return 是否在前台显示
     */
    public static boolean isForeground(Activity activity) {
        return isForeground(activity, activity.getClass().getName());
    }

    /**
     * 判断某个界面是否在前台
     *
     * @param context   Context
     * @param className 界面的类名
     * @return 是否在前台显示
     */
    public static boolean isForeground(Context context, String className) {
        if (context == null || TextUtils.isEmpty(className))
            return false;
        ActivityManager am = (ActivityManager) context.getSystemService(Context.ACTIVITY_SERVICE);
        List&lt;ActivityManager.RunningTaskInfo&gt; list = am.getRunningTasks(1);
        if (list != null &amp;&amp; list.size() &gt; 0) {
            ComponentName cpn = list.get(0).topActivity;
            if (className.equals(cpn.getClassName()))
                return true;
        }
        return false;

    }
}
</code></pre>
<p>&nbsp;</p>
</p></div>
</div>
]]></content:encoded>
										</item>
		<item>
		<title>Android Deep Link</title>
		<link>https://uzzz.org/article/1597.html</link>
				<pubDate>Sun, 17 Dec 2017 13:22:03 +0000</pubDate>
		<dc:creator><![CDATA[fandyvon]]></dc:creator>
				<category><![CDATA[android]]></category>
		<category><![CDATA[读书笔记]]></category>

		<guid isPermaLink="false">https://uzzz.org/article/1597.html</guid>
				<description><![CDATA[Android Deep Link 官网参考文档 使用场景 用户在网页点击了一个链接以后，直接引导用户在本地应用中查看对应的内容。 原理 当我们点击或者自动化的网络请求会生成一个web URI intent，Android系统按照一定顺序去处理这个请求。 处理顺序为：1.打开所有可以处理本URL应用中用户默认选择的；2.打开唯一能处理这个URL的应用；3.将所有可以处理这个URL的应用展示在Dialog中让用户选择 基本步骤 在manifest文件中定义IntentFilter 建立对应处理的Activity (对于Android App Link而言)将本地内容与URL地址通过服务器上的Digital Asset Links文件关联起来 辅助工具 Android Studio的App Link Assistant使用说明：官方使用指南 分类 Deep Link,Android App Link Deep Link 配置 在Manifest中增加intent filter &#60;action&#62;: ACTION_VIEW &#60;category&#62;: 包含BROWSABLE,DEFAULT.BROWSABLE(必须包含，才可以处理来至l浏览器的Intent Filter) &#60;data&#62;: 指定可以响应的URI信息，至少包含scheme标签，可以使用path,pathPattern或者pathPrefix去处理相似的URI // 可以响应example://gizmos 和 http://www.example.com/gizmos的Activity &#60;activity android:name="com.example.android.GizmosActivity" android:label="@string/title_gizmos" &#62; &#60;intent-filter android:label="@string/filter_view_http_gizmos"&#62; &#60;action android:name="android.intent.action.VIEW" /&#62; &#60;category android:name="android.intent.category.DEFAULT" /&#62; &#60;category android:name="android.intent.category.BROWSABLE" /&#62; &#60;!-- Accepts URIs that begin with "http://www.example.com/gizmos” --&#62; &#60;data android:scheme="http" android:host="www.example.com" android:pathPrefix="/gizmos" /&#62; &#60;!-- note that the leading "/" is required for pathPrefix--&#62; &#60;/intent-filter&#62; &#60;intent-filter android:label="@string/filter_view_example_gizmos"&#62; &#60;action android:name="android.intent.action.VIEW" /&#62; &#60;category android:name="android.intent.category.DEFAULT" /&#62; &#60;category android:name="android.intent.category.BROWSABLE" /&#62; &#60;!-- Accepts URIs that begin with "example://gizmos” --&#62; &#60;data android:scheme="example" android:host="gizmos" /&#62; &#60;/intent-filter&#62; &#60;/activity&#62; 注意点 同一个Intent Filter中的&#60;data&#62;会进行合并组合 &#60;intent-filter&#62; ... &#60;data android:scheme="https" android:host="www.example.com" /&#62; &#60;data android:scheme="app" android:host="open.my.app" /&#62; &#60;/intent-filter&#62; // 会生成app://www.example.com 和 https://open.my.app 从Intent获取数据 一旦系统通过Intent Filter打开你的界面,可以从Intent中获取数据 @Override public void onCreate(Bundle savedInstanceState) { super.onCreate(savedInstanceState); setContentView(R.layout.main); Intent intent = getIntent(); String action = intent.getAction(); Uri data = intent.getData(); } mainfest文件里定义了定义了应用与网页的关系和如何处理这些链接 测试配置 $ adb shell am start -W -a android.intent.action.VIEW -d &#60;URI&#62; &#60;PACKAGE&#62; Android App Link 原因：将自己的应用作为URI的默认处理应用，从而减少弹出选择处理对应应用的对话框 本质：一种特殊的Deep Link 查看本机已经支持Android App Link的应用 adb shell dumpsys package domain-preferred-apps 或 adb]]></description>
								<content:encoded><![CDATA[<div id="article_content" class="article_content clearfix">
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-3019150162.css">
<div id="content_views" class="markdown_views prism-atom-one-dark">
  <!-- flowchart 箭头图标 勿删 --><br />
  <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
   <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
  </svg> </p>
<h1 id="android-deep-link">Android Deep Link</h1>
<p><a href="https://developer.android.com/training/app-links/deep-linking.html" rel="nofollow noopener noreferrer" target="_blank" data-token="577a5a854275b19010dac43688c7260c">官网参考文档</a></p>
<h2 id="使用场景">使用场景</h2>
<p>用户在网页点击了一个链接以后，直接引导用户在本地应用中查看对应的内容。</p>
<h2 id="原理">原理</h2>
<p>当我们点击或者自动化的网络请求会生成一个web URI intent，Android系统按照一定顺序去处理这个请求。 <br /> 处理顺序为：1.打开所有可以处理本URL应用中用户默认选择的；2.打开唯一能处理这个URL的应用；3.将所有可以处理这个URL的应用展示在Dialog中让用户选择</p>
<h2 id="基本步骤">基本步骤</h2>
<ol>
<li>在manifest文件中定义IntentFilter</li>
<li>建立对应处理的Activity</li>
<li>(对于Android App Link而言)将本地内容与URL地址通过服务器上的Digital Asset Links文件关联起来</li>
</ol>
<h2 id="辅助工具">辅助工具</h2>
<p>Android Studio的App Link Assistant使用说明：<a href="https://developer.android.com/studio/write/app-link-indexing.html#intent" rel="nofollow noopener noreferrer" target="_blank" data-token="5ae40f6271fd3125f0e6a219d1dd01af">官方使用指南</a></p>
<h2 id="分类">分类</h2>
<p><strong>Deep Link</strong>,<strong>Android App Link</strong></p>
<h2 id="deep-link">Deep Link</h2>
<h3 id="配置">配置</h3>
<ol>
<li>在Manifest中增加intent filter <br /> 
<ul>
<li><code>&lt;action&gt;</code>: ACTION_VIEW</li>
<li><code>&lt;category&gt;</code>: 包含BROWSABLE,DEFAULT.BROWSABLE(必须包含，才可以处理来至l浏览器的Intent Filter)</li>
<li><code>&lt;data&gt;</code>: 指定可以响应的URI信息，至少包含scheme标签，可以使用path,pathPattern或者pathPrefix去处理相似的URI</li>
</ul>
</li>
</ol>
<pre class="prettyprint"><code class=" hljs xml">    // 可以响应example://gizmos 和 http://www.example.com/gizmos的Activity
    <span class="hljs-tag">&lt;<span class="hljs-title">activity </span> <span class="hljs-attribute">android:name</span>=<span class="hljs-value">"com.example.android.GizmosActivity"</span> <span class="hljs-attribute">android:label</span>=<span class="hljs-value">"@string/title_gizmos"</span> &gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">intent-filter</span> <span class="hljs-attribute">android:label</span>=<span class="hljs-value">"@string/filter_view_http_gizmos"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">action</span> <span class="hljs-attribute">android:name</span>=<span class="hljs-value">"android.intent.action.VIEW"</span> /&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">category</span> <span class="hljs-attribute">android:name</span>=<span class="hljs-value">"android.intent.category.DEFAULT"</span> /&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">category</span> <span class="hljs-attribute">android:name</span>=<span class="hljs-value">"android.intent.category.BROWSABLE"</span> /&gt;</span>
            <span class="hljs-comment">&lt;!-- Accepts URIs that begin with "http://www.example.com/gizmos” --&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">data</span> <span class="hljs-attribute">android:scheme</span>=<span class="hljs-value">"http"</span> <span class="hljs-attribute">android:host</span>=<span class="hljs-value">"www.example.com"</span> <span class="hljs-attribute">android:pathPrefix</span>=<span class="hljs-value">"/gizmos"</span> /&gt;</span>
            <span class="hljs-comment">&lt;!-- note that the leading "/" is required for pathPrefix--&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-title">intent-filter</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">intent-filter</span> <span class="hljs-attribute">android:label</span>=<span class="hljs-value">"@string/filter_view_example_gizmos"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">action</span> <span class="hljs-attribute">android:name</span>=<span class="hljs-value">"android.intent.action.VIEW"</span> /&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">category</span> <span class="hljs-attribute">android:name</span>=<span class="hljs-value">"android.intent.category.DEFAULT"</span> /&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">category</span> <span class="hljs-attribute">android:name</span>=<span class="hljs-value">"android.intent.category.BROWSABLE"</span> /&gt;</span>
            <span class="hljs-comment">&lt;!-- Accepts URIs that begin with "example://gizmos” --&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">data</span> <span class="hljs-attribute">android:scheme</span>=<span class="hljs-value">"example"</span> <span class="hljs-attribute">android:host</span>=<span class="hljs-value">"gizmos"</span> /&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-title">intent-filter</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">activity</span>&gt;</span></code></pre>
<p><em>注意点</em> <br /> 同一个Intent Filter中的<code>&lt;data&gt;</code>会进行合并组合</p>
<pre class="prettyprint"><code class=" hljs r">&lt;intent-filter&gt;
  <span class="hljs-keyword">...</span>
  &lt;data android:scheme=<span class="hljs-string">"https"</span> android:host=<span class="hljs-string">"www.example.com"</span> /&gt;
  &lt;data android:scheme=<span class="hljs-string">"app"</span> android:host=<span class="hljs-string">"open.my.app"</span> /&gt;
&lt;/intent-filter&gt;
// 会生成app://www.example.com 和 https://open.my.app</code></pre>
<h3 id="从intent获取数据">从Intent获取数据</h3>
<p>一旦系统通过Intent Filter打开你的界面,可以从Intent中获取数据</p>
<pre class="prettyprint"><code class=" hljs java"><span class="hljs-annotation">@Override</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onCreate</span>(Bundle savedInstanceState) {
    <span class="hljs-keyword">super</span>.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    Intent intent = getIntent();
    String action = intent.getAction();
    Uri data = intent.getData();
}</code></pre>
<p>mainfest文件里定义了定义了应用与网页的关系和如何处理这些链接</p>
<h3 id="测试配置">测试配置</h3>
<pre class="prettyprint"><code class=" hljs haml">$ adb shell am start
        -<span class="ruby"><span class="hljs-constant">W</span> -a android.intent.action.<span class="hljs-constant">VIEW</span> </span>        -<span class="ruby">d &lt;<span class="hljs-constant">URI</span>&gt; &lt;<span class="hljs-constant">PACKAGE</span>&gt;</span></code></pre>
<h2 id="android-app-link">Android App Link</h2>
<ul>
<li>原因：将自己的应用作为URI的默认处理应用，从而减少弹出选择处理对应应用的对话框</li>
<li>本质：一种特殊的Deep Link</li>
<li>查看本机已经支持Android App Link的应用</li>
</ul>
<pre class="prettyprint"><code class=" hljs lua">adb shell dumpsys <span class="hljs-built_in">package</span> domain-preferred-apps
或
adb shell dumpsys <span class="hljs-built_in">package</span> d</code></pre>
<ul>
<li>安装应用后系统至少需要20s去自动认证</li>
</ul>
<h3 id="认证链接verify-android-app-link">认证链接(verify android app link)</h3>
<p>第一步：在mainfest中定义可以处理的URI <br /> 第二步：认证URL与app,让系统认证你拥有这个url,系统自动的将URL定位至你的应用</p>
<h4 id="认证步骤">认证步骤</h4>
<h4 id="app端开启认证能力">App端开启认证能力</h4>
<p>在任一IntentFilter中添加android:autoVerify=”true”,6.0及以上系统自动认证所有符合如下条件IntentFilter中的URL，步骤如下 <br /> 1. 查找所有有</p>
<pre class="prettyprint"><code class=" hljs avrasm"><span class="hljs-label">Action:</span> android<span class="hljs-preprocessor">.intent</span><span class="hljs-preprocessor">.action</span><span class="hljs-preprocessor">.VIEW</span>
<span class="hljs-label">Categories:</span> android<span class="hljs-preprocessor">.intent</span><span class="hljs-preprocessor">.category</span><span class="hljs-preprocessor">.BROWSABLE</span>
Data scheme: http <span class="hljs-keyword">or</span> https，host为URL域名</code></pre>
<p>标签的IntentFilter <br /> 2. 对在1过程中找到的所有URL,Android会向对应的网址<a href="https://hostname/.well-known/assetlinks.json" rel="nofollow noopener noreferrer" target="_blank" data-token="8d62097cdb74a044a085dc91108b20ff">https://hostname/.well-known/assetlinks.json</a>中的Digital Asset Links file认证。 <br /> 3. 只有当找到所有在AndroidMainfest中的网址时都被认证时，才能作为对应URL唯一响应App</p>
<h4 id="服务端发布认证文件">服务端发布认证文件</h4>
<ul>
<li>发布的地址：<a href="https://domain.name/.well-known/assetlinks.json" rel="nofollow noopener noreferrer" target="_blank" data-token="0ac84cafb0c996a466357a7cee1d1874">https://domain.name/.well-known/assetlinks.json</a></li>
<li>需要标明文件类型：content-type application/json</li>
<li>需要https获取</li>
<li>可以直接获取，不能有任何的重定位(比如301或者302)而且可以被robots抓取</li>
<li>如果你的应用支持多个网址，在每个对应网址下都要放置对应文件</li>
<li>网址要公众网，避免不能被正确获取</li>
</ul>
<pre class="prettyprint"><code class=" hljs json">[{
  "<span class="hljs-attribute">relation</span>": <span class="hljs-value">[<span class="hljs-string">"delegate_permission/common.handle_all_urls"</span>]</span>,
  "<span class="hljs-attribute">target</span>": <span class="hljs-value">{ "<span class="hljs-attribute">namespace</span>": <span class="hljs-value"><span class="hljs-string">"android_app"</span></span>, "<span class="hljs-attribute">package_name</span>": <span class="hljs-value"><span class="hljs-string">"com.example"</span></span>, "<span class="hljs-attribute">sha256_cert_fingerprints</span>": <span class="hljs-value">[<span class="hljs-string">"14:6D:E9:83:C5:73:06:50:D8:EE:B9:95:2F:34:FC:64:16:A0:83:42:E6:1D:BE:A8:8A:04:96:B2:3F:CF:44:E5"</span>] </span>} </span>}]</code></pre>
<p>package_name:build.gradle file文件中的application id <br /> sha256_cert_fingerprints:keystore的密匙，可以使用keytool -list -v -keystore my-release-key.keystore获取</p>
<h3 id="android-app-link组合情况说明">Android App Link组合情况说明</h3>
<ul>
<li>一个Actvity对应多个URL</li>
</ul>
<pre class="prettyprint"><code class=" hljs xml"><span class="hljs-tag">&lt;<span class="hljs-title">activity</span> <span class="hljs-attribute">android:name</span>=<span class="hljs-value">”MainActivity”</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">intent-filter</span> <span class="hljs-attribute">android:autoVerify</span>=<span class="hljs-value">"true"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">action</span> <span class="hljs-attribute">android:name</span>=<span class="hljs-value">"android.intent.action.VIEW"</span> /&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">category</span> <span class="hljs-attribute">android:name</span>=<span class="hljs-value">"android.intent.category.DEFAULT"</span> /&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">category</span> <span class="hljs-attribute">android:name</span>=<span class="hljs-value">"android.intent.category.BROWSABLE"</span> /&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">data</span> <span class="hljs-attribute">android:scheme</span>=<span class="hljs-value">"http"</span> <span class="hljs-attribute">android:host</span>=<span class="hljs-value">"www.example.com"</span> /&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">data</span> <span class="hljs-attribute">android:scheme</span>=<span class="hljs-value">"https"</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">intent-filter</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">activity</span>&gt;</span></code></pre>
<ul>
<li>复杂的子域名</li>
</ul>
<pre class="prettyprint"><code class=" hljs xml"><span class="hljs-tag">&lt;<span class="hljs-title">activity</span> <span class="hljs-attribute">android:name</span>=<span class="hljs-value">”MainActivity”</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">intent-filter</span> <span class="hljs-attribute">android:autoVerify</span>=<span class="hljs-value">"true"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">action</span> <span class="hljs-attribute">android:name</span>=<span class="hljs-value">"android.intent.action.VIEW"</span> /&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">category</span> <span class="hljs-attribute">android:name</span>=<span class="hljs-value">"android.intent.category.DEFAULT"</span> /&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">category</span> <span class="hljs-attribute">android:name</span>=<span class="hljs-value">"android.intent.category.BROWSABLE"</span> /&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">data</span> <span class="hljs-attribute">android:scheme</span>=<span class="hljs-value">"https"</span> <span class="hljs-attribute">android:host</span>=<span class="hljs-value">"www.example.com"</span> /&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">data</span> <span class="hljs-attribute">android:scheme</span>=<span class="hljs-value">"https"</span> <span class="hljs-attribute">android:host</span>=<span class="hljs-value">"mobile.example.com"</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">intent-filter</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">activity</span>&gt;</span>
// 特例对于*.example.com的服务器端文件需要放置在example.com中
<span class="hljs-tag">&lt;<span class="hljs-title">activity</span> <span class="hljs-attribute">android:name</span>=<span class="hljs-value">”MainActivity”</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">intent-filter</span> <span class="hljs-attribute">android:autoVerify</span>=<span class="hljs-value">"true"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">action</span> <span class="hljs-attribute">android:name</span>=<span class="hljs-value">"android.intent.action.VIEW"</span> /&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">category</span> <span class="hljs-attribute">android:name</span>=<span class="hljs-value">"android.intent.category.DEFAULT"</span> /&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">category</span> <span class="hljs-attribute">android:name</span>=<span class="hljs-value">"android.intent.category.BROWSABLE"</span> /&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">data</span> <span class="hljs-attribute">android:scheme</span>=<span class="hljs-value">"https"</span> <span class="hljs-attribute">android:host</span>=<span class="hljs-value">"*.example.com"</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">intent-filter</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">activity</span>&gt;</span></code></pre>
<ul>
<li>一个RUL对应多个App <br /> 在服务器文件配置</li>
</ul>
<pre class="prettyprint"><code class=" hljs json">[{
  "<span class="hljs-attribute">relation</span>": <span class="hljs-value">[<span class="hljs-string">"delegate_permission/common.handle_all_urls"</span>]</span>,
  "<span class="hljs-attribute">target</span>": <span class="hljs-value">{ "<span class="hljs-attribute">namespace</span>": <span class="hljs-value"><span class="hljs-string">"android_app"</span></span>, "<span class="hljs-attribute">package_name</span>": <span class="hljs-value"><span class="hljs-string">"com.example.puppies.app"</span></span>, "<span class="hljs-attribute">sha256_cert_fingerprints</span>": <span class="hljs-value">[<span class="hljs-string">"14:6D:E9:83:C5:73:06:50:D8:EE:B9:95:2F:34:FC:64:16:A0:83:42:E6:1D:BE:A8:8A:04:96:B2:3F:CF:44:E5"</span>] </span>} </span>},
  {
  "<span class="hljs-attribute">relation</span>": <span class="hljs-value">[<span class="hljs-string">"delegate_permission/common.handle_all_urls"</span>]</span>,
  "<span class="hljs-attribute">target</span>": <span class="hljs-value">{ "<span class="hljs-attribute">namespace</span>": <span class="hljs-value"><span class="hljs-string">"android_app"</span></span>, "<span class="hljs-attribute">package_name</span>": <span class="hljs-value"><span class="hljs-string">"com.example.monkeys.app"</span></span>, "<span class="hljs-attribute">sha256_cert_fingerprints</span>": <span class="hljs-value">[<span class="hljs-string">"14:6D:E9:83:C5:73:06:50:D8:EE:B9:95:2F:34:FC:64:16:A0:83:42:E6:1D:BE:A8:8A:04:96:B2:3F:CF:44:E5"</span>] </span>} </span>}]</code></pre>
<ul>
<li>一个App对应多个域名 <br /> 在各个域名添加.well-known/assetlinks.json文件</li>
</ul>
<h3 id="测试android-app-link是否配置成功">测试Android App Link是否配置成功</h3>
<h4 id="检测应用端是否配置正确">检测应用端是否配置正确</h4>
<pre class="prettyprint"><code class=" hljs avrasm">adb shell am start -a android<span class="hljs-preprocessor">.intent</span><span class="hljs-preprocessor">.action</span><span class="hljs-preprocessor">.VIEW</span> 
    -c android<span class="hljs-preprocessor">.intent</span><span class="hljs-preprocessor">.category</span><span class="hljs-preprocessor">.BROWSABLE</span> 
    -d <span class="hljs-string">"http://domain.name:optional_port"</span></code></pre>
<h4 id="检测服务器文件是否配置成功">检测服务器文件是否配置成功</h4>
<pre class="prettyprint"><code class=" hljs avrasm"><span class="hljs-label">https:</span>//digitalassetlinks<span class="hljs-preprocessor">.googleapis</span><span class="hljs-preprocessor">.com</span>/v1/statements:list?
   source<span class="hljs-preprocessor">.web</span><span class="hljs-preprocessor">.site</span>=https://domain<span class="hljs-preprocessor">.name</span>:optional_port&amp;
   relation=delegate_permission/common<span class="hljs-preprocessor">.handle</span>_all_urls</code></pre>
<h2 id="deeplink与android-app-link区别">DeepLink与Android App Link区别</h2>
<ul>
<li>deeplink 是一个intent filter让用户直接进入应用中的某个页面。在有多个可以处理的应用时会弹出一个对话框让你选择对应的处理应用</li>
<li>Android App Link是一个经过认证的基于你的url的特殊deeplink,可以立即调起你的应用，而不必弹出对话框选择 <br /> <img src="https://github.com/jiaozidev/images/blob/master/difference%20bewteen%20Deep%20Link%20and%20Android%20App%20Link.png" alt="" title=""></li>
</ul>
<h2 id="建议">建议</h2>
<ul>
<li>跳转界面的设置：android:noHistory=”true”</li>
</ul>
<h2 id="注意点">注意点</h2>
<ul>
<li><code>&lt;data&gt;</code>标签的匹配模式需要注意</li>
</ul>
<h2 id="微信等问题记录">微信等问题记录</h2>
<ul>
<li>qq浏览器，uc浏览器拦截http与https协议的web URI intent,chrome正常</li>
<li>微信内置浏览器拦截web URI intent,可以借助应用宝的微下载实现基本跳转，微下载扩展功能的使用条件 <br /> <img src="https://github.com/jiaozidev/images/blob/master/%E5%BA%94%E7%94%A8%E5%AE%9D%E5%BE%AE%E4%B8%8B%E8%BD%BDapplink%E7%94%B3%E8%AF%B7%E6%9D%A1%E4%BB%B6.png" alt="扩展条件" title=""> </li>
</ul></div>
<link href="https://csdnimg.cn/release/phoenix/mdeditor/markdown_views-e9f16cbbc2.css" rel="stylesheet">
</div>
]]></content:encoded>
										</item>
		<item>
		<title>Android Deep Link</title>
		<link>https://uzzz.org/article/1665.html</link>
				<pubDate>Sun, 17 Dec 2017 13:22:03 +0000</pubDate>
		<dc:creator><![CDATA[fandyvon]]></dc:creator>
				<category><![CDATA[android]]></category>
		<category><![CDATA[读书笔记]]></category>

		<guid isPermaLink="false">https://uzzz.org/article/1665.html</guid>
				<description><![CDATA[Android Deep Link 官网参考文档 使用场景 用户在网页点击了一个链接以后，直接引导用户在本地应用中查看对应的内容。 原理 当我们点击或者自动化的网络请求会生成一个web URI intent，Android系统按照一定顺序去处理这个请求。 处理顺序为：1.打开所有可以处理本URL应用中用户默认选择的；2.打开唯一能处理这个URL的应用；3.将所有可以处理这个URL的应用展示在Dialog中让用户选择 基本步骤 在manifest文件中定义IntentFilter 建立对应处理的Activity (对于Android App Link而言)将本地内容与URL地址通过服务器上的Digital Asset Links文件关联起来 辅助工具 Android Studio的App Link Assistant使用说明：官方使用指南 分类 Deep Link,Android App Link Deep Link 配置 在Manifest中增加intent filter &#60;action&#62;: ACTION_VIEW &#60;category&#62;: 包含BROWSABLE,DEFAULT.BROWSABLE(必须包含，才可以处理来至l浏览器的Intent Filter) &#60;data&#62;: 指定可以响应的URI信息，至少包含scheme标签，可以使用path,pathPattern或者pathPrefix去处理相似的URI // 可以响应example://gizmos 和 http://www.example.com/gizmos的Activity &#60;activity android:name="com.example.android.GizmosActivity" android:label="@string/title_gizmos" &#62; &#60;intent-filter android:label="@string/filter_view_http_gizmos"&#62; &#60;action android:name="android.intent.action.VIEW" /&#62; &#60;category android:name="android.intent.category.DEFAULT" /&#62; &#60;category android:name="android.intent.category.BROWSABLE" /&#62; &#60;!-- Accepts URIs that begin with "http://www.example.com/gizmos” --&#62; &#60;data android:scheme="http" android:host="www.example.com" android:pathPrefix="/gizmos" /&#62; &#60;!-- note that the leading "/" is required for pathPrefix--&#62; &#60;/intent-filter&#62; &#60;intent-filter android:label="@string/filter_view_example_gizmos"&#62; &#60;action android:name="android.intent.action.VIEW" /&#62; &#60;category android:name="android.intent.category.DEFAULT" /&#62; &#60;category android:name="android.intent.category.BROWSABLE" /&#62; &#60;!-- Accepts URIs that begin with "example://gizmos” --&#62; &#60;data android:scheme="example" android:host="gizmos" /&#62; &#60;/intent-filter&#62; &#60;/activity&#62; 注意点 同一个Intent Filter中的&#60;data&#62;会进行合并组合 &#60;intent-filter&#62; ... &#60;data android:scheme="https" android:host="www.example.com" /&#62; &#60;data android:scheme="app" android:host="open.my.app" /&#62; &#60;/intent-filter&#62; // 会生成app://www.example.com 和 https://open.my.app 从Intent获取数据 一旦系统通过Intent Filter打开你的界面,可以从Intent中获取数据 @Override public void onCreate(Bundle savedInstanceState) { super.onCreate(savedInstanceState); setContentView(R.layout.main); Intent intent = getIntent(); String action = intent.getAction(); Uri data = intent.getData(); } mainfest文件里定义了定义了应用与网页的关系和如何处理这些链接 测试配置 $ adb shell am start -W -a android.intent.action.VIEW -d &#60;URI&#62; &#60;PACKAGE&#62; Android App Link 原因：将自己的应用作为URI的默认处理应用，从而减少弹出选择处理对应应用的对话框 本质：一种特殊的Deep Link 查看本机已经支持Android App Link的应用 adb shell dumpsys package domain-preferred-apps 或 adb]]></description>
								<content:encoded><![CDATA[<div id="article_content" class="article_content clearfix">
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-3019150162.css">
<div id="content_views" class="markdown_views prism-atom-one-dark">
  <!-- flowchart 箭头图标 勿删 --><br />
  <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
   <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
  </svg> </p>
<h1 id="android-deep-link">Android Deep Link</h1>
<p><a href="https://developer.android.com/training/app-links/deep-linking.html" rel="nofollow noopener noreferrer" target="_blank" data-token="577a5a854275b19010dac43688c7260c">官网参考文档</a></p>
<h2 id="使用场景">使用场景</h2>
<p>用户在网页点击了一个链接以后，直接引导用户在本地应用中查看对应的内容。</p>
<h2 id="原理">原理</h2>
<p>当我们点击或者自动化的网络请求会生成一个web URI intent，Android系统按照一定顺序去处理这个请求。 <br /> 处理顺序为：1.打开所有可以处理本URL应用中用户默认选择的；2.打开唯一能处理这个URL的应用；3.将所有可以处理这个URL的应用展示在Dialog中让用户选择</p>
<h2 id="基本步骤">基本步骤</h2>
<ol>
<li>在manifest文件中定义IntentFilter</li>
<li>建立对应处理的Activity</li>
<li>(对于Android App Link而言)将本地内容与URL地址通过服务器上的Digital Asset Links文件关联起来</li>
</ol>
<h2 id="辅助工具">辅助工具</h2>
<p>Android Studio的App Link Assistant使用说明：<a href="https://developer.android.com/studio/write/app-link-indexing.html#intent" rel="nofollow noopener noreferrer" target="_blank" data-token="5ae40f6271fd3125f0e6a219d1dd01af">官方使用指南</a></p>
<h2 id="分类">分类</h2>
<p><strong>Deep Link</strong>,<strong>Android App Link</strong></p>
<h2 id="deep-link">Deep Link</h2>
<h3 id="配置">配置</h3>
<ol>
<li>在Manifest中增加intent filter <br /> 
<ul>
<li><code>&lt;action&gt;</code>: ACTION_VIEW</li>
<li><code>&lt;category&gt;</code>: 包含BROWSABLE,DEFAULT.BROWSABLE(必须包含，才可以处理来至l浏览器的Intent Filter)</li>
<li><code>&lt;data&gt;</code>: 指定可以响应的URI信息，至少包含scheme标签，可以使用path,pathPattern或者pathPrefix去处理相似的URI</li>
</ul>
</li>
</ol>
<pre class="prettyprint"><code class=" hljs xml">    // 可以响应example://gizmos 和 http://www.example.com/gizmos的Activity
    <span class="hljs-tag">&lt;<span class="hljs-title">activity </span> <span class="hljs-attribute">android:name</span>=<span class="hljs-value">"com.example.android.GizmosActivity"</span> <span class="hljs-attribute">android:label</span>=<span class="hljs-value">"@string/title_gizmos"</span> &gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">intent-filter</span> <span class="hljs-attribute">android:label</span>=<span class="hljs-value">"@string/filter_view_http_gizmos"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">action</span> <span class="hljs-attribute">android:name</span>=<span class="hljs-value">"android.intent.action.VIEW"</span> /&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">category</span> <span class="hljs-attribute">android:name</span>=<span class="hljs-value">"android.intent.category.DEFAULT"</span> /&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">category</span> <span class="hljs-attribute">android:name</span>=<span class="hljs-value">"android.intent.category.BROWSABLE"</span> /&gt;</span>
            <span class="hljs-comment">&lt;!-- Accepts URIs that begin with "http://www.example.com/gizmos” --&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">data</span> <span class="hljs-attribute">android:scheme</span>=<span class="hljs-value">"http"</span> <span class="hljs-attribute">android:host</span>=<span class="hljs-value">"www.example.com"</span> <span class="hljs-attribute">android:pathPrefix</span>=<span class="hljs-value">"/gizmos"</span> /&gt;</span>
            <span class="hljs-comment">&lt;!-- note that the leading "/" is required for pathPrefix--&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-title">intent-filter</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">intent-filter</span> <span class="hljs-attribute">android:label</span>=<span class="hljs-value">"@string/filter_view_example_gizmos"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">action</span> <span class="hljs-attribute">android:name</span>=<span class="hljs-value">"android.intent.action.VIEW"</span> /&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">category</span> <span class="hljs-attribute">android:name</span>=<span class="hljs-value">"android.intent.category.DEFAULT"</span> /&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">category</span> <span class="hljs-attribute">android:name</span>=<span class="hljs-value">"android.intent.category.BROWSABLE"</span> /&gt;</span>
            <span class="hljs-comment">&lt;!-- Accepts URIs that begin with "example://gizmos” --&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">data</span> <span class="hljs-attribute">android:scheme</span>=<span class="hljs-value">"example"</span> <span class="hljs-attribute">android:host</span>=<span class="hljs-value">"gizmos"</span> /&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-title">intent-filter</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">activity</span>&gt;</span></code></pre>
<p><em>注意点</em> <br /> 同一个Intent Filter中的<code>&lt;data&gt;</code>会进行合并组合</p>
<pre class="prettyprint"><code class=" hljs r">&lt;intent-filter&gt;
  <span class="hljs-keyword">...</span>
  &lt;data android:scheme=<span class="hljs-string">"https"</span> android:host=<span class="hljs-string">"www.example.com"</span> /&gt;
  &lt;data android:scheme=<span class="hljs-string">"app"</span> android:host=<span class="hljs-string">"open.my.app"</span> /&gt;
&lt;/intent-filter&gt;
// 会生成app://www.example.com 和 https://open.my.app</code></pre>
<h3 id="从intent获取数据">从Intent获取数据</h3>
<p>一旦系统通过Intent Filter打开你的界面,可以从Intent中获取数据</p>
<pre class="prettyprint"><code class=" hljs java"><span class="hljs-annotation">@Override</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onCreate</span>(Bundle savedInstanceState) {
    <span class="hljs-keyword">super</span>.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    Intent intent = getIntent();
    String action = intent.getAction();
    Uri data = intent.getData();
}</code></pre>
<p>mainfest文件里定义了定义了应用与网页的关系和如何处理这些链接</p>
<h3 id="测试配置">测试配置</h3>
<pre class="prettyprint"><code class=" hljs haml">$ adb shell am start
        -<span class="ruby"><span class="hljs-constant">W</span> -a android.intent.action.<span class="hljs-constant">VIEW</span> </span>        -<span class="ruby">d &lt;<span class="hljs-constant">URI</span>&gt; &lt;<span class="hljs-constant">PACKAGE</span>&gt;</span></code></pre>
<h2 id="android-app-link">Android App Link</h2>
<ul>
<li>原因：将自己的应用作为URI的默认处理应用，从而减少弹出选择处理对应应用的对话框</li>
<li>本质：一种特殊的Deep Link</li>
<li>查看本机已经支持Android App Link的应用</li>
</ul>
<pre class="prettyprint"><code class=" hljs lua">adb shell dumpsys <span class="hljs-built_in">package</span> domain-preferred-apps
或
adb shell dumpsys <span class="hljs-built_in">package</span> d</code></pre>
<ul>
<li>安装应用后系统至少需要20s去自动认证</li>
</ul>
<h3 id="认证链接verify-android-app-link">认证链接(verify android app link)</h3>
<p>第一步：在mainfest中定义可以处理的URI <br /> 第二步：认证URL与app,让系统认证你拥有这个url,系统自动的将URL定位至你的应用</p>
<h4 id="认证步骤">认证步骤</h4>
<h4 id="app端开启认证能力">App端开启认证能力</h4>
<p>在任一IntentFilter中添加android:autoVerify=”true”,6.0及以上系统自动认证所有符合如下条件IntentFilter中的URL，步骤如下 <br /> 1. 查找所有有</p>
<pre class="prettyprint"><code class=" hljs avrasm"><span class="hljs-label">Action:</span> android<span class="hljs-preprocessor">.intent</span><span class="hljs-preprocessor">.action</span><span class="hljs-preprocessor">.VIEW</span>
<span class="hljs-label">Categories:</span> android<span class="hljs-preprocessor">.intent</span><span class="hljs-preprocessor">.category</span><span class="hljs-preprocessor">.BROWSABLE</span>
Data scheme: http <span class="hljs-keyword">or</span> https，host为URL域名</code></pre>
<p>标签的IntentFilter <br /> 2. 对在1过程中找到的所有URL,Android会向对应的网址<a href="https://hostname/.well-known/assetlinks.json" rel="nofollow noopener noreferrer" target="_blank" data-token="8d62097cdb74a044a085dc91108b20ff">https://hostname/.well-known/assetlinks.json</a>中的Digital Asset Links file认证。 <br /> 3. 只有当找到所有在AndroidMainfest中的网址时都被认证时，才能作为对应URL唯一响应App</p>
<h4 id="服务端发布认证文件">服务端发布认证文件</h4>
<ul>
<li>发布的地址：<a href="https://domain.name/.well-known/assetlinks.json" rel="nofollow noopener noreferrer" target="_blank" data-token="0ac84cafb0c996a466357a7cee1d1874">https://domain.name/.well-known/assetlinks.json</a></li>
<li>需要标明文件类型：content-type application/json</li>
<li>需要https获取</li>
<li>可以直接获取，不能有任何的重定位(比如301或者302)而且可以被robots抓取</li>
<li>如果你的应用支持多个网址，在每个对应网址下都要放置对应文件</li>
<li>网址要公众网，避免不能被正确获取</li>
</ul>
<pre class="prettyprint"><code class=" hljs json">[{
  "<span class="hljs-attribute">relation</span>": <span class="hljs-value">[<span class="hljs-string">"delegate_permission/common.handle_all_urls"</span>]</span>,
  "<span class="hljs-attribute">target</span>": <span class="hljs-value">{ "<span class="hljs-attribute">namespace</span>": <span class="hljs-value"><span class="hljs-string">"android_app"</span></span>, "<span class="hljs-attribute">package_name</span>": <span class="hljs-value"><span class="hljs-string">"com.example"</span></span>, "<span class="hljs-attribute">sha256_cert_fingerprints</span>": <span class="hljs-value">[<span class="hljs-string">"14:6D:E9:83:C5:73:06:50:D8:EE:B9:95:2F:34:FC:64:16:A0:83:42:E6:1D:BE:A8:8A:04:96:B2:3F:CF:44:E5"</span>] </span>} </span>}]</code></pre>
<p>package_name:build.gradle file文件中的application id <br /> sha256_cert_fingerprints:keystore的密匙，可以使用keytool -list -v -keystore my-release-key.keystore获取</p>
<h3 id="android-app-link组合情况说明">Android App Link组合情况说明</h3>
<ul>
<li>一个Actvity对应多个URL</li>
</ul>
<pre class="prettyprint"><code class=" hljs xml"><span class="hljs-tag">&lt;<span class="hljs-title">activity</span> <span class="hljs-attribute">android:name</span>=<span class="hljs-value">”MainActivity”</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">intent-filter</span> <span class="hljs-attribute">android:autoVerify</span>=<span class="hljs-value">"true"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">action</span> <span class="hljs-attribute">android:name</span>=<span class="hljs-value">"android.intent.action.VIEW"</span> /&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">category</span> <span class="hljs-attribute">android:name</span>=<span class="hljs-value">"android.intent.category.DEFAULT"</span> /&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">category</span> <span class="hljs-attribute">android:name</span>=<span class="hljs-value">"android.intent.category.BROWSABLE"</span> /&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">data</span> <span class="hljs-attribute">android:scheme</span>=<span class="hljs-value">"http"</span> <span class="hljs-attribute">android:host</span>=<span class="hljs-value">"www.example.com"</span> /&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">data</span> <span class="hljs-attribute">android:scheme</span>=<span class="hljs-value">"https"</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">intent-filter</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">activity</span>&gt;</span></code></pre>
<ul>
<li>复杂的子域名</li>
</ul>
<pre class="prettyprint"><code class=" hljs xml"><span class="hljs-tag">&lt;<span class="hljs-title">activity</span> <span class="hljs-attribute">android:name</span>=<span class="hljs-value">”MainActivity”</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">intent-filter</span> <span class="hljs-attribute">android:autoVerify</span>=<span class="hljs-value">"true"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">action</span> <span class="hljs-attribute">android:name</span>=<span class="hljs-value">"android.intent.action.VIEW"</span> /&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">category</span> <span class="hljs-attribute">android:name</span>=<span class="hljs-value">"android.intent.category.DEFAULT"</span> /&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">category</span> <span class="hljs-attribute">android:name</span>=<span class="hljs-value">"android.intent.category.BROWSABLE"</span> /&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">data</span> <span class="hljs-attribute">android:scheme</span>=<span class="hljs-value">"https"</span> <span class="hljs-attribute">android:host</span>=<span class="hljs-value">"www.example.com"</span> /&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">data</span> <span class="hljs-attribute">android:scheme</span>=<span class="hljs-value">"https"</span> <span class="hljs-attribute">android:host</span>=<span class="hljs-value">"mobile.example.com"</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">intent-filter</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">activity</span>&gt;</span>
// 特例对于*.example.com的服务器端文件需要放置在example.com中
<span class="hljs-tag">&lt;<span class="hljs-title">activity</span> <span class="hljs-attribute">android:name</span>=<span class="hljs-value">”MainActivity”</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">intent-filter</span> <span class="hljs-attribute">android:autoVerify</span>=<span class="hljs-value">"true"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">action</span> <span class="hljs-attribute">android:name</span>=<span class="hljs-value">"android.intent.action.VIEW"</span> /&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">category</span> <span class="hljs-attribute">android:name</span>=<span class="hljs-value">"android.intent.category.DEFAULT"</span> /&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">category</span> <span class="hljs-attribute">android:name</span>=<span class="hljs-value">"android.intent.category.BROWSABLE"</span> /&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">data</span> <span class="hljs-attribute">android:scheme</span>=<span class="hljs-value">"https"</span> <span class="hljs-attribute">android:host</span>=<span class="hljs-value">"*.example.com"</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">intent-filter</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">activity</span>&gt;</span></code></pre>
<ul>
<li>一个RUL对应多个App <br /> 在服务器文件配置</li>
</ul>
<pre class="prettyprint"><code class=" hljs json">[{
  "<span class="hljs-attribute">relation</span>": <span class="hljs-value">[<span class="hljs-string">"delegate_permission/common.handle_all_urls"</span>]</span>,
  "<span class="hljs-attribute">target</span>": <span class="hljs-value">{ "<span class="hljs-attribute">namespace</span>": <span class="hljs-value"><span class="hljs-string">"android_app"</span></span>, "<span class="hljs-attribute">package_name</span>": <span class="hljs-value"><span class="hljs-string">"com.example.puppies.app"</span></span>, "<span class="hljs-attribute">sha256_cert_fingerprints</span>": <span class="hljs-value">[<span class="hljs-string">"14:6D:E9:83:C5:73:06:50:D8:EE:B9:95:2F:34:FC:64:16:A0:83:42:E6:1D:BE:A8:8A:04:96:B2:3F:CF:44:E5"</span>] </span>} </span>},
  {
  "<span class="hljs-attribute">relation</span>": <span class="hljs-value">[<span class="hljs-string">"delegate_permission/common.handle_all_urls"</span>]</span>,
  "<span class="hljs-attribute">target</span>": <span class="hljs-value">{ "<span class="hljs-attribute">namespace</span>": <span class="hljs-value"><span class="hljs-string">"android_app"</span></span>, "<span class="hljs-attribute">package_name</span>": <span class="hljs-value"><span class="hljs-string">"com.example.monkeys.app"</span></span>, "<span class="hljs-attribute">sha256_cert_fingerprints</span>": <span class="hljs-value">[<span class="hljs-string">"14:6D:E9:83:C5:73:06:50:D8:EE:B9:95:2F:34:FC:64:16:A0:83:42:E6:1D:BE:A8:8A:04:96:B2:3F:CF:44:E5"</span>] </span>} </span>}]</code></pre>
<ul>
<li>一个App对应多个域名 <br /> 在各个域名添加.well-known/assetlinks.json文件</li>
</ul>
<h3 id="测试android-app-link是否配置成功">测试Android App Link是否配置成功</h3>
<h4 id="检测应用端是否配置正确">检测应用端是否配置正确</h4>
<pre class="prettyprint"><code class=" hljs avrasm">adb shell am start -a android<span class="hljs-preprocessor">.intent</span><span class="hljs-preprocessor">.action</span><span class="hljs-preprocessor">.VIEW</span> 
    -c android<span class="hljs-preprocessor">.intent</span><span class="hljs-preprocessor">.category</span><span class="hljs-preprocessor">.BROWSABLE</span> 
    -d <span class="hljs-string">"http://domain.name:optional_port"</span></code></pre>
<h4 id="检测服务器文件是否配置成功">检测服务器文件是否配置成功</h4>
<pre class="prettyprint"><code class=" hljs avrasm"><span class="hljs-label">https:</span>//digitalassetlinks<span class="hljs-preprocessor">.googleapis</span><span class="hljs-preprocessor">.com</span>/v1/statements:list?
   source<span class="hljs-preprocessor">.web</span><span class="hljs-preprocessor">.site</span>=https://domain<span class="hljs-preprocessor">.name</span>:optional_port&amp;
   relation=delegate_permission/common<span class="hljs-preprocessor">.handle</span>_all_urls</code></pre>
<h2 id="deeplink与android-app-link区别">DeepLink与Android App Link区别</h2>
<ul>
<li>deeplink 是一个intent filter让用户直接进入应用中的某个页面。在有多个可以处理的应用时会弹出一个对话框让你选择对应的处理应用</li>
<li>Android App Link是一个经过认证的基于你的url的特殊deeplink,可以立即调起你的应用，而不必弹出对话框选择 <br /> <img src="https://github.com/jiaozidev/images/blob/master/difference%20bewteen%20Deep%20Link%20and%20Android%20App%20Link.png" alt="" title=""></li>
</ul>
<h2 id="建议">建议</h2>
<ul>
<li>跳转界面的设置：android:noHistory=”true”</li>
</ul>
<h2 id="注意点">注意点</h2>
<ul>
<li><code>&lt;data&gt;</code>标签的匹配模式需要注意</li>
</ul>
<h2 id="微信等问题记录">微信等问题记录</h2>
<ul>
<li>qq浏览器，uc浏览器拦截http与https协议的web URI intent,chrome正常</li>
<li>微信内置浏览器拦截web URI intent,可以借助应用宝的微下载实现基本跳转，微下载扩展功能的使用条件 <br /> <img src="https://github.com/jiaozidev/images/blob/master/%E5%BA%94%E7%94%A8%E5%AE%9D%E5%BE%AE%E4%B8%8B%E8%BD%BDapplink%E7%94%B3%E8%AF%B7%E6%9D%A1%E4%BB%B6.png" alt="扩展条件" title=""> </li>
</ul></div>
<link href="https://csdnimg.cn/release/phoenix/mdeditor/markdown_views-e9f16cbbc2.css" rel="stylesheet">
</div>
]]></content:encoded>
										</item>
		<item>
		<title>Deep linking 深度链接</title>
		<link>https://uzzz.org/article/1587.html</link>
				<pubDate>Thu, 23 Nov 2017 10:30:20 +0000</pubDate>
		<dc:creator><![CDATA[fandyvon]]></dc:creator>
				<category><![CDATA[android]]></category>
		<category><![CDATA[android-studio]]></category>
		<category><![CDATA[kotlin]]></category>
		<category><![CDATA[移动开发]]></category>

		<guid isPermaLink="false">https://uzzz.org/article/1587.html</guid>
				<description><![CDATA[使用安卓或ios软件的过程中经常碰到这样一种情况：当我在浏览器打开一个页面时，时常会自动打开相对应的app，并进入相应的app页面中，这就用到一项技术-Deep Linking，下面就来介绍一下如何在自己的android APP中使用这项技术。 1。假设已经有了一个app项目，我们需要在项目中新建一个Activity。我们暂且取名为ViewActivity，在AndroidManifest.xml文件中的ViewActivity标签中添加Intent-filter： &#60;activity android:name=".activity.ViewActivity"&#62; &#60;intent-filter&#62; &#60;action android:name="android.intent.action.VIEW"/&#62; &#60;category android:name="android.intent.category.DEFAULT"/&#62; &#60;category android:name="android.intent.category.BROWSABLE"/&#62; &#60;data android:scheme="myapp"/&#62; &#60;/intent-filter&#62; &#60;/activity&#62; 2。此时在网页中就可调用这个地址就可以打开我们的app，下面是我写的一个测试deep linking的html代码： &#60;!DOCTYPE html&#62; &#60;html&#62; &#60;head&#62; &#60;meta charset="{CHARSET}"&#62; &#60;title&#62;&#60;/title&#62; &#60;/head&#62; &#60;body&#62; &#60;a href="myapp://"&#62;打开我的app&#60;/a&#62; &#60;/body&#62; &#60;/html&#62; 在手机上打开这个网页，点击链接“打开我的app”就可以自动打开我们的app了，并且能自动进入ViewActivity这个页面中。其实并不是只有myapp://这个链接可以进入我们的app，只要开头为myapp://的链接都可以自动进入我们的app。 3.但是我们的要求不是自动进入app的ViewActivity页面，我们的ViewActivity只是作为一个处理deep linking 的一个过渡页面。总不能在每个页面都要写这么一套代码吧，当然不能，下面我就来介绍如何根据schema内容来引导app进入页面 1).在ViewActivity中取出我们的URI值。在此顺带讲解一下URI值中的各个属性，可能有些代码在我们这个测试项目中用不到，只是作为demo讲解一下（我的项目使用kotlin写的，暂时就用kotlin给大家讲解了，我相信懂java的应该都能看懂kotlin） val uri = intent.data//链接地址 val host = uri.host//域名 var query=uri.query//获取参数列表 var params = query.toString().split("&#38;") var bundle=Bundle()//bundle容器，用来保存传递链接问号后带的参数 if(null!=params){ for (key_value in params) { bundle.putString(key_value.split("=")[0],key_value.split("=")[1]) } } intent.putExtras(bundle) var pageName=uri.getHost()//这就是我们链接中传递过来的页面名字，因为很多情况下需要统一android与IOS的页面跳转，所以这个名字并不是我们严格意义上的项目中的页面名，而是我们私下里商量好的那个字符串对应哪个页面 when(pageName){ "page1" -&#62;{ intent.setClass(this,Page1::class.java) startActivity(intent) } "page2" -&#62;{ intent.setClass(this.Page2::class.java) startActivity(intent) } } finish() 大功告成，至此我们的deep link基础就讲解完了，app此时就可以根据事先的约定根据链接打开并跳转到相应的app了，并且携带了链接后带的参数传到相应的Activity中，下面要做的就是你与html约定好链接的参数问题了]]></description>
								<content:encoded><![CDATA[<div id="article_content" class="article_content clearfix">
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-3019150162.css">
<div id="content_views" class="markdown_views prism-atom-one-dark">
  <!-- flowchart 箭头图标 勿删 --><br />
  <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
   <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
  </svg> </p>
<p>使用安卓或ios软件的过程中经常碰到这样一种情况：当我在浏览器打开一个页面时，时常会自动打开相对应的app，并进入相应的app页面中，这就用到一项技术-Deep Linking，下面就来介绍一下如何在自己的android APP中使用这项技术。</p>
<p>1。假设已经有了一个app项目，我们需要在项目中新建一个Activity。我们暂且取名为ViewActivity，在AndroidManifest.xml文件中的ViewActivity标签中添加Intent-filter：</p>
<pre class="prettyprint"><code class=" hljs xml">  <span class="hljs-tag">&lt;<span class="hljs-title">activity</span> <span class="hljs-attribute">android:name</span>=<span class="hljs-value">".activity.ViewActivity"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">intent-filter</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-title">action</span> <span class="hljs-attribute">android:name</span>=<span class="hljs-value">"android.intent.action.VIEW"</span>/&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-title">category</span> <span class="hljs-attribute">android:name</span>=<span class="hljs-value">"android.intent.category.DEFAULT"</span>/&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-title">category</span> <span class="hljs-attribute">android:name</span>=<span class="hljs-value">"android.intent.category.BROWSABLE"</span>/&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-title">data</span> <span class="hljs-attribute">android:scheme</span>=<span class="hljs-value">"myapp"</span>/&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-title">intent-filter</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-title">activity</span>&gt;</span></code></pre>
<p>2。此时在网页中就可调用这个地址就可以打开我们的app，下面是我写的一个测试deep linking的html代码：</p>
<pre class="prettyprint"><code class=" hljs xml"><span class="hljs-doctype">&lt;!DOCTYPE html&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">html</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">head</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">meta</span> <span class="hljs-attribute">charset</span>=<span class="hljs-value">"{CHARSET}"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">title</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">title</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">body</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">a</span> <span class="hljs-attribute">href</span>=<span class="hljs-value">"myapp://"</span>&gt;</span>打开我的app<span class="hljs-tag">&lt;/<span class="hljs-title">a</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">html</span>&gt;</span></code></pre>
<p>在手机上打开这个网页，点击链接“打开我的app”就可以自动打开我们的app了，并且能自动进入ViewActivity这个页面中。其实并不是只有myapp://这个链接可以进入我们的app，只要开头为myapp://的链接都可以自动进入我们的app。</p>
<p>3.但是我们的要求不是自动进入app的ViewActivity页面，我们的ViewActivity只是作为一个处理deep linking 的一个过渡页面。总不能在每个页面都要写这么一套代码吧，当然不能，下面我就来介绍如何根据schema内容来引导app进入页面 <br /> 1).在ViewActivity中取出我们的URI值。在此顺带讲解一下URI值中的各个属性，可能有些代码在我们这个测试项目中用不到，只是作为demo讲解一下（我的项目使用kotlin写的，暂时就用kotlin给大家讲解了，我相信懂java的应该都能看懂kotlin）</p>
<pre class="prettyprint"><code class=" hljs cs"> val uri = intent.data<span class="hljs-comment">//链接地址</span>
 val host = uri.host<span class="hljs-comment">//域名</span>
 <span class="hljs-keyword">var</span> query=uri.query<span class="hljs-comment">//获取参数列表</span>
 <span class="hljs-keyword">var</span> <span class="hljs-keyword">params</span> = query.toString().split(<span class="hljs-string">"&amp;"</span>)
 <span class="hljs-keyword">var</span> bundle=Bundle()<span class="hljs-comment">//bundle容器，用来保存传递链接问号后带的参数</span>
 <span class="hljs-keyword">if</span>(<span class="hljs-keyword">null</span>!=<span class="hljs-keyword">params</span>){
 <span class="hljs-keyword">for</span> (key_value <span class="hljs-keyword">in</span> <span class="hljs-keyword">params</span>) {
     bundle.putString(key_value.split(<span class="hljs-string">"="</span>)[<span class="hljs-number">0</span>],key_value.split(<span class="hljs-string">"="</span>)[<span class="hljs-number">1</span>])
   }
 }
 intent.putExtras(bundle)
 <span class="hljs-keyword">var</span> pageName=uri.getHost()<span class="hljs-comment">//这就是我们链接中传递过来的页面名字，因为很多情况下需要统一android与IOS的页面跳转，所以这个名字并不是我们严格意义上的项目中的页面名，而是我们私下里商量好的那个字符串对应哪个页面</span>
 when(pageName){
   <span class="hljs-string">"page1"</span> -&gt;{
     intent.setClass(<span class="hljs-keyword">this</span>,Page1::class.java)
     startActivity(intent)
   }
   <span class="hljs-string">"page2"</span> -&gt;{
     intent.setClass(<span class="hljs-keyword">this</span>.Page2::class.java)
     startActivity(intent)
   }
}
 finish()
</code></pre>
<p>大功告成，至此我们的deep link基础就讲解完了，app此时就可以根据事先的约定根据链接打开并跳转到相应的app了，并且携带了链接后带的参数传到相应的Activity中，下面要做的就是你与html约定好链接的参数问题了</p>
</p></div>
<link href="https://csdnimg.cn/release/phoenix/mdeditor/markdown_views-e9f16cbbc2.css" rel="stylesheet">
</div>
]]></content:encoded>
										</item>
		<item>
		<title>Deep linking 深度链接</title>
		<link>https://uzzz.org/article/1655.html</link>
				<pubDate>Thu, 23 Nov 2017 10:30:20 +0000</pubDate>
		<dc:creator><![CDATA[fandyvon]]></dc:creator>
				<category><![CDATA[android]]></category>
		<category><![CDATA[android-studio]]></category>
		<category><![CDATA[kotlin]]></category>
		<category><![CDATA[移动开发]]></category>

		<guid isPermaLink="false">https://uzzz.org/article/1655.html</guid>
				<description><![CDATA[使用安卓或ios软件的过程中经常碰到这样一种情况：当我在浏览器打开一个页面时，时常会自动打开相对应的app，并进入相应的app页面中，这就用到一项技术-Deep Linking，下面就来介绍一下如何在自己的android APP中使用这项技术。 1。假设已经有了一个app项目，我们需要在项目中新建一个Activity。我们暂且取名为ViewActivity，在AndroidManifest.xml文件中的ViewActivity标签中添加Intent-filter： &#60;activity android:name=".activity.ViewActivity"&#62; &#60;intent-filter&#62; &#60;action android:name="android.intent.action.VIEW"/&#62; &#60;category android:name="android.intent.category.DEFAULT"/&#62; &#60;category android:name="android.intent.category.BROWSABLE"/&#62; &#60;data android:scheme="myapp"/&#62; &#60;/intent-filter&#62; &#60;/activity&#62; 2。此时在网页中就可调用这个地址就可以打开我们的app，下面是我写的一个测试deep linking的html代码： &#60;!DOCTYPE html&#62; &#60;html&#62; &#60;head&#62; &#60;meta charset="{CHARSET}"&#62; &#60;title&#62;&#60;/title&#62; &#60;/head&#62; &#60;body&#62; &#60;a href="myapp://"&#62;打开我的app&#60;/a&#62; &#60;/body&#62; &#60;/html&#62; 在手机上打开这个网页，点击链接“打开我的app”就可以自动打开我们的app了，并且能自动进入ViewActivity这个页面中。其实并不是只有myapp://这个链接可以进入我们的app，只要开头为myapp://的链接都可以自动进入我们的app。 3.但是我们的要求不是自动进入app的ViewActivity页面，我们的ViewActivity只是作为一个处理deep linking 的一个过渡页面。总不能在每个页面都要写这么一套代码吧，当然不能，下面我就来介绍如何根据schema内容来引导app进入页面 1).在ViewActivity中取出我们的URI值。在此顺带讲解一下URI值中的各个属性，可能有些代码在我们这个测试项目中用不到，只是作为demo讲解一下（我的项目使用kotlin写的，暂时就用kotlin给大家讲解了，我相信懂java的应该都能看懂kotlin） val uri = intent.data//链接地址 val host = uri.host//域名 var query=uri.query//获取参数列表 var params = query.toString().split("&#38;") var bundle=Bundle()//bundle容器，用来保存传递链接问号后带的参数 if(null!=params){ for (key_value in params) { bundle.putString(key_value.split("=")[0],key_value.split("=")[1]) } } intent.putExtras(bundle) var pageName=uri.getHost()//这就是我们链接中传递过来的页面名字，因为很多情况下需要统一android与IOS的页面跳转，所以这个名字并不是我们严格意义上的项目中的页面名，而是我们私下里商量好的那个字符串对应哪个页面 when(pageName){ "page1" -&#62;{ intent.setClass(this,Page1::class.java) startActivity(intent) } "page2" -&#62;{ intent.setClass(this.Page2::class.java) startActivity(intent) } } finish() 大功告成，至此我们的deep link基础就讲解完了，app此时就可以根据事先的约定根据链接打开并跳转到相应的app了，并且携带了链接后带的参数传到相应的Activity中，下面要做的就是你与html约定好链接的参数问题了]]></description>
								<content:encoded><![CDATA[<div id="article_content" class="article_content clearfix">
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-3019150162.css">
<div id="content_views" class="markdown_views prism-atom-one-dark">
  <!-- flowchart 箭头图标 勿删 --><br />
  <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
   <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
  </svg> </p>
<p>使用安卓或ios软件的过程中经常碰到这样一种情况：当我在浏览器打开一个页面时，时常会自动打开相对应的app，并进入相应的app页面中，这就用到一项技术-Deep Linking，下面就来介绍一下如何在自己的android APP中使用这项技术。</p>
<p>1。假设已经有了一个app项目，我们需要在项目中新建一个Activity。我们暂且取名为ViewActivity，在AndroidManifest.xml文件中的ViewActivity标签中添加Intent-filter：</p>
<pre class="prettyprint"><code class=" hljs xml">  <span class="hljs-tag">&lt;<span class="hljs-title">activity</span> <span class="hljs-attribute">android:name</span>=<span class="hljs-value">".activity.ViewActivity"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">intent-filter</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-title">action</span> <span class="hljs-attribute">android:name</span>=<span class="hljs-value">"android.intent.action.VIEW"</span>/&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-title">category</span> <span class="hljs-attribute">android:name</span>=<span class="hljs-value">"android.intent.category.DEFAULT"</span>/&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-title">category</span> <span class="hljs-attribute">android:name</span>=<span class="hljs-value">"android.intent.category.BROWSABLE"</span>/&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-title">data</span> <span class="hljs-attribute">android:scheme</span>=<span class="hljs-value">"myapp"</span>/&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-title">intent-filter</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-title">activity</span>&gt;</span></code></pre>
<p>2。此时在网页中就可调用这个地址就可以打开我们的app，下面是我写的一个测试deep linking的html代码：</p>
<pre class="prettyprint"><code class=" hljs xml"><span class="hljs-doctype">&lt;!DOCTYPE html&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">html</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">head</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">meta</span> <span class="hljs-attribute">charset</span>=<span class="hljs-value">"{CHARSET}"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">title</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">title</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">body</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">a</span> <span class="hljs-attribute">href</span>=<span class="hljs-value">"myapp://"</span>&gt;</span>打开我的app<span class="hljs-tag">&lt;/<span class="hljs-title">a</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">html</span>&gt;</span></code></pre>
<p>在手机上打开这个网页，点击链接“打开我的app”就可以自动打开我们的app了，并且能自动进入ViewActivity这个页面中。其实并不是只有myapp://这个链接可以进入我们的app，只要开头为myapp://的链接都可以自动进入我们的app。</p>
<p>3.但是我们的要求不是自动进入app的ViewActivity页面，我们的ViewActivity只是作为一个处理deep linking 的一个过渡页面。总不能在每个页面都要写这么一套代码吧，当然不能，下面我就来介绍如何根据schema内容来引导app进入页面 <br /> 1).在ViewActivity中取出我们的URI值。在此顺带讲解一下URI值中的各个属性，可能有些代码在我们这个测试项目中用不到，只是作为demo讲解一下（我的项目使用kotlin写的，暂时就用kotlin给大家讲解了，我相信懂java的应该都能看懂kotlin）</p>
<pre class="prettyprint"><code class=" hljs cs"> val uri = intent.data<span class="hljs-comment">//链接地址</span>
 val host = uri.host<span class="hljs-comment">//域名</span>
 <span class="hljs-keyword">var</span> query=uri.query<span class="hljs-comment">//获取参数列表</span>
 <span class="hljs-keyword">var</span> <span class="hljs-keyword">params</span> = query.toString().split(<span class="hljs-string">"&amp;"</span>)
 <span class="hljs-keyword">var</span> bundle=Bundle()<span class="hljs-comment">//bundle容器，用来保存传递链接问号后带的参数</span>
 <span class="hljs-keyword">if</span>(<span class="hljs-keyword">null</span>!=<span class="hljs-keyword">params</span>){
 <span class="hljs-keyword">for</span> (key_value <span class="hljs-keyword">in</span> <span class="hljs-keyword">params</span>) {
     bundle.putString(key_value.split(<span class="hljs-string">"="</span>)[<span class="hljs-number">0</span>],key_value.split(<span class="hljs-string">"="</span>)[<span class="hljs-number">1</span>])
   }
 }
 intent.putExtras(bundle)
 <span class="hljs-keyword">var</span> pageName=uri.getHost()<span class="hljs-comment">//这就是我们链接中传递过来的页面名字，因为很多情况下需要统一android与IOS的页面跳转，所以这个名字并不是我们严格意义上的项目中的页面名，而是我们私下里商量好的那个字符串对应哪个页面</span>
 when(pageName){
   <span class="hljs-string">"page1"</span> -&gt;{
     intent.setClass(<span class="hljs-keyword">this</span>,Page1::class.java)
     startActivity(intent)
   }
   <span class="hljs-string">"page2"</span> -&gt;{
     intent.setClass(<span class="hljs-keyword">this</span>.Page2::class.java)
     startActivity(intent)
   }
}
 finish()
</code></pre>
<p>大功告成，至此我们的deep link基础就讲解完了，app此时就可以根据事先的约定根据链接打开并跳转到相应的app了，并且携带了链接后带的参数传到相应的Activity中，下面要做的就是你与html约定好链接的参数问题了</p>
</p></div>
<link href="https://csdnimg.cn/release/phoenix/mdeditor/markdown_views-e9f16cbbc2.css" rel="stylesheet">
</div>
]]></content:encoded>
										</item>
		<item>
		<title>Android实现暗透明背景的页面</title>
		<link>https://uzzz.org/article/993.html</link>
				<pubDate>Wed, 29 Mar 2017 10:10:15 +0000</pubDate>
		<dc:creator><![CDATA[fandyvon]]></dc:creator>
				<category><![CDATA[android]]></category>

		<guid isPermaLink="false">https://uzzz.org/article/993.html</guid>
				<description><![CDATA[项目要求做一个对话框样式的页面，仅页面上的文字和按钮可见，背景效果和对话框类似。下面看看怎么实现： 方案一： 首先实现一个继承自对话框样式的主题： &#60;style name="DarkTransParent" parent="android:style/Theme.Dialog"&#62; &#60;item name="android:background"&#62;@android:color/transparent&#60;/item&#62; &#60;item name="android:windowBackground"&#62;@android:color/transparent&#60;/item&#62; &#60;item name="android:windowNoTitle"&#62;true&#60;/item&#62; &#60;item name="android:windowCloseOnTouchOutside"&#62;false&#60;/item&#62; &#60;/style&#62; @android:color/transparent的值为#00000000。前两个00表示透明度，后6位为RGB值。#00000000表示全透明的黑色。 然后把这个主题应用到activity： &#60;activity android:name=".activity.TestActivity" android:theme="@style/DarkTransParent" /&#62; 这个activity不用做别的设置，布局文件里仅包含一个TextView和一个Button。 如果在布局文件里给它们设置了背景色，则背景色也会显示出来。 效果如下： 但是这个方法有缺点： 1. 页面布局会被自动调整，不易控制。 2. 背景的暗色不好改。 所以尝试了一种新的方案： 方案二： 继承系统的透明主题，然后自定义windowBackground属性： &#60;style name="DarkTransParent" parent="android:style/Theme.Translucent"&#62; &#60;item name="android:windowBackground"&#62;@color/lock_bg&#60;/item&#62; &#60;/style&#62; 看下Theme.Translucent的定义： &#60;style name="Theme.Translucent"&#62; &#60;item name="windowBackground"&#62;@color/transparent&#60;/item&#62; &#60;item name="colorBackgroundCacheHint"&#62;@null&#60;/item&#62; &#60;item name="windowIsTranslucent"&#62;true&#60;/item&#62; &#60;!-- Note that we use the base animation style here (that is no animations) because we really have no idea how this kind of activity will be used. --&#62; &#60;item name="windowAnimationStyle"&#62;@style/Animation&#60;/item&#62; &#60;/style&#62; 然后，lock_bg即为我们想要设置的背景的颜色，我们可以在colors.xml中自定义其值： &#60;color name="lock_bg"&#62;#cc000000&#60;/color&#62; 然后把这个主题应用到activity即可： &#60;activity android:name=".activity.TestActivity" android:theme="@style/DarkTransParent" /&#62;]]></description>
								<content:encoded><![CDATA[<div id="article_content" class="article_content clearfix">
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-3019150162.css">
<div id="content_views" class="markdown_views prism-atom-one-dark">
  <!-- flowchart 箭头图标 勿删 --><br />
  <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
   <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
  </svg> </p>
<p>项目要求做一个对话框样式的页面，仅页面上的文字和按钮可见，背景效果和对话框类似。下面看看怎么实现：</p>
<p><strong>方案一：</strong> <br /> 首先实现一个继承自对话框样式的主题：</p>
<pre class="prettyprint"><code class=" hljs applescript">    &lt;style <span class="hljs-property">name</span>=<span class="hljs-string">"DarkTransParent"</span> parent=<span class="hljs-string">"android:style/Theme.Dialog"</span>&gt;
        &lt;<span class="hljs-property">item</span> <span class="hljs-property">name</span>=<span class="hljs-string">"android:background"</span>&gt;@android:color/transparent&lt;/<span class="hljs-property">item</span>&gt;
        &lt;<span class="hljs-property">item</span> <span class="hljs-property">name</span>=<span class="hljs-string">"android:windowBackground"</span>&gt;@android:color/transparent&lt;/<span class="hljs-property">item</span>&gt;
        &lt;<span class="hljs-property">item</span> <span class="hljs-property">name</span>=<span class="hljs-string">"android:windowNoTitle"</span>&gt;<span class="hljs-constant">true</span>&lt;/<span class="hljs-property">item</span>&gt;
        &lt;<span class="hljs-property">item</span> <span class="hljs-property">name</span>=<span class="hljs-string">"android:windowCloseOnTouchOutside"</span>&gt;<span class="hljs-constant">false</span>&lt;/<span class="hljs-property">item</span>&gt;
    &lt;/style&gt;</code></pre>
<p>@android:color/transparent的值为#00000000。前两个00表示透明度，后6位为RGB值。#00000000表示全透明的黑色。</p>
<p>然后把这个主题应用到activity：</p>
<pre class="prettyprint"><code class=" hljs xml">        <span class="hljs-tag">&lt;<span class="hljs-title">activity </span> <span class="hljs-attribute">android:name</span>=<span class="hljs-value">".activity.TestActivity"</span> <span class="hljs-attribute">android:theme</span>=<span class="hljs-value">"@style/DarkTransParent"</span> /&gt;</span></code></pre>
<p>这个activity不用做别的设置，布局文件里仅包含一个TextView和一个Button。 <br /> 如果在布局文件里给它们设置了背景色，则背景色也会显示出来。</p>
<p>效果如下： <br /> <img src="https://uzshare.com/_p?https://img-blog.csdn.net/20170329180422545" width="200"></p>
<p>但是这个方法有缺点： <br /> 1. 页面布局会被自动调整，不易控制。 <br /> 2. 背景的暗色不好改。</p>
<p>所以尝试了一种新的方案：</p>
<p><strong>方案二：</strong> <br /> 继承系统的透明主题，然后自定义windowBackground属性：</p>
<pre class="prettyprint"><code class=" hljs xml">    <span class="hljs-tag">&lt;<span class="hljs-title">style</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"DarkTransParent"</span> <span class="hljs-attribute">parent</span>=<span class="hljs-value">"android:style/Theme.Translucent"</span>&gt;</span><span class="css"> &lt;<span class="hljs-tag">item</span> <span class="hljs-tag">name</span>="<span class="hljs-tag">android</span><span class="hljs-pseudo">:windowBackground"</span>&gt;<span class="hljs-at_rule">@<span class="hljs-keyword">color/lock_bg&lt;/item&gt;</span> </span></span><span class="hljs-tag">&lt;/<span class="hljs-title">style</span>&gt;</span></code></pre>
<p>看下Theme.Translucent的定义：</p>
<pre class="prettyprint"><code class=" hljs applescript">    &lt;style <span class="hljs-property">name</span>=<span class="hljs-string">"Theme.Translucent"</span>&gt;
        &lt;<span class="hljs-property">item</span> <span class="hljs-property">name</span>=<span class="hljs-string">"windowBackground"</span>&gt;@color/transparent&lt;/<span class="hljs-property">item</span>&gt;
        &lt;<span class="hljs-property">item</span> <span class="hljs-property">name</span>=<span class="hljs-string">"colorBackgroundCacheHint"</span>&gt;@null&lt;/<span class="hljs-property">item</span>&gt;
        &lt;<span class="hljs-property">item</span> <span class="hljs-property">name</span>=<span class="hljs-string">"windowIsTranslucent"</span>&gt;<span class="hljs-constant">true</span>&lt;/<span class="hljs-property">item</span>&gt;
        &lt;!<span class="hljs-comment">-- Note that we use the base animation style here (that is no</span>
             animations) because we really have no idea how this kind <span class="hljs-keyword">of</span>
             activity will be used. <span class="hljs-comment">--&gt;</span>
        &lt;<span class="hljs-property">item</span> <span class="hljs-property">name</span>=<span class="hljs-string">"windowAnimationStyle"</span>&gt;@style/Animation&lt;/<span class="hljs-property">item</span>&gt;
    &lt;/style&gt;</code></pre>
<p>然后，lock_bg即为我们想要设置的背景的颜色，我们可以在colors.xml中自定义其值：</p>
<pre class="prettyprint"><code class=" hljs rsl"> &lt;<span class="hljs-keyword">color</span> name=<span class="hljs-string">"lock_bg"</span>&gt;<span class="hljs-preprocessor">#cc000000&lt;/color&gt;</span></code></pre>
<p>然后把这个主题应用到activity即可：</p>
<pre class="prettyprint"><code class=" hljs xml">        <span class="hljs-tag">&lt;<span class="hljs-title">activity </span> <span class="hljs-attribute">android:name</span>=<span class="hljs-value">".activity.TestActivity"</span> <span class="hljs-attribute">android:theme</span>=<span class="hljs-value">"@style/DarkTransParent"</span> /&gt;</span></code></pre>
</p></div>
<link href="https://csdnimg.cn/release/phoenix/mdeditor/markdown_views-e9f16cbbc2.css" rel="stylesheet">
</div>
]]></content:encoded>
										</item>
		<item>
		<title>Deeplink:web唤醒app</title>
		<link>https://uzzz.org/article/1705.html</link>
				<pubDate>Fri, 10 Mar 2017 07:40:31 +0000</pubDate>
		<dc:creator><![CDATA[fandyvon]]></dc:creator>
				<category><![CDATA[android]]></category>
		<category><![CDATA[app]]></category>
		<category><![CDATA[web]]></category>
		<category><![CDATA[混合编程]]></category>

		<guid isPermaLink="false">https://uzzz.org/article/1705.html</guid>
				<description><![CDATA[在Android平台URI主要分五个部分：scheme, authority, path, queryParameter, queryString。其中authority又分为host和port。格式如下：(url的所有字母命名只能为小写) scheme://host:port/path?qureyParameter=queryString 例如：myscheme://www.febmaple.com:80/mypath?key=mykey 在Android的Manifest配置文件中，在要启动的activity下配置项中有配置。 其中包含内容有: &#60;data android:host="" android:mimeType="" android:path="" android:pathPattern="" android:pathPrefix="" android:port="" android:scheme="" android:ssp="" android:sspPattern="" android:sspPrefix=""/&#62; 1、web端html里写入 &#60;a href="myscheme://www.febmaple.com:80/mypath?key=mykey"&#62;Click&#60;/a&#62; 2、android端在menifest的响应activity的intentfilter下配置,一般只需配置scheme和host即可。 3、这样手机系统自带浏览器碰到不能处理的scheme之后会发送intent给能处理的应用，因为我们的app可以处理该scheme，所以我的app得到启动。（ps：如果用webview加载html，webview碰到处理不了的scheme并不会发送intent找app处理，而系统自带浏览器是可以的，当然我们的需求就是用系统自带浏览器触发）。 Show u my code: 一、跳到app首页：新建一个app工程用webview加载所写的html，用以触发目标app。（实际需求是直接在系统浏览器里触发目标app） 1、建立html放到工程的main/assets目录下 &#60;!DOCTYPE html&#62; &#60;html&#62; &#60;body&#62; &#60;h1&#62;Test Scheme&#60;/h1&#62; &#60;!--手动点击跳转--&#62; &#60;a href="myscheme://www.febmaple.com:80/mypath?key=mykey"&#62;Click&#60;/a&#62; &#60;/body&#62; &#60;/html&#62; 2、webview加载本地html内容来触发目标app wvUrl.loadUrl("file:///android_asset/test.html"); 3、在app manifeset的**欢迎**activity添加intent-filter配置data标签. &#60;activity android:name=".ui.launching.DemoLaunchingActivity" android:screenOrientation="portrait"&#62; &#60;intent-filter&#62; &#60;action android:name="android.intent.action.MAIN"/&#62; &#60;category android:name="android.intent.category.LAUNCHER"/&#62; &#60;/intent-filter&#62; &#60;!--网页跳转intentfilter--&#62; &#60;intent-filter&#62; &#60;action android:name="android.intent.action.VIEW"/&#62; &#60;category android:name="android.intent.category.DEFAULT"/&#62; &#60;category android:name="android.intent.category.BROWSABLE"/&#62; &#60;data android:scheme="myscheme"/&#62; &#60;/intent-filter&#62; &#60;/activity&#62; 4、在配置好的Activity里即可获取外部跳转的参数信息。 @Override protected void onCreate(Bundle savedInstanceState) { super.onCreate(savedInstanceState); this.setContentView(R.layout.activity_main_launching); //接收网页的跳转 Intent intent = getIntent(); //Log.e("febmaple", "scheme:" +intent.getScheme()); if (intent != null) { Uri uri = intent.getData();//获取web端传入的data数据 if (uri != null) { Log.e("febmaple", "scheme: " + uri.getScheme()); Log.e("febmaple", "host: " + uri.getHost()); Log.e("febmaple", "port: " + uri.getPort()); Log.e("febmaple", "path: " + uri.getPath()); //Log.e("febmaple", "queryString: "+uri.getQuery()); Log.e("febmaple", "queryParameter: " + uri.getQueryParameter("key")); } } } 二、如果要跳特定界面： 先根据scheme跳到欢迎界面或者主界面，然后再根据queryparameter的参数来确定跳到哪，这样避免了对每个activity都要设置intentfilter的data标签。（如果非要给多个页面配intentfilter，那直接用path作为页面区分的标志就好了） 下面是在欢迎界面获取到web端数据后再跳到特定activity的code： 1、在html中把queryparameter设为要跳的activity的名字 &#60;a href="myscheme://www.febmaple.com:80/mypath?key=com.xxxxx.app.ui.setting.DemoActivity"&#62;Click&#60;/a&#62; 2、在欢迎页activity里启动目标activity。 @Override protected void onCreate(Bundle savedInstanceState) { super.onCreate(savedInstanceState); this.setContentView(R.layout.activity_main_launching); //接收网页的跳转 Intent intent = getIntent(); if (intent != null) { Uri uri = intent.getData();//获取web端传入的data数据 if (uri != null) { aimActivityName = uri.getQueryParameter("key"); Intent intent1 = new Intent(); intent1.setClassName("com.xxxx.app", aimActivityName); startActivity(intent1); } } } 终极实现方案 写一个scheme路由activity用来统一管理h5对native app的跳转]]></description>
								<content:encoded><![CDATA[<div id="article_content" class="article_content clearfix">
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-3019150162.css">
<div id="content_views" class="markdown_views prism-atom-one-dark">
  <!-- flowchart 箭头图标 勿删 --><br />
  <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
   <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
  </svg> </p>
<p>在Android平台URI主要分五个部分：scheme, authority, path, queryParameter, queryString。其中authority又分为host和port。格式如下：(url的所有字母命名只能为小写) <br /> scheme://host:port/path?qureyParameter=queryString <br /> 例如：myscheme://www.febmaple.com:80/mypath?key=mykey</p>
<p>在Android的Manifest配置文件中，在要启动的activity下配置项中有配置。 <br /> 其中包含内容有:</p>
<pre class="prettyprint"><code class=" hljs xml"><span class="hljs-tag">&lt;<span class="hljs-title">data</span> <span class="hljs-attribute">android:host</span>=<span class="hljs-value">""</span> <span class="hljs-attribute">android:mimeType</span>=<span class="hljs-value">""</span> <span class="hljs-attribute">android:path</span>=<span class="hljs-value">""</span> <span class="hljs-attribute">android:pathPattern</span>=<span class="hljs-value">""</span> <span class="hljs-attribute">android:pathPrefix</span>=<span class="hljs-value">""</span> <span class="hljs-attribute">android:port</span>=<span class="hljs-value">""</span> <span class="hljs-attribute">android:scheme</span>=<span class="hljs-value">""</span> <span class="hljs-attribute">android:ssp</span>=<span class="hljs-value">""</span> <span class="hljs-attribute">android:sspPattern</span>=<span class="hljs-value">""</span> <span class="hljs-attribute">android:sspPrefix</span>=<span class="hljs-value">""</span>/&gt;</span></code></pre>
<p>1、web端html里写入 <br /> <code>&lt;a href="myscheme://www.febmaple.com:80/mypath?key=mykey"&gt;Click&lt;/a&gt;</code> <br /> 2、android端在menifest的响应activity的intentfilter下配置,一般只需配置scheme和host即可。 <br /> 3、这样手机系统自带浏览器碰到不能处理的scheme之后会发送intent给能处理的应用，因为我们的app可以处理该scheme，所以我的app得到启动。（ps：如果用webview加载html，webview碰到处理不了的scheme并不会发送intent找app处理，而系统自带浏览器是可以的，当然我们的需求就是用系统自带浏览器触发）。</p>
<p><strong><em>Show u my code:</em></strong></p>
<p><strong><em>一、跳到app首页：新建一个app工程用webview加载所写的html，用以触发目标app。（实际需求是直接在系统浏览器里触发目标app）</em></strong> <br /> 1、建立html放到工程的main/assets目录下</p>
<pre class="prettyprint"><code class=" hljs xml"><span class="hljs-doctype">&lt;!DOCTYPE html&gt;</span>  
<span class="hljs-tag">&lt;<span class="hljs-title">html</span>&gt;</span>  
<span class="hljs-tag">&lt;<span class="hljs-title">body</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">h1</span>&gt;</span>Test Scheme<span class="hljs-tag">&lt;/<span class="hljs-title">h1</span>&gt;</span>
<span class="hljs-comment">&lt;!--手动点击跳转--&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">a</span> <span class="hljs-attribute">href</span>=<span class="hljs-value">"myscheme://www.febmaple.com:80/mypath?key=mykey"</span>&gt;</span>Click<span class="hljs-tag">&lt;/<span class="hljs-title">a</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">body</span>&gt;</span>  
<span class="hljs-tag">&lt;/<span class="hljs-title">html</span>&gt;</span></code></pre>
<p>2、webview加载本地html内容来触发目标app</p>
<pre class="prettyprint"><code class=" hljs avrasm"> wvUrl<span class="hljs-preprocessor">.loadUrl</span>(<span class="hljs-string">"file:///android_asset/test.html"</span>)<span class="hljs-comment">;</span></code></pre>
<p>3、在app manifeset的**欢迎**activity添加intent-filter配置data标签.</p>
<pre class="prettyprint"><code class=" hljs xml"> <span class="hljs-tag">&lt;<span class="hljs-title">activity </span> <span class="hljs-attribute">android:name</span>=<span class="hljs-value">".ui.launching.DemoLaunchingActivity"</span> <span class="hljs-attribute">android:screenOrientation</span>=<span class="hljs-value">"portrait"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">intent-filter</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">action</span> <span class="hljs-attribute">android:name</span>=<span class="hljs-value">"android.intent.action.MAIN"</span>/&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">category</span> <span class="hljs-attribute">android:name</span>=<span class="hljs-value">"android.intent.category.LAUNCHER"</span>/&gt;</span>
   <span class="hljs-tag">&lt;/<span class="hljs-title">intent-filter</span>&gt;</span>
   <span class="hljs-comment">&lt;!--网页跳转intentfilter--&gt;</span>
   <span class="hljs-tag">&lt;<span class="hljs-title">intent-filter</span>&gt;</span>
   <span class="hljs-tag">&lt;<span class="hljs-title">action</span> <span class="hljs-attribute">android:name</span>=<span class="hljs-value">"android.intent.action.VIEW"</span>/&gt;</span>
   <span class="hljs-tag">&lt;<span class="hljs-title">category</span> <span class="hljs-attribute">android:name</span>=<span class="hljs-value">"android.intent.category.DEFAULT"</span>/&gt;</span>
   <span class="hljs-tag">&lt;<span class="hljs-title">category</span> <span class="hljs-attribute">android:name</span>=<span class="hljs-value">"android.intent.category.BROWSABLE"</span>/&gt;</span>
   <span class="hljs-tag">&lt;<span class="hljs-title">data</span> <span class="hljs-attribute">android:scheme</span>=<span class="hljs-value">"myscheme"</span>/&gt;</span>
   <span class="hljs-tag">&lt;/<span class="hljs-title">intent-filter</span>&gt;</span>
   <span class="hljs-tag">&lt;/<span class="hljs-title">activity</span>&gt;</span></code></pre>
<p>4、在配置好的Activity里即可获取外部跳转的参数信息。</p>
<pre class="prettyprint"><code class=" hljs avrasm">   @Override
   protected void onCreate(Bundle savedInstanceState) {
        super<span class="hljs-preprocessor">.onCreate</span>(savedInstanceState)<span class="hljs-comment">; this.setContentView(R.layout.activity_main_launching);</span>
    //接收网页的跳转
      Intent intent = getIntent()<span class="hljs-comment">;</span>
    //Log<span class="hljs-preprocessor">.e</span>(<span class="hljs-string">"febmaple"</span>, <span class="hljs-string">"scheme:"</span> +intent<span class="hljs-preprocessor">.getScheme</span>())<span class="hljs-comment">;</span>
      if (intent != null) {
       Uri uri = intent<span class="hljs-preprocessor">.getData</span>()<span class="hljs-comment">;//获取web端传入的data数据</span>
         if (uri != null) {
      Log<span class="hljs-preprocessor">.e</span>(<span class="hljs-string">"febmaple"</span>, <span class="hljs-string">"scheme: "</span> + uri<span class="hljs-preprocessor">.getScheme</span>())<span class="hljs-comment">;</span>
      Log<span class="hljs-preprocessor">.e</span>(<span class="hljs-string">"febmaple"</span>, <span class="hljs-string">"host: "</span> + uri<span class="hljs-preprocessor">.getHost</span>())<span class="hljs-comment">;</span>
      Log<span class="hljs-preprocessor">.e</span>(<span class="hljs-string">"febmaple"</span>, <span class="hljs-string">"port: "</span> + uri<span class="hljs-preprocessor">.getPort</span>())<span class="hljs-comment">;</span>
      Log<span class="hljs-preprocessor">.e</span>(<span class="hljs-string">"febmaple"</span>, <span class="hljs-string">"path: "</span> + uri<span class="hljs-preprocessor">.getPath</span>())<span class="hljs-comment">;</span>
   //Log<span class="hljs-preprocessor">.e</span>(<span class="hljs-string">"febmaple"</span>, <span class="hljs-string">"queryString: "</span>+uri<span class="hljs-preprocessor">.getQuery</span>())<span class="hljs-comment">;</span>
      Log<span class="hljs-preprocessor">.e</span>(<span class="hljs-string">"febmaple"</span>, <span class="hljs-string">"queryParameter: "</span> +           uri<span class="hljs-preprocessor">.getQueryParameter</span>(<span class="hljs-string">"key"</span>))<span class="hljs-comment">;</span>
            }
        }
    }</code></pre>
<p><strong><em>二、如果要跳特定界面：</em></strong> <br /> 先根据scheme跳到欢迎界面或者主界面，然后再根据queryparameter的参数来确定跳到哪，这样避免了对每个activity都要设置intentfilter的data标签。（如果非要给多个页面配intentfilter，那直接用path作为页面区分的标志就好了）</p>
<p>下面是在欢迎界面获取到web端数据后再跳到特定activity的code： <br /> 1、在html中把queryparameter设为要跳的activity的名字</p>
<pre class="prettyprint"><code class=" hljs xml"><span class="hljs-tag">&lt;<span class="hljs-title">a</span> <span class="hljs-attribute">href</span>=<span class="hljs-value">"myscheme://www.febmaple.com:80/mypath?key=com.xxxxx.app.ui.setting.DemoActivity"</span>&gt;</span>Click<span class="hljs-tag">&lt;/<span class="hljs-title">a</span>&gt;</span></code></pre>
<p>2、在欢迎页activity里启动目标activity。</p>
<pre class="prettyprint"><code class=" hljs java">   <span class="hljs-annotation">@Override</span>
   <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onCreate</span>(Bundle savedInstanceState) {
        <span class="hljs-keyword">super</span>.onCreate(savedInstanceState);          <span class="hljs-keyword">this</span>.setContentView(R.layout.activity_main_launching);
      <span class="hljs-comment">//接收网页的跳转</span>
      Intent intent = getIntent();
      <span class="hljs-keyword">if</span> (intent != <span class="hljs-keyword">null</span>) {
       Uri uri = intent.getData();<span class="hljs-comment">//获取web端传入的data数据</span>
         <span class="hljs-keyword">if</span> (uri != <span class="hljs-keyword">null</span>) {
  aimActivityName = uri.getQueryParameter(<span class="hljs-string">"key"</span>);
  Intent intent1 = <span class="hljs-keyword">new</span> Intent();
  intent1.setClassName(<span class="hljs-string">"com.xxxx.app"</span>, aimActivityName);
  startActivity(intent1);      
            }
        }
    }</code></pre>
<h1 id="终极实现方案">终极实现方案</h1>
<h2 id="写一个scheme路由activity用来统一管理h5对native-app的跳转">写一个scheme路由activity用来统一管理h5对native app的跳转</h2>
<pre class="prettyprint"><code class=" hljs java"><span class="hljs-javadoc">/** * 统一管理h5跳转native * 作者： FebMaple on 23/6/2017. * 邮箱： febmaple219@gmail.com * 版权： FebMaple * ==================================================== */</span>

<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SchemeFilterActivity</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">AppCompatActivity</span> {</span>
    <span class="hljs-annotation">@Override</span>
    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onCreate</span>(Bundle savedInstanceState) {
        <span class="hljs-keyword">super</span>.onCreate(savedInstanceState);
        <span class="hljs-comment">//接受网页的跳转</span>
        Intent intent = getIntent();
        <span class="hljs-keyword">if</span> (intent != <span class="hljs-keyword">null</span>) {
            Uri uri = intent.getData();<span class="hljs-comment">//获取web端传入的data数据</span>
            <span class="hljs-keyword">if</span> (uri != <span class="hljs-keyword">null</span>) {
                String path = uri.getPath();
                <span class="hljs-keyword">if</span> (path == <span class="hljs-keyword">null</span>) <span class="hljs-keyword">return</span>;
                <span class="hljs-keyword">switch</span> (path) {
                    <span class="hljs-keyword">case</span> <span class="hljs-string">"/page1"</span>:
                        todo:页面跳转
                        finish();
                        <span class="hljs-keyword">break</span>;
                    <span class="hljs-keyword">case</span> <span class="hljs-string">"page2"</span>:<span class="hljs-comment">//帖子详情页</span>
                        todo:页面跳转
                        finish();
                        <span class="hljs-keyword">break</span>;
                    <span class="hljs-keyword">default</span>:
                        <span class="hljs-comment">//nothing to do</span>
                        <span class="hljs-keyword">break</span>;
                }


            }
        }
    }
}</code></pre>
<p>把路由activity设为不可见</p>
<pre class="prettyprint"><code class=" hljs xml"><span class="hljs-tag">&lt;<span class="hljs-title">activity </span> <span class="hljs-attribute">android:name</span>=<span class="hljs-value">".ui.web.SchemeFilterActivity"</span> <span class="hljs-attribute">android:launchMode</span>=<span class="hljs-value">"singleInstance"</span> <span class="hljs-attribute">android:screenOrientation</span>=<span class="hljs-value">"portrait"</span> <span class="hljs-attribute">android:theme</span>=<span class="hljs-value">"@android:style/Theme.NoDisplay"</span>&gt;</span>
            <span class="hljs-comment">&lt;!--网页跳转intentfilter,path用于确定web跳哪个页面--&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">intent-filter</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-title">action</span> <span class="hljs-attribute">android:name</span>=<span class="hljs-value">"android.intent.action.VIEW"</span> /&gt;</span>

                <span class="hljs-tag">&lt;<span class="hljs-title">category</span> <span class="hljs-attribute">android:name</span>=<span class="hljs-value">"android.intent.category.DEFAULT"</span> /&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-title">category</span> <span class="hljs-attribute">android:name</span>=<span class="hljs-value">"android.intent.category.BROWSABLE"</span> /&gt;</span>

                <span class="hljs-tag">&lt;<span class="hljs-title">data </span> <span class="hljs-attribute">android:host</span>=<span class="hljs-value">"www.febmaple.com"</span> <span class="hljs-attribute">android:scheme</span>=<span class="hljs-value">"myscheme"</span> /&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-title">intent-filter</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-title">activity</span>&gt;</span></code></pre>
<h3 id="注意事项由于微信对私有协议scheme的屏蔽导致微信分享的链接在微信的webview里是无法直接跳转native-app的所以我们采用通过先跳转浏览器中转的方式来实现">注意事项，由于微信对私有协议scheme的屏蔽，导致微信分享的链接在微信的webview里是无法直接跳转native app的，所以我们采用通过先跳转浏览器中转的方式来实现。</h3>
<p>ps：自动跳转的html：</p>
<pre class="prettyprint"><code class=" hljs xml"><span class="hljs-doctype">&lt;!DOCTYPE html&gt;</span>  
<span class="hljs-tag">&lt;<span class="hljs-title">html</span>&gt;</span>  
<span class="hljs-tag">&lt;<span class="hljs-title">body</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">h1</span>&gt;</span>Test Scheme<span class="hljs-tag">&lt;/<span class="hljs-title">h1</span>&gt;</span> 
<span class="hljs-comment">&lt;!--自动加载隐藏页面跳转--&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">iframe</span> <span class="hljs-attribute">src</span>=<span class="hljs-value">"myscheme://www.febmaple.com:80/mypath?key=mykey"</span> <span class="hljs-attribute">style</span>=<span class="hljs-value">"display:none"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">iframe</span>&gt;</span>
<span class="hljs-comment">&lt;!--手动点击跳转--&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">a</span> <span class="hljs-attribute">href</span>=<span class="hljs-value">"myscheme://www.febmaple.com:80/mypath?key=mykey"</span>&gt;</span>Click<span class="hljs-tag">&lt;/<span class="hljs-title">a</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">body</span>&gt;</span>  
<span class="hljs-tag">&lt;/<span class="hljs-title">html</span>&gt;</span></code></pre>
</p></div>
<link href="https://csdnimg.cn/release/phoenix/mdeditor/markdown_views-e9f16cbbc2.css" rel="stylesheet">
</div>
]]></content:encoded>
										</item>
		<item>
		<title>解决ProGuard混淆代码时出现的java.lang.NoSuchFieldException: xxx…异常</title>
		<link>https://uzzz.org/article/1402.html</link>
				<pubDate>Sat, 21 Jan 2017 07:23:12 +0000</pubDate>
		<dc:creator><![CDATA[fandyvon]]></dc:creator>
				<category><![CDATA[android]]></category>

		<guid isPermaLink="false">https://uzzz.org/article/1402.html</guid>
				<description><![CDATA[用Android Studio写小Demo的时候，由于需要混淆代码，所以把build.gradle文件里的minifyEnabled false改成了true。 然后编译成release发布版本，就会发现apk包小了不少，说明混淆成功。 这对一般的小项目倒是没什么影响，混淆后程序运行仍然正常，但如果用到了Java的反射机制，就没那么轻松了。 下面是我程序中的一段代码： Class&#60;RecyclerView&#62; recyclerViewClass = RecyclerView.class; try { Field declaredField = recyclerViewClass.getDeclaredField("mRecycler"); declaredField.setAccessible(true); Method declaredMethod = Class.forName(RecyclerView.Recycler.class.getName()).getDeclaredMethod("clear"); declaredMethod.setAccessible(true); declaredMethod.invoke(declaredField.get(activeRecyclerView)); RecyclerView.RecycledViewPool recycledViewPool = activeRecyclerView.getRecycledViewPool(); recycledViewPool.clear(); } catch (Exception e) { e.printStackTrace(); } 在Build时就会报类似下面的错： java.lang.NoSuchFieldException: No field mRecycler in class Landroid/support/v7/widget/RecyclerView; (declaration of ‘android.support.v7.widget.RecyclerView’ appears in /data/app/com.xxx…… 还有： java.lang.NoSuchMethodException: clear [] 报错提示找不到相应的域和方法。 看最开始的代码我们知道用到了反射，大致的原理是根据字符串去寻找方法，然而代码经过ProGuard混淆后一些方法名都变成了无意义的短字符了（比如a、b、c这种）， 但是经过反编译可以发现，代码中的字符串是不会被混淆修改的。 所以程序运行时就无法映射到相应的方法了。 解决办法： ProGuard官方文档也是建议了大家不要混淆反射所涉及的类方法，因此我们需要自定义配置项目中的proguard-rules.pro文件。 第一个报错解决办法就是保留RecyclerView类不被混淆即可，文件中添加： -keep class android.support.v7.widget.RecyclerView {*;} 第二个报错，阅读了很多文档，我做了很多尝试，由于技艺不精，还是无法通过配置rules文件来消除混淆对clear()方法的影响，反编译代码后我发现clear()方法名还是被混淆改成了a()。 最后我就干脆把最开始原始代码里的字符串“clear”改成了“a”，然后成功消除报错。 其实这不是很好的解决办法，因为你需要得知相应的方法名被混淆成了什么，而且修改项目源代码去应付混淆也非上策，如果有大神知道如何配置rules文件来保证反射的正常运行，欢迎评论留言，交流指点。 （这里可以通过查看项目下面的 \build\outputs\mapping\release\mapping.txt 映射文件去查看相应的方法名被混淆成了什么，或者简单粗暴一点的，直接查看反编译apk后的代码也能得知）]]></description>
								<content:encoded><![CDATA[<div id="article_content" class="article_content clearfix">
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-3019150162.css">
<div id="content_views" class="markdown_views prism-atom-one-light">
  <!-- flowchart 箭头图标 勿删 --><br />
  <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
   <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
  </svg> </p>
<p>用Android Studio写小Demo的时候，由于需要混淆代码，所以<strong>把build.gradle文件里的minifyEnabled false改成了true。</strong></p>
<p>然后编译成release发布版本，就会发现apk包小了不少，说明混淆成功。<br /> 这对一般的小项目倒是没什么影响，混淆后程序运行仍然正常，但如果用到了<strong>Java的反射机制</strong>，就没那么轻松了。</p>
<p>下面是我程序中的一段代码：</p>
<pre><code class="prism language-java">Class<span class="token generics function"><span class="token punctuation">&lt;</span>RecyclerView<span class="token punctuation">&gt;</span></span> recyclerViewClass <span class="token operator">=</span> RecyclerView<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">;</span>
<span class="token keyword">try</span> <span class="token punctuation">{</span>
    Field declaredField <span class="token operator">=</span> recyclerViewClass<span class="token punctuation">.</span><span class="token function">getDeclaredField</span><span class="token punctuation">(</span><span class="token string">"mRecycler"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    declaredField<span class="token punctuation">.</span><span class="token function">setAccessible</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    Method declaredMethod <span class="token operator">=</span> Class<span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span>RecyclerView<span class="token punctuation">.</span>Recycler<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getDeclaredMethod</span><span class="token punctuation">(</span><span class="token string">"clear"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    declaredMethod<span class="token punctuation">.</span><span class="token function">setAccessible</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    declaredMethod<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span>declaredField<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>activeRecyclerView<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    RecyclerView<span class="token punctuation">.</span>RecycledViewPool recycledViewPool <span class="token operator">=</span> activeRecyclerView<span class="token punctuation">.</span><span class="token function">getRecycledViewPool</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    recycledViewPool<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>在Build时就会报类似下面的错：</p>
<blockquote>
<p>java.lang.NoSuchFieldException: No field mRecycler in class<br /> Landroid/support/v7/widget/RecyclerView; (declaration of<br /> ‘android.support.v7.widget.RecyclerView’ appears in<br /> /data/app/com.xxx……</p>
</blockquote>
<p>还有：</p>
<blockquote>
<p>java.lang.NoSuchMethodException: clear []</p>
</blockquote>
<p>报错提示找不到相应的域和方法。</p>
<p>看最开始的代码我们知道用到了反射，大致的原理是根据字符串去寻找方法，然而代码经过ProGuard混淆后一些方法名都变成了无意义的短字符了（比如a、b、c这种），<br /> <strong>但是经过反编译可以发现，代码中的字符串是不会被混淆修改的。</strong><br /> 所以程序运行时就无法映射到相应的方法了。</p>
<p><strong>解决办法：</strong><br /> ProGuard官方文档也是建议了大家不要混淆反射所涉及的类方法，因此我们需要自定义配置项目中的<strong>proguard-rules.pro</strong>文件。<br /> 第一个报错解决办法就是保留RecyclerView类不被混淆即可，文件中添加：</p>
<pre><code>-keep class android.support.v7.widget.RecyclerView {*;}
</code></pre>
<p>第二个报错，阅读了很多文档，我做了很多尝试，由于技艺不精，还是无法通过配置rules文件来消除混淆对clear()方法的影响，反编译代码后我发现clear()方法名还是被混淆改成了a()。<br /> <strong>最后我就干脆把最开始原始代码里的字符串“clear”改成了“a”，然后成功消除报错。</strong></p>
<p>其实这不是很好的解决办法，因为你需要得知相应的方法名被混淆成了什么，而且修改项目源代码去应付混淆也非上策，如果有大神知道如何配置rules文件来保证反射的正常运行，欢迎评论留言，交流指点。<br /> （这里可以通过查看项目下面的 <strong>\build\outputs\mapping\release\mapping.txt</strong> 映射文件去查看相应的方法名被混淆成了什么，或者简单粗暴一点的，直接查看反编译apk后的代码也能得知）</p>
</p></div>
<link href="https://csdnimg.cn/release/phoenix/mdeditor/markdown_views-e9f16cbbc2.css" rel="stylesheet">
</div>
]]></content:encoded>
										</item>
		<item>
		<title>android 中style的使用</title>
		<link>https://uzzz.org/article/1388.html</link>
				<pubDate>Wed, 27 Apr 2016 09:59:35 +0000</pubDate>
		<dc:creator><![CDATA[fandyvon]]></dc:creator>
				<category><![CDATA[android]]></category>

		<guid isPermaLink="false">https://uzzz.org/article/1388.html</guid>
				<description><![CDATA[Android的Styles(样式)和Themes(主题)非常类似Web开发里的CSS，方便开发者将页面内容和布局呈现分开。Style和Theme在Android里的定义方式是完全一样的，两者只是概念上的区别：Style作用在单个视图或控件上，而Theme用于Activity或整个应用程序。由于作用范围的不同，Theme也就需要比Style包含更多的定义属性值的项目(item)。不过本文，我将Style和Theme都归为Style来称呼。 Android的Style和Web的CSS相比，有一个缺陷就是只能针对一个对象只能通过android:theme="@style/AppTheme"或style="@style/MyStyle"指定一个值。而CSS则可以通过class属性在DOM元素上定义多个样式来达到组合的效果。不过Style也有CSS没有的功能，那就是继承(Inheritance)。(当然CSS通过LESS和SASS这些工具也获得继承的能力。) Style继承简介 根据Android Developers官方文档的介绍，定义Style的继承有两种方式：一是通过parent标志父Style； Java &#60;style name=&#8221;GreenText&#8221; parent=&#8221;@android:style/TextAppearance&#8221;&#62; &#60;item name=&#8221;android:textColor&#8221;&#62;#00FF00&#60;/item&#62; &#60;/style&#62; 1 2 3 &#60;style name =&#8221;GreenText&#8221; parent =&#8221;@android : style/TextAppearance&#8221;&#62; &#160;&#160;&#160;&#160; &#60;item name =&#8221;android : textColor&#8221;&#62;#00FF00&#60;/item&#62; &#60;/style&#62; 另一种则是将父Style的名字作为前缀，然后通过“.”连接新定义Style的名字： Java &#60;style name=&#8221;CodeFont.Red&#8221;&#62; &#60;item name=&#8221;android:textColor&#8221;&#62;#FF0000&#60;/item&#62; &#60;/style&#62; 1 2 3 &#60;style name =&#8221;CodeFont.Red&#8221;&#62; &#160;&#160;&#160;&#160; &#60;item name =&#8221;android : textColor&#8221;&#62;#FF0000&#60;/item&#62; &#60;/style&#62; 第二种方式可以无限连接子Style来实践多层继承： Java &#60;style name=&#8221;CodeFont.Red.Big&#8221;&#62; &#60;item name=&#8221;android:textSize&#8221;&#62;30sp&#60;/item&#62; &#60;/style&#62; 1 2 3 &#60;style name =&#8221;CodeFont.Red.Big&#8221;&#62; &#160;&#160;&#160;&#160; &#60;item name =&#8221;android : textSize&#8221;&#62;30sp&#60;/item&#62; &#60;/style&#62; 相对第一种，Android对第二种方式做出的限制就是Style必须是由自己定义的，或者说父Style和子Style必须是定义在同一个程序内，不能是引用第三方或系统的Style。毕竟对于系统的Style的引用是需要加上android:前缀作为命名空间。 其次在使用Style时，对于第二种方式定义的Style，必须引用其完全的名字，也就是说必须要包含完整的前缀和名字： Java &#60;EditText style=&#8221;@style/CodeFont.Red.Big&#8221; &#8230; /&#62; 1 2 3 &#60; EditText &#160;&#160;&#160;&#160; style = &#8220;@style/CodeFont.Red.Big&#8221; &#160;&#160;&#160;&#160; . . . / &#62; Android对于第一种定义方式并没用限制，所以所有以第二种方式定义的Style都可以转用第一种： Java &#60;style name=&#8221;Big&#8221; parent=&#8221;CodeFont.Red&#8221;&#62; &#60;item name=&#8221;android:textSize&#8221;&#62;30sp&#60;/item&#62; &#60;/style&#62; 1 2 3 &#60;style name =&#8221;Big&#8221; parent =&#8221;CodeFont.Red&#8221;&#62; &#160;&#160;&#160;&#160; &#60;item name =&#8221;android : textSize&#8221;&#62;30sp&#60;/item&#62; &#60;/style&#62; 只要parent中的名字对应上实际定义的Style名字即可。不过换成第一种后Style的名字如果太简洁就容易冲突了。 两种继承方式混合的效果 前面说到Style的两种继承方式的效果是一致的，那假如将两种方式混在一起定义一个Style又会是什么样的效果呢？下边就用实际例子来分析一下。 首先定义一些实验所需的自定义属性(attr)，（这样可以减少系统属性的干扰，因为系统总是会为它的属性定义值，那样可能无法分辨最后的效果是来自系统还是定义的值） Java &#60;?xml version=&#8221;1.0&#8243; encoding=&#8221;utf-8&#8243;?&#62; &#60;resources&#62; &#60;declare-styleable name=&#8221;CustomStyle&#8221;&#62; &#60;attr name=&#8221;customColor&#8221; format=&#8221;color&#8221;/&#62; &#60;attr name=&#8221;customText&#8221; format=&#8221;string&#8221;/&#62; &#60;attr name=&#8221;customSize&#8221; format=&#8221;dimension&#8221;/&#62; &#60;/declare-styleable&#62; &#60;/resources&#62; 1 2 3 4 5 6 7 8 &#60;? xml version = &#8220;1.0&#8221; encoding = &#8220;utf-8&#8221; ?&#62; &#60;resources&#62; &#160;&#160;&#160;&#160; &#60; declare &#8211; styleable name = &#8220;CustomStyle&#8221; &#62; &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &#60; attr name = &#8220;customColor&#8221; format = &#8220;color&#8221; / &#62; &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &#60; attr name = &#8220;customText&#8221;]]></description>
								<content:encoded><![CDATA[<div id="article_content" class="article_content clearfix">
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-3019150162.css">
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-3019150162.css">
<div class="htmledit_views" id="content_views">
<p>Android的<a href="http://developer.android.com/guide/topics/ui/themes.html" rel="nofollow" data-token="463bc505c20ca9aaa3d7fbc0113daf7f">Styles(样式)和Themes(主题)</a>非常类似Web开发里的CSS，方便开发者将页面内容和布局呈现分开。Style和Theme在Android里的定义方式是完全一样的，两者只是概念上的区别：Style作用在单个视图或控件上，而Theme用于<a href="http://developer.android.com/guide/components/activities.html" rel="nofollow" data-token="f7acc369fe278453a47e3f06cdb923e4">Activity</a>或整个应用程序。由于作用范围的不同，Theme也就需要比Style包含更多的定义属性值的项目(item)。不过本文，我将Style和Theme都归为Style来称呼。</p>
<p>Android的Style和Web的CSS相比，有一个缺陷就是只能针对一个对象只能通过<code>android:theme="@style/AppTheme"</code>或<code>style="@style/MyStyle"</code>指定一个值。而CSS则可以通过<code>class</code>属性在DOM元素上定义多个样式来达到组合的效果。不过Style也有CSS没有的功能，那就是继承(Inheritance)。(当然CSS通过LESS和SASS这些工具也获得继承的能力。)<br /><span id="more-937"></span></p>
<h2>Style继承简介</h2>
<p>根据<a href="http://developer.android.com/guide/topics/ui/themes.html#inheritance" rel="nofollow" data-token="9a41dd68af8e6f2dc1ca5aa8ea4a85ac">Android Developers官方文档</a>的介绍，定义Style的继承有两种方式：一是通过<code>parent</code>标志父Style；</p>
<div id="crayon-57203cdfc3111942151486" class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate" style="font-size:13px !important;line-height:15px !important;">
<div class="crayon-toolbar" style="font-size:13px !important;line-height:19.5px !important;">
    <span class="crayon-title"></span> </p>
<div class="crayon-tools" style="font-size:13px !important;line-height:19.5px !important;">
     <span class="crayon-mixed-highlight" title="含多种语言"></span><br />
     <span class="crayon-language">Java</span>
    </div>
</p></div>
<div class="crayon-plain-wrap">
    <textarea class="crayon-plain print-no" readonly style="font-size:13px !important;line-height:15px !important;z-index:1;opacity:1;" cols="22" rows="3">&lt;style name=&#8221;GreenText&#8221; parent=&#8221;@android:style/TextAppearance&#8221;&gt;<br />
    &lt;item name=&#8221;android:textColor&#8221;&gt;#00FF00&lt;/item&gt;<br />
&lt;/style&gt;</textarea>
   </div>
<div class="crayon-main" style="z-index:0;">
<table class="crayon-table">
<tbody>
<tr class="crayon-row">
<td class="crayon-nums">
<div class="crayon-nums-content" style="font-size:13px !important;line-height:15px !important;">
<div class="crayon-num">
          1
         </div>
<div class="crayon-num crayon-striped-num">
          2
         </div>
<div class="crayon-num">
          3
         </div>
</p></div>
</td>
<td class="crayon-code">
<div class="crayon-pre">
<div class="crayon-line" id="crayon-57203cdfc3111942151486-1">
          <span class="crayon-ta">&lt;style </span><br />
          <span class="crayon-e">name</span><br />
          <span class="crayon-i">=&#8221;GreenText&#8221;</span><br />
          <span class="crayon-h"> </span><br />
          <span class="crayon-e">parent</span><br />
          <span class="crayon-i">=&#8221;@android</span><br />
          <span class="crayon-sy">:</span><br />
          <span class="crayon-i">style/TextAppearance&#8221;&gt;</span>
         </div>
<div class="crayon-line crayon-striped-line" id="crayon-57203cdfc3111942151486-2">
          <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
          <span class="crayon-ta">&lt;item </span><br />
          <span class="crayon-e">name</span><br />
          <span class="crayon-i">=&#8221;android</span><br />
          <span class="crayon-sy">:</span><br />
          <span class="crayon-i">textColor&#8221;&gt;#00FF00&lt;/item&gt;</span>
         </div>
<div class="crayon-line" id="crayon-57203cdfc3111942151486-3">
          <span class="crayon-ta">&lt;/style&gt;</span>
         </div>
</p></div>
</td>
</tr>
</tbody>
</table></div>
</p></div>
<p>另一种则是将父Style的名字作为前缀，然后通过“.”连接新定义Style的名字：</p>
<div id="crayon-57203cdfc3127917150025" class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate" style="font-size:13px !important;line-height:15px !important;">
<div class="crayon-toolbar" style="font-size:13px !important;line-height:19.5px !important;">
    <span class="crayon-title"></span> </p>
<div class="crayon-tools" style="font-size:13px !important;line-height:19.5px !important;">
     <span class="crayon-mixed-highlight" title="含多种语言"></span><br />
     <span class="crayon-language">Java</span>
    </div>
</p></div>
<div class="crayon-plain-wrap">
    <textarea class="crayon-plain print-no" readonly style="font-size:13px !important;line-height:15px !important;z-index:0;opacity:0;" cols="22" rows="3">&lt;style name=&#8221;CodeFont.Red&#8221;&gt;<br />
    &lt;item name=&#8221;android:textColor&#8221;&gt;#FF0000&lt;/item&gt;<br />
&lt;/style&gt;</textarea>
   </div>
<div class="crayon-main" style="z-index:1;">
<table class="crayon-table">
<tbody>
<tr class="crayon-row">
<td class="crayon-nums">
<div class="crayon-nums-content" style="font-size:13px !important;line-height:15px !important;">
<div class="crayon-num">
          1
         </div>
<div class="crayon-num crayon-striped-num">
          2
         </div>
<div class="crayon-num">
          3
         </div>
</p></div>
</td>
<td class="crayon-code">
<div class="crayon-pre">
<div class="crayon-line" id="crayon-57203cdfc3127917150025-1">
          <span class="crayon-ta">&lt;style </span><br />
          <span class="crayon-e">name</span><br />
          <span class="crayon-i">=&#8221;CodeFont.Red&#8221;&gt;</span>
         </div>
<div class="crayon-line crayon-striped-line" id="crayon-57203cdfc3127917150025-2">
          <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
          <span class="crayon-ta">&lt;item </span><br />
          <span class="crayon-e">name</span><br />
          <span class="crayon-i">=&#8221;android</span><br />
          <span class="crayon-sy">:</span><br />
          <span class="crayon-i">textColor&#8221;&gt;#FF0000&lt;/item&gt;</span>
         </div>
<div class="crayon-line" id="crayon-57203cdfc3127917150025-3">
          <span class="crayon-ta">&lt;/style&gt;</span>
         </div>
</p></div>
</td>
</tr>
</tbody>
</table></div>
</p></div>
<p>第二种方式可以无限连接子Style来实践多层继承：</p>
<div id="crayon-57203cdfc312b325354218" class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate" style="font-size:13px !important;line-height:15px !important;">
<div class="crayon-toolbar" style="font-size:13px !important;line-height:19.5px !important;">
    <span class="crayon-title"></span> </p>
<div class="crayon-tools" style="font-size:13px !important;line-height:19.5px !important;">
     <span class="crayon-mixed-highlight" title="含多种语言"></span><br />
     <span class="crayon-language">Java</span>
    </div>
</p></div>
<div class="crayon-plain-wrap">
    <textarea class="crayon-plain print-no" readonly style="font-size:13px !important;line-height:15px !important;z-index:0;opacity:0;" cols="22" rows="3">&lt;style name=&#8221;CodeFont.Red.Big&#8221;&gt;<br />
    &lt;item name=&#8221;android:textSize&#8221;&gt;30sp&lt;/item&gt;<br />
&lt;/style&gt;</textarea>
   </div>
<div class="crayon-main" style="z-index:1;">
<table class="crayon-table">
<tbody>
<tr class="crayon-row">
<td class="crayon-nums">
<div class="crayon-nums-content" style="font-size:13px !important;line-height:15px !important;">
<div class="crayon-num">
          1
         </div>
<div class="crayon-num crayon-striped-num">
          2
         </div>
<div class="crayon-num">
          3
         </div>
</p></div>
</td>
<td class="crayon-code">
<div class="crayon-pre">
<div class="crayon-line" id="crayon-57203cdfc312b325354218-1">
          <span class="crayon-ta">&lt;style </span><br />
          <span class="crayon-e">name</span><br />
          <span class="crayon-i">=&#8221;CodeFont.Red.Big&#8221;&gt;</span>
         </div>
<div class="crayon-line crayon-striped-line" id="crayon-57203cdfc312b325354218-2">
          <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
          <span class="crayon-ta">&lt;item </span><br />
          <span class="crayon-e">name</span><br />
          <span class="crayon-i">=&#8221;android</span><br />
          <span class="crayon-sy">:</span><br />
          <span class="crayon-i">textSize&#8221;&gt;30sp&lt;/item&gt;</span>
         </div>
<div class="crayon-line" id="crayon-57203cdfc312b325354218-3">
          <span class="crayon-ta">&lt;/style&gt;</span>
         </div>
</p></div>
</td>
</tr>
</tbody>
</table></div>
</p></div>
<p><span style="font-weight:normal;">相对第一种，Android对第二种方式做出的限制就是Style必须是由自己定义的，或者说父Style和子Style必须是定义在同一个程序内，不能是引用第三方或系统的Style。毕竟对于系统的Style的引用是需要加上</span><code style="font-style:inherit;">android:</code><span style="font-weight:normal;">前缀作为命名空间。</span></p>
<p>其次在使用Style时，对于第二种方式定义的Style，必须引用其完全的名字，也就是说必须要包含完整的前缀和名字：</p>
<div id="crayon-57203cdfc312f100633725" class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate" style="font-size:13px !important;line-height:15px !important;">
<div class="crayon-toolbar" style="font-size:13px !important;line-height:19.5px !important;">
    <span class="crayon-title"></span> </p>
<div class="crayon-tools" style="font-size:13px !important;line-height:19.5px !important;">
     <span class="crayon-language">Java</span>
    </div>
</p></div>
<div class="crayon-plain-wrap">
    <textarea class="crayon-plain print-no" readonly style="font-size:13px !important;line-height:15px !important;z-index:0;opacity:0;" cols="22" rows="3">&lt;EditText<br />
    style=&#8221;@style/CodeFont.Red.Big&#8221;<br />
    &#8230; /&gt;</textarea>
   </div>
<div class="crayon-main" style="z-index:1;">
<table class="crayon-table">
<tbody>
<tr class="crayon-row">
<td class="crayon-nums">
<div class="crayon-nums-content" style="font-size:13px !important;line-height:15px !important;">
<div class="crayon-num">
          1
         </div>
<div class="crayon-num crayon-striped-num">
          2
         </div>
<div class="crayon-num">
          3
         </div>
</p></div>
</td>
<td class="crayon-code">
<div class="crayon-pre">
<div class="crayon-line" id="crayon-57203cdfc312f100633725-1">
          <span class="crayon-o">&lt;</span><br />
          <span class="crayon-e">EditText</span>
         </div>
<div class="crayon-line crayon-striped-line" id="crayon-57203cdfc312f100633725-2">
          <span class="crayon-e">&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
          <span class="crayon-v">style</span><br />
          <span class="crayon-o">=</span><br />
          <span class="crayon-s">&#8220;@style/CodeFont.Red.Big&#8221;</span>
         </div>
<div class="crayon-line" id="crayon-57203cdfc312f100633725-3">
          <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
          <span class="crayon-sy">.</span><br />
          <span class="crayon-sy">.</span><br />
          <span class="crayon-sy">.</span><br />
          <span class="crayon-h"> </span><br />
          <span class="crayon-o">/</span><br />
          <span class="crayon-o">&gt;</span>
         </div>
</p></div>
</td>
</tr>
</tbody>
</table></div>
</p></div>
<p><span style="font-weight:normal;">Android对于第一种定义方式并没用限制，所以所有以第二种方式定义的Style都可以转用第一种：</span></p>
<div id="crayon-57203cdfc3132391589322" class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate" style="font-size:13px !important;line-height:15px !important;">
<div class="crayon-toolbar" style="font-size:13px !important;line-height:19.5px !important;">
    <span class="crayon-title"></span> </p>
<div class="crayon-tools" style="font-size:13px !important;line-height:19.5px !important;">
     <span class="crayon-mixed-highlight" title="含多种语言"></span><br />
     <span class="crayon-language">Java</span>
    </div>
</p></div>
<div class="crayon-plain-wrap">
    <textarea class="crayon-plain print-no" readonly style="font-size:13px !important;line-height:15px !important;z-index:0;opacity:0;" cols="22" rows="3">&lt;style name=&#8221;Big&#8221; parent=&#8221;CodeFont.Red&#8221;&gt;<br />
    &lt;item name=&#8221;android:textSize&#8221;&gt;30sp&lt;/item&gt;<br />
&lt;/style&gt;</textarea>
   </div>
<div class="crayon-main" style="z-index:1;">
<table class="crayon-table">
<tbody>
<tr class="crayon-row">
<td class="crayon-nums">
<div class="crayon-nums-content" style="font-size:13px !important;line-height:15px !important;">
<div class="crayon-num">
          1
         </div>
<div class="crayon-num crayon-striped-num">
          2
         </div>
<div class="crayon-num">
          3
         </div>
</p></div>
</td>
<td class="crayon-code">
<div class="crayon-pre">
<div class="crayon-line" id="crayon-57203cdfc3132391589322-1">
          <span class="crayon-ta">&lt;style </span><br />
          <span class="crayon-e">name</span><br />
          <span class="crayon-i">=&#8221;Big&#8221;</span><br />
          <span class="crayon-h"> </span><br />
          <span class="crayon-e">parent</span><br />
          <span class="crayon-i">=&#8221;CodeFont.Red&#8221;&gt;</span>
         </div>
<div class="crayon-line crayon-striped-line" id="crayon-57203cdfc3132391589322-2">
          <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
          <span class="crayon-ta">&lt;item </span><br />
          <span class="crayon-e">name</span><br />
          <span class="crayon-i">=&#8221;android</span><br />
          <span class="crayon-sy">:</span><br />
          <span class="crayon-i">textSize&#8221;&gt;30sp&lt;/item&gt;</span>
         </div>
<div class="crayon-line" id="crayon-57203cdfc3132391589322-3">
          <span class="crayon-ta">&lt;/style&gt;</span>
         </div>
</p></div>
</td>
</tr>
</tbody>
</table></div>
</p></div>
<p><span style="font-weight:normal;">只要</span><code style="font-style:inherit;">parent</code><span style="font-weight:normal;">中的名字对应上实际定义的Style名字即可。不过换成第一种后Style的名字如果太简洁就容易冲突了。</span></p>
<h2>两种继承方式混合的效果</h2>
<p>前面说到Style的两种继承方式的效果是一致的，那假如将两种方式混在一起定义一个Style又会是什么样的效果呢？下边就用实际例子来分析一下。</p>
<p>首先定义一些实验所需的自定义属性(attr)，（这样可以减少系统属性的干扰，因为系统总是会为它的属性定义值，那样可能无法分辨最后的效果是来自系统还是定义的值）</p>
<div id="crayon-57203cdfc3136241306980" class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate" style="font-size:13px !important;line-height:15px !important;">
<div class="crayon-toolbar" style="font-size:13px !important;line-height:19.5px !important;">
    <span class="crayon-title"></span> </p>
<div class="crayon-tools" style="font-size:13px !important;line-height:19.5px !important;">
     <span class="crayon-mixed-highlight" title="含多种语言"></span><br />
     <span class="crayon-language">Java</span>
    </div>
</p></div>
<div class="crayon-plain-wrap">
    <textarea class="crayon-plain print-no" readonly style="font-size:13px !important;line-height:15px !important;z-index:0;opacity:0;" cols="22" rows="3">&lt;?xml version=&#8221;1.0&#8243; encoding=&#8221;utf-8&#8243;?&gt;<br />
&lt;resources&gt;<br />
    &lt;declare-styleable name=&#8221;CustomStyle&#8221;&gt;<br />
        &lt;attr name=&#8221;customColor&#8221; format=&#8221;color&#8221;/&gt;<br />
        &lt;attr name=&#8221;customText&#8221; format=&#8221;string&#8221;/&gt;<br />
        &lt;attr name=&#8221;customSize&#8221; format=&#8221;dimension&#8221;/&gt;<br />
    &lt;/declare-styleable&gt;<br />
&lt;/resources&gt;</textarea>
   </div>
<div class="crayon-main" style="z-index:1;">
<table class="crayon-table">
<tbody>
<tr class="crayon-row">
<td class="crayon-nums">
<div class="crayon-nums-content" style="font-size:13px !important;line-height:15px !important;">
<div class="crayon-num">
          1
         </div>
<div class="crayon-num crayon-striped-num">
          2
         </div>
<div class="crayon-num">
          3
         </div>
<div class="crayon-num crayon-striped-num">
          4
         </div>
<div class="crayon-num">
          5
         </div>
<div class="crayon-num crayon-striped-num">
          6
         </div>
<div class="crayon-num">
          7
         </div>
<div class="crayon-num crayon-striped-num">
          8
         </div>
</p></div>
</td>
<td class="crayon-code">
<div class="crayon-pre">
<div class="crayon-line" id="crayon-57203cdfc3136241306980-1">
          <span class="crayon-ta">&lt;?</span><br />
          <span class="crayon-e">xml </span><br />
          <span class="crayon-i">version</span><br />
          <span class="crayon-o">=</span><br />
          <span class="crayon-s">&#8220;1.0&#8221;</span><br />
          <span class="crayon-h"> </span><br />
          <span class="crayon-i">encoding</span><br />
          <span class="crayon-o">=</span><br />
          <span class="crayon-s">&#8220;utf-8&#8221;</span><br />
          <span class="crayon-ta">?&gt;</span>
         </div>
<div class="crayon-line crayon-striped-line" id="crayon-57203cdfc3136241306980-2">
          <span class="crayon-e">&lt;resources&gt;</span>
         </div>
<div class="crayon-line" id="crayon-57203cdfc3136241306980-3">
          <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
          <span class="crayon-o">&lt;</span><br />
          <span class="crayon-r">declare</span><br />
          <span class="crayon-o">&#8211;</span><br />
          <span class="crayon-e">styleable </span><br />
          <span class="crayon-v">name</span><br />
          <span class="crayon-o">=</span><br />
          <span class="crayon-s">&#8220;CustomStyle&#8221;</span><br />
          <span class="crayon-o">&gt;</span>
         </div>
<div class="crayon-line crayon-striped-line" id="crayon-57203cdfc3136241306980-4">
          <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
          <span class="crayon-o">&lt;</span><br />
          <span class="crayon-e">attr </span><br />
          <span class="crayon-v">name</span><br />
          <span class="crayon-o">=</span><br />
          <span class="crayon-s">&#8220;customColor&#8221;</span><br />
          <span class="crayon-h"> </span><br />
          <span class="crayon-v">format</span><br />
          <span class="crayon-o">=</span><br />
          <span class="crayon-s">&#8220;color&#8221;</span><br />
          <span class="crayon-o">/</span><br />
          <span class="crayon-o">&gt;</span>
         </div>
<div class="crayon-line" id="crayon-57203cdfc3136241306980-5">
          <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
          <span class="crayon-o">&lt;</span><br />
          <span class="crayon-e">attr </span><br />
          <span class="crayon-v">name</span><br />
          <span class="crayon-o">=</span><br />
          <span class="crayon-s">&#8220;customText&#8221;</span><br />
          <span class="crayon-h"> </span><br />
          <span class="crayon-v">format</span><br />
          <span class="crayon-o">=</span><br />
          <span class="crayon-s">&#8220;string&#8221;</span><br />
          <span class="crayon-o">/</span><br />
          <span class="crayon-o">&gt;</span>
         </div>
<div class="crayon-line crayon-striped-line" id="crayon-57203cdfc3136241306980-6">
          <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
          <span class="crayon-o">&lt;</span><br />
          <span class="crayon-e">attr </span><br />
          <span class="crayon-v">name</span><br />
          <span class="crayon-o">=</span><br />
          <span class="crayon-s">&#8220;customSize&#8221;</span><br />
          <span class="crayon-h"> </span><br />
          <span class="crayon-v">format</span><br />
          <span class="crayon-o">=</span><br />
          <span class="crayon-s">&#8220;dimension&#8221;</span><br />
          <span class="crayon-o">/</span><br />
          <span class="crayon-o">&gt;</span>
         </div>
<div class="crayon-line" id="crayon-57203cdfc3136241306980-7">
          <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
          <span class="crayon-o">&lt;</span><br />
          <span class="crayon-o">/</span><br />
          <span class="crayon-r">declare</span><br />
          <span class="crayon-o">&#8211;</span><br />
          <span class="crayon-v">styleable</span><br />
          <span class="crayon-o">&gt;</span>
         </div>
<div class="crayon-line crayon-striped-line" id="crayon-57203cdfc3136241306980-8">
          <span class="crayon-o">&lt;</span><br />
          <span class="crayon-o">/</span><br />
          <span class="crayon-v">resources</span><br />
          <span class="crayon-o">&gt;</span>
         </div>
</p></div>
</td>
</tr>
</tbody>
</table></div>
</p></div>
<p><span style="font-weight:normal;">接着定义一个TextView的子类，并在其中获取上边自定义属性的值并赋予TextView去呈现：</span></p>
<div id="crayon-57203cdfc3139680631693" class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate" style="font-size:13px !important;line-height:15px !important;">
<div class="crayon-toolbar" style="font-size:13px !important;line-height:19.5px !important;">
    <span class="crayon-title"></span> </p>
<div class="crayon-tools" style="font-size:13px !important;line-height:19.5px !important;">
     <span class="crayon-language">Java</span>
    </div>
</p></div>
<div class="crayon-plain-wrap">
    <textarea class="crayon-plain print-no" readonly style="font-size:13px !important;line-height:15px !important;z-index:0;opacity:0;" cols="22" rows="3">import android.util.TypedValue;<br />
import android.widget.TextView;</p>
<p>/**<br />
 * @author Ider<br />
 */<br />
public class StyledTextView extends TextView {</p>
<p>    public StyledTextView(Context context) {<br />
        this(context, null);<br />
    }</p>
<p>    public StyledTextView(Context context, AttributeSet attrs) {<br />
        this(context, attrs, 0);<br />
    }</p>
<p>    public StyledTextView(Context context, AttributeSet attrs, int defStyleAttr) {<br />
        super(context, attrs, defStyleAttr);</p>
<p>        final TypedArray a = context.getTheme()<br />
                .obtainStyledAttributes(attrs, R.styleable.CustomStyle, defStyleAttr, 0);<br />
        final CharSequence text = a.getText(R.styleable.CustomStyle_customText);<br />
        final int color = a.getColor(R.styleable.CustomStyle_customColor, Color.RED);<br />
        final float size = a.getDimensionPixelSize(R.styleable.CustomStyle_customSize, 70);<br />
        a.recycle();</p>
<p>        setText(text);<br />
        setTextColor(color);<br />
        setTextSize(TypedValue.COMPLEX_UNIT_PX, size);</p>
<p>    }<br />
}</textarea>
   </div>
<div class="crayon-main" style="z-index:1;">
<table class="crayon-table">
<tbody>
<tr class="crayon-row">
<td class="crayon-nums">
<div class="crayon-nums-content" style="font-size:13px !important;line-height:15px !important;">
<div class="crayon-num">
          1
         </div>
<div class="crayon-num crayon-striped-num">
          2
         </div>
<div class="crayon-num">
          3
         </div>
<div class="crayon-num crayon-striped-num">
          4
         </div>
<div class="crayon-num">
          5
         </div>
<div class="crayon-num crayon-striped-num">
          6
         </div>
<div class="crayon-num">
          7
         </div>
<div class="crayon-num crayon-striped-num">
          8
         </div>
<div class="crayon-num">
          9
         </div>
<div class="crayon-num crayon-striped-num">
          10
         </div>
<div class="crayon-num">
          11
         </div>
<div class="crayon-num crayon-striped-num">
          12
         </div>
<div class="crayon-num">
          13
         </div>
<div class="crayon-num crayon-striped-num">
          14
         </div>
<div class="crayon-num">
          15
         </div>
<div class="crayon-num crayon-striped-num">
          16
         </div>
<div class="crayon-num">
          17
         </div>
<div class="crayon-num crayon-striped-num">
          18
         </div>
<div class="crayon-num">
          19
         </div>
<div class="crayon-num crayon-striped-num">
          20
         </div>
<div class="crayon-num">
          21
         </div>
<div class="crayon-num crayon-striped-num">
          22
         </div>
<div class="crayon-num">
          23
         </div>
<div class="crayon-num crayon-striped-num">
          24
         </div>
<div class="crayon-num">
          25
         </div>
<div class="crayon-num crayon-striped-num">
          26
         </div>
<div class="crayon-num">
          27
         </div>
<div class="crayon-num crayon-striped-num">
          28
         </div>
<div class="crayon-num">
          29
         </div>
<div class="crayon-num crayon-striped-num">
          30
         </div>
<div class="crayon-num">
          31
         </div>
<div class="crayon-num crayon-striped-num">
          32
         </div>
</p></div>
</td>
<td class="crayon-code">
<div class="crayon-pre">
<div class="crayon-line" id="crayon-57203cdfc3139680631693-1">
          <span class="crayon-r">import</span><br />
          <span class="crayon-h"> </span><br />
          <span class="crayon-v">android</span><br />
          <span class="crayon-sy">.</span><br />
          <span class="crayon-v">util</span><br />
          <span class="crayon-sy">.</span><br />
          <span class="crayon-v">TypedValue</span><br />
          <span class="crayon-sy">;</span>
         </div>
<div class="crayon-line crayon-striped-line" id="crayon-57203cdfc3139680631693-2">
          <span class="crayon-r">import</span><br />
          <span class="crayon-h"> </span><br />
          <span class="crayon-v">android</span><br />
          <span class="crayon-sy">.</span><br />
          <span class="crayon-v">widget</span><br />
          <span class="crayon-sy">.</span><br />
          <span class="crayon-v">TextView</span><br />
          <span class="crayon-sy">;</span>
         </div>
<div class="crayon-line" id="crayon-57203cdfc3139680631693-3">
          <span class="crayon-h"></span>
         </div>
<div class="crayon-line crayon-striped-line" id="crayon-57203cdfc3139680631693-4">
          <span class="crayon-c">/**</span>
         </div>
<div class="crayon-line" id="crayon-57203cdfc3139680631693-5">
          <span class="crayon-c">* @author Ider</span>
         </div>
<div class="crayon-line crayon-striped-line" id="crayon-57203cdfc3139680631693-6">
          <span class="crayon-c">*/</span>
         </div>
<div class="crayon-line" id="crayon-57203cdfc3139680631693-7">
          <span class="crayon-m">public</span><br />
          <span class="crayon-h"> </span><br />
          <span class="crayon-t">class</span><br />
          <span class="crayon-h"> </span><br />
          <span class="crayon-e">StyledTextView</span><br />
          <span class="crayon-h"> </span><br />
          <span class="crayon-r">extends</span><br />
          <span class="crayon-h"> </span><br />
          <span class="crayon-e">TextView</span><br />
          <span class="crayon-h"> </span><br />
          <span class="crayon-sy">{</span>
         </div>
<div class="crayon-line crayon-striped-line" id="crayon-57203cdfc3139680631693-8">
          <span class="crayon-h"></span>
         </div>
<div class="crayon-line" id="crayon-57203cdfc3139680631693-9">
          <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
          <span class="crayon-m">public</span><br />
          <span class="crayon-h"> </span><br />
          <span class="crayon-e">StyledTextView</span><br />
          <span class="crayon-sy">(</span><br />
          <span class="crayon-e">Context </span><br />
          <span class="crayon-v">context</span><br />
          <span class="crayon-sy">)</span><br />
          <span class="crayon-h"> </span><br />
          <span class="crayon-sy">{</span>
         </div>
<div class="crayon-line crayon-striped-line" id="crayon-57203cdfc3139680631693-10">
          <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
          <span class="crayon-r">this</span><br />
          <span class="crayon-sy">(</span><br />
          <span class="crayon-v">context</span><br />
          <span class="crayon-sy">,</span><br />
          <span class="crayon-h"> </span><br />
          <span class="crayon-t">null</span><br />
          <span class="crayon-sy">)</span><br />
          <span class="crayon-sy">;</span>
         </div>
<div class="crayon-line" id="crayon-57203cdfc3139680631693-11">
          <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
          <span class="crayon-sy">}</span>
         </div>
<div class="crayon-line crayon-striped-line" id="crayon-57203cdfc3139680631693-12">
          <span class="crayon-h"></span>
         </div>
<div class="crayon-line" id="crayon-57203cdfc3139680631693-13">
          <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
          <span class="crayon-m">public</span><br />
          <span class="crayon-h"> </span><br />
          <span class="crayon-e">StyledTextView</span><br />
          <span class="crayon-sy">(</span><br />
          <span class="crayon-e">Context </span><br />
          <span class="crayon-v">context</span><br />
          <span class="crayon-sy">,</span><br />
          <span class="crayon-h"> </span><br />
          <span class="crayon-e">AttributeSet </span><br />
          <span class="crayon-v">attrs</span><br />
          <span class="crayon-sy">)</span><br />
          <span class="crayon-h"> </span><br />
          <span class="crayon-sy">{</span>
         </div>
<div class="crayon-line crayon-striped-line" id="crayon-57203cdfc3139680631693-14">
          <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
          <span class="crayon-r">this</span><br />
          <span class="crayon-sy">(</span><br />
          <span class="crayon-v">context</span><br />
          <span class="crayon-sy">,</span><br />
          <span class="crayon-h"> </span><br />
          <span class="crayon-v">attrs</span><br />
          <span class="crayon-sy">,</span><br />
          <span class="crayon-h"> </span><br />
          <span class="crayon-cn">0</span><br />
          <span class="crayon-sy">)</span><br />
          <span class="crayon-sy">;</span>
         </div>
<div class="crayon-line" id="crayon-57203cdfc3139680631693-15">
          <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
          <span class="crayon-sy">}</span>
         </div>
<div class="crayon-line crayon-striped-line" id="crayon-57203cdfc3139680631693-16">
          <span class="crayon-h"></span>
         </div>
<div class="crayon-line" id="crayon-57203cdfc3139680631693-17">
          <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
          <span class="crayon-m">public</span><br />
          <span class="crayon-h"> </span><br />
          <span class="crayon-e">StyledTextView</span><br />
          <span class="crayon-sy">(</span><br />
          <span class="crayon-e">Context </span><br />
          <span class="crayon-v">context</span><br />
          <span class="crayon-sy">,</span><br />
          <span class="crayon-h"> </span><br />
          <span class="crayon-e">AttributeSet </span><br />
          <span class="crayon-v">attrs</span><br />
          <span class="crayon-sy">,</span><br />
          <span class="crayon-h"> </span><br />
          <span class="crayon-t">int</span><br />
          <span class="crayon-h"> </span><br />
          <span class="crayon-v">defStyleAttr</span><br />
          <span class="crayon-sy">)</span><br />
          <span class="crayon-h"> </span><br />
          <span class="crayon-sy">{</span>
         </div>
<div class="crayon-line crayon-striped-line" id="crayon-57203cdfc3139680631693-18">
          <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
          <span class="crayon-r">super</span><br />
          <span class="crayon-sy">(</span><br />
          <span class="crayon-v">context</span><br />
          <span class="crayon-sy">,</span><br />
          <span class="crayon-h"> </span><br />
          <span class="crayon-v">attrs</span><br />
          <span class="crayon-sy">,</span><br />
          <span class="crayon-h"> </span><br />
          <span class="crayon-v">defStyleAttr</span><br />
          <span class="crayon-sy">)</span><br />
          <span class="crayon-sy">;</span>
         </div>
<div class="crayon-line" id="crayon-57203cdfc3139680631693-19">
          <span class="crayon-h"></span>
         </div>
<div class="crayon-line crayon-striped-line" id="crayon-57203cdfc3139680631693-20">
          <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
          <span class="crayon-m">final</span><br />
          <span class="crayon-h"> </span><br />
          <span class="crayon-i">TypedArray</span><br />
          <span class="crayon-h"> </span><br />
          <span class="crayon-v">a</span><br />
          <span class="crayon-h"> </span><br />
          <span class="crayon-o">=</span><br />
          <span class="crayon-h"> </span><br />
          <span class="crayon-v">context</span><br />
          <span class="crayon-sy">.</span><br />
          <span class="crayon-e">getTheme</span><br />
          <span class="crayon-sy">(</span><br />
          <span class="crayon-sy">)</span>
         </div>
<div class="crayon-line" id="crayon-57203cdfc3139680631693-21">
          <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
          <span class="crayon-sy">.</span><br />
          <span class="crayon-e">obtainStyledAttributes</span><br />
          <span class="crayon-sy">(</span><br />
          <span class="crayon-v">attrs</span><br />
          <span class="crayon-sy">,</span><br />
          <span class="crayon-h"> </span><br />
          <span class="crayon-v">R</span><br />
          <span class="crayon-sy">.</span><br />
          <span class="crayon-v">styleable</span><br />
          <span class="crayon-sy">.</span><br />
          <span class="crayon-v">CustomStyle</span><br />
          <span class="crayon-sy">,</span><br />
          <span class="crayon-h"> </span><br />
          <span class="crayon-v">defStyleAttr</span><br />
          <span class="crayon-sy">,</span><br />
          <span class="crayon-h"> </span><br />
          <span class="crayon-cn">0</span><br />
          <span class="crayon-sy">)</span><br />
          <span class="crayon-sy">;</span>
         </div>
<div class="crayon-line crayon-striped-line" id="crayon-57203cdfc3139680631693-22">
          <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
          <span class="crayon-m">final</span><br />
          <span class="crayon-h"> </span><br />
          <span class="crayon-e">CharSequence </span><br />
          <span class="crayon-v">text</span><br />
          <span class="crayon-h"> </span><br />
          <span class="crayon-o">=</span><br />
          <span class="crayon-h"> </span><br />
          <span class="crayon-v">a</span><br />
          <span class="crayon-sy">.</span><br />
          <span class="crayon-e">getText</span><br />
          <span class="crayon-sy">(</span><br />
          <span class="crayon-v">R</span><br />
          <span class="crayon-sy">.</span><br />
          <span class="crayon-v">styleable</span><br />
          <span class="crayon-sy">.</span><br />
          <span class="crayon-v">CustomStyle_customText</span><br />
          <span class="crayon-sy">)</span><br />
          <span class="crayon-sy">;</span>
         </div>
<div class="crayon-line" id="crayon-57203cdfc3139680631693-23">
          <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
          <span class="crayon-m">final</span><br />
          <span class="crayon-h"> </span><br />
          <span class="crayon-t">int</span><br />
          <span class="crayon-h"> </span><br />
          <span class="crayon-v">color</span><br />
          <span class="crayon-h"> </span><br />
          <span class="crayon-o">=</span><br />
          <span class="crayon-h"> </span><br />
          <span class="crayon-v">a</span><br />
          <span class="crayon-sy">.</span><br />
          <span class="crayon-e">getColor</span><br />
          <span class="crayon-sy">(</span><br />
          <span class="crayon-v">R</span><br />
          <span class="crayon-sy">.</span><br />
          <span class="crayon-v">styleable</span><br />
          <span class="crayon-sy">.</span><br />
          <span class="crayon-v">CustomStyle_customColor</span><br />
          <span class="crayon-sy">,</span><br />
          <span class="crayon-h"> </span><br />
          <span class="crayon-v">Color</span><br />
          <span class="crayon-sy">.</span><br />
          <span class="crayon-v">RED</span><br />
          <span class="crayon-sy">)</span><br />
          <span class="crayon-sy">;</span>
         </div>
<div class="crayon-line crayon-striped-line" id="crayon-57203cdfc3139680631693-24">
          <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
          <span class="crayon-m">final</span><br />
          <span class="crayon-h"> </span><br />
          <span class="crayon-t">float</span><br />
          <span class="crayon-h"> </span><br />
          <span class="crayon-v">size</span><br />
          <span class="crayon-h"> </span><br />
          <span class="crayon-o">=</span><br />
          <span class="crayon-h"> </span><br />
          <span class="crayon-v">a</span><br />
          <span class="crayon-sy">.</span><br />
          <span class="crayon-e">getDimensionPixelSize</span><br />
          <span class="crayon-sy">(</span><br />
          <span class="crayon-v">R</span><br />
          <span class="crayon-sy">.</span><br />
          <span class="crayon-v">styleable</span><br />
          <span class="crayon-sy">.</span><br />
          <span class="crayon-v">CustomStyle_customSize</span><br />
          <span class="crayon-sy">,</span><br />
          <span class="crayon-h"> </span><br />
          <span class="crayon-cn">70</span><br />
          <span class="crayon-sy">)</span><br />
          <span class="crayon-sy">;</span>
         </div>
<div class="crayon-line" id="crayon-57203cdfc3139680631693-25">
          <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
          <span class="crayon-v">a</span><br />
          <span class="crayon-sy">.</span><br />
          <span class="crayon-e">recycle</span><br />
          <span class="crayon-sy">(</span><br />
          <span class="crayon-sy">)</span><br />
          <span class="crayon-sy">;</span>
         </div>
<div class="crayon-line crayon-striped-line" id="crayon-57203cdfc3139680631693-26">
          <span class="crayon-h"></span>
         </div>
<div class="crayon-line" id="crayon-57203cdfc3139680631693-27">
          <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
          <span class="crayon-e">setText</span><br />
          <span class="crayon-sy">(</span><br />
          <span class="crayon-v">text</span><br />
          <span class="crayon-sy">)</span><br />
          <span class="crayon-sy">;</span>
         </div>
<div class="crayon-line crayon-striped-line" id="crayon-57203cdfc3139680631693-28">
          <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
          <span class="crayon-e">setTextColor</span><br />
          <span class="crayon-sy">(</span><br />
          <span class="crayon-v">color</span><br />
          <span class="crayon-sy">)</span><br />
          <span class="crayon-sy">;</span>
         </div>
<div class="crayon-line" id="crayon-57203cdfc3139680631693-29">
          <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
          <span class="crayon-e">setTextSize</span><br />
          <span class="crayon-sy">(</span><br />
          <span class="crayon-v">TypedValue</span><br />
          <span class="crayon-sy">.</span><br />
          <span class="crayon-v">COMPLEX_UNIT_PX</span><br />
          <span class="crayon-sy">,</span><br />
          <span class="crayon-h"> </span><br />
          <span class="crayon-v">size</span><br />
          <span class="crayon-sy">)</span><br />
          <span class="crayon-sy">;</span>
         </div>
<div class="crayon-line crayon-striped-line" id="crayon-57203cdfc3139680631693-30">
          <span class="crayon-h"></span>
         </div>
<div class="crayon-line" id="crayon-57203cdfc3139680631693-31">
          <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
          <span class="crayon-sy">}</span>
         </div>
<div class="crayon-line crayon-striped-line" id="crayon-57203cdfc3139680631693-32">
          <span class="crayon-sy">}</span>
         </div>
</p></div>
</td>
</tr>
</tbody>
</table></div>
</p></div>
<p><span style="font-weight:normal;">然后就是定义研究所需的Style</span></p>
<div id="crayon-57203cdfc313d537557224" class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate" style="font-size:13px !important;line-height:15px !important;">
<div class="crayon-toolbar" style="font-size:13px !important;line-height:19.5px !important;">
    <span class="crayon-title"></span> </p>
<div class="crayon-tools" style="font-size:13px !important;line-height:19.5px !important;">
     <span class="crayon-mixed-highlight" title="含多种语言"></span><br />
     <span class="crayon-language">Java</span>
    </div>
</p></div>
<div class="crayon-plain-wrap">
    <textarea class="crayon-plain print-no" readonly style="font-size:13px !important;line-height:15px !important;z-index:0;opacity:0;" cols="22" rows="3">&lt;resources&gt;<br />
    &lt;style name=&#8221;SuperStyleOne&#8221;&gt;<br />
        &lt;item name=&#8221;customColor&#8221;&gt;@android:color/holo_orange_dark&lt;/item&gt;<br />
        &lt;item name=&#8221;customText&#8221;&gt;Hello World&lt;/item&gt;<br />
        &lt;item name=&#8221;customSize&#8221;&gt;30dp&lt;/item&gt;<br />
    &lt;/style&gt;</p>
<p>    &lt;style name=&#8221;SuperStyleTwo&#8221;&gt;<br />
        &lt;item name=&#8221;customText&#8221;&gt;www.iderzheng.com&lt;/item&gt;<br />
    &lt;/style&gt;</p>
<p>    &lt;style name=&#8221;SuperStyleOne.SubOne&#8221;&gt;<br />
        &lt;item name=&#8221;customColor&#8221;&gt;@android:color/holo_blue_dark&lt;/item&gt;<br />
    &lt;/style&gt;</p>
<p>    &lt;style name=&#8221;SuperStyleOne.SubTwo&#8221; parent=&#8221;SuperStyleTwo&#8221;&gt;<br />
    &lt;/style&gt;</p>
<p>    &lt;style name=&#8221;SuperStyleOne.SubThree&#8221; parent=&#8221;SuperStyleTwo&#8221;&gt;<br />
        &lt;item name=&#8221;customText&#8221;&gt;blog.iderzheng.com&lt;/item&gt;<br />
    &lt;/style&gt;<br />
&lt;/resources&gt;</textarea>
   </div>
<div class="crayon-main" style="z-index:1;">
<table class="crayon-table">
<tbody>
<tr class="crayon-row">
<td class="crayon-nums">
<div class="crayon-nums-content" style="font-size:13px !important;line-height:15px !important;">
<div class="crayon-num">
          1
         </div>
<div class="crayon-num crayon-striped-num">
          2
         </div>
<div class="crayon-num">
          3
         </div>
<div class="crayon-num crayon-striped-num">
          4
         </div>
<div class="crayon-num">
          5
         </div>
<div class="crayon-num crayon-striped-num">
          6
         </div>
<div class="crayon-num">
          7
         </div>
<div class="crayon-num crayon-striped-num">
          8
         </div>
<div class="crayon-num">
          9
         </div>
<div class="crayon-num crayon-striped-num">
          10
         </div>
<div class="crayon-num">
          11
         </div>
<div class="crayon-num crayon-striped-num">
          12
         </div>
<div class="crayon-num">
          13
         </div>
<div class="crayon-num crayon-striped-num">
          14
         </div>
<div class="crayon-num">
          15
         </div>
<div class="crayon-num crayon-striped-num">
          16
         </div>
<div class="crayon-num">
          17
         </div>
<div class="crayon-num crayon-striped-num">
          18
         </div>
<div class="crayon-num">
          19
         </div>
<div class="crayon-num crayon-striped-num">
          20
         </div>
<div class="crayon-num">
          21
         </div>
<div class="crayon-num crayon-striped-num">
          22
         </div>
</p></div>
</td>
<td class="crayon-code">
<div class="crayon-pre">
<div class="crayon-line" id="crayon-57203cdfc313d537557224-1">
          <span class="crayon-e">&lt;resources&gt;</span>
         </div>
<div class="crayon-line crayon-striped-line" id="crayon-57203cdfc313d537557224-2">
          <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
          <span class="crayon-ta">&lt;style </span><br />
          <span class="crayon-e">name</span><br />
          <span class="crayon-i">=&#8221;SuperStyleOne&#8221;&gt;</span>
         </div>
<div class="crayon-line" id="crayon-57203cdfc313d537557224-3">
          <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
          <span class="crayon-ta">&lt;item </span><br />
          <span class="crayon-e">name</span><br />
          <span class="crayon-i">=&#8221;customColor&#8221;&gt;@android</span><br />
          <span class="crayon-sy">:</span><br />
          <span class="crayon-i">color/holo_orange_dark&lt;/item&gt;</span>
         </div>
<div class="crayon-line crayon-striped-line" id="crayon-57203cdfc313d537557224-4">
          <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
          <span class="crayon-ta">&lt;item </span><br />
          <span class="crayon-e">name</span><br />
          <span class="crayon-i">=&#8221;customText&#8221;&gt;Hello</span><br />
          <span class="crayon-h"> </span><br />
          <span class="crayon-i">World&lt;/item&gt;</span>
         </div>
<div class="crayon-line" id="crayon-57203cdfc313d537557224-5">
          <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
          <span class="crayon-ta">&lt;item </span><br />
          <span class="crayon-e">name</span><br />
          <span class="crayon-i">=&#8221;customSize&#8221;&gt;30dp&lt;/item&gt;</span>
         </div>
<div class="crayon-line crayon-striped-line" id="crayon-57203cdfc313d537557224-6">
          <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
          <span class="crayon-ta">&lt;/style&gt;</span>
         </div>
<div class="crayon-line" id="crayon-57203cdfc313d537557224-7">
          <span class="crayon-h"></span>
         </div>
<div class="crayon-line crayon-striped-line" id="crayon-57203cdfc313d537557224-8">
          <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
          <span class="crayon-ta">&lt;style </span><br />
          <span class="crayon-e">name</span><br />
          <span class="crayon-i">=&#8221;SuperStyleTwo&#8221;&gt;</span>
         </div>
<div class="crayon-line" id="crayon-57203cdfc313d537557224-9">
          <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
          <span class="crayon-ta">&lt;item </span><br />
          <span class="crayon-e">name</span><br />
          <span class="crayon-i">=&#8221;customText&#8221;&gt;www.iderzheng.com&lt;/item&gt;</span>
         </div>
<div class="crayon-line crayon-striped-line" id="crayon-57203cdfc313d537557224-10">
          <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
          <span class="crayon-ta">&lt;/style&gt;</span>
         </div>
<div class="crayon-line" id="crayon-57203cdfc313d537557224-11">
          <span class="crayon-h"></span>
         </div>
<div class="crayon-line crayon-striped-line" id="crayon-57203cdfc313d537557224-12">
          <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
          <span class="crayon-ta">&lt;style </span><br />
          <span class="crayon-e">name</span><br />
          <span class="crayon-i">=&#8221;SuperStyleOne.SubOne&#8221;&gt;</span>
         </div>
<div class="crayon-line" id="crayon-57203cdfc313d537557224-13">
          <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
          <span class="crayon-ta">&lt;item </span><br />
          <span class="crayon-e">name</span><br />
          <span class="crayon-i">=&#8221;customColor&#8221;&gt;@android</span><br />
          <span class="crayon-sy">:</span><br />
          <span class="crayon-i">color/holo_blue_dark&lt;/item&gt;</span>
         </div>
<div class="crayon-line crayon-striped-line" id="crayon-57203cdfc313d537557224-14">
          <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
          <span class="crayon-ta">&lt;/style&gt;</span>
         </div>
<div class="crayon-line" id="crayon-57203cdfc313d537557224-15">
          <span class="crayon-h"></span>
         </div>
<div class="crayon-line crayon-striped-line" id="crayon-57203cdfc313d537557224-16">
          <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
          <span class="crayon-ta">&lt;style </span><br />
          <span class="crayon-e">name</span><br />
          <span class="crayon-i">=&#8221;SuperStyleOne.SubTwo&#8221;</span><br />
          <span class="crayon-h"> </span><br />
          <span class="crayon-e">parent</span><br />
          <span class="crayon-i">=&#8221;SuperStyleTwo&#8221;&gt;</span>
         </div>
<div class="crayon-line" id="crayon-57203cdfc313d537557224-17">
          <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
          <span class="crayon-ta">&lt;/style&gt;</span>
         </div>
<div class="crayon-line crayon-striped-line" id="crayon-57203cdfc313d537557224-18">
          <span class="crayon-h"></span>
         </div>
<div class="crayon-line" id="crayon-57203cdfc313d537557224-19">
          <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
          <span class="crayon-ta">&lt;style </span><br />
          <span class="crayon-e">name</span><br />
          <span class="crayon-i">=&#8221;SuperStyleOne.SubThree&#8221;</span><br />
          <span class="crayon-h"> </span><br />
          <span class="crayon-e">parent</span><br />
          <span class="crayon-i">=&#8221;SuperStyleTwo&#8221;&gt;</span>
         </div>
<div class="crayon-line crayon-striped-line" id="crayon-57203cdfc313d537557224-20">
          <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
          <span class="crayon-ta">&lt;item </span><br />
          <span class="crayon-e">name</span><br />
          <span class="crayon-i">=&#8221;customText&#8221;&gt;blog.iderzheng.com&lt;/item&gt;</span>
         </div>
<div class="crayon-line" id="crayon-57203cdfc313d537557224-21">
          <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
          <span class="crayon-ta">&lt;/style&gt;</span>
         </div>
<div class="crayon-line crayon-striped-line" id="crayon-57203cdfc313d537557224-22">
          <span class="crayon-o">&lt;</span><br />
          <span class="crayon-o">/</span><br />
          <span class="crayon-v">resources</span><br />
          <span class="crayon-o">&gt;</span>
         </div>
</p></div>
</td>
</tr>
</tbody>
</table></div>
</p></div>
<p>上边定义的Style里，<code>SuperStyleOne</code>将通过添加前缀的方式作用到子Style上，而<code>SuperStyleTwo</code>则通过指定到<code>parent</code>来其作用。可以看到<code>SubTwo</code>和<code>SubThree</code>混合了两种方式。</p>
<p>最后在Activity的布局视图里使用自定类并设定上不同的Style</p>
<div id="crayon-57203cdfc3141738842038" class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate" style="font-size:13px !important;line-height:15px !important;">
<div class="crayon-toolbar" style="font-size:13px !important;line-height:19.5px !important;">
    <span class="crayon-title"></span> </p>
<div class="crayon-tools" style="font-size:13px !important;line-height:19.5px !important;">
     <span class="crayon-language">XHTML</span>
    </div>
</p></div>
<div class="crayon-plain-wrap">
    <textarea class="crayon-plain print-no" readonly style="font-size:13px !important;line-height:15px !important;z-index:1;opacity:1;" cols="22" rows="3">&lt;LinearLayout xmlns:android=&#8221;http://schemas.android.com/apk/res/android&#8221;<br />
              xmlns:tools=&#8221;http://schemas.android.com/tools&#8221;<br />
              android:orientation=&#8221;vertical&#8221;<br />
              android:layout_width=&#8221;match_parent&#8221;<br />
              android:layout_height=&#8221;match_parent&#8221;<br />
              android:paddingLeft=&#8221;@dimen/activity_horizontal_margin&#8221;<br />
              android:paddingRight=&#8221;@dimen/activity_horizontal_margin&#8221;<br />
              android:paddingTop=&#8221;@dimen/activity_vertical_margin&#8221;<br />
              android:paddingBottom=&#8221;@dimen/activity_vertical_margin&#8221;<br />
              tools:context=&#8221;.MainActivity&#8221;&gt;</p>
<p>    &lt;com.ider.trial.styles.StyledTextView<br />
            style=&#8221;@style/SuperStyleOne&#8221;<br />
            android:layout_width=&#8221;wrap_content&#8221;<br />
            android:layout_height=&#8221;wrap_content&#8221;/&gt;</p>
<p>    &lt;com.ider.trial.styles.StyledTextView<br />
            style=&#8221;@style/SuperStyleOne.SubOne&#8221;<br />
            android:layout_width=&#8221;wrap_content&#8221;<br />
            android:layout_height=&#8221;wrap_content&#8221;/&gt;</p>
<p>    &lt;com.ider.trial.styles.StyledTextView<br />
            style=&#8221;@style/SuperStyleOne.SubTwo&#8221;<br />
            android:layout_width=&#8221;wrap_content&#8221;<br />
            android:layout_height=&#8221;wrap_content&#8221;/&gt;</p>
<p>    &lt;com.ider.trial.styles.StyledTextView<br />
            style=&#8221;@style/SuperStyleOne.SubThree&#8221;<br />
            android:layout_width=&#8221;wrap_content&#8221;<br />
            android:layout_height=&#8221;wrap_content&#8221;/&gt;</p>
<p>&lt;/LinearLayout&gt;</textarea>
   </div>
<div class="crayon-main" style="z-index:0;">
<table class="crayon-table">
<tbody>
<tr class="crayon-row">
<td class="crayon-nums">
<div class="crayon-nums-content" style="font-size:13px !important;line-height:15px !important;">
<div class="crayon-num">
          1
         </div>
<div class="crayon-num crayon-striped-num">
          2
         </div>
<div class="crayon-num">
          3
         </div>
<div class="crayon-num crayon-striped-num">
          4
         </div>
<div class="crayon-num">
          5
         </div>
<div class="crayon-num crayon-striped-num">
          6
         </div>
<div class="crayon-num">
          7
         </div>
<div class="crayon-num crayon-striped-num">
          8
         </div>
<div class="crayon-num">
          9
         </div>
<div class="crayon-num crayon-striped-num">
          10
         </div>
<div class="crayon-num">
          11
         </div>
<div class="crayon-num crayon-striped-num">
          12
         </div>
<div class="crayon-num">
          13
         </div>
<div class="crayon-num crayon-striped-num">
          14
         </div>
<div class="crayon-num">
          15
         </div>
<div class="crayon-num crayon-striped-num">
          16
         </div>
<div class="crayon-num">
          17
         </div>
<div class="crayon-num crayon-striped-num">
          18
         </div>
<div class="crayon-num">
          19
         </div>
<div class="crayon-num crayon-striped-num">
          20
         </div>
<div class="crayon-num">
          21
         </div>
<div class="crayon-num crayon-striped-num">
          22
         </div>
<div class="crayon-num">
          23
         </div>
<div class="crayon-num crayon-striped-num">
          24
         </div>
<div class="crayon-num">
          25
         </div>
<div class="crayon-num crayon-striped-num">
          26
         </div>
<div class="crayon-num">
          27
         </div>
<div class="crayon-num crayon-striped-num">
          28
         </div>
<div class="crayon-num">
          29
         </div>
<div class="crayon-num crayon-striped-num">
          30
         </div>
<div class="crayon-num">
          31
         </div>
<div class="crayon-num crayon-striped-num">
          32
         </div>
</p></div>
</td>
<td class="crayon-code">
<div class="crayon-pre">
<div class="crayon-line" id="crayon-57203cdfc3141738842038-1">
          <span class="crayon-r">&lt;LinearLayout </span>xmlns<br />
          <span class="crayon-o">:</span><br />
          <span class="crayon-e">android</span><br />
          <span class="crayon-o">=</span><br />
          <span class="crayon-s">&#8220;http://schemas.android.com/apk/res/android&#8221;</span>
         </div>
<div class="crayon-line crayon-striped-line" id="crayon-57203cdfc3141738842038-2">
          <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>xmlns<br />
          <span class="crayon-o">:</span><br />
          <span class="crayon-e">tools</span><br />
          <span class="crayon-o">=</span><br />
          <span class="crayon-s">&#8220;http://schemas.android.com/tools&#8221;</span>
         </div>
<div class="crayon-line" id="crayon-57203cdfc3141738842038-3">
          <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>android<br />
          <span class="crayon-o">:</span><br />
          <span class="crayon-e">orientation</span><br />
          <span class="crayon-o">=</span><br />
          <span class="crayon-s">&#8220;vertical&#8221;</span>
         </div>
<div class="crayon-line crayon-striped-line" id="crayon-57203cdfc3141738842038-4">
          <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>android<br />
          <span class="crayon-o">:</span><br />
          <span class="crayon-e">layout_width</span><br />
          <span class="crayon-o">=</span><br />
          <span class="crayon-s">&#8220;match_parent&#8221;</span>
         </div>
<div class="crayon-line" id="crayon-57203cdfc3141738842038-5">
          <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>android<br />
          <span class="crayon-o">:</span><br />
          <span class="crayon-e">layout_height</span><br />
          <span class="crayon-o">=</span><br />
          <span class="crayon-s">&#8220;match_parent&#8221;</span>
         </div>
<div class="crayon-line crayon-striped-line" id="crayon-57203cdfc3141738842038-6">
          <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>android<br />
          <span class="crayon-o">:</span><br />
          <span class="crayon-e">paddingLeft</span><br />
          <span class="crayon-o">=</span><br />
          <span class="crayon-s">&#8220;@dimen/activity_horizontal_margin&#8221;</span>
         </div>
<div class="crayon-line" id="crayon-57203cdfc3141738842038-7">
          <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>android<br />
          <span class="crayon-o">:</span><br />
          <span class="crayon-e">paddingRight</span><br />
          <span class="crayon-o">=</span><br />
          <span class="crayon-s">&#8220;@dimen/activity_horizontal_margin&#8221;</span>
         </div>
<div class="crayon-line crayon-striped-line" id="crayon-57203cdfc3141738842038-8">
          <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>android<br />
          <span class="crayon-o">:</span><br />
          <span class="crayon-e">paddingTop</span><br />
          <span class="crayon-o">=</span><br />
          <span class="crayon-s">&#8220;@dimen/activity_vertical_margin&#8221;</span>
         </div>
<div class="crayon-line" id="crayon-57203cdfc3141738842038-9">
          <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>android<br />
          <span class="crayon-o">:</span><br />
          <span class="crayon-e">paddingBottom</span><br />
          <span class="crayon-o">=</span><br />
          <span class="crayon-s">&#8220;@dimen/activity_vertical_margin&#8221;</span>
         </div>
<div class="crayon-line crayon-striped-line" id="crayon-57203cdfc3141738842038-10">
          <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>tools<br />
          <span class="crayon-o">:</span><br />
          <span class="crayon-e">context</span><br />
          <span class="crayon-o">=</span><br />
          <span class="crayon-s">&#8220;.MainActivity&#8221;</span><br />
          <span class="crayon-r">&gt;</span>
         </div>
<div class="crayon-line" id="crayon-57203cdfc3141738842038-11">
          <span class="crayon-i"></span>
         </div>
<div class="crayon-line crayon-striped-line" id="crayon-57203cdfc3141738842038-12">
          <span class="crayon-i">&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
          <span class="crayon-r">&lt;com.ider.trial.styles.StyledTextView</span>
         </div>
<div class="crayon-line" id="crayon-57203cdfc3141738842038-13">
          <span class="crayon-r">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
          <span class="crayon-e">style</span><br />
          <span class="crayon-o">=</span><br />
          <span class="crayon-s">&#8220;@style/SuperStyleOne&#8221;</span>
         </div>
<div class="crayon-line crayon-striped-line" id="crayon-57203cdfc3141738842038-14">
          <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>android<br />
          <span class="crayon-o">:</span><br />
          <span class="crayon-e">layout_width</span><br />
          <span class="crayon-o">=</span><br />
          <span class="crayon-s">&#8220;wrap_content&#8221;</span>
         </div>
<div class="crayon-line" id="crayon-57203cdfc3141738842038-15">
          <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>android<br />
          <span class="crayon-o">:</span><br />
          <span class="crayon-e">layout_height</span><br />
          <span class="crayon-o">=</span><br />
          <span class="crayon-s">&#8220;wrap_content&#8221;</span><br />
          <span class="crayon-r">/&gt;</span>
         </div>
<div class="crayon-line crayon-striped-line" id="crayon-57203cdfc3141738842038-16">
          <span class="crayon-i"></span>
         </div>
<div class="crayon-line" id="crayon-57203cdfc3141738842038-17">
          <span class="crayon-i">&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
          <span class="crayon-r">&lt;com.ider.trial.styles.StyledTextView</span>
         </div>
<div class="crayon-line crayon-striped-line" id="crayon-57203cdfc3141738842038-18">
          <span class="crayon-r">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
          <span class="crayon-e">style</span><br />
          <span class="crayon-o">=</span><br />
          <span class="crayon-s">&#8220;@style/SuperStyleOne.SubOne&#8221;</span>
         </div>
<div class="crayon-line" id="crayon-57203cdfc3141738842038-19">
          <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>android<br />
          <span class="crayon-o">:</span><br />
          <span class="crayon-e">layout_width</span><br />
          <span class="crayon-o">=</span><br />
          <span class="crayon-s">&#8220;wrap_content&#8221;</span>
         </div>
<div class="crayon-line crayon-striped-line" id="crayon-57203cdfc3141738842038-20">
          <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>android<br />
          <span class="crayon-o">:</span><br />
          <span class="crayon-e">layout_height</span><br />
          <span class="crayon-o">=</span><br />
          <span class="crayon-s">&#8220;wrap_content&#8221;</span><br />
          <span class="crayon-r">/&gt;</span>
         </div>
<div class="crayon-line" id="crayon-57203cdfc3141738842038-21">
          <span class="crayon-i"></span>
         </div>
<div class="crayon-line crayon-striped-line" id="crayon-57203cdfc3141738842038-22">
          <span class="crayon-i">&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
          <span class="crayon-r">&lt;com.ider.trial.styles.StyledTextView</span>
         </div>
<div class="crayon-line" id="crayon-57203cdfc3141738842038-23">
          <span class="crayon-r">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
          <span class="crayon-e">style</span><br />
          <span class="crayon-o">=</span><br />
          <span class="crayon-s">&#8220;@style/SuperStyleOne.SubTwo&#8221;</span>
         </div>
<div class="crayon-line crayon-striped-line" id="crayon-57203cdfc3141738842038-24">
          <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>android<br />
          <span class="crayon-o">:</span><br />
          <span class="crayon-e">layout_width</span><br />
          <span class="crayon-o">=</span><br />
          <span class="crayon-s">&#8220;wrap_content&#8221;</span>
         </div>
<div class="crayon-line" id="crayon-57203cdfc3141738842038-25">
          <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>android<br />
          <span class="crayon-o">:</span><br />
          <span class="crayon-e">layout_height</span><br />
          <span class="crayon-o">=</span><br />
          <span class="crayon-s">&#8220;wrap_content&#8221;</span><br />
          <span class="crayon-r">/&gt;</span>
         </div>
<div class="crayon-line crayon-striped-line" id="crayon-57203cdfc3141738842038-26">
          <span class="crayon-i"></span>
         </div>
<div class="crayon-line" id="crayon-57203cdfc3141738842038-27">
          <span class="crayon-i">&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
          <span class="crayon-r">&lt;com.ider.trial.styles.StyledTextView</span>
         </div>
<div class="crayon-line crayon-striped-line" id="crayon-57203cdfc3141738842038-28">
          <span class="crayon-r">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
          <span class="crayon-e">style</span><br />
          <span class="crayon-o">=</span><br />
          <span class="crayon-s">&#8220;@style/SuperStyleOne.SubThree&#8221;</span>
         </div>
<div class="crayon-line" id="crayon-57203cdfc3141738842038-29">
          <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>android<br />
          <span class="crayon-o">:</span><br />
          <span class="crayon-e">layout_width</span><br />
          <span class="crayon-o">=</span><br />
          <span class="crayon-s">&#8220;wrap_content&#8221;</span>
         </div>
<div class="crayon-line crayon-striped-line" id="crayon-57203cdfc3141738842038-30">
          <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>android<br />
          <span class="crayon-o">:</span><br />
          <span class="crayon-e">layout_height</span><br />
          <span class="crayon-o">=</span><br />
          <span class="crayon-s">&#8220;wrap_content&#8221;</span><br />
          <span class="crayon-r">/&gt;</span>
         </div>
<div class="crayon-line" id="crayon-57203cdfc3141738842038-31">
          <span class="crayon-i"></span>
         </div>
<div class="crayon-line crayon-striped-line" id="crayon-57203cdfc3141738842038-32">
          <span class="crayon-r">&lt;/LinearLayout&gt;</span>
         </div>
</p></div>
</td>
</tr>
</tbody>
</table></div>
</p></div>
<p><span style="font-weight:normal;">运行之后得到效果如下：</span></p>
<p><img class="alignnone wp-image-946" src="http://blog.iderzheng.com/wp-content/uploads/2015/10/Styles-576x1024.png" alt="Styles" height="512" width="288"></p>
<p>第一个和第二个都是Style标准的使用方式，也看到它们正确地获得了定义的属性值，子Style也正确的继承和覆盖了父Style的属性值。</p>
<p>对于第三个和第四个，它们呈现的颜色是代码中使用的默认红色(<code>Color.RED</code>)，字体的值也是源自代码中的使用值，所以明显比前两者要小。这也就是说它们并没用继承下<code>SuperStyleOne</code>中定义的字体大小和颜色。但是<code>SuperStyleTwo</code>中定义的内容被第三个正确的显示了出来，也说明<code>SubTwo</code>成功继承通过<code>parent</code>指定的父Style的内容。而第四个呈现出来内容则说明覆盖的效果也是正确的。</p>
<p><del>在做这个试验之前，我一直以为两种方式会同时其作用，只是用parent指定比用前缀有高优先级。也就是说Android会先从当前Style定义中找某个属性的值，如果没有找到就转到parent指定的父Style中找，还没有则转到前缀指定的父Style中找。</del>但是通过上边的结果表明：<strong>当使用<code>parent</code>指定父Style后，前缀方式则不在其作用，只是作为Style的名字</strong>。也就是说：<strong>Android的Style不支持多继承</strong>。Style的继承只能单线一层层下来。</p>
<p>反过来在看看系统定义的Style也更容易懂了，比如打开<a href="https://github.com/android/platform_frameworks_base/blob/master/core/res/res/values/themes_holo.xml" rel="nofollow" data-token="d1861ec57cd37aca8dc8f05484562606">themes_holo.xml</a>，会看到很多一样的内容被”冗余”地定义在<code>Theme.Holo</code>和<code>Theme.Holo.Light</code>两个Style下。但因为<code>Theme.Holo.Light</code>用parent指定了其父Style是<code>Theme.Light</code>，所以<code>Theme.Holo.Light</code>并没有从Theme.Holo继承任何属性值，也因此这样的冗余是必须的。</p>
<div id="crayon-57203cdfc3146226543456" class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate" style="font-size:13px !important;line-height:15px !important;">
<div class="crayon-toolbar" style="font-size:13px !important;line-height:19.5px !important;">
    <span class="crayon-title"></span> </p>
<div class="crayon-tools" style="font-size:13px !important;line-height:19.5px !important;">
     <span class="crayon-mixed-highlight" title="含多种语言"></span><br />
     <span class="crayon-language">Java</span>
    </div>
</p></div>
<div class="crayon-plain-wrap">
    <textarea class="crayon-plain print-no" readonly style="font-size:13px !important;line-height:15px !important;z-index:0;opacity:0;" cols="22" rows="3">&lt;style name=&#8221;Theme.Holo.Light&#8221; parent=&#8221;Theme.Light&#8221;&gt;</p>
<p>&#8230; &#8230; &#8230; &#8230;</p>
<p>&lt;/style&gt;</textarea>
   </div>
<div class="crayon-main" style="z-index:1;">
<table class="crayon-table">
<tbody>
<tr class="crayon-row">
<td class="crayon-nums">
<div class="crayon-nums-content" style="font-size:13px !important;line-height:15px !important;">
<div class="crayon-num">
          1
         </div>
<div class="crayon-num crayon-striped-num">
          2
         </div>
<div class="crayon-num">
          3
         </div>
<div class="crayon-num crayon-striped-num">
          4
         </div>
<div class="crayon-num">
          5
         </div>
</p></div>
</td>
<td class="crayon-code">
<div class="crayon-pre">
<div class="crayon-line" id="crayon-57203cdfc3146226543456-1">
          <span class="crayon-ta">&lt;style </span><br />
          <span class="crayon-e">name</span><br />
          <span class="crayon-i">=&#8221;Theme.Holo.Light&#8221;</span><br />
          <span class="crayon-h"> </span><br />
          <span class="crayon-e">parent</span><br />
          <span class="crayon-i">=&#8221;Theme.Light&#8221;&gt;</span>
         </div>
<div class="crayon-line crayon-striped-line" id="crayon-57203cdfc3146226543456-2">
          <span class="crayon-h"></span>
         </div>
<div class="crayon-line" id="crayon-57203cdfc3146226543456-3">
          <span class="crayon-i">&#8230;</span><br />
          <span class="crayon-h"> </span><br />
          <span class="crayon-i">&#8230;</span><br />
          <span class="crayon-h"> </span><br />
          <span class="crayon-i">&#8230;</span><br />
          <span class="crayon-h"> </span><br />
          <span class="crayon-i">&#8230;</span>
         </div>
<div class="crayon-line crayon-striped-line" id="crayon-57203cdfc3146226543456-4">
          <span class="crayon-h"></span>
         </div>
<div class="crayon-line" id="crayon-57203cdfc3146226543456-5">
          <span class="crayon-ta">&lt;/style&gt;</span>
         </div>
</p></div>
</td>
</tr>
</tbody>
</table></div>
</p></div>
<p><span style="font-weight:normal;">使用</span><code style="font-style:inherit;">Theme.Holo.Light</code><span style="font-weight:normal;">作为Style的名字只是为了名字更加的清晰明了。</span></p>
<p><strong>References:</strong></p>
<ol start="1">
<li><a href="http://developer.android.com/guide/topics/ui/themes.html" rel="nofollow" data-token="463bc505c20ca9aaa3d7fbc0113daf7f">Styles and Themes | Android Developers</a></li>
<li><a href="http://stackoverflow.com/questions/12614707/android-xml-theme-inheriting-from-two-parent-themes" rel="nofollow" data-token="2c3dbbb80af48a5c7e3e3bea46543740">Android XML theme inheriting from two parent themes? – Stack Overflow</a></li>
<li><a href="http://stackoverflow.com/questions/17603422/reason-why-style-attribute-does-not-use-the-android-namespace-prefix" rel="nofollow" data-token="e404e76395e92a6b1dad363fae9c2876">xml – Reason why style attribute does not use the android: namespace prefix – Stack Overflow</a></li>
</ol></div>
</div>
]]></content:encoded>
										</item>
	</channel>
</rss>
