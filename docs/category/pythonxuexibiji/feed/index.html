<?xml version="1.0" encoding="UTF-8"?><rss version="2.0"
	xmlns:content="http://purl.org/rss/1.0/modules/content/"
	xmlns:wfw="http://wellformedweb.org/CommentAPI/"
	xmlns:dc="http://purl.org/dc/elements/1.1/"
	xmlns:atom="http://www.w3.org/2005/Atom"
	xmlns:sy="http://purl.org/rss/1.0/modules/syndication/"
	xmlns:slash="http://purl.org/rss/1.0/modules/slash/"
	>

<channel>
	<title>python学习笔记 &#8211; 有组织在!</title>
	<atom:link href="https://uzzz.org/category/pythonxuexibiji/feed" rel="self" type="application/rss+xml" />
	<link>http://uzzz.org/</link>
	<description></description>
	<lastBuildDate>Sat, 14 Oct 2017 06:08:38 +0000</lastBuildDate>
	<language>en-US</language>
	<sy:updatePeriod>
	hourly	</sy:updatePeriod>
	<sy:updateFrequency>
	1	</sy:updateFrequency>
	<generator>https://wordpress.org/?v=5.2.4</generator>

<image>
	<url>https://uzzz.org/wp-content/uploads/2019/10/cropped-icon-32x32.png</url>
	<title>python学习笔记 &#8211; 有组织在!</title>
	<link>http://uzzz.org/</link>
	<width>32</width>
	<height>32</height>
</image> 
	<item>
		<title>爬虫学习笔记&#8211;Tor隐藏Ip</title>
		<link>https://uzzz.org/article/1128.html</link>
				<pubDate>Sat, 14 Oct 2017 06:08:38 +0000</pubDate>
		<dc:creator><![CDATA[fandyvon]]></dc:creator>
				<category><![CDATA[python学习笔记]]></category>
		<category><![CDATA[爬虫学习笔记]]></category>

		<guid isPermaLink="false">https://uzzz.org/article/1128.html</guid>
				<description><![CDATA[因为在爬虫时，如果使用了默认的IP 可能导致自己的IP遭到封禁 所以就要隐藏自己的IP&#160; 事先说明 爬虫要有度 也要考虑服务器的压力&#160; 本篇基于win10&#160; tor的原理 http://www.cnblogs.com/likeli/p/5719230.html http://blog.csdn.net/whiup/article/details/52317779 https://www.deepdotweb.com/2014/05/23/use-tor-socks5-proxy/ 1.安装tor浏览器&#160; http://www.theonionrouter.com/projects/torbrowser.html.en 如果进不去网页 那么请自行解决&#160; 2.tor的配置请看这篇 https://jingyan.baidu.com/article/adc815137654fbf723bf73b1.html 这样就可以搭建好了tor python 要安装库 pip install pysocks pip install stem import socks import socket import requests socks.set_default_proxy(socks.SOCKS5,"127.0.0.1",9150) socket.socket = socks.socksocket a = requests.get("http://checkip.amazonaws.com").text print a 通过访问 http://checkip.amazonaws.com 会得到一个ip 会发现这个ip已经是隐藏的ip了&#160; controller.signal(Signal.NEWNYM) 切换ip #coding=utf-8 from stem import Signal from stem.control import Controller import socket import socks import requests import time import sys reload(sys) sys.setdefaultencoding('utf-8') controller = Controller.from_port(port=9151) controller.authenticate() socks.set_default_proxy(socks.SOCKS5,"127.0.0.1",9150) socket.socket = socks.socksocket total_scrappy_time = 0 total_changeIP_time = 0 for x in range(0,10): a = requests.get("http://checkip.amazonaws.com").text print ("第"+str(x+1)+"次IP："+a) time1 = time.time() a = requests.get("http://www.santostang.com/").text time2 = time.time() total_scrappy_time = total_scrappy_time + time2-time1 print ("第"+str(x+1)+"次抓取花费时间："+str(time2-time1)) time3 = time.time() controller.signal(Signal.NEWNYM) time.sleep(5) time4 = time.time() total_changeIP_time = total_changeIP_time + time4-time3-5 print ("第"+str(x+1)+"次更换IP花费时间: "+str(time4-time3-5)) print ("平均抓取花费时间："+str(total_scrappy_time/10)) print ("平均更换IP时间："+str(total_changeIP_time/10)) 注明 本篇文章参考了 唐松老师的书《python网络爬虫从入门到实践》 请购买正版]]></description>
								<content:encoded><![CDATA[<div id="article_content" class="article_content clearfix">
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-3019150162.css">
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-3019150162.css">
<div class="htmledit_views" id="content_views">
<p>因为在爬虫时，如果使用了默认的IP 可能导致自己的IP遭到封禁</p>
<p>所以就要隐藏自己的IP&nbsp;</p>
<p>事先说明 爬虫要有度 也要考虑服务器的压力&nbsp;</p>
<p>本篇基于win10&nbsp;</p>
<p>tor的原理</p>
<p></p>
<p>http://www.cnblogs.com/likeli/p/5719230.html</p>
<p>http://blog.csdn.net/whiup/article/details/52317779</p>
<p>https://www.deepdotweb.com/2014/05/23/use-tor-socks5-proxy/</p>
<p></p>
<p>1.安装tor浏览器&nbsp;</p>
<p>http://www.theonionrouter.com/projects/torbrowser.html.en</p>
<p>如果进不去网页 那么请自行解决&nbsp;</p>
<p></p>
<p>2.tor的配置请看这篇</p>
<p>https://jingyan.baidu.com/article/adc815137654fbf723bf73b1.html</p>
<p></p>
<p>这样就可以搭建好了tor</p>
<p></p>
<p>python 要安装库</p>
<p></p>
<p>pip install pysocks</p>
<p>pip install stem</p>
<p></p>
</p>
<pre><code class="language-python">import socks
import socket
import requests

socks.set_default_proxy(socks.SOCKS5,"127.0.0.1",9150)
socket.socket = socks.socksocket

a = requests.get("http://checkip.amazonaws.com").text

print a</code></pre>
<p>通过访问</p>
<pre><code class="language-python">http://checkip.amazonaws.com</code></pre>
<p>会得到一个ip 会发现这个ip已经是隐藏的ip了&nbsp;</p>
<p></p>
</p>
<pre><code class="language-python">controller.signal(Signal.NEWNYM)</code></pre>
<p> 切换ip </p>
<p></p>
</p>
<pre><code class="language-python">#coding=utf-8
from stem import Signal
from stem.control import Controller
import socket
import socks
import requests
import time
import sys
reload(sys)
sys.setdefaultencoding('utf-8')

controller = Controller.from_port(port=9151)
controller.authenticate()
socks.set_default_proxy(socks.SOCKS5,"127.0.0.1",9150)
socket.socket = socks.socksocket

total_scrappy_time = 0
total_changeIP_time = 0
for x in range(0,10):
    a = requests.get("http://checkip.amazonaws.com").text
    print ("第"+str(x+1)+"次IP："+a)

    time1 = time.time()
    a = requests.get("http://www.santostang.com/").text

    time2 = time.time()
    total_scrappy_time = total_scrappy_time + time2-time1
    print ("第"+str(x+1)+"次抓取花费时间："+str(time2-time1))

    time3 = time.time()
    controller.signal(Signal.NEWNYM)
    time.sleep(5)
    time4 = time.time()
    total_changeIP_time = total_changeIP_time + time4-time3-5
    print ("第"+str(x+1)+"次更换IP花费时间: "+str(time4-time3-5))

print ("平均抓取花费时间："+str(total_scrappy_time/10))
print ("平均更换IP时间："+str(total_changeIP_time/10))

</code></pre>
<p></p>
<p>注明 本篇文章参考了 唐松老师的书《python网络爬虫从入门到实践》 请购买正版</p>
<p></p>
<p></p>
</p></div>
</div>
]]></content:encoded>
										</item>
	</channel>
</rss>
