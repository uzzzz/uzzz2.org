<?xml version="1.0" encoding="UTF-8"?><rss version="2.0"
	xmlns:content="http://purl.org/rss/1.0/modules/content/"
	xmlns:wfw="http://wellformedweb.org/CommentAPI/"
	xmlns:dc="http://purl.org/dc/elements/1.1/"
	xmlns:atom="http://www.w3.org/2005/Atom"
	xmlns:sy="http://purl.org/rss/1.0/modules/syndication/"
	xmlns:slash="http://purl.org/rss/1.0/modules/slash/"
	>

<channel>
	<title>Vue &#8211; 有组织在!</title>
	<atom:link href="https://uzzz.org/category/vue/feed" rel="self" type="application/rss+xml" />
	<link>https://uzzz.org/</link>
	<description></description>
	<lastBuildDate>Tue, 20 Aug 2019 05:53:40 +0000</lastBuildDate>
	<language>zh-CN</language>
	<sy:updatePeriod>
	hourly	</sy:updatePeriod>
	<sy:updateFrequency>
	1	</sy:updateFrequency>
	<generator>https://wordpress.org/?v=5.2.4</generator>

<image>
	<url>https://uzzz.org/wp-content/uploads/2019/10/cropped-icon-32x32.png</url>
	<title>Vue &#8211; 有组织在!</title>
	<link>https://uzzz.org/</link>
	<width>32</width>
	<height>32</height>
</image> 
	<item>
		<title>vue-amap中添加高德地图地图的自定义样式</title>
		<link>https://uzzz.org/article/1365.html</link>
				<pubDate>Tue, 20 Aug 2019 05:53:40 +0000</pubDate>
		<dc:creator><![CDATA[fandyvon]]></dc:creator>
				<category><![CDATA[Vue]]></category>

		<guid isPermaLink="false">http://wp.uzzz.org/article/1365.html</guid>
				<description><![CDATA[vue-amap中添加高德地图地图的自定义样式 高德地图的自定义样式列表： 使用： amap://styles/+ 样式的名称 如： 使用标准颜色 amap://styles/normal 依次类推 标准 normal 幻影黑 dark 月光银 light 远山黛 whitesmoke 草色青 fresh 雅士灰 grey 涂鸦 graffiti 马卡龙 m]]></description>
								<content:encoded><![CDATA[<div id="article_content" class="article_content clearfix">
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-3019150162.css">
<div id="content_views" class="markdown_views prism-atom-one-dark">
  <!-- flowchart 箭头图标 勿删 --><br />
  <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
   <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
  </svg> </p>
<h1><a id="vueamap_0"></a>vue-amap中添加高德地图地图的自定义样式</h1>
<p>高德地图的自定义样式列表：<br /> 使用： amap://styles/+ 样式的名称<br /> 如： 使用标准颜色<br /> amap://styles/normal<br /> 依次类推</p>
<ul>
<li>
<p>标准<br /> normal</p>
</li>
<li>
<p>幻影黑<br /> dark</p>
</li>
<li>
<p>月光银<br /> light</p>
</li>
<li>
<p>远山黛<br /> whitesmoke</p>
</li>
<li>
<p>草色青<br /> fresh</p>
</li>
<li>
<p>雅士灰<br /> grey</p>
</li>
<li>
<p>涂鸦<br /> graffiti</p>
</li>
<li>
<p>马卡龙<br /> macaron</p>
</li>
<li>
<p>靛青蓝<br /> blue</p>
</li>
<li>
<p>极夜蓝<br /> darkblue</p>
</li>
<li>
<p>酱籽<br /> wine</p>
</li>
</ul>
<p>vue中：</p>
<pre><code>&lt;template&gt;
  &lt;el-amap vid="amapDemo" :amap-manager="amapManager" :events="mapEvents"  class="amap-demo"&gt;
  &lt;/el-amap&gt;
&lt;/template&gt;
</code></pre>
<p>script :</p>
<pre><code>&lt;script&gt;
  import {
    AMapManager
  } from 'vue-amap';
  import VueAMap from 'vue-amap'
  let amapManager = new VueAMap.AMapManager();

  export default {
      name: "",
      data() {
          return {
            amapManager,
            mapEvents: {
                init(o) {
                     o.setMapStyle('amap://styles/macaron');//自定义的高德地图的样式，我选的是马卡龙
                       
               }
          }
        }
     }
 }
</code></pre>
<p>添加高德原生的点图标和路线规划的插件：<br /> 在mapEvents中添加：</p>
<pre><code>   mapEvents: {
      init(o) {
          let marker = new AMap.Marker({ //点图标
              position: [121.59996, 31.197646]
           });
          marker.setMap(o);
         o.plugin(["AMap.Walking "], function() {
              var driving = new AMap.Walking({
                map: o,
                showTraffic: false,//去掉实时路况
                autoFitView: true, 
                // 驾车路线规划策略，AMap.DrivingPolicy.LEAST_TIME是最快捷模式
                policy: AMap.DrivingPolicy.LEAST_TIME
              })
              o.addControl(driving);
         })
    }
} 
</code></pre>
<p>更多关于路线规划的属性参考官网API：</p>
<p><a href="https://lbs.amap.com/api/javascript-api/reference/route-search#m_AMap.Driving" rel="nofollow" data-token="29f783e33f79b6c3edac3b74ce3b3a3a">路线规划</a></p>
<p><img src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190820135244698.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MTc2NzY0OQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
</p></div>
<link href="https://csdnimg.cn/release/phoenix/mdeditor/markdown_views-e9f16cbbc2.css" rel="stylesheet">
</div>
]]></content:encoded>
										</item>
		<item>
		<title>同一表格根据不同排序条件查询</title>
		<link>https://uzzz.org/article/1357.html</link>
				<pubDate>Sat, 16 Mar 2019 13:13:14 +0000</pubDate>
		<dc:creator><![CDATA[fandyvon]]></dc:creator>
				<category><![CDATA[Vue]]></category>
		<category><![CDATA[前端]]></category>

		<guid isPermaLink="false">http://wp.uzzz.org/article/1357.html</guid>
				<description><![CDATA[1.template &#60;el-table ref="multipleTable" :data="tableData" tooltip-effect="dark" @selection-change="handleSelectionChange" @sort-change='handleSortChange' :clearSort='clearSort(]]></description>
								<content:encoded><![CDATA[<div id="article_content" class="article_content clearfix">
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-3019150162.css">
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-3019150162.css">
<div class="htmledit_views" id="content_views">
<p>1.template</p>
<pre class="has">
<code class="language-html">&lt;el-table ref="multipleTable" 
			  	:data="tableData" 
			  	tooltip-effect="dark" 
			  	@selection-change="handleSelectionChange"
			  	@sort-change='handleSortChange'
			  	:clearSort='clearSort()'&gt;
      			
				 	&lt;el-table-column
				      	v-for='(item,index) in tableList'
				        :prop="item.prop"
				        :label="item.label"
				        :width="item.width"
				        :key='index'
				        &gt;
			        &lt;/el-table-column&gt;

					&lt;el-table-column  label="产品价格(元/g)" sortable ref="sortOne" width="133"&gt;
						&lt;template slot-scope="scope"&gt;						        
					       {{ scope.row.PRICE}}
      					&lt;/template&gt;
					&lt;/el-table-column&gt;
					&lt;el-table-column label="产品规格(g)"  sortable  ref="sortTwo" width="130"&gt;
							&lt;template slot-scope="scope"&gt;						        
						       {{ scope.row.WEIGHT}}
	      					&lt;/template&gt;
						&lt;/el-table-column&gt;
&lt;/el-table&gt;</code></pre>
<p>2.method</p>
<pre class="has">
<code class="language-javascript">handleSortChange(val){
	      			      		console.log(val)
	      		if(val.column==null){
	      			this.Sort('','',this.pageNo)
	      			return
	      		}
	      		if(val.column.label=='产品价格(元/g)'&amp;&amp;val.order=='descending'){
	      			this.Sort('PRICE',"desc",this.pageNo)
	      			this.productType='PRICE';
	      			this.sortOrder="desc";
	      		}
	      		if(val.column.label=='产品价格(元/g)'&amp;&amp;val.order=='ascending'){
	      			this.Sort('PRICE',"asc",this.pageNo)
	      			this.productType='PRICE';
	      			this.sortOrder="asc";
	      		}
	      		if(val.column.label=='产品规格(g)'&amp;&amp;val.order=='descending'){
	      	
	      			this.Sort('WEIGHT',"desc",this.pageNo)
	      			this.productType='WEIGHT';
	      			this.sortOrder="desc";
	      		}
	      		if(val.column.label=='产品规格(g)'&amp;&amp;val.order=="ascending"){
	      			this.Sort('WEIGHT',"asc",this.pageNo)
	      			this.productType='WEIGHT';
	      			this.sortOrder="asc";
	      		}
	      		console.log(val,'val&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;')
	      	},

Sort(x,y,pageNO,pageSize){
	      		console.log(x,y,pageNO,pageSize)
	      		this.keepX=x
				  this.keepY=y
				  console.log(this.material)
				let parames = {
					"functionName": "preciousmetalbiz.service.PrdMetalService",
				    "methodName": "selectPmList",
				    "pageNo":pageNO,
				    "pageSize":10,
					
					"data": { // 查询条件
						prdCode: this.prdCode,						// 产品代码
						prdName: this.prdName,						// 产品名称
						weightStart: this.weightStart,		// 规格（开始）
						weightEnd: this.weightEnd,			// 规格（结束）
						priceStart: this.priceStart,	// 产品销售价格（开始）
						priceEnd: this.priceEnd,		// 产品销售价格（结束）
						material: this.material,				// 材质	
						companyName: this.companyName, 	
						branchCode:JSON.parse(sessionStorage.getItem('sessionData')).orgnCode,
	   					roleId:JSON.parse(sessionStorage.getItem('sessionData')).roleId,
						"order":x,
	        			"sort":y	
					}
				};
				this.http(JSON.stringify(parames))
				.then((res)=&gt;{
					  if(res.data.errorCode!=undefined){
					this.$alert(res.data.errorMsg,'提示', {
					confirmButtonText: '确定',
					})
			    	}
						var list = res.data.basicInfoList;
						this.tableData = list;
						this.total = res.sumCount;
						
						setTimeout(()=&gt;{
//                  this.setSelectRow();
					
                    }, 50)
				}).catch(error =&gt; {
					console.log(error);
				})
			},</code></pre>
<p>&nbsp;</p>
</p></div>
</div>
]]></content:encoded>
										</item>
		<item>
		<title>H5+ Hbuilder 状态栏设置颜色</title>
		<link>https://uzzz.org/article/1353.html</link>
				<pubDate>Fri, 15 Mar 2019 15:52:55 +0000</pubDate>
		<dc:creator><![CDATA[fandyvon]]></dc:creator>
				<category><![CDATA[Vue]]></category>

		<guid isPermaLink="false">http://wp.uzzz.org/article/1353.html</guid>
				<description><![CDATA[if (this.isJudge) {//如果是H5+ if (this.currentItem == 11) { //朋友 plus.navigator.setStatusBarStyle('dark'); } else { plus.navigator.setStatusBarStyle('light'); } } 设置了很长时间没效果 后来才知道 只支]]></description>
								<content:encoded><![CDATA[<div id="article_content" class="article_content clearfix">
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-3019150162.css">
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-3019150162.css">
<div class="htmledit_views" id="content_views">
<pre class="has">
<code>				if (this.isJudge) {//如果是H5+
					if (this.currentItem == 11) { //朋友
						plus.navigator.setStatusBarStyle('dark');
					} else {
						plus.navigator.setStatusBarStyle('light');
					}
				}</code></pre>
<p>设置了很长时间没效果</p>
<p>后来才知道 只支持两种颜色</p>
</p></div>
</div>
]]></content:encoded>
										</item>
		<item>
		<title>浅析deep深度选择器</title>
		<link>https://uzzz.org/article/1682.html</link>
				<pubDate>Thu, 14 Mar 2019 01:44:53 +0000</pubDate>
		<dc:creator><![CDATA[fandyvon]]></dc:creator>
				<category><![CDATA[Vue]]></category>
		<category><![CDATA[前端]]></category>

		<guid isPermaLink="false">http://wp.uzzz.org/article/1682.html</guid>
				<description><![CDATA[之前在开发中遇到一个问题，vue项目结合element ui使用。 但是element ui的样式不一定符合我们的需求，这时我们就需要改变它的样式。 比如博主使用到了element ui的表格，但是表格有默认的背景色，鼠标滑过还有默认的高亮颜色。 我想要改变这个鼠标滑过的样式，所以我需要在页面中审查元素找到对应的标签。 但是当我找到并且复制，然后试图去改变它]]></description>
								<content:encoded><![CDATA[<div id="article_content" class="article_content clearfix">
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-3019150162.css">
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-3019150162.css">
<div class="htmledit_views" id="content_views">
<p>之前在开发中遇到一个问题，vue项目结合element ui使用。</p>
<p>但是element ui的样式不一定符合我们的需求，这时我们就需要改变它的样式。</p>
<p>比如博主使用到了element ui的表格，但是表格有默认的背景色，鼠标滑过还有默认的高亮颜色。</p>
<p>我想要改变这个鼠标滑过的样式，所以我需要在页面中审查元素找到对应的标签。</p>
<p>但是当我找到并且复制，然后试图去改变它的样式时，怎么都没办法改变。</p>
<p>我以为是权重的问题，所以我加 ! important，但是也毫无作用。</p>
<p>当我审查元素发现此样式就没有作用到，就相当于它没有找到这个元素，所以也就不存在改不改变样式的问题了。</p>
<p>这时我们就需要一个选择器能深度的帮助我们找到这个元素，比如 <span style="color:#f33b45;"><strong>deep</strong></span><span>（划重点）</span></p>
<p>1、这是我起初试图改变的方法（亲测无效）：</p>
<pre class="has">
<code class="language-css">.el-table--enable-row-hover .el-table__body tr:hover&gt;td {
    background: lightblue !important;
    color: #000;
}</code></pre>
<p>2、这是使用deep后的方法（亲测有效）：</p>
<pre class="has">
<code class="language-css">.el-table--enable-row-hover /deep/ .el-table__body tr:hover&gt;td {
    background: lightblue ;
    color: #000;
}</code></pre>
<p>原理就是通过找到父元素深度的找到我们需要改变的子元素，然后改变它的样式即可。</p>
<p>感觉发现了什么不得了的东西。</p>
<p>是不是意味着我使用第三方ui 库，就可以随意改变它的样式了。</p>
<p style="text-align:center;"><img alt="" class="has" height="238" src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190314094219532.jpg" width="240"></p>
<p>好了，以上就是deep的一些基本用法，如需深入了解，请参考官方介绍。</p>
<p>博主后期也会了解更新，尽情期待。</p>
<p>如有问题，请指出，接受批评。</p>
</p></div>
</div>
]]></content:encoded>
										</item>
		<item>
		<title>vue实战-实现换主题/皮肤功能</title>
		<link>https://uzzz.org/article/1406.html</link>
				<pubDate>Tue, 19 Feb 2019 08:29:03 +0000</pubDate>
		<dc:creator><![CDATA[fandyvon]]></dc:creator>
				<category><![CDATA[Vue]]></category>

		<guid isPermaLink="false">http://wp.uzzz.org/article/1406.html</guid>
				<description><![CDATA[现在的app和pc网站做的越来越花哨，但是有时候用户并不喜欢你给他挑选好的主题颜色，这个时候就需要一个换皮肤的功能了。 那么我们怎么在vue中实现这个换皮肤的功能呢？ 实现思路 我们用vue一般都是写单页面程序，因此在实际发布的时候只有一个html以及一堆静态文件（js、css、img之类）。而在html中引用了这些js和css。我们要换皮肤的话其实就是动态]]></description>
								<content:encoded><![CDATA[<div id="article_content" class="article_content clearfix">
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-3019150162.css">
<div id="content_views" class="markdown_views prism-dracula">
  <!-- flowchart 箭头图标 勿删 --><br />
  <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
   <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
  </svg> </p>
<blockquote>
<p>现在的app和pc网站做的越来越花哨，但是有时候用户并不喜欢你给他挑选好的主题颜色，这个时候就需要一个换皮肤的功能了。</p>
</blockquote>
<p><strong>那么我们怎么在vue中实现这个换皮肤的功能呢？</strong><br /> <img src="http://upload-images.jianshu.io/upload_images/12038641-9b52fdbeb0e10c7c.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="项目结构"></p>
<ol>
<li>
<p>实现思路</p>
<ul>
<li>我们用vue一般都是写单页面程序，因此在实际发布的时候只有一个html以及一堆静态文件（js、css、img之类）。而在html中引用了这些js和css。我们要换皮肤的话其实就是动态的去切换css，所以在这里实现换皮肤其实也就是动态的更改html中引用css的路径，使得当用户选择了不同的皮肤，页面引用的css不同从而呈现的样式也不一样。</li>
</ul>
</li>
<li>
<p>优化策略</p>
<ul>
<li>其实在实际场景中，需要通过切换皮肤来改变css的元素占所有css的比重并不会很多，因此我们需要把需要通过切换改变的css单独提取出来，在动态改变css路径时只需要去改变这个控制皮肤的css就可以了。</li>
<li>把皮肤相关的css压缩。</li>
</ul>
</li>
<li>
<p>实现代码分析<br /> 如下是我们的html代码，注意其中的<code>&lt;link rel="stylesheet" name="theme" href=""&gt;</code>，其他的都是正常引用。</p>
</li>
</ol>
<pre><code>&lt;!DOCTYPE html&gt;
&lt;html lang="zh-CN"&gt;
&lt;head&gt;
   &lt;title&gt;iView admin&lt;/title&gt;
   &lt;meta charset="UTF-8"&gt;
   &lt;!--  --&gt;
   &lt;meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=0"&gt;
   &lt;!-- 引入的css --&gt;
   &lt;link rel="stylesheet" href="/dist/main.css"&gt;
   &lt;!-- 注意这是我们换皮肤需要的css --&gt;
   &lt;link rel="stylesheet" name="theme" href=""&gt;
   &lt;!-- 图标 --&gt;
   &lt;link rel="icon" href="./td_icon.ico" type="image/x-icon"/&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;div id="app"&gt;&lt;/div&gt;
&lt;!-- 用到的js --&gt;
&lt;script type="text/javascript" src="/dist/vender-base.js"&gt;&lt;/script&gt;
&lt;script type="text/javascript" src="/dist/vender-exten.js"&gt;&lt;/script&gt;
&lt;script type="text/javascript" src="/dist/main.js"&gt;&lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>
<p>接下来就是具体实现换皮肤功能了，换皮肤一般都是点击一个按钮弹出一些皮肤的选项，选中选项后皮肤生效。<br /> 我们将换皮肤功能抽成一个组件theme-switch。pc端使用iview，手机端使用了vant。一共有3套皮肤用于切换。<br /> <img src="http://upload-images.jianshu.io/upload_images/12038641-b3b4d03ef1303079.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="目录结构"></p>
<ul>
<li>pc端</li>
</ul>
<pre><code>&lt;template&gt;
    &lt;div style="display:inline-block;padding:0 6px;"&gt;
        &lt;Dropdown trigger="click" @on-click="setTheme"&gt;
            &lt;a href="javascript:void(0)"&gt;
                &lt;Icon :style="{marginTop: '-2px', verticalAlign: 'middle'}" color="#495060" :size="18" type="paintbucket"&gt;&lt;/Icon&gt;
                &lt;Icon type="arrow-down-b"&gt;&lt;/Icon&gt;
            &lt;/a&gt;
            &lt;DropdownMenu slot="list"&gt;
                &lt;DropdownItem v-for="(item, index) in themeList" :key="index" :name="item.name"&gt;
                    &lt;Row type="flex" justify="center" align="middle"&gt;
                        &lt;span style="margin-right:10px;"&gt;&lt;Icon :size="20" :type="item.name.substr(0, 1) !== 'b' ? 'happy-outline' : 'happy'" :color="item.menu"/&gt;&lt;/span&gt;
                        &lt;span&gt;&lt;Icon :size="22" type="record" :color="item.element"/&gt;&lt;/span&gt;
                    &lt;/Row&gt;
                &lt;/DropdownItem&gt;
            &lt;/DropdownMenu&gt;
        &lt;/Dropdown&gt;
    &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
import Cookies from 'js-cookie';
import config from '../../../../build/config.js';
export default {
    name: 'themeSwitch',
    data () {
        return {
            themeList: [
                {
                    name: 'black_b',
                    menu: '#495060',
                    element: '#2d8cf0'
                },
                {
                    name: 'black_g',
                    menu: '#495060',
                    element: '#00a854'
                },
                {
                    name: 'black_y',
                    menu: '#495060',
                    element: '#e96500'
                }
            ]
        };
    },
    methods: {
    	// 点击切换事件
        setTheme (themeFile) {
            let menuTheme = themeFile.substr(0, 1);
            let mainTheme = themeFile.substr(-1, 1);
            if (menuTheme === 'b') {
                // 黑色菜单
                this.$store.commit('changeMenuTheme', 'dark');
                menuTheme = 'dark';
            } else {
                this.$store.commit('changeMenuTheme', 'light');
                menuTheme = 'light';
            }
            let path = '';
               // 取到我们在html上给皮肤的css留的坑并且设置路径
            let themeLink = document.querySelector('link[name="theme"]');
            let userName = Cookies.get('user');
            if (localStorage.theme) {
                let themeList = JSON.parse(localStorage.theme);
                let index = 0;
                let hasThisUser = themeList.some((item, i) =&gt; {
                    if (item.userName === userName) {
                        index = i;
                        return true;
                    } else {
                        return false;
                    }
                });
                if (hasThisUser) {
                    themeList[index].mainTheme = mainTheme;
                    themeList[index].menuTheme = menuTheme;
                } else {
                    themeList.push({
                        userName: userName,
                        mainTheme: mainTheme,
                        menuTheme: menuTheme
                    });
                }
                localStorage.theme = JSON.stringify(themeList);
            } else {
                localStorage.theme = JSON.stringify([{
                    userName: userName,
                    mainTheme: mainTheme,
                    menuTheme: menuTheme
                }]);
            }
            let stylePath = '';
            if (config.env.indexOf('dev') &gt; -1) {
                stylePath = './src/views/main-components/theme-switch/theme/';
            } else {
                stylePath = 'dist/';
            }
            if (mainTheme !== 'b') {
                path = stylePath + mainTheme + '.css';
            } else {
                path = '';
            }
            themeLink.setAttribute('href', path);
        }
    },
    created () {
        let path = '';
        // 判断运行环境用于切换地址
        if (config.env.indexOf('dev') &gt; -1) {
            path = './src/views/main-components/theme-switch/theme/';
        } else {
            path = 'dist/';
        }
        let name = Cookies.get('user');
        // 如果用户之前选择过皮肤则直接使用之前选择的，否则使用默认皮肤
        if (localStorage.theme) {
            let hasThisUser = JSON.parse(localStorage.theme).some(item =&gt; {
                if (item.userName === name) {
                    this.$store.commit('changeMenuTheme', item.menuTheme);
                    this.$store.commit('changeMainTheme', item.mainTheme);
                    return true;
                } else {
                    return false;
                }
            });
            if (!hasThisUser) {
                this.$store.commit('changeMenuTheme', 'dark');
                this.$store.commit('changeMainTheme', 'b');
            }
        } else {
            this.$store.commit('changeMenuTheme', 'dark');
            this.$store.commit('changeMainTheme', 'b');
        }
        // 根据用户设置主题
        if (this.$store.state.app.themeColor !== 'b') {
            let stylesheetPath = path + this.$store.state.app.themeColor + '.css';
            // 取到我们在html上给皮肤的css留的坑并且设置路径
            let themeLink = document.querySelector('link[name="theme"]');
            themeLink.setAttribute('href', stylesheetPath);
        }
    }
};
&lt;/script&gt;
</code></pre>
<ul>
<li>手机端</li>
</ul>
<pre><code>&lt;template&gt;
  &lt;div style="display:inline-block;padding:0 6px;"&gt;
    &lt;div @click="showBtn"&gt;换皮肤&lt;/div&gt;
    &lt;van-actionsheet v-model="show" :actions="themeList" @select="setTheme"/&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
import Cookies from "js-cookie";

import { Actionsheet } from "vant";
// import config from "../../../../build/config.js";
export default {
  name: "themeSwitch",
  components: {
    [Actionsheet.name]: Actionsheet
  },
  data() {
    return {
      show: false,
      themeList: [
        {
          name: "黑色",
          data: "black_b"
        },
        {
          name: "绿色",
          data: "black_g"
        },
        {
          name: "黄色",
          data: "black_y"
        }
      ]
    };
  },
  methods: {
    showBtn() {
      this.show = true;
    },
    setTheme(themeFile) {
      themeFile = themeFile.data;
      let menuTheme = themeFile.substr(0, 1);
      let mainTheme = themeFile.substr(-1, 1);
      if (menuTheme === "b") {
        // 黑色菜单
        this.$store.commit("changeMenuTheme", "dark");
        menuTheme = "dark";
      } else {
        this.$store.commit("changeMenuTheme", "light");
        menuTheme = "light";
      }
      let path = "";
      let themeLink = document.querySelector('link[name="theme"]');
      let userName = Cookies.get("user");
      if (localStorage.theme) {
        let themeList = JSON.parse(localStorage.theme);
        let index = 0;
        let hasThisUser = themeList.some((item, i) =&gt; {
          if (item.userName === userName) {
            index = i;
            return true;
          } else {
            return false;
          }
        });
        if (hasThisUser) {
          themeList[index].mainTheme = mainTheme;
          themeList[index].menuTheme = menuTheme;
        } else {
          themeList.push({
            userName: userName,
            mainTheme: mainTheme,
            menuTheme: menuTheme
          });
        }
        localStorage.theme = JSON.stringify(themeList);
      } else {
        localStorage.theme = JSON.stringify([
          {
            userName: userName,
            mainTheme: mainTheme,
            menuTheme: menuTheme
          }
        ]);
      }
      let stylePath = './';
    //   stylePath = "./src/view/component/theme-switch/theme/";
      // if (config.env.indexOf('dev') &gt; -1) {
      //     stylePath = 'src/view/component/theme-switch/theme';
      // } else {
      //     stylePath = 'dist/';
      // }
      if (mainTheme !== "b") {
        path = stylePath + mainTheme + ".css";
      } else {
        path = "";
      }
      themeLink.setAttribute("href", path);
      this.show = false;
    }
  },
  created() {
    let path = "";
    path = "css/";
    // if (config.env.indexOf("dev") &gt; -1) {
    //   path = "src/view/component/theme-switch/theme";
    // } else {
    //   path = "dist/";
    // }

    let name = Cookies.get("user");
    if (localStorage.theme) {
      let hasThisUser = JSON.parse(localStorage.theme).some(item =&gt; {
        if (item.userName === name) {
          this.$store.commit("changeMenuTheme", item.menuTheme);
          this.$store.commit("changeMainTheme", item.mainTheme);
          return true;
        } else {
          return false;
        }
      });
      if (!hasThisUser) {
        this.$store.commit("changeMenuTheme", "dark");
        this.$store.commit("changeMainTheme", "b");
      }
    } else {
      this.$store.commit("changeMenuTheme", "dark");
      this.$store.commit("changeMainTheme", "b");
    }
    console.log(path);
    // 根据用户设置主题
    if (this.$store.state.app.themeColor !== "b") {
      let stylesheetPath = path + this.$store.state.app.themeColor + ".css";
      let themeLink = document.querySelector('link[name="theme"]');

      themeLink.setAttribute("href", stylesheetPath);
    }
  }
};
&lt;/script&gt;

</code></pre>
<p>在首页引用该组件，初次渲染时进入该组件的creat方法，如果用户之前选择过皮肤则直接使用之前选择的，否则使用默认皮肤。在store中加入相应方法。</p>
<pre><code>changeMenuTheme (state, theme) {
    state.menuTheme = theme;
},
changeMainTheme (state, mainTheme) {
     state.themeColor = mainTheme;
 }
</code></pre>
<p>动态切换最关键的是这两行代码：<br /> <code>let themeLink = document.querySelector('link[name="theme"]')</code><br /> <code>themeLink.setAttribute('href', stylesheetPath)</code><br /> 但是这个时候我们皮肤相关的css并没有打到代码中，需要我们额外进行配置。<br /> 在webpack的配置文件中找到plugins，加入以下插件：</p>
<ul>
<li>pc端</li>
</ul>
<pre><code> new CopyWebpackPlugin([
            {
                from: 'td_icon.ico'
            },
            {
                from: 'src/styles/fonts',
                to: 'fonts'
            },
            {
                from: 'src/views/main-components/theme-switch/theme'
            }
        ],
</code></pre>
<ul>
<li>手机端</li>
</ul>
<pre><code> new CopyWebpackPlugin([
            {
                from: 'static',
                to: 'static'
            },
            {
                from: 'src/view/component/theme-switch/theme',
                to: './css'
            }
        ])
</code></pre>
<p>之前我们可能已经有了这个插件了，现在只是需要把皮肤相关的css额外配置一下。以上工作完成之后已经可以动态的切换html中皮肤相关的css路径了。接下来就需要我们在需要切换css的地方引用具体的class并且写三套样式分别放在theme中的css文件里。</p>
<blockquote>
<p>注意在具体的vue文件中不需要引用theme中的css，因为html中已经帮我们引用了</p>
</blockquote>
<blockquote>
<p>如果报各种与路径有关的错误那就是你的路径真的写错啦。好好对比一下组件中引用的路径，webpack中配置的路径和你的项目路径吧~</p>
</blockquote>
<p>当然这只是换皮肤的一种实现思路，也就是动态切换html中的引用路径。也希望大家集思广益提供更多的解决思路~</p>
</p></div>
<link href="https://csdnimg.cn/release/phoenix/mdeditor/markdown_views-e9f16cbbc2.css" rel="stylesheet">
</div>
]]></content:encoded>
										</item>
		<item>
		<title>vue实现换主题\皮肤功能</title>
		<link>https://uzzz.org/article/1411.html</link>
				<pubDate>Wed, 13 Feb 2019 09:16:52 +0000</pubDate>
		<dc:creator><![CDATA[fandyvon]]></dc:creator>
				<category><![CDATA[Vue]]></category>

		<guid isPermaLink="false">http://wp.uzzz.org/article/1411.html</guid>
				<description><![CDATA[现在的app和pc网站做的越来越花哨，但是有时候用户并不喜欢你给他挑选好的主题颜色，这个时候就需要一个换皮肤的功能了。 那么我们怎么在vue中实现这个换皮肤的功能呢？ 实现思路 我们用vue一般都是写单页面程序，因此在实际发布的时候只有一个html以及一堆静态文件（js、css、img之类）。而在html中引用了这些js和css。我们要换皮肤的话其实就是动态]]></description>
								<content:encoded><![CDATA[<div id="article_content" class="article_content clearfix">
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-3019150162.css">
<div id="content_views" class="markdown_views prism-dracula">
  <!-- flowchart 箭头图标 勿删 --><br />
  <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
   <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
  </svg> </p>
<blockquote>
<p>现在的app和pc网站做的越来越花哨，但是有时候用户并不喜欢你给他挑选好的主题颜色，这个时候就需要一个换皮肤的功能了。</p>
</blockquote>
<p><strong>那么我们怎么在vue中实现这个换皮肤的功能呢？</strong><br /> <img src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190213161520962.png" alt="打包完成"></p>
<ol>
<li>
<p>实现思路</p>
<ul>
<li>我们用vue一般都是写单页面程序，因此在实际发布的时候只有一个html以及一堆静态文件（js、css、img之类）。而在html中引用了这些js和css。我们要换皮肤的话其实就是动态的去切换css，所以在这里实现换皮肤其实也就是动态的更改html中引用css的路径，使得当用户选择了不同的皮肤，页面引用的css不同从而呈现的样式也不一样。</li>
</ul>
</li>
<li>
<p>优化策略</p>
<ul>
<li>其实在实际场景中，需要通过切换皮肤来改变css的元素占所有css的比重并不会很多，因此我们需要把需要通过切换改变的css单独提取出来，在动态改变css路径时只需要去改变这个控制皮肤的css就可以了。</li>
<li>把皮肤相关的css压缩。</li>
</ul>
</li>
<li>
<p>实现代码分析<br /> 如下是我们的html代码，注意其中的<code>&lt;link rel="stylesheet" name="theme" href=""&gt;</code>，其他的都是正常引用。</p>
</li>
</ol>
<pre><code>&lt;!DOCTYPE html&gt;
&lt;html lang="zh-CN"&gt;
&lt;head&gt;
   &lt;title&gt;iView admin&lt;/title&gt;
   &lt;meta charset="UTF-8"&gt;
   &lt;!--  --&gt;
   &lt;meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=0"&gt;
   &lt;!-- 引入的css --&gt;
   &lt;link rel="stylesheet" href="/dist/main.css"&gt;
   &lt;!-- 注意这是我们换皮肤需要的css --&gt;
   &lt;link rel="stylesheet" name="theme" href=""&gt;
   &lt;!-- 图标 --&gt;
   &lt;link rel="icon" href="./td_icon.ico" type="image/x-icon"/&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;div id="app"&gt;&lt;/div&gt;
&lt;!-- 用到的js --&gt;
&lt;script type="text/javascript" src="/dist/vender-base.js"&gt;&lt;/script&gt;
&lt;script type="text/javascript" src="/dist/vender-exten.js"&gt;&lt;/script&gt;
&lt;script type="text/javascript" src="/dist/main.js"&gt;&lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>
<p>接下来就是具体实现换皮肤功能了，换皮肤一般都是点击一个按钮弹出一些皮肤的选项，选中选项后皮肤生效。<br /> 我们将换皮肤功能抽成一个组件theme-switch。pc端使用iview，手机端使用了vant。一共有3套皮肤用于切换。<br /> <img src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190213165115752.png" alt="目录结构"></p>
<ul>
<li>pc端</li>
</ul>
<pre><code>&lt;template&gt;
    &lt;div style="display:inline-block;padding:0 6px;"&gt;
        &lt;Dropdown trigger="click" @on-click="setTheme"&gt;
            &lt;a href="javascript:void(0)"&gt;
                &lt;Icon :style="{marginTop: '-2px', verticalAlign: 'middle'}" color="#495060" :size="18" type="paintbucket"&gt;&lt;/Icon&gt;
                &lt;Icon type="arrow-down-b"&gt;&lt;/Icon&gt;
            &lt;/a&gt;
            &lt;DropdownMenu slot="list"&gt;
                &lt;DropdownItem v-for="(item, index) in themeList" :key="index" :name="item.name"&gt;
                    &lt;Row type="flex" justify="center" align="middle"&gt;
                        &lt;span style="margin-right:10px;"&gt;&lt;Icon :size="20" :type="item.name.substr(0, 1) !== 'b' ? 'happy-outline' : 'happy'" :color="item.menu"/&gt;&lt;/span&gt;
                        &lt;span&gt;&lt;Icon :size="22" type="record" :color="item.element"/&gt;&lt;/span&gt;
                    &lt;/Row&gt;
                &lt;/DropdownItem&gt;
            &lt;/DropdownMenu&gt;
        &lt;/Dropdown&gt;
    &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
import Cookies from 'js-cookie';
import config from '../../../../build/config.js';
export default {
    name: 'themeSwitch',
    data () {
        return {
            themeList: [
                {
                    name: 'black_b',
                    menu: '#495060',
                    element: '#2d8cf0'
                },
                {
                    name: 'black_g',
                    menu: '#495060',
                    element: '#00a854'
                },
                {
                    name: 'black_y',
                    menu: '#495060',
                    element: '#e96500'
                }
            ]
        };
    },
    methods: {
    	// 点击切换事件
        setTheme (themeFile) {
            let menuTheme = themeFile.substr(0, 1);
            let mainTheme = themeFile.substr(-1, 1);
            if (menuTheme === 'b') {
                // 黑色菜单
                this.$store.commit('changeMenuTheme', 'dark');
                menuTheme = 'dark';
            } else {
                this.$store.commit('changeMenuTheme', 'light');
                menuTheme = 'light';
            }
            let path = '';
               // 取到我们在html上给皮肤的css留的坑并且设置路径
            let themeLink = document.querySelector('link[name="theme"]');
            let userName = Cookies.get('user');
            if (localStorage.theme) {
                let themeList = JSON.parse(localStorage.theme);
                let index = 0;
                let hasThisUser = themeList.some((item, i) =&gt; {
                    if (item.userName === userName) {
                        index = i;
                        return true;
                    } else {
                        return false;
                    }
                });
                if (hasThisUser) {
                    themeList[index].mainTheme = mainTheme;
                    themeList[index].menuTheme = menuTheme;
                } else {
                    themeList.push({
                        userName: userName,
                        mainTheme: mainTheme,
                        menuTheme: menuTheme
                    });
                }
                localStorage.theme = JSON.stringify(themeList);
            } else {
                localStorage.theme = JSON.stringify([{
                    userName: userName,
                    mainTheme: mainTheme,
                    menuTheme: menuTheme
                }]);
            }
            let stylePath = '';
            if (config.env.indexOf('dev') &gt; -1) {
                stylePath = './src/views/main-components/theme-switch/theme/';
            } else {
                stylePath = 'dist/';
            }
            if (mainTheme !== 'b') {
                path = stylePath + mainTheme + '.css';
            } else {
                path = '';
            }
            themeLink.setAttribute('href', path);
        }
    },
    created () {
        let path = '';
        // 判断运行环境用于切换地址
        if (config.env.indexOf('dev') &gt; -1) {
            path = './src/views/main-components/theme-switch/theme/';
        } else {
            path = 'dist/';
        }
        let name = Cookies.get('user');
        // 如果用户之前选择过皮肤则直接使用之前选择的，否则使用默认皮肤
        if (localStorage.theme) {
            let hasThisUser = JSON.parse(localStorage.theme).some(item =&gt; {
                if (item.userName === name) {
                    this.$store.commit('changeMenuTheme', item.menuTheme);
                    this.$store.commit('changeMainTheme', item.mainTheme);
                    return true;
                } else {
                    return false;
                }
            });
            if (!hasThisUser) {
                this.$store.commit('changeMenuTheme', 'dark');
                this.$store.commit('changeMainTheme', 'b');
            }
        } else {
            this.$store.commit('changeMenuTheme', 'dark');
            this.$store.commit('changeMainTheme', 'b');
        }
        // 根据用户设置主题
        if (this.$store.state.app.themeColor !== 'b') {
            let stylesheetPath = path + this.$store.state.app.themeColor + '.css';
            // 取到我们在html上给皮肤的css留的坑并且设置路径
            let themeLink = document.querySelector('link[name="theme"]');
            themeLink.setAttribute('href', stylesheetPath);
        }
    }
};
&lt;/script&gt;
</code></pre>
<ul>
<li>手机端</li>
</ul>
<pre><code>&lt;template&gt;
  &lt;div style="display:inline-block;padding:0 6px;"&gt;
    &lt;div @click="showBtn"&gt;换皮肤&lt;/div&gt;
    &lt;van-actionsheet v-model="show" :actions="themeList" @select="setTheme"/&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
import Cookies from "js-cookie";

import { Actionsheet } from "vant";
// import config from "../../../../build/config.js";
export default {
  name: "themeSwitch",
  components: {
    [Actionsheet.name]: Actionsheet
  },
  data() {
    return {
      show: false,
      themeList: [
        {
          name: "黑色",
          data: "black_b"
        },
        {
          name: "绿色",
          data: "black_g"
        },
        {
          name: "黄色",
          data: "black_y"
        }
      ]
    };
  },
  methods: {
    showBtn() {
      this.show = true;
    },
    setTheme(themeFile) {
      themeFile = themeFile.data;
      let menuTheme = themeFile.substr(0, 1);
      let mainTheme = themeFile.substr(-1, 1);
      if (menuTheme === "b") {
        // 黑色菜单
        this.$store.commit("changeMenuTheme", "dark");
        menuTheme = "dark";
      } else {
        this.$store.commit("changeMenuTheme", "light");
        menuTheme = "light";
      }
      let path = "";
      let themeLink = document.querySelector('link[name="theme"]');
      let userName = Cookies.get("user");
      if (localStorage.theme) {
        let themeList = JSON.parse(localStorage.theme);
        let index = 0;
        let hasThisUser = themeList.some((item, i) =&gt; {
          if (item.userName === userName) {
            index = i;
            return true;
          } else {
            return false;
          }
        });
        if (hasThisUser) {
          themeList[index].mainTheme = mainTheme;
          themeList[index].menuTheme = menuTheme;
        } else {
          themeList.push({
            userName: userName,
            mainTheme: mainTheme,
            menuTheme: menuTheme
          });
        }
        localStorage.theme = JSON.stringify(themeList);
      } else {
        localStorage.theme = JSON.stringify([
          {
            userName: userName,
            mainTheme: mainTheme,
            menuTheme: menuTheme
          }
        ]);
      }
      let stylePath = 'css/';
    //   stylePath = "./src/view/component/theme-switch/theme/";
      // if (config.env.indexOf('dev') &gt; -1) {
      //     stylePath = 'src/view/component/theme-switch/theme';
      // } else {
      //     stylePath = 'dist/';
      // }
      if (mainTheme !== "b") {
        path = stylePath + mainTheme + ".css";
      } else {
        path = "";
      }
      themeLink.setAttribute("href", path);
      this.show = false;
    }
  },
  created() {
    let path = "";
    path = "css/";
    // if (config.env.indexOf("dev") &gt; -1) {
    //   path = "src/view/component/theme-switch/theme";
    // } else {
    //   path = "dist/";
    // }

    let name = Cookies.get("user");
    if (localStorage.theme) {
      let hasThisUser = JSON.parse(localStorage.theme).some(item =&gt; {
        if (item.userName === name) {
          this.$store.commit("changeMenuTheme", item.menuTheme);
          this.$store.commit("changeMainTheme", item.mainTheme);
          return true;
        } else {
          return false;
        }
      });
      if (!hasThisUser) {
        this.$store.commit("changeMenuTheme", "dark");
        this.$store.commit("changeMainTheme", "b");
      }
    } else {
      this.$store.commit("changeMenuTheme", "dark");
      this.$store.commit("changeMainTheme", "b");
    }
    console.log(path);
    // 根据用户设置主题
    if (this.$store.state.app.themeColor !== "b") {
      let stylesheetPath = path + this.$store.state.app.themeColor + ".css";
      let themeLink = document.querySelector('link[name="theme"]');

      themeLink.setAttribute("href", stylesheetPath);
    }
  }
};
&lt;/script&gt;

</code></pre>
<p>在首页引用该组件，初次渲染时进入该组件的creat方法，如果用户之前选择过皮肤则直接使用之前选择的，否则使用默认皮肤。在store中加入相应方法。</p>
<pre><code>changeMenuTheme (state, theme) {
    state.menuTheme = theme;
},
changeMainTheme (state, mainTheme) {
     state.themeColor = mainTheme;
 }
</code></pre>
<p>动态切换最关键的是这两行代码：<br /> <code>let themeLink = document.querySelector('link[name="theme"]')</code><br /> <code>themeLink.setAttribute('href', stylesheetPath)</code><br /> 但是这个时候我们皮肤相关的css并没有打到代码中，需要我们额外进行配置。<br /> 在webpack的配置文件中找到plugins，加入以下插件：</p>
<ul>
<li>pc端</li>
</ul>
<pre><code> new CopyWebpackPlugin([
            {
                from: 'td_icon.ico'
            },
            {
                from: 'src/styles/fonts',
                to: 'fonts'
            },
            {
                from: 'src/views/main-components/theme-switch/theme'
            }
        ],
</code></pre>
<ul>
<li>手机端</li>
</ul>
<pre><code> new CopyWebpackPlugin([
            {
                from: 'static',
                to: 'static'
            },
            {
                from: 'src/view/component/theme-switch/theme',
                to: './css'
            }
        ])
</code></pre>
<p>之前我们可能已经有了这个插件了，现在只是需要把皮肤相关的css额外配置一下。以上工作完成之后已经可以动态的切换html中皮肤相关的css路径了。接下来就需要我们在需要切换css的地方引用具体的class并且写三套样式分别放在theme中的css文件里。</p>
<blockquote>
<p>注意在具体的vue文件中不需要引用theme中的css，因为html中已经帮我们引用了</p>
</blockquote>
<blockquote>
<p>如果报各种与路径有关的错误那就是你的路径真的写错啦。好好对比一下组件中引用的路径，webpack中配置的路径和你的项目路径吧~</p>
</blockquote>
<p>当然这只是换皮肤的一种实现思路，也就是动态切换html中的引用路径。也希望大家集思广益提供更多的解决思路~</p>
</p></div>
<link href="https://csdnimg.cn/release/phoenix/mdeditor/markdown_views-e9f16cbbc2.css" rel="stylesheet">
</div>
]]></content:encoded>
										</item>
	</channel>
</rss>
