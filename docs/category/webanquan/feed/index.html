<?xml version="1.0" encoding="UTF-8"?><rss version="2.0"
	xmlns:content="http://purl.org/rss/1.0/modules/content/"
	xmlns:wfw="http://wellformedweb.org/CommentAPI/"
	xmlns:dc="http://purl.org/dc/elements/1.1/"
	xmlns:atom="http://www.w3.org/2005/Atom"
	xmlns:sy="http://purl.org/rss/1.0/modules/syndication/"
	xmlns:slash="http://purl.org/rss/1.0/modules/slash/"
	>

<channel>
	<title>web安全 &#8211; 有组织在!</title>
	<atom:link href="https://uzzz.org/category/webanquan/feed" rel="self" type="application/rss+xml" />
	<link>http://uzzz.org/</link>
	<description></description>
	<lastBuildDate>Thu, 20 Dec 2018 06:48:46 +0000</lastBuildDate>
	<language>en-US</language>
	<sy:updatePeriod>
	hourly	</sy:updatePeriod>
	<sy:updateFrequency>
	1	</sy:updateFrequency>
	<generator>https://wordpress.org/?v=5.2.4</generator>

<image>
	<url>https://uzzz.org/wp-content/uploads/2019/10/cropped-icon-32x32.png</url>
	<title>web安全 &#8211; 有组织在!</title>
	<link>http://uzzz.org/</link>
	<width>32</width>
	<height>32</height>
</image> 
	<item>
		<title>密码朋克的社会实验（一）：开灯看暗网</title>
		<link>https://uzzz.org/article/801.html</link>
				<pubDate>Thu, 20 Dec 2018 06:48:46 +0000</pubDate>
		<dc:creator><![CDATA[fandyvon]]></dc:creator>
				<category><![CDATA[web安全]]></category>

		<guid isPermaLink="false">https://uzzz.org/article/801.html</guid>
				<description><![CDATA[密码朋克的社会实验（一）：开灯看暗网 本文作者：karmayu、murphyzhang @云鼎实验室 &#160; ……2018年3月8日，某视频网站800余万用户数据在暗网销售2018年8月1日，某省1000万学籍数据出现在暗网2018年8月28日，某酒店集团5亿数据疑似在暗网出售…… &#160; 本年度最严重的几次数据泄漏，都指向了同一个词——「暗网」。在中文的语境里，这是一个犹如「月黑风高夜」般的词汇，透着诡秘和犯罪的气息。而与「暗网」关系最密切的另一个词，则非「黑客」莫属。「黑」与「暗」的组合，意味着高超的匿名和隐身技巧，令人忍不住想揭开它精巧的面纱。 &#160; &#160; 暗网是什么 &#160; 要解释暗网，先给整个互联网做一个简单的分层定义，如图： &#160; &#124;图片来源网络 &#160; 表网（Surface Web） 通常认为，普通用户或者搜索引擎能直接访问的内容属于表网。表现形式为网页或者 APP 提供的内容。 &#160; 深网（Deep Web） 指不能被标准搜索引擎检索到的网络数据。通常是存储在各公司或组织的数据库中，需要用专有的接口查询或干脆不对外查询，例如 Google 的后端数据库。深网数据量远大于表层网络，犹如海面和大海的关系。 &#160; 暗网（Dark Web） 需要通过特殊的加密通道访问的网页或数据。暗网通常具有匿名的特性，既保证访问者的匿名，同时也保证服务提供者的匿名。因此，其中充斥着各种犯罪信息和违法交易（枪支、毒品、色情、暴恐、黑客等）。 暗网有多个不同的实现版本，下文我们说暗网特指「Tor 网络」。 &#160; &#160; 网络上有些说法说暗网远大于表层网络，其实很不严谨，是把深网和暗网混为一谈了，真实的暗网只有一小部分人使用，远小于大众使用的表层网络。 &#160; 谁创造了暗网 &#160; ➢&#160;密码朋克 &#160; 故事要从90年代的一个极小众群体说起——「密码朋克」。这是一个由顶尖数学家、密码学家和程序员组成的群体，他们关注「匿名、自由、隐私」，其中许多人抱着自由主义和无政府主义的理念，并在美国掀起了「加密无政府主义运动」，他们以密码学和互联网为武器，与强权展开直接对抗。 正是这群人，创造了许多加密技术和协议，也奠定了互联网的许多底层技术和通信协议，从加密邮件到 HTTPS，从 RSA 到区块链，等等等等。 &#160; &#124;图片来源网络 &#160; ➢&#160;国外政府部门 &#160; 花开两朵，密码朋克们希望保护自己的信息和隐私不被政府获取；而政府同样也有这个需求，甚至更强烈得多，因为他们要保证情报的传输安全，同时要保护情报人员传递信息时无法被网络追踪。因此，1995年，美国海军研究实验室也进行了匿名网络的相关项目研究，这也就是暗网的前身。 &#160; 2004年，「Tor 洋葱网络」正式对外发布，意味着普通用户也可以使用匿名网络技术来保证自己的匿名性。也就代表着「暗网」这个概念正式走向公众。为什么叫洋葱网络，因为其中的通信内容被三重加密，像洋葱一样，剥开一层还有一层。 &#160; &#160; Tor 网络虽然理论上比较安全，但其中的中转节点是由志愿者部署，如果掌握了其中足够的节点，也是有概率进行完整通信追踪的。而且这毕竟是孵化自美国海军的一个项目，是否有一些精心构造的安全缺陷，难以确认。 &#160; &#160; 暗网上的数据泄露 &#160; 一个能保证访问者和服务提供者都匿名的网络，天生就是法外之地。 &#160; 因此，各路违法信息交流充斥暗网，尤其是2011年后，由于比特币技术的兴起，暗网终于从「匿名的信息交流」进化到了「匿名的价值交换」阶段，这个颠覆性变革，随着「Silk Road」的建立（丝绸之路：可以理解为基于比特币的暗网淘宝），掀起了违法交易的高潮。当然，大概同时也掀起了 FBI 相关部门的加班高潮。 &#160; 很巧的是，同样是2011年底，国内发生了一轮标志性的大规模的用户数据泄漏事件，之后各种数据泄漏就成为了每年的常态。早期此类数据交易往往是黑客私下交易，而近年来逐渐被搬到暗网进行交易。为此，腾讯安全云鼎实验室对暗网的主要交易平台进行了监测，并抽取了近几个月针对国内用户的数据泄漏的情况进行了统计。 &#160; &#160; 可以看到，近期泄漏数据，主要以网购/物流/身份证/酒店/社交帐号数据为主。 &#160; &#160; 暗网上的业务 &#160; 暗网最大的几个市场均在近年被 FBI 捣毁，如 Silk Road、AlphaBay，因此，2017年来暗网黑市有所收敛，并不如前几年火爆。我们统计了目前存在的几大市场商品分类，可以看出，毒品/药物类还是占据了超过50%的份额，海外使用违禁药物的情形非常严峻，其次是数字商品类，并充斥着各种色情、黑客、枪支、护照、假钞等违法内容。 &#160; &#160; 暗网匿名原理 &#160; 暗网最重要的作用是保证匿名，其匿名性体现在两个方面： &#160; 访问普通网站时，网站无法得知访问者 IP 地址。 提供暗网服务时，用户无法得知服务器 IP 地址。 &#160; 两个能力加起来则保障了暗网用户访问暗网网站时，双方都无法得知对方 IP 地址，且中间节点也无法同时得知双方 IP 地址。听起来挺科幻的，毕竟我们平时使用的 VPN 等科学上网技术只使用了一层跳板，而 Tor 技术使用了三层跳板。 &#160; 关于 VPN 的原理，可以参考下图： &#160; VPN 原理图解 &#124; 图片来源网络 &#160; &#160; 下面对暗网匿名原理进行详细解析： &#160; ➢&#160;访问普通网站 &#160; 先来看一个真实访问普通网站的跳转情况： &#160; 从上图可以看到，我们使用浏览器访问 google.com，但中间经过了3个节点 IP 地址，分别在匈牙利、西班牙、德国，然后再访问到谷歌的服务器。 &#160; Tor 用户针对普通网站访问流程，如下图所示。Tor网络中的每个节点都是随机选取，且每个节点看到的信息不超过一跳，所以通过网络流量监控嗅探到的 Tor 流量不能同时获取通信两端的 IP 信息；且每一个节点处都是加密形式。这里随机选取的三个节点的功能顺序是：入口节点、中间节点、出口节点；数据流方向为：客户端、入口节点、中间节点、出口节点、WEB 服务器。 &#160; &#160; Tor 网络有其特有的加密方式&#8211;三层密钥加密。三层密钥的建立是在网络请求的初始，当和下一个节点连接时创建一对非对称密钥，三个随机节点共创建了三对密钥并将公钥回传到客户端。数据经客户端三层密钥加密后，进行Tor 网络的传输，每经过一个节点，便解开一层加密，顺序依次为：入口节点解开第一层加密，中间节点解开第二层加密，出口节点解开第三层加密。通过层层加密让流量监控无法嗅探明文数据。 &#160; ➢&#160;访问匿名网站 &#160; 先来看一次真实访问匿名网站的跳转情况： &#160; &#160; 从上图可以看到，我们通过浏览器尝试访问一个奇怪的域名（uffti3lhacanefgy.onion），但和前面普通网站不一样的是，中间经过了6个节点，其中前3个可见 IP，另外3个命名为 Relay，然后再访问到那个奇怪的域名。 &#160; 这个访问匿名网站的流程比较复杂，在普通互联网上，当我们知道网站域名时，通过 DNS 协议解析到 IP 地址，然后访问。但 Tor 网络域名是 .onion 为后缀，并不是使用普通的 DNS 方式来解析，而是使用下面的方法。 &#160; &#160; 下面我们结合 torproject.org 网站介绍的洋葱服务协议、业界约定俗成的各个环节的名称、及上面的原理图进行 Tor 访问匿名网站的原理复盘。在原Tor网络上增加了承载暗网网址导航功能的目录数据库(DB)，暗网服务器选定的允许与其通信的介绍点(Introduction point)，及进行两端数据传输的最终会合点(Rendezvous point)。原理图中的每一步连接，都是建立在 Tor 网络的三跳连接之上，杜绝流量监控嗅探到明文数据。下面我们了解一下访问匿名网站的过程。 &#160; l step 1: 暗网服务器连入 Tor 网络，并隐匿IP信息 这一步是通过介绍点来完成，方法是暗网服务器选取若干节点充当介绍点，建立Tor线路；并以介绍点充当影子功能，隐匿IP信息。 &#160; l]]></description>
								<content:encoded><![CDATA[<div id="article_content" class="article_content clearfix">
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-3019150162.css">
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-3019150162.css">
<div class="htmledit_views" id="content_views">
<p><a href="https://bbs.ichunqiu.com/thread-48840-1-1.html" rel="nofollow" data-token="c0aaf39078d009f4105350d6312ee6f6">密码朋克的社会实验（一）：开灯看暗网</a></p>
<p><span style="color:#515151;"><span style="color:#000000;">本文作者：karmayu、murphyzhang @云鼎实验室</span></span></p>
<p>&nbsp;</p>
<p><span style="color:#515151;"><span style="color:#000000;">……</span><br /><span style="color:#000000;">2018</span><span style="color:#000000;">年3月8日，某视频网站800余万用户数据在暗网销售</span><br /><span style="color:#000000;">2018</span><span style="color:#000000;">年8月1日，某省1000万学籍数据出现在暗网</span><br /><span style="color:#000000;">2018</span><span style="color:#000000;">年8月28日，某酒店集团5亿数据疑似在暗网出售</span><br /><span style="color:#000000;">……</span></span></p>
<p>&nbsp;</p>
<p><span style="color:#515151;">本年度最严重的几次数据泄漏，都指向了同一个词——「<strong>暗网</strong>」。在中文的语境里，这是一个犹如「月黑风高夜」般的词汇，透着诡秘和犯罪的气息。而与「暗网」关系最密切的另一个词，则非「黑客」莫属。「黑」与「暗」的组合，意味着高超的匿名和隐身技巧，令人忍不住想揭开它精巧的面纱。</span></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><span style="color:#515151;"><strong>暗网是什么</strong></span></p>
<p>&nbsp;</p>
<p><span style="color:#515151;">要解释暗网，先给整个互联网做一个简单的分层定义，如图：</span></p>
<p>&nbsp;</p>
<p><span style="color:#515151;"><img alt="" class="has" id="aimg_78598" src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20181220144923481"></span></p>
<p><span style="color:#515151;">|图片来源网络</span></p>
<p>&nbsp;</p>
<p><span style="color:#515151;"><strong>表网（Surface Web）</strong></span></p>
<p><span style="color:#515151;">通常认为，普通用户或者搜索引擎能直接访问的内容属于表网。表现形式为网页或者 APP 提供的内容。</span></p>
<p>&nbsp;</p>
<p><span style="color:#515151;"><strong>深网（Deep Web）</strong></span></p>
<p><span style="color:#515151;">指不能被标准搜索引擎检索到的网络数据。通常是存储在各公司或组织的数据库中，需要用专有的接口查询或干脆不对外查询，例如 Google 的后端数据库。深网数据量远大于表层网络，犹如海面和大海的关系。</span></p>
<p>&nbsp;</p>
<p><span style="color:#515151;"><strong>暗网（Dark Web）</strong></span></p>
<p><span style="color:#515151;">需要通过特殊的加密通道访问的网页或数据。暗网通常具有匿名的特性，既保证访问者的匿名，同时也保证服务提供者的匿名。因此，其中充斥着各种犯罪信息和违法交易（枪支、毒品、色情、暴恐、黑客等）。</span></p>
<p><span style="color:#515151;">暗网有多个不同的实现版本，下文我们说暗网特指「Tor 网络」。</span></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><span style="color:#515151;">网络上有些说法说暗网远大于表层网络，其实很不严谨，是把深网和暗网混为一谈了，真实的暗网只有一小部分人使用，远小于大众使用的表层网络。</span></p>
<p>&nbsp;</p>
<p><span style="color:#515151;"><strong><span style="color:#000000;">谁创造了暗网</span></strong></span></p>
<p>&nbsp;</p>
<p><span style="color:#515151;"><strong>➢</strong><strong>&nbsp;密码朋克</strong></span></p>
<p>&nbsp;</p>
<p><span style="color:#515151;">故事要从90年代的一个极小众群体说起——「密码朋克」。这是一个由顶尖数学家、密码学家和程序员组成的群体，他们关注「匿名、自由、隐私」，其中许多人抱着自由主义和无政府主义的理念，并在美国掀起了「加密无政府主义运动」，他们以密码学和互联网为武器，与强权展开直接对抗。</span></p>
<p><span style="color:#515151;">正是这群人，创造了许多加密技术和协议，也奠定了互联网的许多底层技术和通信协议，从加密邮件到 HTTPS，从 RSA 到区块链，等等等等。</span></p>
<p>&nbsp;</p>
<p><span style="color:#515151;"><img alt="" class="has" id="aimg_78599" src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20181220144923508"></span></p>
<p><span style="color:#515151;">|图片来源网络</span></p>
<p>&nbsp;</p>
<p><span style="color:#515151;"><strong>➢</strong><strong>&nbsp;国外政府部门</strong></span></p>
<p>&nbsp;</p>
<p><span style="color:#515151;">花开两朵，密码朋克们希望保护自己的信息和隐私不被政府获取；而政府同样也有这个需求，甚至更强烈得多，因为他们要保证情报的传输安全，同时要保护情报人员传递信息时无法被网络追踪。因此，1995年，美国海军研究实验室也进行了匿名网络的相关项目研究，这也就是暗网的前身。</span></p>
<p>&nbsp;</p>
<p><span style="color:#515151;">2004年，「Tor 洋葱网络」正式对外发布，意味着普通用户也可以使用匿名网络技术来保证自己的匿名性。也就代表着「暗网」这个概念正式走向公众。为什么叫洋葱网络，因为其中的通信内容被三重加密，像洋葱一样，剥开一层还有一层。</span></p>
<p>&nbsp;</p>
<p><span style="color:#515151;"><img alt="" class="has" id="aimg_78600" src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20181220144923528"></span></p>
<p>&nbsp;</p>
<p><span style="color:#515151;">Tor 网络虽然理论上比较安全，但其中的中转节点是由志愿者部署，如果掌握了其中足够的节点，也是有概率进行完整通信追踪的。而且这毕竟是孵化自美国海军的一个项目，是否有一些精心构造的安全缺陷，难以确认。</span></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><span style="color:#515151;"><strong><span style="color:#000000;">暗网上的数据泄露</span></strong></span></p>
<p>&nbsp;</p>
<p><span style="color:#515151;">一个能保证访问者和服务提供者都匿名的网络，天生就是法外之地。</span></p>
<p>&nbsp;</p>
<p><span style="color:#515151;">因此，各路违法信息交流充斥暗网，尤其是2011年后，由于比特币技术的兴起，暗网终于从「匿名的信息交流」进化到了「匿名的价值交换」阶段，这个颠覆性变革，随着「Silk Road」的建立（丝绸之路：可以理解为基于比特币的暗网淘宝），掀起了违法交易的高潮。当然，大概同时也掀起了 FBI 相关部门的加班高潮。</span></p>
<p>&nbsp;</p>
<p><span style="color:#515151;">很巧的是，同样是2011年底，国内发生了一轮标志性的大规模的用户数据泄漏事件，之后各种数据泄漏就成为了每年的常态。早期此类数据交易往往是黑客私下交易，而近年来逐渐被搬到暗网进行交易。为此，腾讯安全云鼎实验室对暗网的主要交易平台进行了监测，并抽取了近几个月针对国内用户的数据泄漏的情况进行了统计。</span></p>
<p>&nbsp;</p>
<p><span style="color:#515151;"><img alt="" class="has" id="aimg_78601" src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20181220144923547"></span></p>
<p>&nbsp;</p>
<p><span style="color:#515151;">可以看到，近期泄漏数据，主要以网购/物流/身份证/酒店/社交帐号数据为主。</span></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><span style="color:#515151;"><strong><span style="color:#000000;">暗网上的业务</span></strong></span></p>
<p>&nbsp;</p>
<p><span style="color:#515151;">暗网最大的几个市场均在近年被 FBI 捣毁，如 Silk Road、AlphaBay，因此，2017年来暗网黑市有所收敛，并不如前几年火爆。我们统计了目前存在的几大市场商品分类，可以看出，毒品/药物类还是占据了超过50%的份额，海外使用违禁药物的情形非常严峻，其次是数字商品类，并充斥着各种色情、黑客、枪支、护照、假钞等违法内容。</span></p>
<p>&nbsp;</p>
<p><span style="color:#515151;"><img alt="" class="has" id="aimg_78604" src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20181220144923567"></span></p>
<p>&nbsp;</p>
<p><span style="color:#515151;"><strong><span style="color:#000000;">暗网匿名原理</span></strong></span></p>
<p>&nbsp;</p>
<p><span style="color:#515151;">暗网最重要的作用是保证匿名，其匿名性体现在两个方面：</span></p>
<p>&nbsp;</p>
<ul style="margin-left:14px;">
<li><span style="color:#515151;">访问普通网站时，网站无法得知访问者 IP 地址。</span></li>
<li><span style="color:#515151;">提供暗网服务时，用户无法得知服务器 IP 地址。</span></li>
</ul>
<p>&nbsp;</p>
<p><span style="color:#515151;">两个能力加起来则保障了暗网用户访问暗网网站时，双方都无法得知对方 IP 地址，且中间节点也无法同时得知双方 IP 地址。听起来挺科幻的，毕竟我们平时使用的 VPN 等科学上网技术只使用了一层跳板，而 Tor 技术使用了三层跳板。</span></p>
<p>&nbsp;</p>
<p><span style="color:#515151;">关于 VPN 的原理，可以参考下图：</span></p>
<p>&nbsp;</p>
<p><span style="color:#515151;"><img alt="" class="has" id="aimg_78605" src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20181220144923588"></span></p>
<p><span style="color:#515151;">VPN 原理图解 | 图片来源网络</span></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><span style="color:#515151;">下面对暗网匿名原理进行详细解析：</span></p>
<p>&nbsp;</p>
<p><span style="color:#515151;"><strong>➢</strong><strong>&nbsp;访问普通网站</strong></span></p>
<p>&nbsp;</p>
<p><span style="color:#515151;">先来看一个真实访问普通网站的跳转情况：</span></p>
<p><img alt="" class="has" src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20181220144923605"></p>
<p>&nbsp;</p>
<p><span style="color:#515151;">从上图可以看到，我们使用浏览器访问 google.com，但中间经过了3个节点 IP 地址，分别在匈牙利、西班牙、德国，然后再访问到谷歌的服务器。</span></p>
<p>&nbsp;</p>
<p><span style="color:#515151;">Tor 用户针对普通网站访问流程，如下图所示。Tor网络中的每个节点都是随机选取，且每个节点看到的信息不超过一跳，所以通过网络流量监控嗅探到的 Tor 流量不能同时获取通信两端的 IP 信息；且每一个节点处都是加密形式。这里随机选取的三个节点的功能顺序是：入口节点、中间节点、出口节点；数据流方向为：客户端、入口节点、中间节点、出口节点、WEB 服务器。</span></p>
<p>&nbsp;</p>
<p><span style="color:#515151;"><img alt="" class="has" id="aimg_78607" src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20181220144923626"></span></p>
<p>&nbsp;</p>
<p><span style="color:#515151;">Tor 网络有其特有的加密方式&#8211;三层密钥加密。三层密钥的建立是在网络请求的初始，当和下一个节点连接时创建一对非对称密钥，三个随机节点共创建了三对密钥并将公钥回传到客户端。数据经客户端三层密钥加密后，进行Tor 网络的传输，每经过一个节点，便解开一层加密，顺序依次为：入口节点解开第一层加密，中间节点解开第二层加密，出口节点解开第三层加密。通过层层加密让流量监控无法嗅探明文数据。</span></p>
<p>&nbsp;</p>
<p><span style="color:#515151;"><strong>➢</strong><strong>&nbsp;访问匿名网站</strong></span></p>
<p>&nbsp;</p>
<p><span style="color:#515151;">先来看一次真实访问匿名网站的跳转情况：</span></p>
<p>&nbsp;</p>
<p><span style="color:#515151;"><img alt="" class="has" id="aimg_78608" src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20181220144923643"></span></p>
<p>&nbsp;</p>
<p><span style="color:#515151;">从上图可以看到，我们通过浏览器尝试访问一个奇怪的域名（uffti3lhacanefgy.onion），但和前面普通网站不一样的是，中间经过了6个节点，其中前3个可见 IP，另外3个命名为 Relay，然后再访问到那个奇怪的域名。</span></p>
<p>&nbsp;</p>
<p><span style="color:#515151;">这个访问匿名网站的流程比较复杂，在普通互联网上，当我们知道网站域名时，通过 DNS 协议解析到 IP 地址，然后访问。但 Tor 网络域名是 .onion 为后缀，并不是使用普通的 DNS 方式来解析，而是使用下面的方法。</span></p>
<p>&nbsp;</p>
<p><span style="color:#515151;"><img alt="" class="has" id="aimg_78609" src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20181220144923667"></span></p>
<p>&nbsp;</p>
<p><span style="color:#515151;">下面我们结合 torproject.org 网站介绍的洋葱服务协议、业界约定俗成的各个环节的名称、及上面的原理图进行 Tor 访问匿名网站的原理复盘。在原Tor网络上增加了承载暗网网址导航功能的目录数据库(DB)，暗网服务器选定的允许与其通信的介绍点(Introduction point)，及进行两端数据传输的最终会合点(Rendezvous point)。原理图中的每一步连接，都是建立在 Tor 网络的三跳连接之上，杜绝流量监控嗅探到明文数据。下面我们了解一下访问匿名网站的过程。</span></p>
<p>&nbsp;</p>
<p><span style="color:#515151;"><strong>l step 1: 暗网服务器连入 Tor 网络，并隐匿IP信息</strong></span></p>
<p><span style="color:#515151;">这一步是通过介绍点来完成，方法是暗网服务器选取若干节点充当介绍点，建立Tor线路；并以介绍点充当影子功能，隐匿IP信息。</span></p>
<p>&nbsp;</p>
<p><span style="color:#515151;"><strong>l step 2: 暗网服务器通过向目录数据库注册，公示自身的存在</strong></span></p>
<p><span style="color:#515151;">这一步是通过目录数据库来完成，目录数据库收录了各个暗网服务器上传的自身标识（公钥、对应介绍点摘要等），这些标识以自身的私钥签名。暗网服务器的域名(例：uffti3lhacanefgy.onion)由公钥派生。</span></p>
<p>&nbsp;</p>
<p><span style="color:#515151;"><strong>l Step 3: 客户端获取暗网网址对应的标识信息，拿到网址对应的公钥与介绍点</strong></span></p>
<p><span style="color:#515151;">这一步是客户端通过Tor线路访问目录数据库拿到的结果，此外还进行标识的篡改验证。</span></p>
<p>&nbsp;</p>
<p><span style="color:#515151;"><strong>l Step 4: 客户端随机选取节点构建会合点，为后续与暗网服务器传输数据做准备</strong></span></p>
<p><span style="color:#515151;">这一步是会合点的生成，除为选取的会合点创建Tor线路外，同时会合点还会收到一次性「验证信息」，用来校验暗网服务器。</span></p>
<p>&nbsp;</p>
<p><span style="color:#515151;"><strong>l Step 5\6: 客户端通过介绍点，通告暗网服务器会合点的地址和「验证信息」</strong></span></p>
<p><span style="color:#515151;">这一步的核心是让暗网服务器知道会合点的存在，媒介是客户端在目录数据库中获取到的对应暗网网址的介绍点，同时传递了后续用来对接验证的「验证信息」。</span></p>
<p>&nbsp;</p>
<p><span style="color:#515151;"><strong>l Step 7: 暗网服务器通过Tor线路连接会合点，最终与客户端达成数据传输</strong></span></p>
<p><span style="color:#515151;">这一步暗网服务器也通过Tor线路与会合点建立连接，但两端还未达成真正的通信，必须进行「验证信息」的核实，当真正验证成功后，才能达成真正的通路。</span></p>
<p>&nbsp;</p>
<p><span style="color:#515151;">经过以上复杂流程，客户端和暗网服务器建立通信成功，形成一个上面截图的六跳连接，并成功保证了双方的匿名性。</span></p>
<p>&nbsp;</p>
<p><span style="color:#515151;"><strong><span style="color:#000000;">Tor&nbsp;</span></strong><strong><span style="color:#000000;">网络节点</span></strong></span></p>
<p>&nbsp;</p>
<p><span style="color:#515151;">从前面可以看到，暗网的匿名性基于其众多的节点，但如果部署足够多的节点，是否就能探测到双方的 IP 地址和通信数据呢？先来看看暗网节点的情况。</span></p>
<p>&nbsp;</p>
<p><span style="color:#515151;"><strong>➢</strong><strong>&nbsp;节点介绍</strong></span></p>
<p>&nbsp;</p>
<p><span style="color:#515151;">暗网节点一共分为以下3类：</span></p>
<p>&nbsp;</p>
<p><span style="color:#515151;"><strong><span style="color:#000000;">1)入口节点/中间节点</span></strong></span></p>
<p><span style="color:#515151;">入口节点和中间节点没有本质的差别，通常各 IDC 运营商都允许服务器被部署为入口节点和中间节点，新节点上线只能是中间节点，当稳定性和带宽都比较高时，才允许被升级为入口节点。</span></p>
<p>&nbsp;</p>
<p><span style="color:#515151;"><strong><span style="color:#000000;">2)出口节点</span></strong></span></p>
<p><span style="color:#515151;">出口节点从技术上看和入口节点一样，但通常IDC 运营商是不允许服务器部署出口节点的，因为如果引发了犯罪行为，由于无法进行往回追踪，会导致运营商背锅。因此，出口节点通常是学术机构、ISP、科研单位、公共图书馆等才会部署。</span></p>
<p>&nbsp;</p>
<p><span style="color:#515151;"><strong><span style="color:#000000;">3)网桥</span></strong></span></p>
<p><span style="color:#515151;">由于入口节点是公开的，因此很容易被封锁。为了保证这些地区的人也能访问 Tor 网络，还存在一个秘密的入口列表，称之为网桥节点。这个秘密列表每次只可以查询到3个入口节点，通过一些机制保证不能简单被遍历，以此来对抗封锁。</span></p>
<p>&nbsp;</p>
<p><span style="color:#515151;"><strong>➢</strong><strong>&nbsp;节点数据</strong></span></p>
<p><span style="color:#515151;">截止当前，目前运行的 Tor 节点数量大概有7500，普通节点大约6500，网桥节点接近1000。</span></p>
<p>&nbsp;</p>
<p><span style="color:#515151;"><img alt="" class="has" id="aimg_78610" src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20181220144923688"></span></p>
<p>&nbsp;</p>
<p><span style="color:#515151;">普通节点中，入口节点（Guard）大约2400，出口节点（Exit）大约800多。</span></p>
<p>&nbsp;</p>
<p><span style="color:#515151;"><img alt="" class="has" id="aimg_78611" src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20181220144923789"></span></p>
<p>&nbsp;</p>
<p><span style="color:#515151;">从这个数据来看，假设我们在「入中出」三类节点中各有一台机器，能检测到完整数据的概率大约是 1/(3400 * 800 * 3300) = 1/8976000000。大约是九十亿分之一。</span></p>
<p>&nbsp;</p>
<p><span style="color:#515151;">其中大多数节点主要分布在欧美国家。</span></p>
<p>&nbsp;</p>
<p><span style="color:#515151;"><img alt="" class="has" id="aimg_78612" src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20181220144923807"></span></p>
<p>&nbsp;</p>
<p><span style="color:#515151;"><strong>➢</strong><strong>&nbsp;节点详情</strong></span></p>
<p>&nbsp;</p>
<p><span style="color:#515151;">完整的公开节点列表可以在以下网址查询到&nbsp;<a href="https://torstatus.rueckgr.at/" rel="nofollow" data-token="d808846476564cdc3e22568d71498f42">https://torstatus.rueckgr.at/</a>，云厂商可以根据这个列表进行自查。</span></p>
<p>&nbsp;</p>
<p><span style="color:#515151;"><img alt="" class="has" id="aimg_78613" src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20181220144923831"></span></p>
<p><span style="color:#515151;">（部分节点详细数据）</span></p>
<p>&nbsp;</p>
<p><span style="color:#515151;"><strong><span style="color:#000000;">Tor&nbsp;</span></strong><strong><span style="color:#000000;">用户</span></strong></span></p>
<p>&nbsp;</p>
<p><span style="color:#515151;">全球每天使用 Tor 网络的用户基本稳定在200万人，相对于数十亿的互联网用户，其实非常小量，而其中访问暗网匿名网站的用户更是其中的一小部分。</span></p>
<p>&nbsp;</p>
<p><span style="color:#515151;"><img alt="" class="has" id="aimg_78614" src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20181220144923856"></span></p>
<p>&nbsp;</p>
<p><span style="color:#515151;">暗网用户分布国家 TOP10。</span></p>
<p>&nbsp;</p>
<p><span style="color:#515151;"><img alt="" class="has" id="aimg_78615" src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20181220144923874"></span></p>
<p>&nbsp;</p>
<p><span style="color:#515151;"><strong><span style="color:#000000;">其它平行网络</span></strong></span><br /> &nbsp;</p>
<p><span style="color:#515151;">前面说过，Tor 网络只是暗网的一个实现版本，其他的还有 Freenet 和 I2P 网络，但用户量远远低于 Tor，因此仅作了解就好。</span></p>
<p>&nbsp;</p>
<p><span style="color:#515151;">近年来由于区块链技术的发展，又出现了一种基于区块链技术的分布式匿名网络，其典型例子是 ZeroNet（零网）。</span></p>
<p>&nbsp;</p>
<p><span style="color:#515151;"><img alt="" class="has" id="aimg_78616" src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20181220144923891"></span></p>
<p>&nbsp;</p>
<p><span style="color:#515151;">具体用法可以参见官网，<a href="https://zeronet.io/" rel="nofollow" data-token="8b06821346169b751709846f792ec6a8">https://zeronet.io</a>，用来搭建自己的网站，不但匿名，甚至无需服务器。</span></p>
<p>&nbsp;</p>
<p><span style="color:#515151;"><strong>写在最后：</strong></span></p>
<p>&nbsp;</p>
<p><span style="color:#515151;">技术本身是中立的，尤其是在密码学的领域，一方面保障着整个互联网的安全和信任基础，一方面也包庇了暗网下的种种犯罪。Tor 网络也一样，一方面为大众提供了一种安全的匿名方案，一方面也为非法交易提供了温床。阴阳总是交融地存在，所幸黑色领域终究是少数，如何将黑色领域尽量压缩，道阻且长。</span></p>
<p>&nbsp;</p>
<p><span style="color:#515151;">揭开了暗网的面纱，本系列下一篇，将用最科普的方式，继续讲述暗网背后的密码学原理。</span></p>
<p>&nbsp;</p>
<p><span style="color:#515151;"><strong>参考资料：</strong></span></p>
<p><span style="color:#515151;">[1]Tor: Overview</span></p>
<p><span style="color:#515151;">https://www.torproject.org/about/overview.html.en</span></p>
<p><span style="color:#515151;">[2]Tor: Onion Service Protocol</span></p>
<p><span style="color:#515151;">https://www.torproject.org/docs/onion-services</span></p>
<p><span style="color:#515151;">[3]Tor: Relays and bridges</span></p>
<p><span style="color:#515151;">https://metrics.torproject.org/networksize.html</span></p>
<p><span style="color:#515151;">[4]Tor: Relays by relay flag</span></p>
<p><span style="color:#515151;">https://metrics.torproject.org/relayflags.html</span></p>
<p>&nbsp;</p>
<p><span style="color:#515151;">（部分图片来源网络）</span></p>
<p>&nbsp;</p>
<p><span style="color:#515151;"><strong><span style="color:#000000;">腾讯安全云鼎实验室&nbsp;</span></strong><span style="color:#000000;">关注云主机与云内流量的安全研究和安全运营。利用机器学习与大数据技术实时监控并分析各类风险信息，帮助客户抵御高级可持续攻击；联合腾讯所有安全实验室进行安全漏洞的研究，确保云计算平台整体的安全性。相关能力通过腾讯云开放出来，为用户提供黑客入侵检测和漏洞风险预警等服务，帮助企业解决<a class="relatedlink" href="http://www.ichunqiu.com/courses/277" rel="nofollow" data-token="cff1dce3df188bda1fcab9e7fb4985b8">服务器安全</a>问题。</span></span></p>
</p></div>
</div>
]]></content:encoded>
										</item>
		<item>
		<title>《白帽子讲Web安全》读后感 —— 对道哥的致敬</title>
		<link>https://uzzz.org/article/1688.html</link>
				<pubDate>Mon, 22 May 2017 12:37:51 +0000</pubDate>
		<dc:creator><![CDATA[fandyvon]]></dc:creator>
				<category><![CDATA[web安全]]></category>

		<guid isPermaLink="false">https://uzzz.org/article/1688.html</guid>
				<description><![CDATA[《白帽子讲Web安全》读后感 ——Deep Blue (一个安全小兵的感受) &#160; &#160; 这是一篇作业；这是一篇读后感；这是一篇记录安全的感悟；这是一篇对道哥的敬仰；这是我安全启蒙的钥匙&#8230;&#8230; 和《白帽子讲Web安全》的缘分来自一个小意外，在来大学之前的我选择了信息安全这个专业。通过各种渠道吧，我在方方面面了解到这个行业的那些事儿，一点一滴的积累这我的安全观。指导我遇见这本书，第一次觉得安全原来是那么清晰的展示在我眼前。“互联网本来是安全的，自从有了研究安全的人之后，互联网就变得不安全了”当我看到这一句的时候，毫不犹豫的把它作为我的签名，原来我们才是让互联网变得不安全的人啊！ 初来大学，第一次进入图书馆。当我发现AUST图书馆也藏有这本书的时候，我是多么激动，转便了所有的书架找到这本书。可以说是笑着抱回宿舍，开始了我的第一次阅读。 第一次看道哥的作品难度还是很大的，整本书四篇十八章，包括世界观安全、客户端脚本安全、服务端应用安全以及互联网公司安全运营四大部分。当时还是大一小萌新的我只看了世界观安全，第一次彻底了解到ROOT是个啥，以前只知道手机ROOT能删除一些系统应用。当我知道“root”对黑客的吸引，就像大米对老鼠，美女对色狼的吸引的时候，立下一个小flag拿下一个网站的root。不想拿到“root”的黑客，不是好黑客。说到黑客我也又不得不多说点，在黑客的世界里，有的黑客，精通计算机技术，能够自己挖掘漏洞，并编写“exploit”（黑客们使用的漏洞利用代码叫做exploit）；而有的黑客，只是对攻击本身感兴趣，对计算机原理和各种编程技术的了解比较粗浅，因此只懂得编译别人的代码，自己并没有动手能力，这种黑客被称为“Script Kids”（脚本小子）。在现实世界中，真正造成破坏的，往往并非那些挖掘并研究漏洞的“黑客们”，而是这些脚本小子。在安全的道路上总是有人疑惑自己已经到了那一步，曾看到这样一个分级：会使用工具找漏洞就属于初级，能写自己的黑客工具应该就是中级阶段，能自动化“挖漏洞”就属于高级的大牛了。谈黑客，这本书中的黑客简史真的深深的吸引了我。 &#160; 中国黑客发展分为三个阶段：启蒙时代、黄金时代、黑暗时代 启蒙时代 20世纪90年代，也正是中国互联网刚刚起步阶段，热爱新兴技术的青年收到国外黑客技术影响，开始研究安全漏洞。启蒙时代的黑客大多由于个人爱好走上这条路，好奇心和求知欲是他们前进的动力，没有任何利益瓜葛。这个时期的中国黑客们通过互联网，看到了世界，因此与西方发达国家同期诞生的黑客精神是一脉相传的，他们崇尚分享、自由、免费的互联网精神，并热衷于分钟自己的最新研究成果。 黄金时代 以2001年中美黑客大战为标志（感兴趣的同学可以百度一下“中美黑客大战”，相信大家都记得2001年中国飞行员王伟为了捍卫国家主权，被美国侦察机撞毁事件，起因正是这件事，这次事件中，中国黑客空前团结，与美国黑客开展了一场激烈的黑客大战，非常轰动，也这是世界第一次黑客大战），这次事件大大推动了中国黑客的发展，崛起了一批黑客、红客联盟，也让黑客这个特殊群体一下吸引了社会的眼球，黑客圈子所宣扬的黑客文化和黑客技术的独特魅力也吸引了无数的青少年走上黑客这条道路。这次事件之后，各种黑客组织如雨后春笋般冒出，他们普遍的特点是：年轻、有活力、充满激情，但技术上也许还不够成熟。此时，黑客圈子里贩卖漏洞、恶意软件的现象开始升温，因为黑客群体良莠不齐，开始出现以赢利为目的的攻击行为，黑色产业链逐渐成型。 黑暗时代 这个时代大概从几年前开始一直持续到现在（PS. 是哪一年呢？个人觉得大概是07年底左右开始吧），也许还将继续下去。这个时期的黑客组织也遵循社会发展规律，优胜劣汰，大多数黑客组织没有坚持下去，20世纪非常流行的黑客技术论坛也越来越没有人气，最终走向没落。所有门户型的漏洞披露站点，再也不公布任何漏洞相关技术细节。随着安全产业发展，黑客的功利性越来越强，黑色产业链开始成熟。在20世纪技术还不太成熟的黑客们，凡是坚持下来的，都已经成为安全领域的高级人才，要么，在安全公司贡献自己的专业技能，要么带着非常强的技术进入黑色产业。此时期的黑客群体因为互相之间缺失信任，已经不再具有开放和分享的精神，最纯粹的黑客精神实质上已经死亡。整个互联网笼罩在黑色产业链的阴影之下，每年数十亿经济损失和数千万网民受害，黑客精神的死亡，让我们没有理由不把这个时代称为黑暗时代。也许，黑客精神所代表的Open、Free、Share，真的一去不复返了！ &#160; 真羡慕那个令人热血的时代，但如今依旧是互联网充满机遇的时代！ &#160; 不过你知道吗？ “黑客”是有好坏之分的！白帽子、黑帽子，他们是谁：在黑客的世界中，往往用帽子的颜色来比喻黑客的好坏。白帽子，是指那些精通安全技术，工作在反黑客领域的专家们；而黑帽子，是指利用黑客技术造成破坏，甚至进行网络犯罪的群体。 白帽子和黑帽子工作的心态完全不同：正是因为白帽子和黑帽子的目标不同，所以他们在工作时的心态是完全不同的。对于黑帽子来说，只要能够找到系统的一个弱点，就可以达到入侵系统的目的；而对于白帽子来说，必须找到系统的所有弱点，不能有遗漏，才能保证系统不会出现问题。白帽子要求全面宏观、黑帽子思考问题是有选择性的、微观的：白帽子一般为企业或安全公司服务，工作的出发点就是要解决所有的安全问题，因此所看所想必然要求更加的全面、宏观；黑帽子的主要目的是要入侵系统，找到对他们有价值的数据，因此黑帽子只需要以点突破，找到对他们最有用的一点，以此渗透，因此思考问题的出发点必然是有选择性的、微观的。 从对待问题的角度来看，黑帽子是不断组合问题，白帽子是不断分解问题：黑帽子为了完成一次入侵，需要利用各种不同漏洞的组合来达到目的，是在不断地组合问题；而白帽子在设计解决方案时，如果只看到各种问题组合后产生的效果，就会把事情变复杂，难以细致入微地解决根本问题，所以白帽子必然是在不断地分解问题，再对分解后的问题逐个予以解决。这种定位的不对称，也导致了白帽子的安全工作比较难做。“破坏永远比建设容易”，白帽子选择的方法，是克服某种攻击方法，而并非抵御单次的攻击。 安全问题往往发生在一些意想不到的地方：上述一切都是理想状态，在现实世界中，存在着各种各样不可回避的问题。工程师们很喜欢一句话：“No Patch For Stupid！”，在安全领域也普遍认为：“最大的漏洞就是人！”。写得再好的程序，在有人参与的情况下，就可能会出现各种各样不可预知的情况，比如管理员的密码有可能泄露，程序员有可能关掉了安全的配置参数，等等。安全问题往往发生在一些意想不到的地方。防御技术在不断完善的同时，攻击技术也在不断地发展。这就像一场军备竞赛，看谁跑在前面。 &#160; 世界安全观不仅仅讲的是黑客是理念，更多的是思想。道哥也点出安全问题的本质是信任的安全问题。一切的安全方案设计的基础，都是建立在信任关系上的。我们必须相信一些东西，必须有一些最基本的假设，安全方案才能得以建立；如果我们否定一切，安全方案就会如无源之水，无根之木，无法设计，也无法完成。 把握住信任条件的度，是安全的艺术魅力：在现实生活中，我们很少设想最极端的前提条件，因为极端的条件往往意味者小概率以及高成本，因此在成本有限的情况下，我们往往会根据成本来设计安全方案，并将一些可能性较大的条件作为决策的主要依据。 从另一个角度来说，一旦我们作为决策依据的条件被打破、被绕过，那么就会导致安全假设的前提条件不再可靠，变成一个伪命题。因此，把握住信任条件的度，使其恰到好处，正是设计安全方案的难点所在，也是安全这门学问的艺术魅力所在。 安全的世界里，没有一劳永逸的银弹：在解决安全问题的过程中，不可能一劳永逸，也就是说“没有银弹”。任何人想要一劳永逸地解决安全问题，都属于一相情愿，是“自己骗自己”，是不现实的。 安全是一个持续的过程。&#160;自从互联网有了安全问题以来，攻击和防御技术就在不断碰撞和对抗的过程中得到发展。从微观上来说，在某一时期可能某一方占了上风；但是从宏观上来看，某一时期的攻击或防御技术，都不可能永远有效，永远用下去。这是因为防御技术在发展的同时，攻击技术也在不断发展，两者是互相促进的辩证关系。以不变的防御手段对抗不断发展的攻击技术，就犯了刻舟求剑的错误。在安全的领域中，没有银弹。 &#160; 我的世界安全观就这么建立了吧，安全问题的本质是信任的问题。并且安全是一个持续的过程，并不存在所谓的银弹。也知道一个安全评估的过程可以分为4个阶段：资产等级划分、威胁分析、风险分析、确认解决方案。虽然懵懵懂懂但总算是读下来了，还有那几个不太懂的白帽子兵法 1.Secure By Default 原则（白名单黑名单、最小权限原则）2.纵深防御原则 3.数据和代码分离原则 4.不可预测性原则 &#160; 可喜可贺的是我也拥有了一本自己的《白帽子讲Web安全》这本书了，再也不用担心图书馆的这本书会被借走了。也在慢慢接触Web安全的一些漏洞。 &#160; Web 攻击技术发展的几个阶段：①Web 1.0时代，人们更多的是关注服务器端动态脚本的安全问题，比如将一个可执行脚本（俗称webshell）上传到服务器上，从而获得权限。动态脚本语言的普及，以及 Web 技术发展初期对安全问题认知的不足导致很多“血案”的发生，同时也遗留下很多历史问题，比如PHP 语言至今仍然只能靠较好的代码规范来保证没有文件包含漏洞，而无法从语言本身杜绝此类安全问题的发生。②SQL注入的出现是Web 安全史上的一个里程碑。SQL注入最早出现在 1999年，并很快就成为Web 安全的头号大敌。通过SQL 注入攻击，可以获取很多重要的、敏感的数据，甚至能够通过数据库获取系统访问权限，这种效果并不比直接攻击系统软件差，Web 攻击一下子就流行起来。（SQL 注入漏洞至今仍然是Web 安全领域中的一个重要组成部分。）③XSS （跨站脚本攻击）的出现则是 Web 安全史上的另一个里程碑。实际上，XSS 的出现时间和SQL 注入差不多，但是真正引起人们重视则是在大概 &#160;2003年以后。在著名的是2005年的MySpace的XSS 蠕虫事件后，安全界对 XSS 的重视程度提高了很多。④随着Web 2.0 的兴起，XSS 、CSRF（跨站请求伪造） 等攻击已经变得更为强大。Web 攻击的思路也从服务器端转向了客户端，转向了浏览器和用户。黑客们天马行空的思路，覆盖了Web 的每一个环节，变得更加的多样化。⑤互联网的蓬勃发展，也催生出许多新兴的脚本语言，比如Python 、Ruby、NodeJS等，敏捷开发成为互联网的主旋律。而手机技术、移动互联网的兴起，也给HTML 5 带来了新的机遇和挑战。Web安全技术，也紧跟着互联网发展脚步，不断地演化出新的变化。（以上名词：SQL注入、XSS跨站、CSRF跨站伪请求伪造等，不明白意思没关系，先熟悉个名词吧，知道它们是WEB应用安全的重要敌人就行，后面慢慢讲解他们具体是什么，有什么危害，怎么防范） &#160; 暂且研究了这么多，互联网公司的安全运营还得需要一个更坚实的基础去学习。 &#160; 给自己一个小目标 目标一：让工程师写出的每一行代码都是安全的。 目标二：让所有已知的、未知的攻击，都能在第一时间发现，并迅速报警和追踪。 目标三：让安全成为公司核心竞争力，深入到每一个产品的特性中，能够更好地引导用户使用互联网的习惯。 目标四：能够观测到互联网安全趋势的变化，对未来一段时间内的风险做出预测。 最后再提起安全问题的本质: 安全问题的本质是信任问题。 把握信任条件的度，使其恰到好处。 安全是一个持续的过程。 安全是为业务服务的。 Find and Fix,&#160; Defend and Defer,&#160; Secure at the Source. &#160;待我第三次阅读我想一定会有新的收获，届时我会继续更新这篇文章。]]></description>
								<content:encoded><![CDATA[<div id="article_content" class="article_content clearfix">
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-3019150162.css">
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-3019150162.css">
<div class="htmledit_views" id="content_views">
<h2 style="text-align:center;">《白帽子讲Web安全》读后感</h2>
<h3 style="text-align:right;">——Deep Blue</h3>
<h3 style="text-align:right;">(一个安全小兵的感受)</h3>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>这是一篇作业；这是一篇读后感；这是一篇记录安全的感悟；这是一篇对道哥的敬仰；这是我安全启蒙的钥匙&#8230;&#8230;</p>
<p>和《白帽子讲Web安全》的缘分来自一个小意外，在来大学之前的我选择了信息安全这个专业。通过各种渠道吧，我在方方面面了解到这个行业的那些事儿，一点一滴的积累这我的安全观。指导我遇见这本书，第一次觉得安全原来是那么清晰的展示在我眼前。“互联网本来是安全的，自从有了研究安全的人之后，互联网就变得不安全了”当我看到这一句的时候，毫不犹豫的把它作为我的签名，原来我们才是让互联网变得不安全的人啊！</p>
<p>初来大学，第一次进入图书馆。当我发现AUST图书馆也藏有这本书的时候，我是多么激动，转便了所有的书架找到这本书。可以说是笑着抱回宿舍，开始了我的第一次阅读。</p>
<p>第一次看道哥的作品难度还是很大的，整本书四篇十八章，包括世界观安全、客户端脚本安全、服务端应用安全以及互联网公司安全运营四大部分。当时还是大一小萌新的我只看了世界观安全，第一次彻底了解到ROOT是个啥，以前只知道手机ROOT能删除一些系统应用。当我知道“root”对黑客的吸引，就像大米对老鼠，美女对色狼的吸引的时候，立下一个小flag拿下一个网站的root。不想拿到“root”的黑客，不是好黑客。说到黑客我也又不得不多说点，在黑客的世界里，有的黑客，精通计算机技术，能够自己挖掘漏洞，并编写“exploit”（黑客们使用的漏洞利用代码叫做exploit）；而有的黑客，只是对攻击本身感兴趣，对计算机原理和各种编程技术的了解比较粗浅，因此只懂得编译别人的代码，自己并没有动手能力，这种黑客被称为“Script Kids”（脚本小子）。在现实世界中，真正造成破坏的，往往并非那些挖掘并研究漏洞的“黑客们”，而是这些脚本小子。在安全的道路上总是有人疑惑自己已经到了那一步，曾看到这样一个分级：会使用工具找漏洞就属于初级，能写自己的黑客工具应该就是中级阶段，能自动化“挖漏洞”就属于高级的大牛了。谈黑客，这本书中的黑客简史真的深深的吸引了我。</p>
<p>&nbsp;</p>
<p><strong>中国黑客发展分为三个阶段：启蒙时代、黄金时代、黑暗时代</strong></p>
<p>启蒙时代</p>
<p>20世纪90年代，也正是中国互联网刚刚起步阶段，热爱新兴技术的青年收到国外黑客技术影响，开始研究安全漏洞。启蒙时代的黑客大多由于个人爱好走上这条路，好奇心和求知欲是他们前进的动力，没有任何利益瓜葛。这个时期的中国黑客们通过互联网，看到了世界，因此与西方发达国家同期诞生的黑客精神是一脉相传的，他们崇尚分享、自由、免费的互联网精神，并热衷于分钟自己的最新研究成果。</p>
<p>黄金时代</p>
<p>以2001年中美黑客大战为标志（感兴趣的同学可以百度一下“中美黑客大战”，相信大家都记得2001年中国飞行员王伟为了捍卫国家主权，被美国侦察机撞毁事件，起因正是这件事，这次事件中，中国黑客空前团结，与美国黑客开展了一场激烈的黑客大战，非常轰动，也这是世界第一次黑客大战），这次事件大大推动了中国黑客的发展，崛起了一批黑客、红客联盟，也让黑客这个特殊群体一下吸引了社会的眼球，黑客圈子所宣扬的黑客文化和黑客技术的独特魅力也吸引了无数的青少年走上黑客这条道路。这次事件之后，各种黑客组织如雨后春笋般冒出，他们普遍的特点是：年轻、有活力、充满激情，但技术上也许还不够成熟。此时，黑客圈子里贩卖漏洞、恶意软件的现象开始升温，因为黑客群体良莠不齐，开始出现以赢利为目的的攻击行为，黑色产业链逐渐成型。</p>
<p>黑暗时代</p>
<p>这个时代大概从几年前开始一直持续到现在（PS. 是哪一年呢？个人觉得大概是07年底左右开始吧），也许还将继续下去。这个时期的黑客组织也遵循社会发展规律，优胜劣汰，大多数黑客组织没有坚持下去，20世纪非常流行的黑客技术论坛也越来越没有人气，最终走向没落。所有门户型的漏洞披露站点，再也不公布任何漏洞相关技术细节。随着安全产业发展，黑客的功利性越来越强，黑色产业链开始成熟。在20世纪技术还不太成熟的黑客们，凡是坚持下来的，都已经成为安全领域的高级人才，要么，在安全公司贡献自己的专业技能，要么带着非常强的技术进入黑色产业。此时期的黑客群体因为互相之间缺失信任，已经不再具有开放和分享的精神，最纯粹的黑客精神实质上已经死亡。整个互联网笼罩在黑色产业链的阴影之下，每年数十亿经济损失和数千万网民受害，黑客精神的死亡，让我们没有理由不把这个时代称为黑暗时代。也许，黑客精神所代表的Open、Free、Share，真的一去不复返了！</p>
<p>&nbsp;</p>
<p><strong>真羡慕那个令人热血的时代，但如今依旧是互联网充满机遇的时代！</strong></p>
<p>&nbsp;</p>
<p>不过你知道吗？ “黑客”是有好坏之分的！白帽子、黑帽子，他们是谁：在黑客的世界中，往往用帽子的颜色来比喻黑客的好坏。白帽子，是指那些精通安全技术，工作在反黑客领域的专家们；而黑帽子，是指利用黑客技术造成破坏，甚至进行网络犯罪的群体。</p>
<p>白帽子和黑帽子工作的心态完全不同：正是因为白帽子和黑帽子的目标不同，所以他们在工作时的心态是完全不同的。对于黑帽子来说，只要能够找到系统的一个弱点，就可以达到入侵系统的目的；而对于白帽子来说，必须找到系统的所有弱点，不能有遗漏，才能保证系统不会出现问题。白帽子要求全面宏观、黑帽子思考问题是有选择性的、微观的：白帽子一般为企业或安全公司服务，工作的出发点就是要解决所有的安全问题，因此所看所想必然要求更加的全面、宏观；黑帽子的主要目的是要入侵系统，找到对他们有价值的数据，因此黑帽子只需要以点突破，找到对他们最有用的一点，以此渗透，因此思考问题的出发点必然是有选择性的、微观的。</p>
<p>从对待问题的角度来看，黑帽子是不断组合问题，白帽子是不断分解问题：黑帽子为了完成一次入侵，需要利用各种不同漏洞的组合来达到目的，是在不断地组合问题；而白帽子在设计解决方案时，如果只看到各种问题组合后产生的效果，就会把事情变复杂，难以细致入微地解决根本问题，所以白帽子必然是在不断地分解问题，再对分解后的问题逐个予以解决。这种定位的不对称，也导致了白帽子的安全工作比较难做。“破坏永远比建设容易”，白帽子选择的方法，是克服某种攻击方法，而并非抵御单次的攻击。</p>
<p>安全问题往往发生在一些意想不到的地方：上述一切都是理想状态，在现实世界中，存在着各种各样不可回避的问题。工程师们很喜欢一句话：“No Patch For Stupid！”，在安全领域也普遍认为：“最大的漏洞就是人！”。写得再好的程序，在有人参与的情况下，就可能会出现各种各样不可预知的情况，比如管理员的密码有可能泄露，程序员有可能关掉了安全的配置参数，等等。安全问题往往发生在一些意想不到的地方。防御技术在不断完善的同时，攻击技术也在不断地发展。这就像一场军备竞赛，看谁跑在前面。</p>
<p>&nbsp;</p>
<p>世界安全观不仅仅讲的是黑客是理念，更多的是思想。道哥也点出<strong>安全问题的本质是信任的安全问题</strong>。一切的安全方案设计的基础，都是建立在信任关系上的。我们必须相信一些东西，必须有一些最基本的假设，安全方案才能得以建立；如果我们否定一切，安全方案就会如无源之水，无根之木，无法设计，也无法完成。</p>
<p>把握住信任条件的度，是安全的艺术魅力：在现实生活中，我们很少设想最极端的前提条件，因为极端的条件往往意味者小概率以及高成本，因此在成本有限的情况下，我们往往会根据成本来设计安全方案，并将一些可能性较大的条件作为决策的主要依据。</p>
<p>从另一个角度来说，一旦我们作为决策依据的条件被打破、被绕过，那么就会导致安全假设的前提条件不再可靠，变成一个伪命题。因此，把握住信任条件的度，使其恰到好处，正是设计安全方案的难点所在，也是安全这门学问的艺术魅力所在。</p>
<p>安全的世界里，没有一劳永逸的银弹：在解决安全问题的过程中，不可能一劳永逸，也就是说“没有银弹”。任何人想要一劳永逸地解决安全问题，都属于一相情愿，是“自己骗自己”，是不现实的。</p>
<p>安全是一个持续的过程。&nbsp;自从互联网有了安全问题以来，攻击和防御技术就在不断碰撞和对抗的过程中得到发展。从微观上来说，在某一时期可能某一方占了上风；但是从宏观上来看，某一时期的攻击或防御技术，都不可能永远有效，永远用下去。这是因为防御技术在发展的同时，攻击技术也在不断发展，两者是互相促进的辩证关系。以不变的防御手段对抗不断发展的攻击技术，就犯了刻舟求剑的错误。在安全的领域中，没有银弹。</p>
<p>&nbsp;</p>
<p>我的世界安全观就这么建立了吧，<strong>安全问题的本质是信任的问题。并且安全是一个持续的过程，并不存在所谓的银弹</strong>。也知道一个安全评估的过程可以分为4个阶段：资产等级划分、威胁分析、风险分析、确认解决方案。虽然懵懵懂懂但总算是读下来了，还有那几个不太懂的<strong>白帽子兵法 1.Secure By Default 原则（白名单黑名单、最小权限原则）2.纵深防御原则 3.数据和代码分离原则 4.不可预测性原则</strong></p>
<p>&nbsp;</p>
<p>可喜可贺的是我也拥有了一本自己的《白帽子讲Web安全》这本书了，再也不用担心图书馆的这本书会被借走了。也在慢慢接触Web安全的一些漏洞。</p>
<p>&nbsp;</p>
<p>Web 攻击技术发展的几个阶段：①Web 1.0时代，人们更多的是关注服务器端动态脚本的安全问题，比如将一个可执行脚本（俗称webshell）上传到服务器上，从而获得权限。动态脚本语言的普及，以及 Web 技术发展初期对安全问题认知的不足导致很多“血案”的发生，同时也遗留下很多历史问题，比如PHP 语言至今仍然只能靠较好的代码规范来保证没有文件包含漏洞，而无法从语言本身杜绝此类安全问题的发生。②SQL注入的出现是Web 安全史上的一个里程碑。SQL注入最早出现在 1999年，并很快就成为Web 安全的头号大敌。通过SQL 注入攻击，可以获取很多重要的、敏感的数据，甚至能够通过数据库获取系统访问权限，这种效果并不比直接攻击系统软件差，Web 攻击一下子就流行起来。（SQL 注入漏洞至今仍然是Web 安全领域中的一个重要组成部分。）③XSS （跨站脚本攻击）的出现则是 Web 安全史上的另一个里程碑。实际上，XSS 的出现时间和SQL 注入差不多，但是真正引起人们重视则是在大概 &nbsp;2003年以后。在著名的是2005年的MySpace的XSS 蠕虫事件后，安全界对 XSS 的重视程度提高了很多。④随着Web 2.0 的兴起，XSS 、CSRF（跨站请求伪造） 等攻击已经变得更为强大。Web 攻击的思路也从服务器端转向了客户端，转向了浏览器和用户。黑客们天马行空的思路，覆盖了Web 的每一个环节，变得更加的多样化。⑤互联网的蓬勃发展，也催生出许多新兴的脚本语言，比如Python 、Ruby、NodeJS等，敏捷开发成为互联网的主旋律。而手机技术、移动互联网的兴起，也给HTML 5 带来了新的机遇和挑战。Web安全技术，也紧跟着互联网发展脚步，不断地演化出新的变化。（以上名词：SQL注入、XSS跨站、CSRF跨站伪请求伪造等，不明白意思没关系，先熟悉个名词吧，知道它们是WEB应用安全的重要敌人就行，后面慢慢讲解他们具体是什么，有什么危害，怎么防范）</p>
<p>&nbsp;</p>
<p>暂且研究了这么多，互联网公司的安全运营还得需要一个更坚实的基础去学习。</p>
<p>&nbsp;</p>
<p style="text-align:center;">给自己一个小目标</p>
<p style="text-align:center;"><span style="color:#ff0000;">目标一：让工程师写出的每一行代码都是安全的。</span></p>
<p style="text-align:center;"><span style="color:#ff0000;">目标二：让所有已知的、未知的攻击，都能在第一时间发现，并迅速报警和追踪。</span></p>
<p style="text-align:center;"><span style="color:#ff0000;">目标三：让安全成为公司核心竞争力，深入到每一个产品的特性中，能够更好地引导用户使用互联网的习惯。</span></p>
<p style="text-align:center;"><span style="color:#ff0000;">目标四：能够观测到互联网安全趋势的变化，对未来一段时间内的风险做出预测。</span></p>
<p style="text-align:center;">最后再提起安全问题的本质:</p>
<p style="text-align:center;"><span style="color:#3366ff;">安全问题的本质是信任问题。</span></p>
<p style="text-align:center;"><span style="color:#3366ff;">把握信任条件的度，使其恰到好处。</span></p>
<p style="text-align:center;"><span style="color:#3366ff;">安全是一个持续的过程。</span></p>
<p style="text-align:center;"><span style="color:#3366ff;">安全是为业务服务的。</span></p>
<p style="text-align:center;">Find and Fix,&nbsp; Defend and Defer,&nbsp; Secure at the Source.</p>
<p style="text-align:center;"><strong>&nbsp;待我第三次阅读我想一定会有新的收获，届时我会继续更新这篇文章。</strong></p>
</p></div>
</div>
]]></content:encoded>
										</item>
	</channel>
</rss>
